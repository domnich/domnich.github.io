!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return t};var t={},n=Object.prototype,i=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(O){c=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var r=t&&t.prototype instanceof f?t:f,o=Object.create(r.prototype),a=new C(i||[]);return o._invoke=function(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return M()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=l(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}t.wrap=u;var d={};function f(){}function m(){}function h(){}var g={};c(g,o,function(){return this});var p=Object.getPrototypeOf,v=p&&p(p(x([])));v&&v!==n&&i.call(v,o)&&(g=v);var b=h.prototype=f.prototype=Object.create(g);function y(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){function n(r,o,a,s){var c=l(e[r],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&i.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,a,s)},function(e){n("throw",e,a,s)}):t.resolve(d).then(function(e){u.value=e,a(u)},function(e){return n("throw",e,a,s)})}s(c.arg)}var r;this._invoke=function(e,i){function o(){return new t(function(t,r){n(e,i,t,r)})}return r=r?r.then(o,o):o()}}function S(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=l(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:M}}function M(){return{value:void 0,done:!0}}return m.prototype=h,c(b,"constructor",h),c(h,"constructor",m),m.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},y(_.prototype),c(_.prototype,a,function(){return this}),t.AsyncIterator=_,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new _(u(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},y(b),c(b,s,"Generator"),c(b,o,function(){return this}),c(b,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},t}function t(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(self.webpackChunkcloudya=self.webpackChunkcloudya||[]).push([[82756],{60800:function(){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,t){if(t)e:{var r=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in r))break e;r=r[a]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function a(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=a(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}r("Symbol",function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(i+(n||"")+"_"+r++,n)}}),r("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<r.length;a++){var s=i[r[a]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e});var c,u="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var l;e:{var d={};try{d.__proto__={a:!0},l=d.a;break e}catch(Je){}l=!1}c=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=c;function m(e,t){if(e.prototype=u(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.ea=t.prototype}function h(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function g(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function p(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function v(e,t,n){return e.g=n,{value:t}}function b(e){this.g=new h,this.h=e}function y(e,t,n,i){try{var r=t.call(e.g.i,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.l=!1,r;var o=r.value}catch(a){return e.g.i=null,p(e.g,a),_(e)}return e.g.i=null,i.call(e.g,o),_(e)}function _(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,p(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function S(e){this.next=function(t){return g(e.g),e.g.i?t=y(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=_(e)),t},this.throw=function(t){return g(e.g),e.g.i?t=y(e,e.g.i.throw,t,e.g.o):(p(e.g,t),t=_(e)),t},this.return=function(t){return function(e,t){g(e.g);var n=e.g.i;return n?y(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e,t){return t=new S(new b(t)),f&&e.prototype&&f(t,e.prototype),t}h.prototype.o=function(e){this.h=e},h.prototype.return=function(e){this.j={return:e},this.g=this.s};var k="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};r("Object.assign",function(e){return e||k}),r("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var o=i.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.j(i)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;o(function(){if(e.B()){var t=i.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){o(n)}}:t}var r,o,a=new t(function(e,t){r=e,o=t});return this.J(i(e,r),i(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).J(t,n)})},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t(function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).J(o(a.length-1),t),i=n.next()}while(!i.done)})},t}),r("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),r("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}),r("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),r("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){return!i&&n<e.length?{value:n++,done:!1}:(i=!0,{done:!0,value:void 0})}};return r[Symbol.iterator]=function(){return r},r}(this)}});var C=this||self;function x(e,t){e=e.split(".");var n,i=C;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function M(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var O,A,T="undefined"!=typeof TextDecoder,P="undefined"!=typeof TextEncoder;function F(e){if(P)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,i=new Uint8Array(3*e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)i[n++]=o;else{if(2048>o)i[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<e.length){var a=e.charCodeAt(++r);if(56320<=a&&57343>=a){i[n++]=(o=1024*(o-55296)+a-56320+65536)>>18|240,i[n++]=o>>12&63|128,i[n++]=o>>6&63|128,i[n++]=63&o|128;continue}r--}if(t)throw Error("Found an unpaired surrogate");o=65533}i[n++]=o>>12|224,i[n++]=o>>6&63|128}i[n++]=63&o|128}}e=i.subarray(0,n)}return e}var E={},Z=null;function D(e,t){void 0===t&&(t=0),I(),t=E[t];for(var n=Array(Math.floor(e.length/3)),i=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var a=e[r],s=e[r+1],c=e[r+2],u=t[a>>2];n[o++]=u+(a=t[(3&a)<<4|s>>4])+(s=t[(15&s)<<2|c>>6])+(c=t[63&c])}switch(u=0,c=i,e.length-r){case 2:c=t[(15&(u=e[r+1]))<<2]||i;case 1:n[o]=t[(e=e[r])>>2]+t[(3&e)<<4|u>>4]+c+i}return n.join("")}function I(){if(!Z){Z={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var i=e.concat(t[n].split(""));E[n]=i;for(var r=0;r<i.length;r++){var o=i[r];void 0===Z[o]&&(Z[o]=r)}}}}var j,U="function"==typeof Uint8Array.prototype.slice;function L(e,t,n){return t===n?j||(j=new Uint8Array(0)):U?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var N=0;function V(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=t,e&&R(this,e)}function R(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?function(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var i=new Uint8Array(n),r=0;return function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),r=Z[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}I();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;t(r<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,function(e){i[r++]=e}),i.subarray(0,r)}(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.j=0,e.i=e.h.length,e.g=e.j}function $(e){var t=e.h,n=t[e.g],i=127&n;return 128>n?(e.g+=1,i):(i|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,i):(i|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,i):(i|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,i):(i|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,i>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&e.g++,i)))))}function B(e){var t=e.h[e.g],n=e.h[e.g+1],i=e.h[e.g+2],r=e.h[e.g+3];return e.g+=4,e=2*((n=(t<<0|n<<8|i<<16|r<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))}V.prototype.reset=function(){this.g=this.j};var Y=[];function q(){this.g=new Uint8Array(64),this.h=0}function z(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function J(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,Y.length?(n=Y.pop(),t&&(n.v=t.v),e&&R(n,e),e=n):e=new V(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function Q(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).l||0>t.g||t.g>t.i),t)return!1;e.m=e.g.g;var n=7&(t=$(e.g));return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function G(e){switch(e.h){case 0:if(0!=e.h)G(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?G(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)G(e);else{var t=$(e.g);(e=e.g).g+=t}break;case 5:5!=e.h?G(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!Q(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}G(e)}break;default:e.j=!0}}function H(e,t,n){var i=e.g.i,r=$(e.g);return e.g.i=r=e.g.g+r,n(t,e),e.g.g=r,e.g.i=i,t}function W(e){var t,n=$(e.g),i=(e=e.g).g;if(e.g+=n,e=e.h,T)(t=O)||(t=O=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(i,i+n));else{n=i+n;for(var r,o,a,s=[],c=null;i<n;)128>(r=e[i++])?s.push(r):224>r?i>=n?s.push(65533):(o=e[i++],194>r||128!=(192&o)?(i--,s.push(65533)):s.push((31&r)<<6|63&o)):240>r?i>=n-1?s.push(65533):128!=(192&(o=e[i++]))||224===r&&160>o||237===r&&160<=o||128!=(192&(t=e[i++]))?(i--,s.push(65533)):s.push((15&r)<<12|(63&o)<<6|63&t):244>=r?i>=n-2?s.push(65533):128!=(192&(o=e[i++]))||o-144+(r<<28)>>30!=0||128!=(192&(t=e[i++]))||128!=(192&(a=e[i++]))?(i--,s.push(65533)):(r=(7&r)<<18|(63&o)<<12|(63&t)<<6|63&a,s.push(55296+((r-=65536)>>10&1023),56320+(1023&r))):s.push(65533),8192<=s.length&&(c=M(c,s),s.length=0);t=M(c,s)}return t}function K(){this.h=[],this.i=0,this.g=new q}function X(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ee(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,i=n.length,r=0,o=0;o<i;o++){var a=n[o];0!==a.length&&(t.set(a,r),r+=a.length)}return 0!==(i=(n=e.g).h)&&(t.set(n.g.subarray(0,i),r),n.h=0),e.h=[t],t}function te(e,t,n){if(null!=n){z(e.g,8*t+5),e=e.g;var i=n;0===(i=(n=0>i?1:0)?-i:i)?N=0<1/i?0:2147483648:isNaN(i)?N=2147483647:34028234663852886e22<i?N=(n<<31|2139095040)>>>0:11754943508222875e-54>i?(i=Math.round(i/Math.pow(2,-149)),N=(n<<31|i)>>>0):(t=Math.floor(Math.log(i)/Math.LN2),i*=Math.pow(2,-t),i=8388607&Math.round(8388608*i),N=(n<<31|t+127<<23|i)>>>0),e.push((n=N)>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}q.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},q.prototype.length=function(){return this.h},q.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,L(e,0,t)},J.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var ne="function"==typeof Uint8Array;function ie(e,t,n){if(null!=e)return"object"==typeof e?ne&&e instanceof Uint8Array?n(e):re(e,t,n):t(e)}function re(e,t,n){if(Array.isArray(e)){for(var i=Array(e.length),r=0;r<e.length;r++)i[r]=ie(e[r],t,n);return Array.isArray(e)&&e.W&&ce(i),i}for(r in i={},e)i[r]=ie(e[r],t,n);return i}function oe(e){return"number"==typeof e?isFinite(e)?e:String(e):e}var ae,se={W:{value:!0,configurable:!0}};function ce(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,se),e}function ue(e,t,n){var i=ae;if(ae=null,e||(e=i),i=this.constructor.ca,e||(e=i?[i]:[]),this.j=i?0:-1,this.i=null,this.g=e,e=(i=this.g.length)-1,i&&null!==(i=this.g[e])&&"object"==typeof i&&i.constructor===Object?(this.l=e-this.j,this.h=i):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(i=this.g[e+=this.j])?ce(i):this.g[e]=le:(de(this),(i=this.h[e])?ce(i):this.h[e]=le)}var le=Object.freeze(ce([]));function de(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function fe(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function me(e){var t=void 0!==t&&t,n=fe(e,1,t);return null==n&&(n=le),n===le&&ge(e,1,n=ce([]),t),n}function he(e,t,n){return null==(e=null==(e=fe(e,t))?e:+e)?void 0===n?0:n:e}function ge(e,t,n,i){void 0!==i&&i||t>=e.l?(de(e),e.h[t]=n):e.g[t+e.j]=n}function pe(e,t){e.i||(e.i={});var n=e.i[1];if(!n){var i=me(e);n=[];for(var r=0;r<i.length;r++)n[r]=new t(i[r]);e.i[1]=n}return n}function ve(e,t,n,i){var r=pe(e,n);t=t||new n,e=me(e),null!=i?(r.splice(i,0,t),e.splice(i,0,be(t,!1))):(r.push(t),e.push(be(t,!1)))}function be(e,t){if(e.i)for(var n in e.i){var i=e.i[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)i[r]&&be(i[r],t);else i&&be(i,t)}return e.g}function ye(e,t){return null==(e=fe(e,t))?0:e}function _e(e,t){return null==(e=fe(e,t))?"":e}function Se(e,t){if(e=e.m){X(t,t.g.end());for(var n=0;n<e.length;n++)X(t,e[n])}}function we(e,t){if(4==t.h)return!1;var n=t.m;return G(t),t.N||(t=L(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t]),!0}function ke(e,t){var n=void 0;return new(n||(n=Promise))(function(i,r){function o(e){try{s(t.next(e))}catch(n){r(n)}}function a(e){try{s(t.throw(e))}catch(n){r(n)}}function s(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,a)}s((t=t.apply(e,void 0)).next())})}function Ce(e){ue.call(this,e)}function xe(e,t){for(;Q(t);)switch(t.i){case 8:var n=$(t.g);ge(e,1,n);break;case 21:ge(e,2,n=B(t.g));break;case 26:ge(e,3,n=W(t));break;case 34:ge(e,4,n=W(t));break;default:if(!we(e,t))return e}return e}function Me(e){ue.call(this,e,-1,Oe)}ue.prototype.toJSON=function(){return re(be(this,!1),oe,D)},ue.prototype.toString=function(){return be(this,!1).toString()},m(Ce,ue),m(Me,ue),Me.prototype.addClassification=function(e,t){ve(this,e,Ce,t)};var Oe=[1];function Ae(e){ue.call(this,e)}function Te(e,t){for(;Q(t);)switch(t.i){case 13:var n=B(t.g);ge(e,1,n);break;case 21:ge(e,2,n=B(t.g));break;case 29:ge(e,3,n=B(t.g));break;case 37:ge(e,4,n=B(t.g));break;case 45:ge(e,5,n=B(t.g));break;default:if(!we(e,t))return e}return e}function Pe(e){ue.call(this,e,-1,Fe)}m(Ae,ue),m(Pe,ue);var Fe=[1];function Ee(e){ue.call(this,e)}function Ze(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function De(e){return pe(e,Ce).map(function(e){return{index:ye(e,1),Y:he(e,2),label:null!=fe(e,3)?_e(e,3):void 0,displayName:null!=fe(e,4)?_e(e,4):void 0}})}function Ie(e){return{x:he(e,1),y:he(e,2),z:he(e,3),visibility:null!=fe(e,4)?he(e,4):void 0}}function je(e,t){this.h=e,this.g=t,this.l=0}function Ue(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var i=Ze(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=Ze(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,i),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));i=e.m=o,n.useProgram(i),r=n.getUniformLocation(i,"sampler0"),e.j={I:n.getAttribLocation(i,"aVertex"),H:n.getAttribLocation(i,"aTex"),da:r},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}i=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(i.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(i.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(i.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(i.I),n.disableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function Le(e){this.g=e}m(Ee,ue);var Ne=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ve(e,t){return t+e}function Re(e,t){window[e]=t}function $e(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||Ve,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=a(Object.keys(e.options))).next();!n.done;n=t.next()){var i=e.options[n=n.value].default;void 0!==i&&(this.j[n]="function"==typeof i?i():i)}}function Be(e,t){return ke(e,function e(){var n,i,r=this;return w(e,function(e){return t in r.F?e.return(r.F[t]):(n=r.locateFile(t,""),i=fetch(n).then(function(e){return e.arrayBuffer()}),r.F[t]=i,e.return(i))})})}function Ye(e,t){for(var n=t.name||"$",i=[].concat(s(t.wants)),r=new e.h.StringList,o=a(t.wants),c=o.next();!c.done;c=o.next())r.push_back(c.value);o=e.h.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[i[s]]=r.get(s);var c=e.listeners[n];c&&(e.C=function(e,t,n){return ke(e,function e(){var i,r,o,s,c,u,l,d,f,m,h,g,p=this;return w(e,function(e){switch(e.g){case 1:if(!n)return e.return(t);for(i={},r=0,o=a(Object.keys(n)),s=o.next();!s.done;s=o.next())"string"!=typeof(c=n[s.value])&&"texture"===c.type&&void 0!==t[c.stream]&&++r;1<r&&(p.G=!1),u=a(Object.keys(n)),s=u.next();case 2:if(s.done){e.g=4;break}if("string"==typeof(d=n[l=s.value]))return h=i,g=l,v(e,function(e,t,n){return ke(e,function e(){var i,r=this;return w(e,function(e){return"number"==typeof n||n instanceof Uint8Array||n instanceof r.h.Uint8BlobList?e.return(n):n instanceof r.h.Texture2dDataOut?((i=r.s[t])||(i=new je(r.h,r.D),r.s[t]=i),e.return(Ue(i,n,r.G))):e.return(void 0)})})}(p,l,t[d]),14);if(f=t[d.stream],"detection_list"===d.type){if(f){for(var b=f.getRectList(),y=f.getLandmarksList(),_=f.getClassificationsList(),S=[],k=0;k<b.size();++k){var C=b.get(k);e:{var x=new Ee;for(C=new J(C);Q(C);)switch(C.i){case 13:var M=B(C.g);ge(x,1,M);break;case 21:ge(x,2,M=B(C.g));break;case 29:ge(x,3,M=B(C.g));break;case 37:ge(x,4,M=B(C.g));break;case 45:ge(x,5,M=B(C.g));break;case 48:for(var O=C.g,A=128,T=0,P=M=0;4>P&&128<=A;P++)T|=(127&(A=O.h[O.g++]))<<7*P;if(128<=A&&(T|=(127&(A=O.h[O.g++]))<<28,M|=(127&A)>>4),128<=A)for(P=0;5>P&&128<=A;P++)M|=(127&(A=O.h[O.g++]))<<7*P+3;128>A?(O=T>>>0,(M=2147483648&(A=M>>>0))&&(A=~A>>>0,0==(O=1+~O>>>0)&&(A=A+1>>>0)),O=4294967296*A+(O>>>0),M=M?-O:O):(O.l=!0,M=void 0),ge(x,6,M);break;default:if(!we(x,C))break e}}x={Z:he(x,1),$:he(x,2),height:he(x,3),width:he(x,4),rotation:he(x,5,0),X:ye(x,6)},M=y.get(k);e:for(C=new Pe,M=new J(M);Q(M);)switch(M.i){case 10:ve(C,O=H(M,new Ae,Te),Ae,void 0);break;default:if(!we(C,M))break e}C=pe(C,Ae).map(Ie),O=_.get(k);e:for(M=new Me,O=new J(O);Q(O);)switch(O.i){case 10:M.addClassification(H(O,new Ce,xe));break;default:if(!we(M,O))break e}x={T:x,O:C,M:De(M)},S.push(x)}b=S}else b=[];i[l]=b,e.g=7;break}if("proto_list"===d.type){if(f){for(b=Array(f.size()),y=0;y<f.size();y++)b[y]=f.get(y);f.delete()}else b=[];i[l]=b,e.g=7;break}if(void 0===f){e.g=3;break}if("float_list"===d.type){i[l]=f,e.g=7;break}if("proto"===d.type){i[l]=f,e.g=7;break}if("texture"!==d.type)throw Error("Unknown output config type: '"+d.type+"'");return(m=p.s[l])||(m=new je(p.h,p.D),p.s[l]=m),v(e,Ue(m,f,p.G),13);case 13:i[l]=e.h;case 7:d.transform&&i[l]&&(i[l]=d.transform(i[l])),e.g=3;break;case 14:h[g]=e.h;case 3:s=u.next(),e.g=2;break;case 4:return e.return(i)}})})}(e,o,t.outs).then(function(n){n=c(n);for(var r=0;r<t.wants.length;++r){var a=o[i[r]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}n&&(e.C=n)}))}}),e.i.attachMultiListener(r,o),r.delete()}function qe(e){switch(void 0===e&&(e=0),e){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function ze(e){var t=this;this.g=new $e({locateFile:(e=e||{}).locateFile,files:function(e){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:qe(e.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(e){return ke(t,function t(){var n,i,r=this;return w(t,function(t){return 1==t.g?(n=qe(e),i="third_party/mediapipe/modules/selfie_segmentation/"+n,v(t,Be(r.g,n),2)):(r.g.overrideFile(i,t.h),t.return(!0))})})}}}})}(e=$e.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return ke(this,function e(){var t=this;return w(e,function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})})},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var i=[],r=[],o={},s=a(Object.keys(e)),c=s.next();!c.done;o={K:o.K,L:o.L},c=s.next()){var u=c.value;u in this.j&&this.j[u]===e[u]||(this.j[u]=e[u],void 0!==(c=t[u])&&(c.onChange&&(o.K=c.onChange,o.L=e[u],i.push(function(e){return function(){return ke(n,function t(){var n=this;return w(t,function(t){if(1==t.g)return v(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0})})}}(o))),c.graphOptionXref&&(u={valueNumber:1===c.type?e[u]:0,valueBoolean:0===c.type&&e[u],valueString:2===c.type?e[u]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),u),r.push(c))))}(0!==i.length||0!==r.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(r),this.u=(void 0===this.u?[]:this.u).concat(i))}},e.initialize=function(){return ke(this,function e(){var t=this;return w(e,function(e){return 1==e.g?v(e,function(e){return ke(e,function e(){var t,n,i,r,o,a,c,u,l,d,f,m=this;return w(e,function(e){switch(e.g){case 1:return t=m,m.R?(n=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(m,m.j),v(e,function(){return ke(this,function e(){return w(e,function(e){switch(e.g){case 1:return e.m=2,v(e,WebAssembly.instantiate(Ne),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}(),2)):e.return();case 2:if(i=e.h,"object"==typeof window)return Re("createMediapipeSolutionsWasm",{locateFile:m.locateFile}),Re("createMediapipeSolutionsPackedAssets",{locateFile:m.locateFile}),a=n.filter(function(e){return void 0!==e.data}),c=n.filter(function(e){return void 0===e.data}),u=Promise.all(a.map(function(e){var n=Be(t,e.url);if(void 0!==e.path){var i=e.path;n=n.then(function(e){return t.overrideFile(i,e),Promise.resolve(e)})}return n})),l=Promise.all(c.map(function(e){return void 0===e.simd||e.simd&&i||!e.simd&&!i?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){return ke(t,function e(){var t,n,i=this;return w(e,function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,v(e,t(n),2);i.h=e.h,e.g=0})})}),d=ke(t,function e(){var t=this;return w(e,function(e){return t.g.graph&&t.g.graph.url?e=v(e,Be(t,t.g.graph.url),0):(e.g=0,e=void 0),e})}),v(e,Promise.all([l,u,d]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=n.filter(function(e){return void 0===e.simd||e.simd&&i||!e.simd&&!i}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,s(r)),v(e,createMediapipeSolutionsWasm(Module),6);case 6:m.h=e.h,m.l=new OffscreenCanvas(1,1),m.h.canvas=m.l,o=m.h.GL.createContext(m.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),m.h.GL.makeContextCurrent(o),e.g=4;break;case 7:if(m.l=document.createElement("canvas"),!(f=m.l.getContext("webgl2",{}))&&!(f=m.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();m.D=f,m.h.canvas=m.l,m.h.createContext(m.l,!0,!0,{});case 4:m.i=new m.h.SolutionWasm,m.R=!1,e.g=0}})})}(t),2):3!=e.g?v(e,function(e){return ke(e,function e(){var t,n,i,r,o,s,c=this;return w(e,function(e){if(1==e.g)return c.g.graph&&c.g.graph.url&&c.P===c.g.graph.url?e.return():(c.o=!0,c.g.graph&&c.g.graph.url?(c.P=c.g.graph.url,v(e,Be(c,c.g.graph.url),3)):void(e.g=2));for(2!=e.g&&c.i.loadGraph(e.h),t=a(Object.keys(c.B)),n=t.next();!n.done;n=t.next())c.i.overrideFile(i=n.value,c.B[i]);if(c.B={},c.g.listeners)for(r=a(c.g.listeners),o=r.next();!o.done;o=r.next())Ye(c,o.value);s=c.j,c.j={},c.setOptions(s),e.g=0})})}(t),3):v(e,function(e){return ke(e,function e(){var t,n,i,r,o,s=this;return w(e,function(e){switch(e.g){case 1:if(!s.o)return e.return();if(!s.u){e.g=2;break}t=a(s.u),n=t.next();case 3:if(n.done){e.g=5;break}return v(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:s.u=void 0;case 2:if(s.A){for(i=new s.h.GraphOptionChangeRequestList,r=a(s.A),o=r.next();!o.done;o=r.next())i.push_back(o.value);s.i.changeOptions(i),i.delete(),s.A=void 0}s.o=!1,e.g=0}})})}(t),0)})})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return ke(this,function n(){var i,r,o,s,c,u,l,d,f,m=this;return w(n,function(n){switch(n.g){case 1:return m.g.inputs?(i=1e3*(null==t?performance.now():t),v(n,m.C,2)):n.return();case 2:return v(n,m.initialize(),3);case 3:for(r=new m.h.PacketDataList,o=a(Object.keys(e)),s=o.next();!s.done;s=o.next())if(u=m.g.inputs[c=s.value]){e:{var h=m,g=e[c];switch(u.type){case"video":var p=h.m[u.stream];if(p||(p=new je(h.h,h.D),h.m[u.stream]=p),0===(h=p).l&&(h.l=h.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&g instanceof HTMLVideoElement){var b=g.videoWidth;p=g.videoHeight}else"undefined"!=typeof HTMLImageElement&&g instanceof HTMLImageElement?(b=g.naturalWidth,p=g.naturalHeight):(b=g.width,p=g.height);p={glName:h.l,width:b,height:p},(b=h.g).canvas.width=p.width,b.canvas.height=p.height,b.activeTexture(b.TEXTURE0),h.h.bindTexture2d(h.l),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,g),h.h.bindTexture2d(0),h=p;break e;case"detections":for((p=h.m[u.stream])||(p=new Le(h.h),h.m[u.stream]=p),(h=p).data||(h.data=new h.g.DetectionListData),h.data.reset(g.length),p=0;p<g.length;++p){var y=h.data,_=y.setBoundingBox,S=p,w=(b=g[p]).T,k=new Ee;ge(k,1,w.Z),ge(k,2,w.$),ge(k,3,w.height),ge(k,4,w.width),ge(k,5,w.rotation),ge(k,6,w.X);var C=w=new K;te(C,1,fe(k,1)),te(C,2,fe(k,2)),te(C,3,fe(k,3)),te(C,4,fe(k,4)),te(C,5,fe(k,5));var x=fe(k,6);if(null!=x&&null!=x){z(C.g,48);var M=C.g,O=x;x=0>O;var A=(O=Math.abs(O))>>>0;for(O=Math.floor((O-A)/4294967296),O>>>=0,x&&(O=~O>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++O&&(O=0))),x=N=A,A=O;0<A||127<x;)M.push(127&x|128),x=(x>>>7|A<<25)>>>0,A>>>=7;M.push(x)}if(Se(k,C),w=ee(w),_.call(y,S,w),b.O)for(y=0;y<b.O.length;++y)C=!!(k=b.O[y]).visibility,S=(_=h.data).addNormalizedLandmark,w=p,k=Object.assign(Object.assign({},k),{visibility:C?k.visibility:0}),ge(C=new Ae,1,k.x),ge(C,2,k.y),ge(C,3,k.z),k.visibility&&ge(C,4,k.visibility),te(M=k=new K,1,fe(C,1)),te(M,2,fe(C,2)),te(M,3,fe(C,3)),te(M,4,fe(C,4)),te(M,5,fe(C,5)),Se(C,M),k=ee(k),S.call(_,w,k);if(b.M)for(y=0;y<b.M.length;++y){if(S=(_=h.data).addClassification,w=p,k=b.M[y],ge(C=new Ce,2,k.Y),k.index&&ge(C,1,k.index),k.label&&ge(C,3,k.label),k.displayName&&ge(C,4,k.displayName),M=k=new K,null!=(A=fe(C,1))&&null!=A)if(z(M.g,8),x=M.g,0<=A)z(x,A);else{for(O=0;9>O;O++)x.push(127&A|128),A>>=7;x.push(1)}te(M,2,fe(C,2)),null!=(x=fe(C,3))&&(x=F(x),z(M.g,26),z(M.g,x.length),X(M,M.g.end()),X(M,x)),null!=(x=fe(C,4))&&(x=F(x),z(M.g,34),z(M.g,x.length),X(M,M.g.end()),X(M,x)),Se(C,M),k=ee(k),S.call(_,w,k)}}h=h.data;break e;default:h={}}}switch(l=h,d=u.stream,u.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},l),{stream:d,timestamp:i}));break;case"detections":(f=l).stream=d,f.timestamp=i,r.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+u.type+"'")}}return m.i.send(r),v(n,m.C,4);case 4:r.delete(),n.g=0}})})},e.onResults=function(e,t){this.listeners[t||"$"]=e},x("Solution",$e),x("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=ze.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return ke(this,function e(){var t=this;return w(e,function(e){return v(e,t.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(e){return ke(this,function t(){var n=this;return w(t,function(t){return v(t,n.g.send(e),0)})})},e.setOptions=function(e){this.g.setOptions(e)},x("SelfieSegmentation",ze),x("VERSION","0.1.1632777926")}).call(this)},66071:function(e,t,n){"use strict";n.d(t,{g:function(){return g}});var i=n(56247),r=n(79765),o=n(46782),a=n(8359),s=n(37716),c=n(22238),u=n(67267),d=n(51095),m=n(56436),h=n(29790),g=function(){var e=function(){function e(t,n){var i=this;l(this,e),this.dialog=t,this.meetingService=n,this.ngUnsubscribe=new r.xQ,this.isMeetingDialogOpen=!1,this.meetingService.activeMeetingConference$.pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(e){return i.activeMeetingConference=e})}return f(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"showInfoDialog",value:function(){var e;switch(null===(e=this.conferenceState)||void 0===e?void 0:e.kind){case a.VW.Meeting:this.openMeetingInformationDialog(this.activeMeetingConference);break;case a.VW.Dynamic:this.showDynamicConferenceMeetingDetails()}}},{key:"showDynamicConferenceMeetingDetails",value:function(){var e=this;this.conferenceState&&this.meetingService.getDynamicConferenceMeeting(this.conferenceState).pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(t){return e.openMeetingInformationDialog(t)})}},{key:"openMeetingInformationDialog",value:function(e){var t=this;this.isMeetingDialogOpen=!0,this.dialog.open(i.Y,{autoFocus:!1,backdropClass:"cdk-overlay-transparent-backdrop",width:"56rem",height:"52rem",panelClass:["meetings__info-dialog-container","meetings__info-dialog-in-cinema-mode"],position:{bottom:"7.5rem",left:"1rem"},data:{meeting:e,isCinemaMode:!0}}).afterClosed().pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(){t.isMeetingDialogOpen=!1})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.uw),s.Y36(u.D))},e.\u0275cmp=s.Xpm({type:e,selectors:[["meeting-information-button"]],inputs:{conferenceState:"conferenceState"},decls:5,vars:6,consts:[["mat-button","",1,"meeting-information-button__meeting-details",3,"click"],["data-e2e","cinema-mode-footer-fragment__meeting-details",1,"meeting-information-button__button-text"],["fill","white","size","small",1,"meeting-information-button__button-icon",3,"icon"]],template:function(e,t){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return t.showInfoDialog()}),s.TgZ(1,"span",1),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"app-svg-icon",2),s.qZA()),2&e&&(s.ekj("meeting-information-button__meeting-dialog-opened",t.isMeetingDialogOpen),s.xp6(2),s.hij(" ",s.lcZ(3,4,"conference.meeting_details")," "),s.xp6(2),s.Q6J("icon",t.isMeetingDialogOpen?"arrow_down":"arrow_up"))},directives:[d.lW,m.u],pipes:[h.X$],styles:[".meeting-information-button__meeting-details[_ngcontent-%COMP%]{margin:-1.6rem 1.6rem -1.6rem -1.2rem;padding:1.6rem 2.4rem 1.6rem 1.6rem}.meeting-information-button__meeting-details[_ngcontent-%COMP%]   .meeting-information-button__button-text[_ngcontent-%COMP%]{display:inline-flex;font-size:1.8rem}.meeting-information-button__meeting-details[_ngcontent-%COMP%]   .meeting-information-button__button-icon[_ngcontent-%COMP%]{display:inline-flex;padding-left:.8rem}"]}),e}()},56247:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i,r=n(22238),o=n(37716),a=((i=f(function e(t,n){l(this,e),this.dialogRef=t,this.meetingData=n})).\u0275fac=function(e){return new(e||i)(o.Y36(r.so),o.Y36(r.WI))},i.\u0275cmp=o.Xpm({type:i,selectors:[["meeting-information-dialog"]],decls:1,vars:2,consts:[[3,"meeting","isCinemaMode"]],template:function(e,t){1&e&&o._UZ(0,"meeting-information",0),2&e&&o.Q6J("meeting",t.meetingData.meeting)("isCinemaMode",t.meetingData.isCinemaMode)},styles:[""]}),i)},6663:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});var i,r=n(80037),o=n(37716),a=((i=function(){function e(){l(this,e)}return f(e,[{key:"transform",value:function(e,t,n){return e.filter(function(e){var n,i,o,a,s,c;return t?(null===(n=e.schedule)||void 0===n?void 0:n.repeat_frequency)?(null===(i=e.schedule)||void 0===i?void 0:i.repeat_frequency)===r.j.Nil:null===(o=e.schedule)||void 0===o?void 0:o.end_date:!((null===(a=e.schedule)||void 0===a?void 0:a.end_date)&&(!(null===(s=e.schedule)||void 0===s?void 0:s.repeat_frequency)||(null===(c=e.schedule)||void 0===c?void 0:c.repeat_frequency)===r.j.Nil))}).filter(function(e){return e.description.toLowerCase().includes(n.toLowerCase())}).sort(this.sortMeetings)}},{key:"sortMeetings",value:function(e,t){var n,i;return(null===(n=e.schedule)||void 0===n?void 0:n.end_date)&&(null===(i=t.schedule)||void 0===i?void 0:i.end_date)?new Date(e.schedule.start_date).getTime()-new Date(t.schedule.start_date).getTime():e.description.localeCompare(t.description)}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=o.Yjl({name:"meetings",type:i,pure:!0}),i)},95105:function(e,t,n){"use strict";n.d(t,{f:function(){return m}});var i,r=n(80037),o=n(26215),a=n(37716),s=n(29790),c=n(38583),u=n(67267),d=n(45832),m=((i=function(){function e(t,n,i,r){l(this,e),this.translateService=t,this.datePipe=n,this.meetingService=i,this.snackBarService=r,this.isSendingMeetingRequestSource=new o.X(!1),this.closePlanMeetingDialogSource=new o.X(!1),this.isSendingMeetingRequest$=this.isSendingMeetingRequestSource.asObservable(),this.closePlanMeetingDialog$=this.closePlanMeetingDialogSource.asObservable()}return f(e,[{key:"submitMeeting",value:function(t,n,i){var r=this;this.isSendingMeetingRequest(!0);var o={description:t.meetingDescription},a=t.repeatFrequency;o.schedule={end_date:this.constructDate(t.endDate,t.endTime),repeat_frequency:e.getMeetingRepeatFrequency(a),schedule_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,start_date:this.constructDate(t.startDate,t.startTime)},e.isOnlyWeekdays(a)&&(o.schedule.by_day=["Monday","Tuesday","Wednesday","Thursday","Friday"]),n?this.meetingService.updateMeeting(o,i).pipe().subscribe(function(){r.toggleClosePlanMeetingDialog(),r.isSendingMeetingRequest(!1)},function(){r.isSendingMeetingRequest(!1),r.snackBarService.openErrorInfo("meetings.plan_dialog.error")}):this.meetingService.createMeeting(o).pipe().subscribe(function(){r.toggleClosePlanMeetingDialog(),r.isSendingMeetingRequest(!1)},function(){r.isSendingMeetingRequest(!1),r.snackBarService.openErrorInfo("meetings.plan_dialog.error")})}},{key:"toggleClosePlanMeetingDialog",value:function(){this.closePlanMeetingDialogSource.next(!this.closePlanMeetingDialogSource.getValue())}},{key:"isSendingMeetingRequest",value:function(e){this.isSendingMeetingRequestSource.next(e)}},{key:"setRepeatFrequencyNote",value:function(t,n){if(!n||n===r.Z.DoesNotRepeat)return"";var i=e.getTranslationKey(n);t=this.datePipe.transform(t,"dd LLL, y");var o=this.translateService.instant(i);return this.translateService.instant("meetings.plan_dialog.recurrence.explanation_text",{occurrence:o,startDate:t})}},{key:"getPatchValueForInitializeFormWithMeetingDetails",value:function(t){var n,i,o,a=new Date(t.schedule.start_date),s=new Date(null!==(n=t.schedule.end_date)&&void 0!==n?n:t.schedule.start_date),c=r.Z.EveryDay;return(null===(i=t.schedule)||void 0===i?void 0:i.repeat_frequency)?c=e.getMeetingRepeatFrequencyOptionKey(t.schedule):(null===(o=t.schedule)||void 0===o?void 0:o.end_date)&&(c=r.Z.DoesNotRepeat),{meetingDescription:t.description,startDate:this.getFormattedDateString(a),endDate:this.getFormattedDateString(s),startTime:this.getFormattedTimeString(a),endTime:this.getFormattedTimeString(s),repeatFrequency:c}}},{key:"setAllDayMeetingTime",value:function(t){var n="00:00",i="23:59";if(!t){var r=new Date,o=new Date(Date.now()+e.MIN_START_END_DATE_DIF);n=this.getFormattedTimeString(r),i=this.getFormattedTimeString(o)}return{startTime:n,endTime:i}}},{key:"getCurrentDate",value:function(){return this.getFormattedDateString(new Date)}},{key:"getInitialTimeFromDate",value:function(t){var n=new Date;return"endTime"===t&&(n=new Date(Date.now()+e.MIN_START_END_DATE_DIF)),this.getFormattedTimeString(n)}},{key:"sanitizeStartEndDate",value:function(t,n,i){var r=new Date(t),o=new Date(n);if(o.getTime()<r.getTime()&&"start"===i){var a=new Date(r.getTime()+e.MIN_START_END_DATE_DIF);n=this.getFormattedDateString(a)}if(r.getTime()>o.getTime()&&"end"===i){var s=new Date(o.getTime()-e.MIN_START_END_DATE_DIF);t=this.getFormattedDateString(s)}return{startDate:t,endDate:n}}},{key:"sanitizeStartEndDateTime",value:function(t,n,i,r,o,a){var s=new Date(t+" "+n),c=new Date(i+" "+r),u=(new Date).setHours(0,0,0,0);if(a&&s.getTime()<u){if(c.getTime()<s.getTime()&&"start"===o){var l=new Date(s.getTime()+e.MIN_START_END_DATE_DIF);r=this.getFormattedTimeString(l)}else if(s.getTime()>c.getTime()&&"end"===o){var d=new Date(c.getTime()-e.MIN_START_END_DATE_DIF);n=this.getFormattedTimeString(d)}return{startDate:t,startTime:n,endDate:i,endTime:r}}if(s.getTime()<Date.now()&&(s=new Date,t=this.getFormattedDateString(s),n=this.getFormattedTimeString(s)),c.getTime()<s.getTime()&&"start"===o){var f=new Date(s.getTime()+e.MIN_START_END_DATE_DIF);i=this.getFormattedDateString(f),r=this.getFormattedTimeString(f)}if(s.getTime()>c.getTime()&&"end"===o){var m=new Date(c.getTime()-e.MIN_START_END_DATE_DIF);t=this.getFormattedDateString(m),n=this.getFormattedTimeString(m)}return{startDate:t,startTime:n,endDate:i,endTime:r}}},{key:"getFormattedTimeString",value:function(e){return"".concat(this.addLeadingZeroToNumber(e.getHours()),":").concat(this.addLeadingZeroToNumber(e.getMinutes()))}},{key:"getFormattedDateString",value:function(e){var t=this.addLeadingZeroToNumber(e.getMonth()+1),n=this.addLeadingZeroToNumber(e.getDate());return"".concat(e.getFullYear(),"-").concat(t,"-").concat(n)}},{key:"addLeadingZeroToNumber",value:function(e){return(e<10?"0":"")+e}},{key:"constructDate",value:function(e,t){return new Date(e+"T"+t)}}],[{key:"isOnlyWeekdays",value:function(e){return e===r.Z.EveryWeekday}},{key:"getMeetingRepeatFrequency",value:function(t){return e.getMeetingRepeatFrequencyByKey(t,e.isOnlyWeekdays(t),!0)}},{key:"getTranslationKey",value:function(t){return"meetings.plan_dialog.recurrence."+e.getMeetingRepeatFrequencyByKey(t,e.isOnlyWeekdays(t),!1)}},{key:"getMeetingRepeatFrequencyOptionKey",value:function(t){var n;return e.getMeetingRepeatFrequencyByValue(null!==(n=t.repeat_frequency)&&void 0!==n?n:"",!!t.by_day,!1)}},{key:"getMeetingRepeatFrequencyTranslationKey",value:function(t){var n;return"meetings.plan_dialog.recurrence."+e.getMeetingRepeatFrequencyByValue(null!==(n=t.repeat_frequency)&&void 0!==n?n:"",!!t.by_day,!0)}},{key:"getMeetingRepeatFrequencyByValue",value:function(e,t,n){switch(e){case r.j.P1D:return n?"daily":r.Z.EveryDay;case r.j.P1W:return t?n?"every_weekday":r.Z.EveryWeekday:n?"weekly":r.Z.EveryWeek;case r.j.P1M:return n?"monthly":r.Z.EveryMonth;case r.j.P1Y:return n?"yearly":r.Z.EveryYear;default:return n?"daily":r.Z.DoesNotRepeat}}},{key:"getMeetingRepeatFrequencyByKey",value:function(e,t,n){switch(e){case r.Z.DoesNotRepeat:return n?r.j.Nil:"";case r.Z.EveryWeekday:case r.Z.EveryWeek:return t?n?r.j.P1W:"weekday":n?r.j.P1W:"week";case r.Z.EveryMonth:return n?r.j.P1M:"month";case r.Z.EveryYear:return n?r.j.P1Y:"year";case r.Z.EveryDay:default:return n?r.j.P1D:"day"}}}]),e}()).MIN_START_END_DATE_DIF=36e5,i.\u0275fac=function(e){return new(e||i)(a.LFG(s.sK),a.LFG(c.uU),a.LFG(u.D),a.LFG(d.c))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i)},80037:function(e,t,n){"use strict";n.d(t,{Z:function(){return r},j:function(){return o}});var i,r=((i=r||(r={})).DoesNotRepeat="doesNotRepeat",i.EveryWeekday="everyWeekday",i.EveryDay="everyDay",i.EveryWeek="everyWeek",i.EveryMonth="everyMonth",i.EveryYear="everyYear",r),o=function(){return(e=o||(o={})).Nil="nil",e.P1W="P1W",e.P1D="P1D",e.P1M="P1M",e.P1Y="P1Y",o;var e}()},79108:function(e,t,n){"use strict";n.d(t,{L:function(){return Ue}});var i,r=n(79765),o=n(26215),a=n(9112),c=n(87519),u=n(88002),d=n(46782),m=n(45832),h=n(8359),g=n(37716),p=n(35019),v=n(8106),b=n(89670),y=n(50501),_=n(1933),S=n(81836),w=n(38583),k=n(94935),C=n(54278),x=n(39178),M=n(78023),O=n(56436),A=n(1704),T=n(8250),P=n(36969),F=n(11845),E=n(29790),Z=n(93631),D=n(54037),I=((i=function(){function e(){l(this,e)}return f(e,[{key:"transform",value:function(e){return D.s.sortMembers(e)}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=g.Yjl({name:"videoMemberSort",type:i,pure:!0}),i);function j(e,t){if(1&e&&(g.TgZ(0,"span",8),g._uU(1),g.qZA()),2&e){var n=g.oxw();g.xp6(1),g.AsE(" ",null==n.conferenceState?null:n.conferenceState.description," (",null==n.conferenceState?null:n.conferenceState.members.length,") ")}}function U(e,t){}function L(e,t){1&e&&g.YNc(0,U,0,0,"ng-template")}function N(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"video-member",16),g.BQk()),2&e){var n=t.$implicit;g.xp6(1),g.Q6J("member",n)("isSidebarView",!0)}}function V(e,t){if(1&e&&g._UZ(0,"video-member",16),2&e){var n=g.oxw().$implicit;g.Q6J("member",n)("isSidebarView",!0)}}function R(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",12),g.ynx(1),g._UZ(2,"video-member",16),g.TgZ(3,"div",17),g.NdJ("onVisibilityChange$",function(e){var t=g.CHM(n).$implicit;return g.oxw(3).onVideoMemberVisibilityChange(e,t)}),g.qZA(),g.BQk(),g.YNc(4,V,1,2,"ng-template",null,18,g.W1O),g.qZA()}if(2&e){var i=t.$implicit,r=t.last;g.xp6(2),g.Q6J("member",i)("isSidebarView",!0),g.xp6(1),g.ekj("cinema-mode-member-list__extended-visibility-indicator-last",r)}}function $(e,t){if(1&e&&(g.TgZ(0,"div",11),g.TgZ(1,"div",12),g.YNc(2,N,2,2,"ng-container",13),g.ALo(3,"conferenceMembersSelf"),g.qZA(),g.TgZ(4,"div",14),g.YNc(5,R,6,4,"div",15),g.ALo(6,"videoMemberSort"),g.ALo(7,"conferenceMembersSelf"),g.qZA(),g.qZA()),2&e){var n=g.oxw(2);g.xp6(2),g.Q6J("ngForOf",g.xi3(3,4,n.conferenceState.members,!0))("ngForTrackBy",n.trackMember),g.xp6(3),g.Q6J("ngForOf",g.lcZ(6,7,g.xi3(7,9,n.conferenceState.members,!1)))("ngForTrackBy",n.trackMember)}}function B(e,t){if(1&e&&(g.TgZ(0,"div",19),g._UZ(1,"member-list",20),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.Q6J("isSidebarView",!0)("isSmallView",!0)("conferenceState",n.conferenceState)}}function Y(e,t){if(1&e&&(g.ynx(0),g.YNc(1,$,8,12,"div",9),g.YNc(2,B,2,3,"ng-template",null,10,g.W1O),g.BQk()),2&e){var n=g.MAs(3),i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.viewModeActive===i.viewMode.Gallery)("ngIfElse",n)}}var q=function(){return(e=q||(q={}))[e.List=0]="List",e[e.Gallery=1]="Gallery",q;var e}(),z=function(){var e=function(){function e(t){l(this,e),this.videoVisibilityService=t,this.sideBarCloseEvent=new g.vpe,this.viewMode=q,this.viewModeActive=q.Gallery}return f(e,[{key:"ngOnInit",value:function(){this.updateViewToggleButtonProperties()}},{key:"toggleViewMode",value:function(){this.viewModeActive=this.isListModeActive()?q.Gallery:q.List,this.updateViewToggleButtonProperties()}},{key:"close",value:function(){this.sideBarCloseEvent.emit()}},{key:"trackMember",value:function(e,t){return t.uuid}},{key:"onVideoMemberVisibilityChange",value:function(e,t){this.videoVisibilityService.setMemberVisibility(t,e)}},{key:"updateViewToggleButtonProperties",value:function(){this.viewModeToggleTranslationKey=this.isListModeActive()?"video.gallery_view":"video.list_view",this.viewModeToggleIconName=this.isListModeActive()?"gallery":"list"}},{key:"isListModeActive",value:function(){return this.viewModeActive===q.List}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(x.x))},e.\u0275cmp=g.Xpm({type:e,selectors:[["cinema-mode-member-list"]],inputs:{conferenceState:"conferenceState"},outputs:{sideBarCloseEvent:"sideBarCloseEvent"},decls:12,vars:9,consts:[["activeConferenceName",""],[1,"cinema-mode-member-list__participants-list__header"],[4,"ngTemplateOutlet"],["hoverTextTranslationKey","video.hide_participant_list","iconFill","close-member-list-sidenav","iconName","close_round",3,"appButtonClick"],["type","stroked-button","data-e2e","cinema-mode-participants-list-fragment__view--button",1,"cinema-mode-member-list__view-button","exclude-app-button-style",3,"appButtonClick"],["size","medium",3,"icon"],[1,"cinema-mode-member-list__view-button__text"],[4,"ngIf"],["data-e2e","cinema-mode-participants-list-fragment__meeting-name",1,"cinema-mode-member-list__conference-name"],["class","cinema-mode-member-list__sidebar-videos","data-e2e","cinema-mode-participants-list-fragment__sidebar-video",4,"ngIf","ngIfElse"],["participantListName",""],["data-e2e","cinema-mode-participants-list-fragment__sidebar-video",1,"cinema-mode-member-list__sidebar-videos"],[1,"cinema-mode-member-list__sidebar-video"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cinema-mode-member-list__participants-video"],["class","cinema-mode-member-list__sidebar-video",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cinema-mode-member-list__video--sidebar-view",3,"member","isSidebarView"],["observeVisibility","",1,"cinema-mode-member-list__extended-visibility-indicator",3,"onVisibilityChange$"],["participantVideo",""],[1,"cinema-mode-member-list__participants"],["data-e2e","participant-fragment",3,"isSidebarView","isSmallView","conferenceState"]],template:function(e,t){if(1&e&&(g.YNc(0,j,2,2,"ng-template",null,0,g.W1O),g.TgZ(2,"div",1),g.YNc(3,L,1,0,void 0,2),g.TgZ(4,"app-button",3),g.NdJ("appButtonClick",function(){return t.close()}),g.qZA(),g.qZA(),g.TgZ(5,"app-button",4),g.NdJ("appButtonClick",function(){return t.toggleViewMode()}),g._UZ(6,"app-svg-icon",5),g.TgZ(7,"span",6),g._uU(8),g.ALo(9,"letterCase"),g.ALo(10,"translate"),g.qZA(),g.qZA(),g.YNc(11,Y,4,2,"ng-container",7)),2&e){var n=g.MAs(1);g.xp6(3),g.Q6J("ngTemplateOutlet",n),g.xp6(3),g.Q6J("icon",t.viewModeToggleIconName),g.xp6(2),g.hij(" ",g.xi3(9,4,g.lcZ(10,7,t.viewModeToggleTranslationKey),t.viewModeToggleTranslationKey)," "),g.xp6(3),g.Q6J("ngIf",t.conferenceState)}},directives:[w.tP,M.V,O.u,w.O5,w.sg,A.B,T.n,P.U],pipes:[F.K,E.X$,Z.k,I],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.cinema-mode-member-list__participants-list__header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;margin-bottom:1.4rem;margin-left:1rem}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]{margin-bottom:.9rem;margin-left:1rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]     .mat-button-wrapper{align-items:center;display:flex;justify-content:center;padding:.3rem}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]     .mat-button-ripple{display:none}.cinema-mode-member-list__view-button__text[_ngcontent-%COMP%]{padding-left:.5rem}.cinema-mode-member-list__sidebar-videos[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.1rem;overflow:hidden}.cinema-mode-member-list__sidebar-video[_ngcontent-%COMP%]{background:#333;margin-bottom:.3rem;position:relative}.cinema-mode-member-list__sidebar-video[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cinema-mode-member-list__video--sidebar-view[_ngcontent-%COMP%]{height:18rem;overflow:hidden}.cinema-mode-member-list__participants[_ngcontent-%COMP%], .cinema-mode-member-list__participants-video[_ngcontent-%COMP%]{max-height:100%;overflow:auto}.cinema-mode-member-list__extended-visibility-indicator[_ngcontent-%COMP%]{bottom:-18rem;position:absolute;top:-18rem}.cinema-mode-member-list__extended-visibility-indicator-last[_ngcontent-%COMP%]{bottom:0}"]}),e}(),J=n(44163),Q=n(62656);function G(e,t){if(1&e&&(g.TgZ(0,"div",1),g.TgZ(1,"span",2),g._uU(2),g.qZA(),g._uU(3),g.ALo(4,"translate"),g.qZA()),2&e){var n=g.oxw();g.xp6(2),g.hij(" ",n.speaker.caller_id_name," "),g.xp6(1),g.hij(" \xa0",g.lcZ(4,2,"conference.user_is_speaker"),"\n")}}var H=function(){var e=function(){function e(t){var n=this;l(this,e),this.conferenceSpeakerIndicatorService=t,this.ngUnsubscribe=new r.xQ,this.conferenceSpeakerIndicatorService.speaker$.pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(e){return n.speaker=e})}return f(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(Q.W))},e.\u0275cmp=g.Xpm({type:e,selectors:[["cinema-mode-speaker-indicator"]],decls:1,vars:1,consts:[["class","video-conference-participant-speaker-indicator-bar__notification",4,"ngIf"],[1,"video-conference-participant-speaker-indicator-bar__notification"],[1,"video-conference-participant-speaker-indicator-bar__name"]],template:function(e,t){1&e&&g.YNc(0,G,5,4,"div",0),2&e&&g.Q6J("ngIf",t.speaker)},directives:[w.O5],pipes:[E.X$],styles:["[_nghost-%COMP%]{display:flex;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:1000}.video-conference-participant-speaker-indicator-bar__notification[_ngcontent-%COMP%]{box-shadow:0 .3rem .5rem -.1rem #0003,0 .6rem 1rem #00000024,0 .1rem 1.8rem #0000001f;box-sizing:border-box;display:inline-flex;flex-wrap:nowrap;font-size:1.4rem;margin:.8rem;min-height:4.8rem;padding:1.6rem;position:absolute;transform-origin:center;white-space:nowrap;width:40rem}.video-conference-participant-speaker-indicator-bar__name[_ngcontent-%COMP%]{flex:0 1 auto;overflow:hidden;text-overflow:ellipsis}"]}),e}(),W=n(22759),K=n(94402),X=n(59193),ee=n(43190),te=n(28704),ne=n(63327),ie=n(8307),re=n(88640),oe=n(67267),ae=n(25791),se=n(74688),ce=n(99445),ue=n(10028),le=n(83897),de=n(33935),fe=n(77746),me=n(66071),he=n(12794),ge=n(11495),pe=n(3052),ve=n(44895),be=n(79098);function ye(e,t){if(1&e){var n=g.EpF();g.ynx(0),g._UZ(1,"meeting-information-button",18),g.TgZ(2,"div",19),g.ALo(3,"async"),g.TgZ(4,"span",20),g._uU(5),g.qZA(),g.TgZ(6,"app-button",21),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw(2).toggleSideBar()}),g.ALo(7,"async"),g.qZA(),g.qZA(),g.BQk()}if(2&e){var i=g.oxw(2);g.xp6(1),g.Q6J("conferenceState",i.conferenceState),g.xp6(1),g.ekj("cinema-mode-footer__meeting-list-opened",g.lcZ(3,5,i.isSidebarOpen$)),g.xp6(3),g.hij(" ",i.conferenceState.members.length," "),g.xp6(1),g.Q6J("hoverTextTranslationKey",g.lcZ(7,7,i.isSidebarOpen$)?"video.hide_participant_list":"video.show_participant_list")}}function _e(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"mat-list-item"),g._UZ(1,"conference-lock-button",25),g._UZ(2,"raise-hand-button",25),g._UZ(3,"microphone",25),g.TgZ(4,"app-button",26),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw(3).endConference()}),g.qZA(),g.qZA()}if(2&e){var i=t.ngIf;g.xp6(1),g.Q6J("conferenceState",i),g.xp6(1),g.Q6J("conferenceState",i),g.xp6(1),g.Q6J("conferenceState",i)}}function Se(e,t){if(1&e&&(g.ynx(0),g._UZ(1,"app-button",22,23),g.TgZ(3,"mat-menu",13,24),g.YNc(5,_e,5,3,"mat-list-item",3),g.ALo(6,"async"),g.qZA(),g.BQk()),2&e){var n=g.MAs(2),i=g.MAs(4),r=g.oxw(2);g.xp6(1),g.Q6J("matMenuTriggerFor",i)("iconName",n.menuOpen?"arrow_down":"arrow_up"),g.xp6(4),g.Q6J("ngIf",g.lcZ(6,3,r.activeCallConferenceState$))}}function we(e,t){if(1&e&&(g.ynx(0),g.YNc(1,ye,8,9,"ng-container",3),g.YNc(2,Se,7,5,"ng-container",3),g.ALo(3,"async"),g.BQk()),2&e){var n,i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.conferenceState.kind!==i.oneOnOneConferenceKind),g.xp6(1),g.Q6J("ngIf",null==(n=g.lcZ(3,2,i.activeCallConferenceStateSelfMember$))?null:n.moderator)}}function ke(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"app-button",27),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw().hold()}),g.qZA()}}function Ce(e,t){if(1&e&&(g._UZ(0,"raise-hand-button",28),g.ALo(1,"conferenceMembersSelf")),2&e){var n=g.oxw();g.Q6J("conferenceState",n.conferenceState)("conferenceMember",g.xi3(1,2,n.conferenceState.members,!0)[0])}}function xe(e,t){1&e&&(g.ynx(0),g._UZ(1,"video-camera-toggle",29),g._UZ(2,"video-screenshare-menu",29),g.BQk())}function Me(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.TgZ(1,"app-button",30),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw().previousPage()}),g.ALo(2,"async"),g.ALo(3,"async"),g.qZA(),g.TgZ(4,"app-button",31),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw().nextPage()}),g.ALo(5,"async"),g.ALo(6,"async"),g.qZA(),g.BQk()}if(2&e){var i=g.oxw();g.xp6(1),g.Q6J("disabled",!g.lcZ(2,4,i.hasPreviousPage$))("iconFillClass",g.lcZ(3,6,i.hasPreviousPage$)?"white":"grey-color"),g.xp6(3),g.Q6J("disabled",!g.lcZ(5,8,i.hasNextPage$))("iconFillClass",g.lcZ(6,10,i.hasNextPage$)?"white":"grey-color")}}function Oe(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"app-button",32),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw().exitCinemaMode()}),g.qZA()}}function Ae(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"app-button",35),g.NdJ("click",function(e){return g.CHM(n),g.oxw(2).openPageSizeListMenu(e)}),g.qZA()}}function Te(e,t){if(1&e){var n=g.EpF();g.ynx(0),g.YNc(1,Ae,1,0,"app-button",33),g.TgZ(2,"app-button",34),g.NdJ("appButtonClick",function(){return g.CHM(n),g.oxw().openDeviceSettingsDialog()}),g.qZA(),g.BQk()}if(2&e){var i=g.oxw();g.xp6(1),g.Q6J("ngIf",i.conferenceState&&i.conferenceState.members.length>i.pageSizeOptions[0])}}function Pe(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"button",38),g.NdJ("click",function(){var e=g.CHM(n).$implicit;return g.oxw(2).updatePageSize(e)}),g.TgZ(1,"span"),g._uU(2),g.qZA(),g.qZA()}if(2&e){var i=t.$implicit;g.xp6(2),g.Oqu(i)}}function Fe(e,t){if(1&e&&(g.TgZ(0,"h2",36),g._uU(1),g.ALo(2,"translate"),g.qZA(),g.YNc(3,Pe,3,1,"button",37)),2&e){var n=g.oxw();g.xp6(1),g.hij(" ",g.lcZ(2,2,"telephone.participants_per_page")," "),g.xp6(2),g.Q6J("ngForOf",n.pageSizeOptions)}}var Ee=function(){var e=function(){function e(t,n,i,o,a,s,c,u,f,m,p,v,b,y,_){var S=this;l(this,e),this.microphoneService=t,this.sipService=n,this.apiAvService=i,this.apiAvFeedService=o,this.avApiService=a,this.router=s,this.apiAvEventStateService=c,this.videoPaginationService=u,this.localUserConfigService=f,this.meetingService=m,this.guestService=p,this.cinemaModeService=v,this.featureAccessService=b,this.callTrackerService=y,this.openDeviceSettingsService=_,this.ngUnsubscribe=new r.xQ,this.fullScreenToggleEvent=new g.vpe,this.showPageSizeListOptions=!1,this.pageSizeOptions=[6,9,12,16,20],this.oneOnOneConferenceKind=h.VW.OneOnOne,this.isSidebarOpen$=this.cinemaModeService.isSidebarOpen$,this.microphoneStatus$=this.microphoneService.microphoneStatus$,this.hasPreviousPage$=this.videoPaginationService.hasPreviousPage$,this.hasNextPage$=this.videoPaginationService.hasNextPage$,this.isPaginationAvailable$=this.videoPaginationService.isPaginationAvailable$,this.isGuest$=this.guestService.isGuest$,this.activeCallConferenceState$=this.avApiService.activeCallConferenceState$,this.activeCallConferenceStateSelfMember$=this.apiAvEventStateService.activeCallConferenceStateSelfMember$,this.isVideoAvailable$=this.featureAccessService.isVideoAvailable$,(0,W.R)(document,"fullscreenchange").pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(){S.updateToggleFullscreenButton()}),this.updateToggleFullscreenButton()}return f(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"toggleSideBar",value:function(){this.cinemaModeService.toggleSidebar()}},{key:"toggleMute",value:function(){this.microphoneService.toggleSelfMute()}},{key:"toggleFullscreen",value:function(){this.fullScreenToggleEvent.emit()}},{key:"hangUp",value:function(){this.meetingService.hangUp(!0)}},{key:"previousPage",value:function(){this.videoPaginationService.previousPage()}},{key:"nextPage",value:function(){this.videoPaginationService.nextPage()}},{key:"updatePageSize",value:function(e){this.localUserConfigService.setCinemaModePageSize(e)}},{key:"hold",value:function(){this.cinemaModeService.exitCinemaMode(),this.callTrackerService.hold()}},{key:"exitCinemaMode",value:function(){this.cinemaModeService.exitCinemaMode()}},{key:"endConference",value:function(){var e=this;this.activeCallConferenceState$.pipe((0,ee.w)(function(t){return"object"==typeof t&&null!==t?(0,K.D)(e.apiAvService.deleteConference(t.uuid)):X.E}),(0,d.R)(this.ngUnsubscribe)).subscribe(function(){return e.exitCinemaMode()})}},{key:"hidePageSizeListMenu",value:function(){this.showPageSizeListOptions=!1}},{key:"openPageSizeListMenu",value:function(e){e.stopPropagation(),this.showPageSizeListOptions=!0}},{key:"openDeviceSettingsDialog",value:function(){this.openDeviceSettingsService.open({isWelcomeDialog:!1})}},{key:"updateToggleFullscreenButton",value:function(){var e=document.fullscreenElement;this.fullscreenButtonIcon=e?"fullscreen_off":"fullscreen_on",this.fullscreenHoverKey=e?"telephone.fullscreen_off":"telephone.fullscreen_on"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(te.p),g.Y36(S.y),g.Y36(ne.y),g.Y36(y.D),g.Y36(p.a),g.Y36(ie.F0),g.Y36(p.a),g.Y36(b.H),g.Y36(re.i),g.Y36(oe.D),g.Y36(ae.Q),g.Y36(_.H),g.Y36(se.q),g.Y36(ce.k),g.Y36(ue.I))},e.\u0275cmp=g.Xpm({type:e,selectors:[["cinema-mode-footer"]],hostBindings:function(e,t){1&e&&g.NdJ("keydown.escape",function(e){return t.exitCinemaMode(e)},!1,g.evT)},inputs:{conferenceState:"conferenceState"},outputs:{fullScreenToggleEvent:"fullScreenToggleEvent"},decls:28,vars:27,consts:[["data-e2e","cinema-mode-footer-fragment",1,"cinema-mode-footer__action-overlay"],[1,"cinema-mode-footer__action-overlay__actions"],[1,"cinema-mode-footer__conference-actions"],[4,"ngIf"],[1,"cinema-mode-footer__call-actions"],["hoverTextTranslationKey","conference.on_hold","iconFillClass","white","iconName","call_hold","iconSize","small","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"appButtonClick",4,"ngIf","ngIfElse"],["raiseHand",""],["iconFillClass","white","e2e","cinema-mode-footer-fragment__microphone","iconSize","small",3,"hoverTextTranslationKey","iconName","appButtonClick"],["hoverTextTranslationKey","telephone.hang_up","iconSize","medium","data-e2e","cinema-mode-footer-fragment__end-call",3,"isBackgroundFilled","isRounded","appButtonClick"],[1,"cinema-mode-footer__view-options"],["hoverTextTranslationKey","telephone.cinema_mode_off","iconName","cinema_mode_off","iconFillClass","white","data-e2e","cinema-mode-footer-fragment__end-cinema-mode--button",3,"appButtonClick",4,"ngIf"],["iconFillClass","white","data-e2e","cinema-mode-footer-fragment__fullscreen--svg-icon",3,"hoverTextTranslationKey","iconName","appButtonClick"],["iconFillClass","white","iconName","menu_vertical","data-e2e","cinema-mode-footer-fragment__device-settings",3,"matMenuTriggerFor","click"],["yPosition","above",1,"cinema-mode__conference-moderator-controls-list"],["optionsMenu","matMenu"],[4,"ngIf","ngIfElse"],["class","cinema-mode-footer__page-size-menu"],["pageSizeOption",""],[3,"conferenceState"],["data-e2e","cinema-mode-footer-fragment__participant-icon",1,"cinema-mode-footer__conference-participant-icons"],["data-e2e","cinema-mode-footer-fragment__participant-number",1,"cinema-mode-footer__conference-participant-number"],["iconFillClass","white","iconName","face_to_face","iconSize","small",3,"hoverTextTranslationKey","appButtonClick"],["hoverTextTranslationKey","conference.moderation_menu.tooltip","iconFillClass","white","iconSize","small",3,"matMenuTriggerFor","iconName"],["conferenceModeratorControlsOpen","matMenuTrigger"],["conferenceModeratorControls","matMenu"],["iconFillClass","black","type","basic-icon-text-button",3,"conferenceState"],["buttonTextTranslationKey","conference.end_conference","color","warn","iconFillClass","warn-color","iconName","call_end","type","basic-icon-text-button",3,"appButtonClick"],["hoverTextTranslationKey","conference.on_hold","iconFillClass","white","iconName","call_hold","iconSize","small","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"appButtonClick"],["iconFillClass","white","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"conferenceState","conferenceMember"],["e2e","cinema-mode-footer-fragment"],["iconName","arrow_left","data-e2e","pagination-fragment__arrow-left",3,"disabled","iconFillClass","appButtonClick"],["iconName","arrow_right","data-e2e","pagination-fragment__arrow-right",3,"disabled","iconFillClass","appButtonClick"],["hoverTextTranslationKey","telephone.cinema_mode_off","iconName","cinema_mode_off","iconFillClass","white","data-e2e","cinema-mode-footer-fragment__end-cinema-mode--button",3,"appButtonClick"],["class","cinema-mode-footer__page-size-button","buttonTextTranslationKey","meetings.video.settings.change_layout","iconFillClass","black","iconName","gallery","type","basic-icon-text-button","e2e","toolbar-fragment__change-layout",3,"click",4,"ngIf"],["buttonTextTranslationKey","meetings.video.settings.call_settings","e2e","toolbar-fragment__devices","iconFillClass","black","iconName","tune","type","basic-icon-text-button",3,"appButtonClick"],["buttonTextTranslationKey","meetings.video.settings.change_layout","iconFillClass","black","iconName","gallery","type","basic-icon-text-button","e2e","toolbar-fragment__change-layout",1,"cinema-mode-footer__page-size-button",3,"click"],[1,"cinema-mode-footer__page-size-title"],["data-e2e","cinema-mode-footer-fragment__page-size-menu","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["data-e2e","cinema-mode-footer-fragment__page-size-menu","mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.YNc(3,we,4,4,"ng-container",3),g.qZA(),g.TgZ(4,"div",4),g.YNc(5,ke,1,0,"app-button",5),g.ALo(6,"async"),g.YNc(7,Ce,2,5,"ng-template",null,6,g.W1O),g.TgZ(9,"app-button",7),g.NdJ("appButtonClick",function(){return t.toggleMute()}),g.ALo(10,"async"),g.ALo(11,"async"),g.qZA(),g.TgZ(12,"app-button-end-call",8),g.NdJ("appButtonClick",function(){return t.hangUp()}),g.qZA(),g.YNc(13,xe,3,0,"ng-container",3),g.ALo(14,"async"),g.qZA(),g.TgZ(15,"div",9),g.YNc(16,Me,7,12,"ng-container",3),g.ALo(17,"async"),g.YNc(18,Oe,1,0,"app-button",10),g.ALo(19,"async"),g.TgZ(20,"app-button",11),g.NdJ("appButtonClick",function(){return t.toggleFullscreen()}),g.qZA(),g.TgZ(21,"app-button",12),g.NdJ("click",function(){return t.hidePageSizeListMenu()}),g.qZA(),g.TgZ(22,"mat-menu",13,14),g.TgZ(24,"mat-list-item"),g.YNc(25,Te,3,1,"ng-container",15),g.YNc(26,Fe,4,4,"ng-template",16,17,g.W1O),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&e){var n=g.MAs(8),i=g.MAs(23),r=g.MAs(27);g.xp6(3),g.Q6J("ngIf",t.conferenceState),g.xp6(2),g.Q6J("ngIf",g.lcZ(6,15,t.activeCallConferenceState$).kind===t.oneOnOneConferenceKind)("ngIfElse",n),g.xp6(4),g.Q6J("hoverTextTranslationKey",g.lcZ(10,17,t.microphoneStatus$).hoverTitle)("iconName",g.lcZ(11,19,t.microphoneStatus$).icon),g.xp6(3),g.Q6J("isBackgroundFilled",!0)("isRounded",!0),g.xp6(1),g.Q6J("ngIf",g.lcZ(14,21,t.isVideoAvailable$)),g.xp6(3),g.Q6J("ngIf",g.lcZ(17,23,t.isPaginationAvailable$)),g.xp6(2),g.Q6J("ngIf",!g.lcZ(19,25,t.isGuest$)),g.xp6(2),g.Q6J("hoverTextTranslationKey",t.fullscreenHoverKey)("iconName",t.fullscreenButtonIcon),g.xp6(1),g.Q6J("matMenuTriggerFor",i),g.xp6(4),g.Q6J("ngIf",!t.showPageSizeListOptions)("ngIfElse",r)}},directives:[w.O5,M.V,le.Q,de.p6,de.VK,fe.Tg,me.g,he.K,ge.g,pe.B,ve.p,be.J,w.sg,de.OP],pipes:[w.Ov,Z.k,E.X$],styles:[".cinema-mode-footer__action-overlay[_ngcontent-%COMP%]{align-items:center;border-radius:.2rem;color:#fff;display:flex;justify-content:center;text-align:center}.cinema-mode-footer__action-overlay__actions[_ngcontent-%COMP%]{align-items:center;background-color:#000;border-radius:.2rem;display:flex;flex-direction:row;justify-content:space-between;max-width:100%;padding:.8rem 1.2rem;width:100%}@media screen and (max-width: 767px){.cinema-mode-footer__action-overlay__actions[_ngcontent-%COMP%]{overflow-x:auto;width:76.8rem}}.cinema-mode-footer__conference-actions[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1}.cinema-mode-footer__conference-participant-icons[_ngcontent-%COMP%]{position:relative}.cinema-mode-footer__conference-participant-number[_ngcontent-%COMP%]{color:#fff;left:3.2rem;position:absolute;top:.7rem}.cinema-mode-footer__call-actions[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;width:29.2rem}.cinema-mode-footer__view-options[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1;justify-content:flex-end}.cinema-mode-footer__page-size-button[_ngcontent-%COMP%]{margin-right:1rem}.cinema-mode-footer__page-size-button[_ngcontent-%COMP%]     .mat-button-wrapper{padding-top:.3rem}.cinema-mode-footer__page-size-title[_ngcontent-%COMP%]{color:gray;font-size:inherit;font-weight:normal;margin:0;opacity:.9;padding-left:1rem;padding-right:1.5rem}.cinema-mode-footer__pagination[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:center;max-width:11.2rem}  .cinema-mode__conference-moderator-controls-list{margin-bottom:1.9rem}"]}),e}(),Ze=["sidebar"];function De(e,t){1&e&&g._UZ(0,"app-spinner",9)}function Ie(e,t){1&e&&g._UZ(0,"cinema-mode-speaker-indicator")}function je(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"cinema-mode-footer",10),g.NdJ("fullScreenToggleEvent",function(){return g.CHM(n),g.oxw().toggleFullscreen()}),g.qZA()}2&e&&g.Q6J("conferenceState",t.ngIf)}var Ue=function(){var e=function(){function e(t,n,i,f,g,p,v,b){var y=this;l(this,e),this.apiAvEventStateService=t,this.apiAvEventConnectionService=n,this.snackBarService=i,this.videoPaginationService=f,this.apiAvFeedService=g,this.cinemaModeService=p,this.sipService=v,this.element=b,this.videoFeedSubscriptions=new r.xQ,this.ngUnsubscribe=new r.xQ,this.screenShareHasChangedSource=new o.X(!1),this.isParticipantListVideoSource=new o.X(!0),this.isSelfVideoVisible=!1,this.snackBarService.setMode(m.E.CinemaMode),this.isSidebarOpen$=this.cinemaModeService.isSidebarOpen$,this.isSpeakerVisible$=this.videoPaginationService.isSpeakerVisible$,this.appliedPageSize$=this.videoPaginationService.appliedPageSize$,this.activeCallConferenceState$=this.apiAvEventStateService.activeCallConferenceState$,this.currentPageMembers$=this.videoPaginationService.currentPageMembers$,(0,a.aj)([this.apiAvFeedService.isSomebodyElseScreenSharing$.pipe((0,c.x)()),this.activeCallConferenceState$.pipe((0,u.U)(function(e){return(null==e?void 0:e.kind)===h.VW.OneOnOne}),(0,c.x)())]).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(e){var t=s(e,2),n=t[0];t[1]||(n?y.cinemaModeService.openSidebar():y.cinemaModeService.closeSidebar())}),this.apiAvEventConnectionService.connectUntil(this.ngUnsubscribe),(0,a.aj)([this.isParticipantListVideoSource,this.cinemaModeService.isSidebarOpen$]).pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(e){var t=s(e,2),n=t[0],i=t[1];y.isSelfVideoVisible=!n||!i}),this.sipService.callEnded$.pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(){return y.cinemaModeService.exitCinemaMode()})}return f(e,[{key:"ngAfterViewInit",value:function(){var e=this;this.cinemaModeService.isSidebarOpen$.pipe((0,d.R)(this.ngUnsubscribe)).subscribe(function(t){var n,i;t?null===(n=e.sidebarTemplateRef)||void 0===n||n.open():null===(i=e.sidebarTemplateRef)||void 0===i||i.close(),e.snackBarService.setMode(t?m.E.CinemaModeWithSidebar:m.E.CinemaMode)})}},{key:"ngOnDestroy",value:function(){this.snackBarService.setMode(m.E.Default),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.videoFeedSubscriptions.next(),this.videoFeedSubscriptions.complete()}},{key:"openSidebar",value:function(){this.cinemaModeService.openSidebar()}},{key:"closeSidebar",value:function(){this.cinemaModeService.closeSidebar()}},{key:"toggleFullscreen",value:function(){document.fullscreenElement?document.exitFullscreen():this.element.nativeElement.requestFullscreen()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(g.Y36(p.a),g.Y36(v.Q),g.Y36(m.c),g.Y36(b.H),g.Y36(y.D),g.Y36(_.H),g.Y36(S.y),g.Y36(g.SBq))},e.\u0275cmp=g.Xpm({type:e,selectors:[["cinema-mode"]],viewQuery:function(e,t){var n;(1&e&&g.Gf(Ze,5),2&e)&&(g.iGM(n=g.CRH())&&(t.sidebarTemplateRef=n.first))},decls:13,vars:13,consts:[["class","cinema-mode__spinner",4,"ngIf"],["autosize","","data-e2e","cinema-mode-fragment",1,"cinema-mode__sidenav-container",3,"hasBackdrop"],[1,"cinema-mode__sidenav-content"],[4,"ngIf"],[1,"cinema-mode__conference"],[3,"conferenceState","fullScreenToggleEvent",4,"ngIf"],["mode","side","position","end",1,"cinema-mode__participants-list",3,"openedStart","closedStart"],["sidebar",""],["data-e2e","cinema-mode-participants-list-fragment__close-sidebar",3,"conferenceState","sideBarCloseEvent"],[1,"cinema-mode__spinner"],[3,"conferenceState","fullScreenToggleEvent"]],template:function(e,t){1&e&&(g.YNc(0,De,1,0,"app-spinner",0),g.ALo(1,"async"),g.TgZ(2,"mat-sidenav-container",1),g.TgZ(3,"mat-sidenav-content",2),g.YNc(4,Ie,1,0,"cinema-mode-speaker-indicator",3),g.ALo(5,"async"),g._UZ(6,"video-member-page",4),g.YNc(7,je,1,1,"cinema-mode-footer",5),g.ALo(8,"async"),g.qZA(),g.TgZ(9,"mat-sidenav",6,7),g.NdJ("openedStart",function(){return t.openSidebar()})("closedStart",function(){return t.closeSidebar()}),g.TgZ(11,"cinema-mode-member-list",8),g.NdJ("sideBarCloseEvent",function(){return t.closeSidebar()}),g.ALo(12,"async"),g.qZA(),g.qZA(),g.qZA()),2&e&&(g.Q6J("ngIf",!g.lcZ(1,5,t.activeCallConferenceState$)),g.xp6(2),g.Q6J("hasBackdrop",!1),g.xp6(2),g.Q6J("ngIf",!g.lcZ(5,7,t.isSpeakerVisible$)),g.xp6(3),g.Q6J("ngIf",g.lcZ(8,9,t.activeCallConferenceState$)),g.xp6(4),g.Q6J("conferenceState",g.lcZ(12,11,t.activeCallConferenceState$)))},directives:[w.O5,k.TM,k.Rh,C.z,k.JX,z,J.S,H,Ee],pipes:[w.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{background-color:#343434;display:flex;flex:1;flex-direction:column;height:100%;left:0;overflow:hidden;position:fixed;width:100%;z-index:2}.no-interaction[_nghost-%COMP%]{cursor:none}.cinema-mode__sidenav-container[_ngcontent-%COMP%]{align-items:center;background-color:#333;display:flex;flex:1;justify-content:center}.cinema-mode__sidenav-content[_ngcontent-%COMP%]{flex-direction:column}.cinema-mode__conference[_ngcontent-%COMP%]{align-content:center;display:flex;flex-wrap:wrap;height:calc(100% - 6.4rem);justify-content:center;width:100%}.cinema-mode__conference--pinned-view[_ngcontent-%COMP%]{flex-wrap:nowrap}.cinema-mode__participants-list[_ngcontent-%COMP%]{padding:.8rem .4rem 0 .3rem;width:32.7rem}@media screen and (max-width: 768px){.cinema-mode__participants-list[_ngcontent-%COMP%]{width:25rem}}.cinema-mode__participants-list[_ngcontent-%COMP%]     .mat-drawer-inner-container{overflow:hidden}.cinema-mode__participants-list[_ngcontent-%COMP%]   .cinema-mode__conference-name[_ngcontent-%COMP%]{color:#000}.cinema-mode__spinner[_ngcontent-%COMP%]{bottom:0;left:0;margin:auto;overflow:show;position:fixed;right:0;top:0;z-index:2}"]}),e}()},44895:function(e,t,n){"use strict";n.d(t,{p:function(){return m}});var i,r=n(88002),o=n(37716),a=n(50501),s=n(53264),c=n(1933),u=n(78023),d=n(38583),m=((i=function(){function e(t,n,i){l(this,e),this.apiAvFeedService=t,this.featureAccessVideoService=n,this.cinemaModeService=i,this.isCameraOptionEnabled$=this.featureAccessVideoService.isCameraOptionEnabled$,this.isOwnVideoOn$=this.apiAvFeedService.isOwnCameraOn$,this.iconFillClass$=this.cinemaModeService.isInCinemaMode$.pipe((0,r.U)(function(e){return e?"white":"button-color"}))}return f(e,[{key:"toggleVideo",value:function(){this.apiAvFeedService.toggleOwnCamera()}}]),e}()).\u0275fac=function(e){return new(e||i)(o.Y36(a.D),o.Y36(s.x),o.Y36(c.H))},i.\u0275cmp=o.Xpm({type:i,selectors:[["video-camera-toggle"]],inputs:{e2e:"e2e"},decls:5,vars:13,consts:[[1,"phone-panel-actions__call-action__button",3,"disabled","hoverTextTranslationKey","iconFillClass","iconName","e2e","appButtonClick"]],template:function(e,t){1&e&&(o.TgZ(0,"app-button",0),o.NdJ("appButtonClick",function(){return t.toggleVideo()}),o.ALo(1,"async"),o.ALo(2,"async"),o.ALo(3,"async"),o.ALo(4,"async"),o.qZA()),2&e&&o.Q6J("disabled",!o.lcZ(1,5,t.isCameraOptionEnabled$))("hoverTextTranslationKey",o.lcZ(2,7,t.isOwnVideoOn$)?"telephone.video_off":"telephone.video_on")("iconFillClass",o.lcZ(3,9,t.iconFillClass$))("iconName",o.lcZ(4,11,t.isOwnVideoOn$)?"video_on":"video_off")("e2e",t.e2e?t.e2e+"__camera-toggle":"")},directives:[u.V],pipes:[d.Ov],encapsulation:2}),i)},54278:function(e,r,a){"use strict";a.d(r,{z:function(){return x}});var c=a(8359),u=a(55197),d=a(75604),m=function(){function e(t,n){l(this,e),this.observables=t,this.project=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.observables,this.project))}}]),e}(),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}(a,e);var r=i(a);function a(e,t,n){var i;l(this,a),(i=r.call(this,e)).observables=t,i.project=n,i.toRespond=[];var s=t.length;i.values=new Array(s);for(var c=0;c<s;c++)i.toRespond.push(c);for(var u=0;u<s;u++){var f=t[u];i.add((0,d.D)(o(i),f,f,u))}return i}return f(a,[{key:"notifyNext",value:function(e,t,n,i,r){this.values[n]=t;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(e){if(0===this.toRespond.length){var n=[e].concat(t(this.values));this.project?this._tryProject(n):this.destination.next(n)}}},{key:"_tryProject",value:function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),a}(u.L),g=a(88002),p=a(37716),v=a(89670),b=a(39178),y=a(35019),_=a(38583),S=a(1704),w=a(8250);function k(e,t){if(1&e){var n=p.EpF();p.TgZ(0,"div",1),p.ALo(1,"async"),p.TgZ(2,"video-member",2),p.NdJ("onVisibilityChange$",function(e){var t=p.CHM(n).$implicit;return p.oxw().onVideoMemberVisibilityChange(e,t)}),p.ALo(3,"async"),p.qZA(),p.qZA()}if(2&e){var i=t.$implicit,r=t.ngForOf,o=p.oxw();p.ekj("mini-video__conference--grid-view",r.length>=3)("cinema-mode__conference--grid-view",r.length>=5)("cinema-mode__video-container--single-view",1===r.length),p.uIk("pageSize",p.lcZ(1,9,o.appliedPageSize$)),p.xp6(2),p.Q6J("member",i)("oneOnOneSelf",p.lcZ(3,11,o.oneOnOneSelf$))}}var C,x=((C=function(){function e(t,n,i){l(this,e),this.videoPaginationService=t,this.videoVisibilityService=n,this.apiAvEventStateService=i,this.appliedPageSize$=this.videoPaginationService.appliedPageSize$,this.currentPageMembers$=this.videoPaginationService.currentPageMembers$,this.oneOnOneSelf$=this.apiAvEventStateService.activeCallConferenceStateSelfMember$.pipe(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new m(t,n))}}(this.apiAvEventStateService.activeCallConferenceState$),(0,g.U)(function(e){var t=s(e,2),n=t[0],i=t[1];return(null==i?void 0:i.kind)===c.VW.OneOnOne?n:null}))}return f(e,[{key:"onVideoMemberVisibilityChange",value:function(e,t){this.videoVisibilityService.setMemberVisibility(t,e)}},{key:"trackMember",value:function(e,t){return t.uuid+t.feeds.map(function(e){return e.uuid}).join()}}]),e}()).\u0275fac=function(e){return new(e||C)(p.Y36(v.H),p.Y36(b.x),p.Y36(y.a))},C.\u0275cmp=p.Xpm({type:C,selectors:[["video-member-page"]],decls:2,vars:4,consts:[["class","cinema-mode__video-container","data-e2e","video-fragment__participants",3,"mini-video__conference--grid-view","cinema-mode__conference--grid-view","cinema-mode__video-container--single-view",4,"ngFor","ngForOf","ngForTrackBy"],["data-e2e","video-fragment__participants",1,"cinema-mode__video-container"],["observeVisibility","",3,"member","oneOnOneSelf","onVisibilityChange$"]],template:function(e,t){1&e&&(p.YNc(0,k,4,13,"div",0),p.ALo(1,"async")),2&e&&p.Q6J("ngForOf",p.lcZ(1,2,t.currentPageMembers$))("ngForTrackBy",t.trackMember)},directives:[_.sg,S.B,w.n],pipes:[_.Ov],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.cinema-mode__video-container[_ngcontent-%COMP%]{border-bottom:.2rem solid #000;border-right:.2rem solid #000;box-sizing:border-box;display:flex;height:50%;width:50%}.cinema-mode__video-container[_ngcontent-%COMP%]:nth-child(1){border-left:.2rem solid #000}.cinema-mode__video-container[_ngcontent-%COMP%]:nth-child(-n+3){border-top:.2rem solid #000}.cinema-mode__video-container[_ngcontent-%COMP%]:not(.cinema-mode__conference--grid-view):nth-child(3){border-left:.2rem solid #000;border-top:0}.cinema-mode__video-container.cinema-mode__video-container--single-view[_ngcontent-%COMP%]{height:100%;width:100%}.cinema-mode__video-container[_ngcontent-%COMP%]:not(.mini-video__conference--grid-view)[pageSize="4"]{height:100%}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="6"][_ngcontent-%COMP%]{height:calc(100% / 2);width:calc(100% / 3)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="6"][_ngcontent-%COMP%]:nth-child(3n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="9"][_ngcontent-%COMP%]{height:calc(100% / 3);width:calc(100% / 3)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="9"][_ngcontent-%COMP%]:nth-child(3n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="12"][_ngcontent-%COMP%]{height:calc(100% / 3);width:calc(100% / 4)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="12"][_ngcontent-%COMP%]:nth-child(4n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="16"][_ngcontent-%COMP%]{height:calc(100% / 4);width:calc(100% / 4)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="16"][_ngcontent-%COMP%]:nth-child(4n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="20"][_ngcontent-%COMP%]{height:calc(100% / 4);width:calc(100% / 5)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="20"][_ngcontent-%COMP%]:nth-child(5n+1){border-left:.2rem solid #000}.mini-video-overlay__mini-video[_ngcontent-%COMP%]   .cinema-mode__video-container[_ngcontent-%COMP%]{height:100%}.cinema-mode__participants-list[_ngcontent-%COMP%]{background-color:#fff;padding:1rem .2rem;width:32.5rem}@media screen and (max-width: 768px){.cinema-mode__participants-list[_ngcontent-%COMP%]{width:25rem}}.cinema-mode__participants-list[_ngcontent-%COMP%]     .mat-drawer-inner-container{overflow:hidden}.cinema-mode__participants-list[_ngcontent-%COMP%]   .cinema-mode__conference-name[_ngcontent-%COMP%]{color:#000}.cinema-mode__spinner[_ngcontent-%COMP%]{bottom:0;left:0;margin:auto;overflow:show;position:fixed;right:0;top:0;z-index:2}']}),C)},1704:function(e,t,n){"use strict";n.d(t,{B:function(){return te}});var i=n(88002),r=n(46782),o=n(79765),a=n(17564),s=n(8359),c=n(55430),u=n(37716),d=n(64676),m=n(62656),h=n(39249),g=n(63327),p=n(8106),v=n(88640),b=n(35019),y=n(80176),_=n(38583),S=n(33935),w=n(77746),k=n(56436),C=n(50501),x=n(44163),M=["videoPlayer"];function O(e,t){1&e&&u._UZ(0,"app-spinner",3)}var A,T=((A=function(){function e(t){l(this,e),this.apiAvFeedService=t,this.ngUnsubscribe=new o.xQ,this.VideoDisplayMode=c.n,this.videoDisplayMode=c.n.Fit}return f(e,[{key:"ngOnInit",value:function(){this.stream$=this.apiAvFeedService.getFeedStreamObservable(this.feed)}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.videoPlayer.nativeElement.remove(),this.videoPlayer.nativeElement.srcObject=null}}]),e}()).\u0275fac=function(e){return new(e||A)(u.Y36(C.D))},A.\u0275cmp=u.Xpm({type:A,selectors:[["video-feed"]],viewQuery:function(e,t){var n;1&e&&u.Gf(M,7),2&e&&u.iGM(n=u.CRH())&&(t.videoPlayer=n.first)},inputs:{feed:"feed",videoDisplayMode:"videoDisplayMode"},decls:5,vars:11,consts:[["class","video-feed__spinner",4,"ngIf"],["autoplay","","playsinline","",1,"video-feed__video",3,"srcObject"],["videoPlayer",""],[1,"video-feed__spinner"]],template:function(e,t){1&e&&(u.YNc(0,O,1,0,"app-spinner",0),u.ALo(1,"async"),u._UZ(2,"video",1,2),u.ALo(4,"async")),2&e&&(u.Q6J("ngIf",!u.lcZ(1,7,t.stream$)),u.xp6(2),u.ekj("video-feed__video--crop-mode",t.videoDisplayMode==t.VideoDisplayMode.Crop)("video-feed__video--fit-mode",t.videoDisplayMode!==t.VideoDisplayMode.Crop),u.Q6J("srcObject",u.lcZ(4,9,t.stream$)),u.uIk("data-e2e","video-fragment__"+(t.feed.screenshare?"screen-share-feed":"camera-feed")))},directives:[_.O5,x.S],pipes:[_.Ov],styles:["[_nghost-%COMP%]{align-content:center;display:flex;flex:1;flex-grow:1;justify-content:center}.video-feed__video[_ngcontent-%COMP%]{max-height:100vh;max-width:100vw;width:100%}.video-feed__video.hidden[_ngcontent-%COMP%]{display:none}.video-feed__video--crop-mode[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}.video-feed__video--fit-mode[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain}.video-feed__spinner[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}"]}),A),P=n(77310),F=n(29790),E=["dragBoundaryViewport"],Z=["dragElement"];function D(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",17),u.NdJ("dblclick",function(){return u.CHM(n),u.oxw().togglePinnedMember()}),u._UZ(1,"app-svg-icon",18),u.qZA()}}function I(e,t){1&e&&u._UZ(0,"app-svg-icon",19)}function j(e,t){1&e&&u._UZ(0,"app-svg-icon",20)}function U(e,t){1&e&&u._UZ(0,"app-svg-icon",21)}function L(e,t){if(1&e&&(u.TgZ(0,"div",22),u._UZ(1,"img",23),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Q6J("src",n.memberTalkingGifPath,u.LSH)}}function N(e,t){1&e&&u.GkF(0)}function V(e,t){if(1&e&&(u.ynx(0),u.YNc(1,N,1,0,"ng-container",27),u.BQk()),2&e){u.oxw(2);var n=u.MAs(14);u.xp6(1),u.Q6J("ngTemplateOutlet",n)}}function R(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",24,25),u.TgZ(2,"video-feed",26),u.NdJ("dblclick",function(){return u.CHM(n),u.oxw().togglePinnedMember()}),u.qZA(),u.YNc(3,V,2,1,"ng-container",8),u.ALo(4,"async"),u.qZA()}if(2&e){var i=u.oxw();u.xp6(2),u.Q6J("feed",i.primaryVideoFeed),u.xp6(1),u.Q6J("ngIf",u.lcZ(4,2,i.videoMemberDisplayOptions$).isSecondaryVideoDisplayed&&i.isPrimaryFeedScreenshare)}}function $(e,t){1&e&&u.GkF(0)}function B(e,t){if(1&e&&(u.ynx(0),u.YNc(1,$,1,0,"ng-container",27),u.BQk()),2&e){u.oxw();var n=u.MAs(14);u.xp6(1),u.Q6J("ngTemplateOutlet",n)}}function Y(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"video-feed",32),u.NdJ("dblclick",function(){return u.CHM(n),u.oxw(3).togglePinnedMember()}),u.ALo(1,"async"),u.ALo(2,"async"),u.qZA()}if(2&e){var i,r,o=u.oxw(3);u.ekj("video-member__mirrored",(!!o.member.self||o.oneOnOneSelf)&&(null==(i=u.lcZ(1,4,o.userConfig$))?null:i.isOwnVideoMirrored)),u.Q6J("feed",o.secondaryVideoFeed)("videoDisplayMode",null==(r=u.lcZ(2,6,o.videoMemberDisplayOptions$))?null:r.displayMode)}}function q(e,t){if(1&e&&(u._UZ(0,"video-feed",33),u.ALo(1,"async")),2&e){var n,i=u.oxw(3);u.Q6J("feed",i.tertiaryVideoFeed)("videoDisplayMode",null==(n=u.lcZ(1,2,i.videoMemberDisplayOptions$))?null:n.displayMode)}}function z(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",29,30),u.NdJ("cdkDragEnded",function(e){return u.CHM(n),u.oxw(2).calculatePositionVideoMember(e)}),u.YNc(2,Y,3,8,"video-feed",10),u.YNc(3,q,2,4,"video-feed",31),u.qZA()}if(2&e){var i=u.oxw(2);u.Q6J("cdkDragDisabled",!i.isPrimaryFeedScreenshare)("cdkDragBoundary",i.dragBoundaryViewport),u.xp6(2),u.Q6J("ngIf",i.secondaryVideoFeed),u.xp6(1),u.Q6J("ngIf",i.tertiaryVideoFeed)}}function J(e,t){if(1&e&&u.YNc(0,z,4,4,"div",28),2&e){var n=u.oxw();u.Q6J("ngIf",n.secondaryVideoFeed||n.tertiaryVideoFeed)}}function Q(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"video-feed",32),u.NdJ("dblclick",function(){return u.CHM(n),u.oxw().togglePinnedMember()}),u.ALo(1,"async"),u.ALo(2,"async"),u.ALo(3,"async"),u.qZA()}if(2&e){var i,r,o=u.oxw();u.ekj("video-member__mirrored",!o.isPrimaryFeedScreenshare&&!!o.member.self&&(null==(i=u.lcZ(1,4,o.userConfig$))?null:i.isOwnVideoMirrored)),u.Q6J("feed",u.lcZ(2,6,o.isScreenshareAndSecondaryVideoAvailableInMeeting$)?o.secondaryVideoFeed:o.primaryVideoFeed)("videoDisplayMode",null==(r=u.lcZ(3,8,o.videoMemberDisplayOptions$))?null:r.displayMode)}}function G(e,t){if(1&e&&(u.TgZ(0,"div",34),u._UZ(1,"app-svg-icon",35),u.qZA()),2&e){u.oxw();var n=u.MAs(23);u.Q6J("matMenuTriggerFor",n)}}function H(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",17),u.NdJ("dblclick",function(){return u.CHM(n),u.oxw().togglePinnedMember()}),u._UZ(1,"app-svg-icon",36),u.qZA()}}function W(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",40),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).toggleRaiseHand()}),u._UZ(1,"app-svg-icon",38),u._uU(2),u.ALo(3,"translate"),u.qZA()}if(2&e){var i=u.oxw(2);u.xp6(1),u.Q6J("icon",i.raisedHandIcon),u.xp6(1),u.hij(" ",u.lcZ(3,2,i.raisedHandText)," ")}}function K(e,t){if(1&e){var n=u.EpF();u.ynx(0),u.TgZ(1,"button",37),u.NdJ("click",function(){return u.CHM(n),u.oxw().togglePinnedMember()}),u._UZ(2,"app-svg-icon",38),u._uU(3),u.ALo(4,"translate"),u.qZA(),u.YNc(5,W,4,4,"button",39),u.BQk()}if(2&e){var i=u.oxw();u.xp6(2),u.Q6J("icon",i.pinnedIcon),u.xp6(1),u.hij(" ",u.lcZ(4,3,i.pinnedText)," "),u.xp6(2),u.Q6J("ngIf",i.member.self)}}function X(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",41),u.NdJ("click",function(){return u.CHM(n),u.oxw().toggleCropFitMode()}),u._UZ(1,"app-svg-icon",38),u.ALo(2,"async"),u._uU(3),u.ALo(4,"translate"),u.ALo(5,"async"),u.qZA()}if(2&e){var i,r,o=u.oxw();u.xp6(1),u.Q6J("icon",null==(i=u.lcZ(2,2,o.videoCropStatus$))?null:i.icon),u.xp6(2),u.hij(" ",u.lcZ(4,4,null==(r=u.lcZ(5,6,o.videoCropStatus$))?null:r.text)," ")}}function ee(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",42),u.NdJ("click",function(){return u.CHM(n),u.oxw().toggleSecondaryVideoDisplay()}),u._UZ(1,"app-svg-icon",38),u.ALo(2,"async"),u._uU(3),u.ALo(4,"translate"),u.ALo(5,"async"),u.qZA()}if(2&e){var i,r,o=u.oxw();u.xp6(1),u.Q6J("icon",null==(i=u.lcZ(2,2,o.secondaryVideoStatus$))?null:i.icon),u.xp6(2),u.hij(" ",u.lcZ(4,4,null==(r=u.lcZ(5,6,o.secondaryVideoStatus$))?null:r.text)," ")}}var te=function(){var e=function(){function e(t,n,r,a,c,u,d,f,m){l(this,e),this.videoPinnedMemberService=t,this.conferenceSpeakerIndicatorService=n,this.themeService=r,this.apiAvService=a,this.apiAvConnectionService=c,this.localUserConfigService=u,this.videoMemberDisplayOptionsService=d,this.apiAvEventStateService=f,this.videoMemberDragService=m,this.ngUnsubscribe=new o.xQ,this.raisedHandText="conference.raise_hand",this.raisedHandIcon="raise_hand",this.isHighlighted=!1,this.setMemberTalkingGifPath(),this.userConfig$=this.localUserConfigService.userConfig$,this.apiAvConnectionService.connectUntil(this.ngUnsubscribe),this.isOneOnOneCall$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,i.U)(function(e){return(null==e?void 0:e.kind)===s.VW.OneOnOne}))}return f(e,[{key:"ngOnInit",value:function(){var e=this;this.videoMemberDisplayOptions$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member),this.isPinned$=this.videoPinnedMemberService.pinnedMemberId$.pipe((0,i.U)(function(t){return t===e.member.uuid}),(0,r.R)(this.ngUnsubscribe)),this.isPinned$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.pinnedText=t?"conference.unpin_member":"conference.pin_member",e.pinnedIcon=t?"unpin":"pin"}),this.conferenceSpeakerIndicatorService.speaker$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.isHighlighted=e.conferenceSpeakerIndicatorService.isSpeaker(e.member)}),this.videoCropStatus$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member).pipe((0,i.U)(function(t){return e.mapDisplayOptions(t)}),(0,r.R)(this.ngUnsubscribe)),this.secondaryVideoStatus$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member).pipe((0,i.U)(function(t){return e.mapSecondaryDisplayOptions(t)}),(0,r.R)(this.ngUnsubscribe))}},{key:"ngOnChanges",value:function(){var e,t,n,r=this;this.primaryVideoFeed=this.getPrimaryFeed(),this.secondaryVideoFeed=this.getSecondaryFeed(),this.tertiaryVideoFeed=this.getTertiaryFeed(),this.isPrimaryFeedScreenshare=!!(null===(e=this.primaryVideoFeed)||void 0===e?void 0:e.screenshare),this.isScreenshareAndSecondaryVideoAvailableInMeeting$=this.isOneOnOneCall$.pipe((0,i.U)(function(e){return!(!r.isPrimaryFeedScreenshare||!r.secondaryVideoFeed||e)})),this.raisedHandText=(null===(t=this.member)||void 0===t?void 0:t.raise_hand)?"conference.lower_hand":"conference.raise_hand",this.raisedHandIcon=(null===(n=this.member)||void 0===n?void 0:n.raise_hand)?"lower_hand":"raise_hand"}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setMemberTalkingGifPath",value:function(){var e=this.themeService.getTheme(),t=this.themeService.getThemeLabel().toLowerCase();switch(e){case a.B.BTItaliaTheme:case a.B.TelekomTheme:this.memberTalkingGifPath="assets/gifs/".concat(t,"/member_talking.gif");break;default:this.memberTalkingGifPath="assets/gifs/member_talking.gif"}}},{key:"togglePinnedMember",value:function(){this.videoPinnedMemberService.togglePinnedMember(this.member)}},{key:"toggleRaiseHand",value:function(){this.apiAvService.toggleRaiseHand(this.member)}},{key:"toggleCropFitMode",value:function(){this.videoMemberDisplayOptionsService.toggleCropFitMode(this.member)}},{key:"toggleSecondaryVideoDisplay",value:function(){this.videoMemberDisplayOptionsService.toggleSecondaryVideoDisplay(this.member)}},{key:"calculatePositionVideoMember",value:function(e){this.videoMemberDragService.snapElement(this.dragBoundaryViewport.nativeElement,this.dragElement.nativeElement),e.source.reset()}},{key:"getPrimaryFeed",value:function(){return this.member.feeds?this.member.feeds.find(function(e){return e.screenshare})||this.member.feeds[0]:null}},{key:"getSecondaryFeed",value:function(){return this.oneOnOneSelf?this.getFirstNonScreenshareFeed(this.oneOnOneSelf.feeds):this.member.feeds?this.getFirstNonScreenshareFeed(this.member.feeds):null}},{key:"getTertiaryFeed",value:function(){var e;return this.member.feeds&&this.oneOnOneSelf&&(null===(e=this.primaryVideoFeed)||void 0===e?void 0:e.screenshare)?this.getFirstNonScreenshareFeed(this.member.feeds):null}},{key:"getFirstNonScreenshareFeed",value:function(e){return e.find(function(e){return!e.screenshare})||null}},{key:"mapDisplayOptions",value:function(e){return e.displayMode===c.n.Crop?this.getDisplayOptionObj("fit_video_solid","conference.video_crop_on"):this.getDisplayOptionObj("crop_video_solid","conference.video_crop_off")}},{key:"mapSecondaryDisplayOptions",value:function(e){return e.isSecondaryVideoDisplayed?this.getDisplayOptionObj("video_off","video.hide_speaker"):this.getDisplayOptionObj("video_on","video.show_speaker")}},{key:"getDisplayOptionObj",value:function(e,t){return{icon:e,text:t}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(d.G),u.Y36(m.W),u.Y36(h.f),u.Y36(g.y),u.Y36(p.Q),u.Y36(v.i),u.Y36(c.h),u.Y36(b.a),u.Y36(y.Z))},e.\u0275cmp=u.Xpm({type:e,selectors:[["video-member"]],viewQuery:function(e,t){var n;(1&e&&(u.Gf(E,5),u.Gf(Z,5)),2&e)&&(u.iGM(n=u.CRH())&&(t.dragBoundaryViewport=n.first),u.iGM(n=u.CRH())&&(t.dragElement=n.first))},hostVars:2,hostBindings:function(e,t){2&e&&u.ekj("video-member--highlighted",t.isHighlighted)},inputs:{member:"member",isSidebarView:"isSidebarView",oneOnOneSelf:"oneOnOneSelf"},features:[u.TTD],decls:30,vars:29,consts:[["class","video-member--video-off",3,"dblclick",4,"ngIf"],["class","video-member__raise-hand-indication","fill","white","icon","raise_hand","size","small","data-e2e","cinema-mode-fragment__raise-hand-indication",4,"ngIf"],[1,"video-member__member-info"],["fill","white","size","xs","icon","pin","data-e2e","cinema-mode-fragment__pin-participant",4,"ngIf"],["fill","mute-color","icon","mic_off","size","xs",4,"ngIf"],["data-e2e","cinema-mode-fragment__member-name",1,"video-member__member-name"],["class","video-member__member-talking",4,"ngIf"],["class","video-member__screenshare",4,"ngIf"],[4,"ngIf"],["screenshareMiniVideo",""],[3,"feed","videoDisplayMode","video-member__mirrored","dblclick",4,"ngIf"],["class","video-member__actions","data-e2e","video-action-menu-fragment__menu",3,"matMenuTriggerFor",4,"ngIf"],["videoOffView",""],["xPosition","before","yPosition","below"],["pinActions","matMenu"],["class","video-member__actions-menu-item","mat-menu-item","","data-e2e","video-action-menu-fragment__fit-or-crop-button",3,"click",4,"ngIf"],["class","video-member__actions-menu-item","mat-menu-item","",3,"click",4,"ngIf"],[1,"video-member--video-off",3,"dblclick"],["fill","video-off-color","icon","video_off",1,"video-member--video-off-icon"],["fill","white","icon","raise_hand","size","small","data-e2e","cinema-mode-fragment__raise-hand-indication",1,"video-member__raise-hand-indication"],["fill","white","size","xs","icon","pin","data-e2e","cinema-mode-fragment__pin-participant"],["fill","mute-color","icon","mic_off","size","xs"],[1,"video-member__member-talking"],["alt","",1,"video-member__member-talking-gif",3,"src"],[1,"video-member__screenshare"],["dragBoundaryViewport",""],[1,"video-member__feed",3,"feed","dblclick"],[4,"ngTemplateOutlet"],["class","video-member__screenshare-mini-video","data-e2e","video-fragment__own-preview--video","cdkDrag","",3,"cdkDragDisabled","cdkDragBoundary","cdkDragEnded",4,"ngIf"],["data-e2e","video-fragment__own-preview--video","cdkDrag","",1,"video-member__screenshare-mini-video",3,"cdkDragDisabled","cdkDragBoundary","cdkDragEnded"],["dragElement",""],[3,"feed","videoDisplayMode",4,"ngIf"],[3,"feed","videoDisplayMode","dblclick"],[3,"feed","videoDisplayMode"],["data-e2e","video-action-menu-fragment__menu",1,"video-member__actions",3,"matMenuTriggerFor"],["fill","dark-grey-color","icon","menu_horizontal","size","small"],["fill","video-off-color","icon","video_off"],["mat-menu-item","","data-e2e","video-action-menu-fragment__pin-button",1,"video-member__actions-menu-item",3,"click"],["fill","black","size","small",1,"video-member__actions-menu-icon",3,"icon"],["class","video-member__actions-menu-item","mat-menu-item","","data-e2e","video-action-menu-fragment__raise-hand-button",3,"click",4,"ngIf"],["mat-menu-item","","data-e2e","video-action-menu-fragment__raise-hand-button",1,"video-member__actions-menu-item",3,"click"],["mat-menu-item","","data-e2e","video-action-menu-fragment__fit-or-crop-button",1,"video-member__actions-menu-item",3,"click"],["mat-menu-item","",1,"video-member__actions-menu-item",3,"click"]],template:function(e,t){1&e&&(u.YNc(0,D,2,0,"div",0),u.YNc(1,I,1,0,"app-svg-icon",1),u.TgZ(2,"div",2),u.YNc(3,j,1,0,"app-svg-icon",3),u.ALo(4,"async"),u.YNc(5,U,1,0,"app-svg-icon",4),u.TgZ(6,"span",5),u._uU(7),u.ALo(8,"translate"),u.qZA(),u.qZA(),u.YNc(9,L,2,1,"div",6),u.YNc(10,R,5,4,"div",7),u.YNc(11,B,2,1,"ng-container",8),u.ALo(12,"async"),u.YNc(13,J,1,1,"ng-template",null,9,u.W1O),u.YNc(15,Q,4,10,"video-feed",10),u.ALo(16,"async"),u.YNc(17,G,2,1,"div",11),u.ALo(18,"async"),u.ALo(19,"async"),u.YNc(20,H,2,0,"ng-template",null,12,u.W1O),u.TgZ(22,"mat-menu",13,14),u.TgZ(24,"mat-list-item"),u.YNc(25,K,6,5,"ng-container",8),u.ALo(26,"async"),u.YNc(27,X,6,8,"button",15),u.YNc(28,ee,6,8,"button",16),u.ALo(29,"async"),u.qZA(),u.qZA()),2&e&&(u.Q6J("ngIf",!t.primaryVideoFeed||t.isSidebarView&&!t.secondaryVideoFeed),u.xp6(1),u.Q6J("ngIf",t.member.raise_hand),u.xp6(2),u.Q6J("ngIf",u.lcZ(4,13,t.isPinned$)),u.xp6(2),u.Q6J("ngIf",t.member.muted),u.xp6(2),u.hij(" ",t.member.self?u.lcZ(8,15,"conference.me"):t.member.caller_id_name," "),u.xp6(2),u.Q6J("ngIf",t.member.talking),u.xp6(1),u.Q6J("ngIf",!t.isSidebarView&&t.isPrimaryFeedScreenshare),u.xp6(1),u.Q6J("ngIf",!t.isPrimaryFeedScreenshare&&t.oneOnOneSelf&&u.lcZ(12,17,t.videoMemberDisplayOptions$).isSecondaryVideoDisplayed),u.xp6(4),u.Q6J("ngIf",u.lcZ(16,19,t.isScreenshareAndSecondaryVideoAvailableInMeeting$)||!t.isPrimaryFeedScreenshare&&t.primaryVideoFeed),u.xp6(2),u.Q6J("ngIf",!u.lcZ(18,21,t.isOneOnOneCall$)||u.lcZ(19,23,t.isOneOnOneCall$)&&t.primaryVideoFeed),u.xp6(8),u.Q6J("ngIf",!u.lcZ(26,25,t.isOneOnOneCall$)),u.xp6(2),u.Q6J("ngIf",!t.isSidebarView&&t.primaryVideoFeed&&!t.isPrimaryFeedScreenshare),u.xp6(1),u.Q6J("ngIf",t.isPrimaryFeedScreenshare&&(t.secondaryVideoFeed||u.lcZ(29,27,t.isOneOnOneCall$)&&t.primaryVideoFeed)))},directives:[_.O5,S.VK,w.Tg,k.u,T,_.tP,P.Zt,S.p6,S.OP],pipes:[_.Ov,F.X$],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;position:relative;width:100%}[_nghost-%COMP%]:hover   .video-member__actions[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]:after{border:.2rem solid transparent;bottom:0;content:"";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0;transition:border .3s;z-index:100}.video-member--video-off[_ngcontent-%COMP%]{align-items:center;justify-content:center;width:100%}.video-member__raise-hand-indication[_ngcontent-%COMP%]{border-radius:50%;left:1rem;padding:.2rem;position:absolute;top:1rem;z-index:1}.video-member__member-info[_ngcontent-%COMP%]{align-items:center;align-self:flex-end;background-color:#0000004d;color:#fff;display:flex;max-width:90%;padding:.3rem .5rem;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2}.video-member__member-name[_ngcontent-%COMP%]{margin-left:.3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.video-member__member-talking[_ngcontent-%COMP%]{align-items:center;align-self:flex-end;display:flex;height:2.5rem;padding:.5rem;position:absolute;right:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2}.video-member__member-talking[_ngcontent-%COMP%]   .video-member__member-talking-gif[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem}.video-member__actions[_ngcontent-%COMP%]{align-self:flex-start;background-color:#ffffff80;cursor:pointer;display:none;font-family:"Brix","Helvetica","Arial",sans-serif;font-size:1.4rem;position:absolute;right:0;z-index:200}.video-member__actions[_ngcontent-%COMP%]     app-svg-icon{padding:.8rem}.video-member__actions-menu-item[_ngcontent-%COMP%]{align-items:center;display:flex;padding:0 2.4rem;z-index:200}.video-member__actions-menu-icon[_ngcontent-%COMP%]{margin-right:2rem}.video-member__actions-kick-member[_ngcontent-%COMP%]{color:#b30000}.video-member--video-off[_ngcontent-%COMP%]{display:flex}.video-member--video-off-icon[_ngcontent-%COMP%]{height:100%;max-height:20rem}.video-member__screenshare[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.video-member__feed[_ngcontent-%COMP%]{height:100%;width:100%}.video-member__screenshare-mini-video[_ngcontent-%COMP%]{border:.2rem solid #fff;border-radius:.2rem;box-shadow:0 0 .5rem #000;height:auto;max-width:24rem;position:absolute;right:2%;top:5%;width:33%}.video-member__screenshare-mini-video.cdk-drag[_ngcontent-%COMP%]{cursor:move}.video-member__position--left-top[_ngcontent-%COMP%]{bottom:auto;left:2%;right:auto;top:5%}.video-member__position--right-top[_ngcontent-%COMP%]{bottom:auto;left:auto;right:2%;top:5%}.video-member__position--left-bottom[_ngcontent-%COMP%]{bottom:5%;left:2%;right:auto;top:auto}.video-member__position--right-bottom[_ngcontent-%COMP%]{bottom:5%;left:auto;right:2%;top:auto}.video-member__position--center-top[_ngcontent-%COMP%]{bottom:auto;left:50%;right:auto;top:5%}.video-member__position--center-bottom[_ngcontent-%COMP%]{bottom:5%;left:50%;right:auto;top:auto}.video-member__position--left-center[_ngcontent-%COMP%]{bottom:auto;left:2%;right:auto;top:50%}.video-member__position--right-center[_ngcontent-%COMP%]{bottom:auto;left:auto;right:2%;top:50%}.video-member__mirrored[_ngcontent-%COMP%]{transform:rotateY(180deg)}']}),e}()},79098:function(e,t,n){"use strict";n.d(t,{J:function(){return b}});var i=n(88002),r=n(37716),o=n(50501),a=n(1933),s=n(53264),c=n(38583),u=n(33935),d=n(77746),m=n(78023),h=n(29790);function g(e,t){if(1&e){var n=r.EpF();r.ynx(0),r.TgZ(1,"app-button",4),r.NdJ("appButtonClick",function(){return r.CHM(n),r.oxw().publishOwnScreenShare()}),r.ALo(2,"async"),r.ALo(3,"async"),r.qZA(),r.BQk()}if(2&e){var i=r.oxw();r.xp6(1),r.Q6J("iconFillClass",r.lcZ(2,3,i.iconFillClass$))("disabled",!r.lcZ(3,5,i.isVideoEnabled$))("e2e",i.e2e?i.e2e+"__screen-sharing":"")}}function p(e,t){if(1&e&&(r._UZ(0,"app-button",5),r.ALo(1,"async")),2&e){var n=r.oxw(),i=r.MAs(5);r.Q6J("iconFillClass",r.lcZ(1,3,n.iconFillClass$))("matMenuTriggerFor",i)("e2e",n.e2e?n.e2e+"__screen-sharing":"")}}var v,b=((v=function(){function e(t,n,r){l(this,e),this.apiAvFeedService=t,this.cinemaModeService=n,this.featureAccessVideoService=r,this.isVideoEnabled$=this.featureAccessVideoService.isVideoEnabled$,this.isOwnScreenShareOn$=this.apiAvFeedService.isOwnScreenShareOn$,this.iconFillClass$=this.cinemaModeService.isInCinemaMode$.pipe((0,i.U)(function(e){return e?"white":"button-color"}))}return f(e,[{key:"publishOwnScreenShare",value:function(){this.apiAvFeedService.publishOwnScreenShare()}},{key:"stopOwnScreenShare",value:function(){this.apiAvFeedService.stopOwnScreenShare()}}]),e}()).\u0275fac=function(e){return new(e||v)(r.Y36(o.D),r.Y36(a.H),r.Y36(s.x))},v.\u0275cmp=r.Xpm({type:v,selectors:[["video-screenshare-menu"]],inputs:{e2e:"e2e"},decls:14,vars:10,consts:[[4,"ngIf","ngIfElse"],["menuButton",""],["screenSharingMenu","matMenu"],["mat-menu-item","",3,"click"],["hoverTextTranslationKey","telephone.screenshare_on","iconName","screen_sharing",1,"phone-panel-actions__call-action__button",3,"iconFillClass","disabled","e2e","appButtonClick"],["hoverTextTranslationKey","telephone.screenshare_switch_or_off","iconName","screen_sharing",1,"phone-panel-actions__call-action__button",3,"iconFillClass","matMenuTriggerFor","e2e"]],template:function(e,t){if(1&e&&(r.YNc(0,g,4,7,"ng-container",0),r.ALo(1,"async"),r.YNc(2,p,2,5,"ng-template",null,1,r.W1O),r.TgZ(4,"mat-menu",null,2),r.TgZ(6,"mat-list-item"),r.TgZ(7,"button",3),r.NdJ("click",function(){return t.publishOwnScreenShare()}),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.qZA(),r.TgZ(10,"mat-list-item"),r.TgZ(11,"button",3),r.NdJ("click",function(){return t.stopOwnScreenShare()}),r._uU(12),r.ALo(13,"translate"),r.qZA(),r.qZA(),r.qZA()),2&e){var n=r.MAs(3);r.Q6J("ngIf",!r.lcZ(1,4,t.isOwnScreenShareOn$))("ngIfElse",n),r.xp6(8),r.hij(" ",r.lcZ(9,6,"telephone.screenshare_switch")," "),r.xp6(4),r.hij(" ",r.lcZ(13,8,"telephone.screenshare_off")," ")}},directives:[c.O5,u.VK,d.Tg,u.OP,m.V,u.p6],pipes:[c.Ov,h.X$],encapsulation:2}),v)},62656:function(e,t,n){"use strict";n.d(t,{W:function(){return d}});var i,r=n(87519),o=n(54395),a=n(26215),s=n(79765),c=n(37716),u=n(35019),d=((i=function(){function e(t){var n=this;l(this,e),this.conferenceV2Service=t,this.speakerSource=new a.X(null),this.speakerTalkingTimeout=new s.xQ,this.conferenceV2Service.activeCallConferenceState$.subscribe(function(e){if(!e)return n.clearSpeaker();!!e.members.find(function(e){var t;return e.uuid===(null===(t=n.speakerSource.getValue())||void 0===t?void 0:t.uuid)})||n.clearSpeaker(),e.members.forEach(function(e){n.updateMember(e)})}),this.speaker$=this.speakerSource.pipe((0,r.x)()),this.speakerTalkingTimeout.pipe((0,o.b)(1e3*e.debounceTimeInSecondsAfterSpeakingStopped)).subscribe(function(e){var t=n.speakerSource.getValue();(null==t?void 0:t.uuid)!==e.uuid||t.talking||n.clearSpeaker()})}return f(e,[{key:"isSpeaker",value:function(e){var t;return(null===(t=this.speakerSource.getValue())||void 0===t?void 0:t.uuid)===e.uuid}},{key:"updateMember",value:function(e){!e.floor||(e.talking?this.speakerSource.next(e):this.speakerTalkingTimeout.next(e))}},{key:"clearSpeaker",value:function(){this.speakerSource.next(null)}}]),e}()).debounceTimeInSecondsAfterSpeakingStopped=3,i.\u0275fac=function(e){return new(e||i)(c.LFG(u.a))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i)},80176:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i,r=((i=r||(r={})).LEFT="left",i.CENTER="center",i.RIGHT="right",i.TOP="top",i.BOTTOM="bottom",r),o=n(37716),a=function(){var e=function(){function e(t){l(this,e),this.prefixOfClass="video-member__position--",this.centerClass="center-center",this.availablePositions={x:[r.LEFT,r.CENTER,r.RIGHT],y:[r.TOP,r.CENTER,r.BOTTOM]},this.position=[r.RIGHT,r.TOP],this.renderer=t.createRenderer(null,null)}return f(e,[{key:"snapElement",value:function(e,t){this.dragViewportNativeElement=e,this.dragNativeElement=t,this.setBounding(e,t);var n=this.isSmallViewport(),i=this.getViewportGrid(),r=this.getElementCenter();this.calculatePosition(n,i,r),this.resetClasses(),this.addPositionClass(this.position),this.applyStyle(this.position)}},{key:"setBounding",value:function(e,t){this.viewportBounding=e.getBoundingClientRect(),this.elementBounding=t.getBoundingClientRect()}},{key:"calculatePosition",value:function(e,t,n){var i=[];return i[0]=n.x<t[1].x?n.x<t[0].x||e?r.LEFT:r.CENTER:r.RIGHT,i[1]=n.y<t[0].y?r.TOP:n.y<t[1].y?e?r.TOP:r.CENTER:r.BOTTOM,this.isOnCenterViewport(i)||(this.position=i),this.position}},{key:"isSmallViewport",value:function(){return this.elementBounding.height>this.viewportBounding.height/2}},{key:"getViewportGrid",value:function(){return[{x:Math.round(this.viewportBounding.x+this.viewportBounding.width/3),y:Math.round(this.viewportBounding.y+this.viewportBounding.height/3)},{x:Math.round(this.viewportBounding.x+2*this.viewportBounding.width/3),y:Math.round(this.viewportBounding.y+2*this.viewportBounding.height/3)}]}},{key:"getElementCenter",value:function(){return{x:Math.round(this.elementBounding.x+this.elementBounding.width/2),y:Math.round(this.elementBounding.y+this.elementBounding.height/2)}}},{key:"isOnCenterViewport",value:function(e){return e.join("-")===this.centerClass}},{key:"resetClasses",value:function(){var e=this;this.availablePositions.x.forEach(function(t){e.availablePositions.y.forEach(function(n){e.renderer.removeClass(e.dragNativeElement,e.prefixOfClass+t+"-"+n)})})}},{key:"addPositionClass",value:function(e){var t=this.prefixOfClass+e.join("-");this.renderer.addClass(this.dragNativeElement,t)}},{key:"applyStyle",value:function(e){var t=this.dragNativeElement.getBoundingClientRect();e[0]===r.CENTER?this.renderer.setStyle(this.dragNativeElement,"margin-left","-"+t.width/2+"px"):this.renderer.removeStyle(this.dragNativeElement,"margin-left"),e[1]===r.CENTER?this.renderer.setStyle(this.dragNativeElement,"margin-top","-"+t.height/2+"px"):this.renderer.removeStyle(this.dragNativeElement,"margin-top")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.FYo))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e}()},77581:function(e,t,n){"use strict";n.d(t,{r:function(){return y}}),n(6663),n(66071);var i=n(56247),r=n(67267),o=n(37716),a=n(22238),s=n(89937),c=n(234),u=n(38583),d=n(78023),m=n(29790);function h(e,t){if(1&e&&(o.TgZ(0,"li",14),o.TgZ(1,"span",15),o._uU(2),o.ALo(3,"uppercase"),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA()),2&e){var n=t.$implicit;o.xp6(2),o.hij(" ",o.lcZ(3,2,null==n?null:n.country)," "),o.xp6(3),o.hij(" ",null==n?null:n.number," ")}}var g,p=((g=function(){function e(t){l(this,e),this.meetingService=t,this.linkUrl="",this.meetingId="",this.dialInNumbers$=this.meetingService.dialInNumbers$}return f(e,[{key:"ngOnInit",value:function(){this.linkUrl=r.D.getInvitationUrl(this.meeting.link_id),this.meetingId=this.meeting.conference.code.replace(/(.{3})/g,"$& ").trim()}},{key:"copyInvitation",value:function(){this.meetingService.copyInvitation(this.meeting)}}]),e}()).\u0275fac=function(e){return new(e||g)(o.Y36(r.D))},g.\u0275cmp=o.Xpm({type:g,selectors:[["meeting-information"]],inputs:{meeting:"meeting",isCinemaMode:"isCinemaMode"},decls:28,vars:25,consts:[[1,"meeting-information__dialog"],["mat-dialog-title","","data-e2e","meeting-information-modal-fragment__meeting-title",1,"meeting-information__title"],[1,"meeting-information__content","mat-typography"],[1,"meeting-information__data"],[1,"meeting-information__data-title"],[1,"meeting-information__link-container"],["data-e2e","meeting-information-modal-fragment__meeting-link",1,"meeting-information__link"],["tooltipText","meetings.info_dialog.copy_link",1,"meeting-information__copy-button",3,"textToCopy"],["appSelectText","","data-e2e","meeting-information-modal-fragment__meeting-id",1,"meeting-information__meeting-id"],["data-e2e","meeting-information-modal-fragment__dial-in-numbers",1,"meeting-information__dial-in-numbers"],["data-e2e","meeting-information-modal-fragment__dial-in-number",4,"ngFor","ngForOf"],[1,"meeting-information__actions--context-menu"],["color","primary","buttonTextTranslationKey","meetings.info_dialog.close","type","basic-button","data-e2e","meeting-information-modal-fragment__close-popup",1,"meeting-information__actions--dialog-close",3,"mat-dialog-close"],["color","primary","buttonTextTranslationKey","meetings.info_dialog.copy","type","raised-button-submit","data-e2e","meeting-information-modal-fragment__copy_invitation--buttton",1,"meeting-information__copy-invitation",3,"appButtonClick"],["data-e2e","meeting-information-modal-fragment__dial-in-number"],[1,"meeting-information__country-name"],["appSelectText","",1,"meeting-information__country-number"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h2",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-dialog-content",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",5),o.TgZ(9,"div",6),o._uU(10),o.qZA(),o._UZ(11,"copy-to-clipboard-button",7),o.qZA(),o.qZA(),o.TgZ(12,"div",3),o.TgZ(13,"div",4),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.TgZ(16,"div",8),o._uU(17),o.qZA(),o.qZA(),o.TgZ(18,"div",3),o.TgZ(19,"div",4),o._uU(20),o.ALo(21,"translate"),o.qZA(),o.TgZ(22,"ul",9),o.YNc(23,h,6,4,"li",10),o.ALo(24,"async"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"mat-dialog-actions",11),o._UZ(26,"app-button",12),o.TgZ(27,"app-button",13),o.NdJ("appButtonClick",function(){return t.copyInvitation()}),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",t.meeting.description,"\n"),o.xp6(4),o.hij(" ",o.lcZ(7,17,"meetings.info_dialog.url")," "),o.xp6(2),o.ekj("cinema-mode",t.isCinemaMode),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode),o.xp6(1),o.hij(" ",t.linkUrl," "),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode),o.Q6J("textToCopy",t.linkUrl),o.xp6(3),o.hij(" ",o.lcZ(15,19,"meetings.info_dialog.meeting_id_for_dial_in")," "),o.xp6(3),o.hij(" ",t.meetingId," "),o.xp6(3),o.hij(" ",o.lcZ(21,21,"meetings.info_dialog.dial_in_numbers")," "),o.xp6(3),o.Q6J("ngForOf",o.lcZ(24,23,t.dialInNumbers$)),o.xp6(3),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode))},directives:[a.uh,a.xY,s.v,c.U,u.sg,a.H8,d.V,a.ZT],pipes:[m.X$,u.Ov,u.gd],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{max-height:95vh;max-width:90vw;width:56rem}.meeting-information__dialog[_ngcontent-%COMP%]{margin:2rem}.meeting-information__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3.6rem 0 0;padding:0}.meeting-information__title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:bold;height:2.2rem;margin:0}.meeting-information__data[_ngcontent-%COMP%]{margin-bottom:3rem}.meeting-information__data-title[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:.8rem}.meeting-information__link-container[_ngcontent-%COMP%]{background-color:#e5f7fd;border-radius:.8rem;display:flex;height:5.6rem}.meeting-information__link[_ngcontent-%COMP%]{align-items:center;display:flex;padding:0 1.5rem;width:85%}.meeting-information__copy-button[_ngcontent-%COMP%]{padding:.5rem 0}.meeting-information__meeting-id[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.meeting-information__dial-in-numbers[_ngcontent-%COMP%]{-moz-columns:2;columns:2;margin:0;padding:0;width:34.5rem}.meeting-information__dial-in-numbers[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;line-height:2rem}.meeting-information__country-name[_ngcontent-%COMP%]{width:2.5rem}.meeting-information__actions--context-menu[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:flex-end;min-height:4rem;padding:0}.meeting-information__actions--dialog-close[_ngcontent-%COMP%]{margin-right:.8rem}"]}),g),v=n(95105),b=n(25167),y=function(){var e=f(function e(){l(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[v.f],imports:[[b.m]]}),e}();o.B6R(i.Y,[p],[])},96292:function(e,t,n){"use strict";n.d(t,{$:function(){return _}});var i,r=n(38583),o=n(25167),a=n(62656),s=n(89670),c=n(50501),u=n(39178),d=n(54037),m=n(80176),h=n(71025),g=n(64676),p=n(53264),v=n(55430),b=n(77581),y=n(37716),_=((i=f(function e(t){l(this,e),this.videoVisibilityService=t})).\u0275fac=function(e){return new(e||i)(y.LFG(u.x))},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[a.W,s.H,u.x,d.s,m.Z,c.D,h.i,g.G,p.x,v.h],imports:[[r.ez,o.m,b.r]]}),i)},71025:function(t,n,i){"use strict";i.d(n,{i:function(){return C}});var r,o=i(8359),a=i(39485),s=i(26215),c=i(22759),u=i(94402),d=i(25917),m=i(59193),h=i(15257),g=i(45435),p=i(68307),v=i(43190),b=i(37716),y=i(91841),_=i(8320),S=i(35019),w=i(81836),k=i(57158),C=((r=function(){function t(e,n,i,r,o){var c=this;l(this,t),this.http=e,this.apiAvAuthorizationService=n,this.apiAvEventStateService=i,this.sipService=r,this.logger=o,this.apiUrl="".concat(a.N.API_URL,"/conference/v2"),this.ownCameraConnectionSubject=new s.X(null),this.ownScreenShareConnectionSubject=new s.X(null),this.feedStreamMap=new Map,this.feedConnectionMap=new Map,this.publisherSubscriberFeedIdMap=new Map,this.ownCameraConnection$=this.ownCameraConnectionSubject.asObservable(),this.ownScreenShareConnection$=this.ownScreenShareConnectionSubject.asObservable(),this.apiAvEventStateService.activeCallConferenceState$.subscribe(function(e){c.activeConferenceUuid=(null==e?void 0:e.uuid)||null})}return f(t,[{key:"getFeedStreamObservable",value:function(e){return this.getFeedStreamSubject(e).asObservable()}},{key:"publishOwnCameraStream",value:function(e){if(this.ownCameraConnectionSubject.getValue())this.logger.warn("Skipping publishing of own camera stream. Connection is already in use.");else{this.logger.debug("Creating new RTCPeerConnection for own camera stream.");var t=new RTCPeerConnection;this.ownCameraConnectionSubject.next(t),this.publishOwnStream(e,t)}}},{key:"publishOwnScreenShare",value:function(e){this.logger.debug("Creating new RTCPeerConnection for own screen-share stream.");var t=new RTCPeerConnection;this.ownScreenShareConnectionSubject.next(t),this.publishOwnStream(e,t,!0)}},{key:"unsubscribeAllRemoteStreams",value:function(){var e=this;this.logger.debug("Unsubscribing from all remote streams."),this.feedConnectionMap.forEach(function(t,n){e.unsubscribeFeed(n)})}},{key:"stopOwnCameraStream",value:function(){this.logger.debug("Stopping own camera stream."),this.stopOwnStream(this.ownCameraConnectionSubject,this.ownCameraFeed)}},{key:"stopOwnScreenShare",value:function(){this.logger.debug("Stopping own screen-share stream."),this.stopOwnStream(this.ownScreenShareConnectionSubject,this.ownScreenShareFeed)}},{key:"updateActiveFeeds",value:function(e){var t=this;this.feedConnectionMap.forEach(function(n,i){e.find(function(e){return e.uuid===i})||t.unsubscribeFeed(i)}),e.filter(function(e){var n,i;return e.uuid!==(null===(n=t.ownCameraFeed)||void 0===n?void 0:n.uuid)&&e.uuid!==(null===(i=t.ownScreenShareFeed)||void 0===i?void 0:i.uuid)}).forEach(function(e){return t.ensureFeedIsSubscribed(e)})}},{key:"getFeedStreamSubject",value:function(e){var t="string"==typeof e?e:e.uuid,n=this.feedStreamMap.get(t);return n||(n=new s.X(null),this.feedStreamMap.set(t,n)),n}},{key:"publishOwnStream",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,c.R)(t,"iceconnectionstatechange").subscribe(function(e){n.logger.debug("ICE connection state change for own publisher connection ".concat(i?"screen-share":"camera"," stream. Event:"),e)}),this.logger.debug("Publishing own stream. MediaStream is '".concat(e.active?"active":"inactive","' with ").concat(e.getVideoTracks().length," tracks present.")),this.makeSureVideoRoomIsPresent().pipe((0,h.q)(1),(0,g.h)(function(){return"closed"!==t.connectionState}),(0,p.b)(function(){var r=e.getVideoTracks()[0];r?(e.getVideoTracks().length>1&&n.logger.warn("Stream has more than one track. Only first track will be published, additional tracks are ignored."),r.onended=function(){n.logger.info("Stream track ended suddenly. Terminating stream sharing."),i?n.stopOwnScreenShare():n.stopOwnCameraStream()},n.logger.debug("Adding stream track to RTCPeerConnection. Track is of kind ".concat(r.kind," and ").concat(r.enabled?"enabled":"disabled"," with ready state '").concat(r.readyState,"'.")),t.addTrack(r,e),setTimeout(function(){n.logger.debug("Sender track after 5 seconds:",t.getSenders()[0].track)},5e3)):n.logger.error("Failed to publish own stream. No track found.")}),(0,v.w)(function(){return(0,u.D)(t.createOffer())}),(0,v.w)(function(e){return t.setLocalDescription(e)})).subscribe(function(){n.sendOfferToServer(t,e,i)})}},{key:"makeSureVideoRoomIsPresent",value:function(){var e=this;return this.logger.debug("Making sure video room is present."),this.apiAvEventStateService.activeCallConferenceState$.pipe((0,v.w)(function(t){return t?(e.logger.debug("Video room is already present. Continuing."),(0,d.of)(null)):(e.sipService.initVideoForActiveOneOnOneCall(),e.apiAvEventStateService.activeCallConferenceState$.pipe((0,g.h)(function(e){return!!e})))}))}},{key:"ensureFeedIsSubscribed",value:function(e){this.isFeedSubscribed(e)||this.subscribeFeed(e)}},{key:"isFeedSubscribed",value:function(e){return!!this.getFeedStreamSubject(e.uuid).getValue()}},{key:"subscribeFeed",value:function(e){var t=this;this.logger.debug("Subscribing to feed with UUID:",e.uuid),this.getFeedStreamSubject(e).next(new MediaStream),this.http.post("".concat(this.apiUrl,"/conferences/").concat(this.getActiveConferenceUuid(),"/feeds/").concat(e.uuid,"/subscriptions"),{},{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(function(n){t.publisherSubscriberFeedIdMap.set(e.uuid,n.uuid),t.initializeRemoteConnection(e,n)})}},{key:"initializeRemoteConnection",value:function(t,n){var i=this;this.logger.debug("Starting remote connection to receive stream of feed with UUID ".concat(t.uuid,"'."));var r={sdp:n.remote_sdp,type:"offer"},o=new RTCPeerConnection;this.feedConnectionMap.set(t.uuid,o),o.setRemoteDescription(r).then(function(){return function(e,t,n,i){return new(n||(n=Promise))(function(t,r){function o(e){try{s(i.next(e))}catch(t){r(t)}}function a(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){e.done?t(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,a)}s((i=i.apply(e,[])).next())})}(i,0,void 0,e().mark(function t(){var i;return e().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.createAnswer();case 2:return i=e.sent,e.next=5,o.setLocalDescription({sdp:i.sdp,type:"answer"});case 5:this.enableTrickle(i,n);case 6:case"end":return e.stop()}},t,this)}))});var a=[];o.onicecandidate=function(e){i.onIceCandidate(e,n.uuid,a)},o.ontrack=function(e){i.logger.debug("Received new track for stream of feed with UUID ".concat(t.uuid,"'.")),i.getFeedStreamSubject(t).next(e.streams[0])},setTimeout(function(){i.logger.debug("Receiver track for subscriber feed with UUID '".concat(t.uuid,"' after 5 seconds:"),o.getReceivers()[0].track)},5e3)}},{key:"removeTracksFromConnection",value:function(e){var t=e.getSenders();t.length&&t.forEach(function(t){"closed"!==e.signalingState&&e.removeTrack(t)})}},{key:"stopOwnStream",value:function(e,t){var n=e.getValue();n&&(n.close(),this.removeTracksFromConnection(n),e.next(null)),t&&(this.stopLocalFeed(t.uuid),this.deletePublisherFeed(t.uuid).subscribe())}},{key:"unsubscribeFeed",value:function(e){this.stopLocalFeed(e);var t=this.feedConnectionMap.get(e);t?(this.deleteSubscriptionFeed(e).subscribe(),this.feedConnectionMap.delete(e),t.close(),this.removeTracksFromConnection(t),this.logger.info("Closed an incoming video RTC connection. There are ".concat(this.feedConnectionMap.size," open connections left."))):this.logger.warn("Failed to stop incoming feed. No RTC connection found.")}},{key:"deletePublisherFeed",value:function(e){return this.logger.debug("Deleting publisher feed with UUID:",e),this.deleteFeed(e)}},{key:"deleteSubscriptionFeed",value:function(e){var t=this.publisherSubscriberFeedIdMap.get(e);return t?(this.logger.debug("Deleting subscription feed with UUID:",t),this.deleteFeed(t)):(this.logger.warn("Unable to delete subscription feed. Failed to get subscriber feed UUID from publisher feed UUID."),m.E)}},{key:"deleteFeed",value:function(e){return this.activeConferenceUuid?this.http.delete("".concat(this.apiUrl,"/conferences/").concat(this.getActiveConferenceUuid(),"/feeds/").concat(e),{headers:this.apiAvAuthorizationService.getAuthHeaders()}):m.E}},{key:"stopLocalFeed",value:function(e){this.logger.debug("Stopping stream for feed with UUID '".concat(e,"'."));var t=this.getFeedStreamSubject(e),n=t.getValue();n&&n.getTracks().forEach(function(e){return e.stop()}),t.next(null)}},{key:"sendOfferToServer",value:function(e,n){var i,r,a=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c={local_sdp:null===(i=e.localDescription)||void 0===i?void 0:i.sdp,trickle:!0,quality:o.wu.High,screenshare:s},u=[],l=!1;e.onicecandidate=function(e){e.candidate?u.push(e.candidate):(r&&a.sendCandidates(r,u.map(t.mapRTCIceCandidateToAPIAvFeedCandidate)),l=!0)},this.http.post("".concat(this.apiUrl,"/conferences/").concat(this.getActiveConferenceUuid(),"/feeds"),c,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(function(i){i.remote_sdp?(r=i.uuid,s?a.ownScreenShareFeed=i:a.ownCameraFeed=i,a.getFeedStreamSubject(i).next(n),"closed"!==e.connectionState?e.setRemoteDescription({sdp:i.remote_sdp,type:"answer"}).then(function(){l&&a.sendCandidates(r,u.map(t.mapRTCIceCandidateToAPIAvFeedCandidate))}):a.logger.warn("Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': The RTCPeerConnection's signalingState is 'closed'.")):a.logger.error("Failed to send feed offer to server. Received no 'remote_sdp' in answer.")})}},{key:"onIceCandidate",value:function(e,n,i){e.candidate?i.push(t.mapRTCIceCandidateToAPIAvFeedCandidate(e.candidate)):this.sendCandidates(n,i)}},{key:"enableTrickle",value:function(e,t){var n=this,i={local_sdp:e.sdp,trickle:!0};this.http.patch("".concat(this.apiUrl,"/conferences/").concat(this.getActiveConferenceUuid(),"/feeds/").concat(t.uuid),i,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(function(){n.logger.debug("Activated trickle option for video feed with SDP offer UUID '".concat(t.uuid,"'."))})}},{key:"sendCandidates",value:function(e,t){var n=this;this.logger.debug("Sending ".concat(t.length," candidates for feed with UUID:"),e);var i={candidates:t,count:t.length};this.http.post("".concat(this.apiUrl,"/conferences/").concat(this.getActiveConferenceUuid(),"/feeds/").concat(e,"/candidates"),i,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(function(){n.logger.debug("Send candidates for video feed with SDP offer UUID '".concat(e,"'."))})}},{key:"getActiveConferenceUuid",value:function(){if(!this.activeConferenceUuid){var e="Failed to make AV-API call. Active conference UUID is not available.";throw this.logger.error(e),new Error(e)}return this.activeConferenceUuid}}],[{key:"mapRTCIceCandidateToAPIAvFeedCandidate",value:function(e){return{candidate:e.candidate,m_line_index:e.sdpMLineIndex,mid:e.sdpMid}}}]),t}()).\u0275fac=function(e){return new(e||r)(b.LFG(y.eN),b.LFG(_.O),b.LFG(S.a),b.LFG(w.y),b.LFG(k.Kf))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r)},50501:function(e,n,i){"use strict";i.d(n,{D:function(){return E}});var r,o=i(26215),a=i(9112),c=i(88002),u=i(87519),d=i(45435),m=i(66888),h=i(94428),g=i(37716),p=i(91841),v=i(35019),b=i(725),y=i(71025),_=i(88640),S=i(60800),w=i(79765),k=i(22759),C=i(20945),x=i(68307),M=i(43190),O=i(46782),A=i(57158),T=((r=function(){function e(t){l(this,e),this.logger=t,this.destroyer=new w.xQ,this.videoElement=e.createElement("video"),this.canvasElement=e.createElement("canvas"),this.startSegmentation()}return f(e,[{key:"applyToStream",value:function(e,t){var n=this;if(!t)return e;this.mediaStream=e;var i=e.getVideoTracks()[0].getSettings(),r=i.width||640;void 0===i.width&&this.logger.warn("MediaTrackSettings width is undefined. MediaTrackSettings:",i);var o=i.height||480;return void 0===i.height&&this.logger.warn("MediaTrackSettings height is undefined. MediaTrackSettings:",i),void 0===i.frameRate&&this.logger.warn("MediaTrackSettings frameRate is undefined. MediaTrackSettings:",i),this.videoElement.width=this.canvasElement.width=r,this.videoElement.height=this.canvasElement.height=o,this.videoElement.srcObject=e,(0,k.R)(this.videoElement,"loadedmetadata").pipe((0,x.b)(function(){return n.videoElement.play()}),(0,M.w)(function(){return(0,C.F)(1e3/24)}),(0,M.w)(function(){return n.selfieSegmentation.send({image:n.videoElement})}),(0,O.R)(this.destroyer)).subscribe(),this.videoElement.load(),this.canvasElement.captureStream(24)}},{key:"destroy",value:function(){var e;this.selfieSegmentation.reset(),this.videoElement.pause(),null===(e=this.mediaStream)||void 0===e||e.getVideoTracks()[0].stop(),this.mediaStream=void 0,this.destroyer.next()}},{key:"startSegmentation",value:function(){this.selfieSegmentation=new S.SelfieSegmentation({locateFile:function(e){return"/assets/virtual-background/".concat(e)}}),this.selfieSegmentation.setOptions({modelSelection:1}),this.selfieSegmentation.onResults(this.onSelfieSegmentationResults.bind(this)),this.selfieSegmentation.initialize()}},{key:"onSelfieSegmentationResults",value:function(e){var t=this.canvasElement.getContext("2d"),n=this.canvasElement.width,i=this.canvasElement.height;t&&(t.save(),t.clearRect(0,0,n,i),t.drawImage(e.segmentationMask,0,0,n,i),t.globalCompositeOperation="source-in",t.drawImage(e.image,0,0,n,i),t.globalCompositeOperation="destination-atop",t.filter="blur(5px)",t.drawImage(e.image,0,0,n,i),t.restore())}}],[{key:"createElement",value:function(e){var t=document.createElement(e);return t.style.display="none",document.body.insertAdjacentElement("beforeend",t)}}]),e}()).\u0275fac=function(e){return new(e||r)(g.LFG(A.Kf))},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r),P=i(8225),F=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},E=function(){function e(t,n,i,r,f,h,g,p){var v=this;l(this,e),this.http=t,this.apiAvEventStateService=n,this.electronService=i,this.apiAvFeedConnectionService=r,this.localUserConfigService=f,this.virtualBackgroundService=h,this.deviceService=g,this.logger=p,this.isOwnCameraRequestedSource=new o.X(!1),this.isLoadingOwnCameraSource=new o.X(!1),this.isOwnCameraOn$=this.apiAvFeedConnectionService.ownCameraConnection$.pipe((0,c.U)(function(e){return!!e})),this.isOwnScreenShareOn$=this.apiAvFeedConnectionService.ownScreenShareConnection$.pipe((0,c.U)(function(e){return!!e})),this.isSomebodyElseScreenSharing$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,c.U)(function(t){return e.isSomebodyElseScreenSharing(t)}),(0,u.x)()),this.isAnyFeedPresent$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,c.U)(function(t){return e.isAnyFeedPresent(t)}),(0,u.x)()),this.localUserConfigService.userConfig$.subscribe(function(){return v.restartOwnCamera()}),this.deviceService.activeCamera$.pipe((0,u.x)(function(e,t){return(null==e?void 0:e.deviceId)===(null==t?void 0:t.deviceId)}),(0,d.h)(function(e){return null!==e})).subscribe(function(){return v.restartOwnCamera()}),this.apiAvEventStateService.activeCallConferenceState$.pipe((0,d.h)(function(e){return!e})).subscribe(function(){v.stopAllStreams()}),(0,a.aj)([this.isOwnCameraRequestedSource.pipe((0,u.x)()),this.isOwnCameraOn$]).pipe((0,m.n)(function(){return v.isLoadingOwnCameraSource.getValue()})).subscribe(function(e){var t=s(e,2),n=t[0],i=t[1];n&&!i?(v.logger.debug("Publishing own camera stream."),v.publishOwnCameraStream()):!n&&i&&(v.logger.debug("Stopping own camera stream."),v.virtualBackgroundService.destroy(),v.apiAvFeedConnectionService.stopOwnCameraStream())})}return f(e,[{key:"getFeedStreamObservable",value:function(e){return this.apiAvFeedConnectionService.getFeedStreamObservable(e)}},{key:"toggleOwnCamera",value:function(){this.isOwnCameraRequestedSource.next(!this.isOwnCameraRequestedSource.getValue())}},{key:"restartOwnCamera",value:function(){var e=this;this.isOwnCameraRequestedSource.value&&(this.isOwnCameraRequestedSource.next(!1),setTimeout(function(){return e.isOwnCameraRequestedSource.next(!0)},0))}},{key:"publishOwnScreenShare",value:function(){var t=this;this.stopOwnScreenShare(),this.electronService.desktop&&document.fullscreenElement&&document.exitFullscreen(),navigator.mediaDevices.getDisplayMedia(e.screenShareStreamConstraints).then(function(e){t.apiAvFeedConnectionService.publishOwnScreenShare(e)}).catch(function(e){t.logger.error("Failed to publish own screen-share feed. Error:",e)})}},{key:"stopOwnScreenShare",value:function(){this.apiAvFeedConnectionService.stopOwnScreenShare()}},{key:"stopAllStreams",value:function(){this.logger.debug("Stopping all video streams."),this.stopOwnCamera(),this.stopOwnScreenShare(),this.apiAvFeedConnectionService.unsubscribeAllRemoteStreams()}},{key:"updateFeedSubscriptionsForMembers",value:function(e){if(e.length){var n=[];e.forEach(function(e){n.push.apply(n,t(e.feeds))}),this.logger.debug("Making sure streams for ".concat(n.length," active feeds are present.")),this.apiAvFeedConnectionService.updateActiveFeeds(n)}else this.apiAvFeedConnectionService.unsubscribeAllRemoteStreams()}},{key:"stopOwnCamera",value:function(){this.isOwnCameraRequestedSource.next(!1),this.apiAvFeedConnectionService.stopOwnCameraStream()}},{key:"publishOwnCameraStream",value:function(){var e=this,t=this.deviceService.getActiveCamera();t?(this.isLoadingOwnCameraSource.next(!0),navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:t.deviceId}}).then(function(t){var n=e.localUserConfigService.getCurrentUserConfig().isVirtualBackgroundEnabled,i=e.virtualBackgroundService.applyToStream(t,n);e.apiAvFeedConnectionService.publishOwnCameraStream(i),e.isLoadingOwnCameraSource.next(!1)}).catch(function(t){e.logger.error("Failed to publish own video feed. Error:",t),e.isLoadingOwnCameraSource.next(!1)})):this.logger.error("Failed to publish own camera stream. No active camera set.")}}],[{key:"forEachFeed",value:function(e,t){!e||e.members.forEach(function(e){e.feeds.forEach(function(n){t(e,n)})})}},{key:"hasScreenShare",value:function(e){return!!e.feeds.find(function(e){return e.screenshare})}},{key:"isAnyFeedPresent",value:function(t){var n=!1;return e.forEachFeed(t,function(){n=!0}),n}},{key:"isSomebodyElseScreenSharing",value:function(t){var n=!1;return e.forEachFeed(t,function(e,t){n=n||!e.self&&t.screenshare}),n}}]),e}();E.screenShareStreamConstraints={video:{frameRate:15},audio:!1},E.\u0275fac=function(e){return new(e||E)(g.LFG(p.eN),g.LFG(v.a),g.LFG(b.d),g.LFG(y.i),g.LFG(_.i),g.LFG(T),g.LFG(P.I),g.LFG(A.Kf))},E.\u0275prov=g.Yz7({token:E,factory:E.\u0275fac}),F([(0,h.SD)({name:"ApiAvFeedService.isOwnCameraOn$"})],E.prototype,"isOwnCameraOn$",void 0),F([(0,h.SD)({name:"ApiAvFeedService.isOwnScreenShareOn$"})],E.prototype,"isOwnScreenShareOn$",void 0),F([(0,h.SD)({name:"ApiAvFeedService.isSomebodyElseScreenSharing$"})],E.prototype,"isSomebodyElseScreenSharing$",void 0),F([(0,h.SD)({name:"ApiAvFeedService.isAnyFeedPresent$"})],E.prototype,"isAnyFeedPresent$",void 0)},53264:function(e,t,n){"use strict";n.d(t,{x:function(){return A}});var i,r=n(88002),o=n(87519),a=n(9112),c=n(35019),u=n(94428),d=n(37716),m=n(50501),h=n(26215),g=n(45435),p=n(71289),v=n(68307),b=n(81836),y=n(79765),_=n(99445),S=((i=function(){function e(t,n){var i=this;l(this,e),this.sipService=t,this.callTrackerService=n,this.sipMessagesSource=new y.xQ,this.sipMessages$=this.sipMessagesSource.asObservable(),this.callTrackerService.activeCall$.subscribe(function(e){e&&i.sipService.sipUserAgent.on("message",function(e){return i.emitSipMessage(e)})})}return f(e,[{key:"emitSipMessage",value:function(e){this.sipMessagesSource.next(e)}}]),e}()).\u0275fac=function(e){return new(e||i)(d.LFG(b.y),d.LFG(_.k))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i),w=n(74688),k=n(57158),C=function(){return(e=C||(C={})).Invite="invite",e.OnHold="hold",e.OnHoldResume="resume",e.FeatureSet="featav",e.FeatureSetRequest="featreq",C;var e}(),x=function(){function e(t,n,i,s,c){var u=this;l(this,e),this.sipService=t,this.sipMessageService=n,this.callTrackerService=i,this.featureAccessService=s,this.logger=c,this.callFeatureSetMap=new Map,this.activeCallVideoFeatureSetSource=new h.X(null),this.canActiveCallReceiveVideo$=this.activeCallVideoFeatureSetSource.pipe((0,r.U)(function(e){return!!(null==e?void 0:e.videoreceive)}),(0,o.x)()),this.featureAccessService.isVideoAvailable$.subscribe(function(e){u.ownFeatureSet={videoreceive:!0,videosend:e,firstTime:!1}});var d=this.callTrackerService.activeCall$.pipe((0,g.h)(function(e){return!!e}));d.pipe((0,p.g)(500)).subscribe(function(){u.sendOwnFeatureSet()}),this.sipFeatureSetMessage$=this.sipMessageService.sipMessages$.pipe((0,g.h)(function(e){var t;return!!(null===(t=null==e?void 0:e.request)||void 0===t?void 0:t.callId)}),(0,r.U)(function(t){return{callId:e.toGeneralCallId(t.request.callId),event:JSON.parse(t.body)}}),(0,g.h)(function(e){return e.event.type===C.FeatureSet}),(0,v.b)(function(e){var t,n=null===(t=e.event)||void 0===t?void 0:t.data;n&&(u.logger.debug("Received feature set for call with ID:",e.callId),u.callFeatureSetMap.set(e.callId,n))}),(0,r.U)(function(){})),(0,a.aj)([d,this.sipFeatureSetMessage$]).subscribe(function(){var t=u.sipService.getActiveCall(),n=null==t?void 0:t.sipSession.request.callId;if(n){n=e.toGeneralCallId(n);var i=u.callFeatureSetMap.get(n)||null;u.activeCallVideoFeatureSetSource.next(i)}else u.activeCallVideoFeatureSetSource.next(null)})}return f(e,[{key:"sendOwnFeatureSet",value:function(){var e=this;this.sipService.activeCalls.forEach(function(t){t.accepted&&e.sipService.sendSIPMessage(t.sipSession,JSON.stringify({type:C.FeatureSet,source:"cloudya",data:e.ownFeatureSet}))})}}],[{key:"toGeneralCallId",value:function(e){return e.split("@")[0]}}]),e}();x.\u0275fac=function(e){return new(e||x)(d.LFG(b.y),d.LFG(S),d.LFG(_.k),d.LFG(w.q),d.LFG(k.Kf))},x.\u0275prov=d.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([(0,u.SD)({name:"ApiSipVideoFeatureSetService.canActiveCallReceiveVideo$"})],x.prototype,"canActiveCallReceiveVideo$",void 0);var M=n(8225),O=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},A=f(function e(t,n,i,u){l(this,e),this.apiAvFeedService=t,this.apiAvEventStateService=n,this.apiSipVideoFeatureSetService=i,this.devicesService=u,this.isCinemaModeAvailable$=this.apiAvFeedService.isAnyFeedPresent$,this.isVideoEnabled$=(0,a.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.apiSipVideoFeatureSetService.canActiveCallReceiveVideo$]).pipe((0,r.U)(function(e){var t=s(e,2),n=t[0],i=t[1];return c.a.isOneOnOneState(n)?i:!!(null==n?void 0:n.video)})),this.isCameraOptionEnabled$=(0,a.aj)([this.isVideoEnabled$,this.devicesService.videoInputDevices$.pipe((0,r.U)(function(e){return!!e.length}))]).pipe((0,r.U)(function(e){var t=s(e,2),n=t[0],i=t[1];return n&&i}),(0,o.x)())});A.\u0275fac=function(e){return new(e||A)(d.LFG(m.D),d.LFG(c.a),d.LFG(x),d.LFG(M.I))},A.\u0275prov=d.Yz7({token:A,factory:A.\u0275fac}),O([(0,u.SD)({name:"FeatureAccessVideoService.isCinemaModeAvailable$"})],A.prototype,"isCinemaModeAvailable$",void 0),O([(0,u.SD)({name:"FeatureAccessVideoService.isVideoEnabled$"})],A.prototype,"isVideoEnabled$",void 0),O([(0,u.SD)({name:"FeatureAccessVideoService.isCameraOptionEnabled$"})],A.prototype,"isCameraOptionEnabled$",void 0)},55430:function(e,t,n){"use strict";n.d(t,{n:function(){return a},h:function(){return s}});var i,r=n(26215),o=n(37716),a=((i=a||(a={}))[i.Crop=0]="Crop",i[i.Fit=1]="Fit",a),s=function(){var e=function(){function e(){l(this,e),this.memberDisplayOptions=new Map}return f(e,[{key:"getObservableForMember",value:function(e){return this.getSubjectOfMember(e).asObservable()}},{key:"toggleCropFitMode",value:function(e){this.updateMemberDisplayOptions(e,function(e){e.displayMode=e.displayMode===a.Crop?a.Fit:a.Crop})}},{key:"toggleSecondaryVideoDisplay",value:function(e){this.updateMemberDisplayOptions(e,function(e){e.isSecondaryVideoDisplayed=!e.isSecondaryVideoDisplayed})}},{key:"getSubjectOfMember",value:function(t){var n=this.memberDisplayOptions.get(t.uuid);return n||(n=new r.X(e.getDefaultOptions()),this.memberDisplayOptions.set(t.uuid,n)),n}},{key:"updateMemberDisplayOptions",value:function(e,t){var n=this.getSubjectOfMember(e),i=n.getValue();t(i=Object.assign({},i)),n.next(i)}}],[{key:"getDefaultOptions",value:function(){return{displayMode:a.Crop,isSecondaryVideoDisplayed:!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e}()},54037:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i,r=n(50501),o=n(37716),a=((i=function(){function e(){l(this,e)}return f(e,[{key:"sort",value:function(t){!t||(t.members=e.sortMembers(t.members))}}],[{key:"sortMembers",value:function(e){return e.sort(function(e,t){var n=r.D.hasScreenShare(e),i=r.D.hasScreenShare(t);return n&&!i?-1:i&&!n?1:e.self?-1:t.self?1:e.raise_hand&&!t.raise_hand?-1:t.raise_hand&&!e.raise_hand?1:e.caller_id_name.localeCompare(t.caller_id_name)})}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac}),i)},89670:function(e,t,n){"use strict";n.d(t,{H:function(){return _}});var i,r=n(35019),o=n(8359),a=n(26215),c=n(9112),u=n(88640),d=n(88002),m=n(50501),h=n(37716),g=n(64676),p=n(54037),v=n(62656),b=n(1933),y=n(57158),_=((i=function(){function e(t,n,i,o,u,f,m,h){var g=this;l(this,e),this.apiAvEventStateService=t,this.localUserConfigService=n,this.videoPinnedMemberService=i,this.videoMemberSortService=o,this.conferenceSpeakerIndicatorService=u,this.cinemaModeService=f,this.apiAvFeedService=m,this.logger=h,this.numberOfScreenShares=0,this.currentPageIndexSource=new a.X(0),this.hasPreviousPageSource=new a.X(!1),this.hasNextPageSource=new a.X(!1),this.isSpeakerVisibleSource=new a.X(!1),this.appliedPageSizeSource=new a.X(6),this.currentPageMembersSource=new a.X([]),this.currentPageIndex$=this.currentPageIndexSource.asObservable(),this.hasPreviousPage$=this.hasPreviousPageSource.asObservable(),this.hasNextPage$=this.hasNextPageSource.asObservable(),this.appliedPageSize$=this.appliedPageSizeSource.asObservable(),this.currentPageMembers$=this.currentPageMembersSource.asObservable(),(0,c.aj)([this.localUserConfigService.userConfig$,this.apiAvEventStateService.activeCallConferenceState$,this.conferenceSpeakerIndicatorService.speaker$,this.videoPinnedMemberService.pinnedMemberId$,this.currentPageIndex$,this.cinemaModeService.isInCinemaMode$]).subscribe(function(e){var t=s(e,6),n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],c=t[5];g.updatePagination(n,i,r,o,a,c)}),this.isPaginationAvailable$=(0,c.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.videoPinnedMemberService.pinnedMemberId$,this.hasPreviousPage$,this.hasNextPage$]).pipe((0,d.U)(function(e){var t=s(e,4),n=t[0],i=t[1],o=t[2],a=t[3];return!r.a.isOneOnOneState(n)&&!i&&(o||a)})),this.apiAvFeedService.isSomebodyElseScreenSharing$.subscribe(function(){g.jumpToFirstPage()})}return f(e,[{key:"previousPage",value:function(){this.hasPreviousPageSource.getValue()?this.currentPageIndexSource.next(this.currentPageIndexSource.getValue()-1):this.logger.error("Failed to navigate to previous page of cinema mode. There is no previous page.")}},{key:"nextPage",value:function(){this.hasNextPageSource.getValue()?this.currentPageIndexSource.next(this.currentPageIndexSource.getValue()+1):this.logger.error("Failed to navigate to next page of cinema mode. There is no next page.")}},{key:"jumpToFirstPage",value:function(){this.currentPageIndexSource.next(0)}},{key:"isMemberOnCurrentPage",value:function(e,t){return!!t.members.slice(this.getMemberStartIndex(),this.getMemberEndIndex()).find(function(t){return t.uuid===e.uuid})}},{key:"updatePagination",value:function(t,n,i,r,o,a){var s=e.getNumberOfMembers(n);if(this.calculateAppliedPageSize(r,t.cinemaModeVideosPerPage,n,a),this.calculateNumberOfScreenShares(n),!o||this.hasPageWithIndex(o,s)){var c,u=this.hasPageWithIndex(o-1,s),l=this.hasPageWithIndex(o+1,s);this.hasPreviousPageSource.next(u),this.hasNextPageSource.next(l),c=!(!n||!i)&&(r?r===i.uuid:o<this.numberOfScreenShares?n.members[o].uuid===i.uuid:this.isMemberOnCurrentPage(i,n)),this.isSpeakerVisibleSource.next(c),this.updateMembersOfCurrentPage(n,r)}else this.previousPage()}},{key:"calculateAppliedPageSize",value:function(t,n,i,r){if(t||(null==i?void 0:i.kind)===o.VW.OneOnOne)this.appliedPageSizeSource.next(1);else if(r){var a=e.getNumberOfMembers(i),s=n;a&&a<n&&u.i.pageSizeOptions.forEach(function(e){e<s&&e>=a&&(s=e)}),this.appliedPageSizeSource.next(s)}else this.appliedPageSizeSource.next(4)}},{key:"calculateNumberOfScreenShares",value:function(e){var t=this;this.numberOfScreenShares=0,m.D.forEachFeed(e,function(e,n){n.screenshare&&t.numberOfScreenShares++})}},{key:"isPageIndexScreenSharePage",value:function(e){return e-this.numberOfScreenShares<0}},{key:"hasPageWithIndex",value:function(e,t){if(!t||e<0)return!1;var n=this.appliedPageSizeSource.getValue();return t>e*n-this.numberOfScreenShares*(n-1)}},{key:"updateMembersOfCurrentPage",value:function(e,t){if(e)if(e.kind!==o.VW.OneOnOne)if(t)this.currentPageMembersSource.next(e.members.filter(function(e){return e.uuid===t}));else{this.videoMemberSortService.sort(e);var n=e.members.slice(this.getMemberStartIndex(),this.getMemberEndIndex());this.currentPageMembersSource.next(n)}else this.currentPageMembersSource.next(e.members.filter(function(e){return!e.self}));else this.currentPageMembersSource.next([])}},{key:"getMemberStartIndex",value:function(){var e=this.currentPageIndexSource.getValue();if(this.isPageIndexScreenSharePage(e))return e;var t=this.appliedPageSizeSource.getValue();return this.numberOfScreenShares+(e-this.numberOfScreenShares)*t}},{key:"getMemberEndIndex",value:function(){var e=this.appliedPageSizeSource.getValue(),t=this.currentPageIndexSource.getValue();return this.isPageIndexScreenSharePage(t)?this.getMemberStartIndex()+1:this.getMemberStartIndex()+e}}],[{key:"getNumberOfMembers",value:function(e){return e?e.members.length:0}}]),e}()).\u0275fac=function(e){return new(e||i)(h.LFG(r.a),h.LFG(u.i),h.LFG(g.G),h.LFG(p.s),h.LFG(v.W),h.LFG(b.H),h.LFG(m.D),h.LFG(y.Kf))},i.\u0275prov=h.Yz7({token:i,factory:i.\u0275fac}),i)},64676:function(e,t,n){"use strict";n.d(t,{G:function(){return d}});var i,r=n(26215),o=n(66682),a=n(37716),s=n(81836),c=n(35019),u=n(57158),d=((i=function(){function e(t,n,i){var a=this;l(this,e),this.sipService=t,this.apiAvEventStateService=n,this.logger=i,this.pinnedMemberIdSource=new r.X(null),this.pinnedMemberId$=this.pinnedMemberIdSource.asObservable(),(0,o.T)(this.sipService.callEnded$,this.sipService.callResume$,this.sipService.outgoingCallStarted$).subscribe(function(){a.removePinnedMember()})}return f(e,[{key:"togglePinnedMember",value:function(e){var t=this.pinnedMemberIdSource.getValue()===e.uuid;this.removePinnedMember(),!t&&(this.pinnedMemberIdSource.next(e.uuid),this.logger.info("Pinned member '".concat(null==e?void 0:e.caller_id_name,"'.")))}},{key:"removePinnedMember",value:function(){!this.pinnedMemberIdSource.getValue()||(this.pinnedMemberIdSource.next(null),this.logger.info("Pinned member removed."))}},{key:"removePinnedMemberDelayed",value:function(){var t=this;this.cancelRemovePinnedMemberDelayed(),this.unPinTimeoutId=setTimeout(function(){t.logger.info("Un-pinning video after video-feed ended and delay time is exceeded."),t.removePinnedMember()},e.unPinMemberDelay)}},{key:"cancelRemovePinnedMemberDelayed",value:function(){this.unPinTimeoutId&&clearTimeout(this.unPinTimeoutId)}}]),e}()).unPinMemberDelay=3e3,i.\u0275fac=function(e){return new(e||i)(a.LFG(s.y),a.LFG(c.a),a.LFG(u.Kf))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac}),i)},39178:function(e,t,n){"use strict";n.d(t,{x:function(){return h}});var i,r=n(79765),o=n(9112),a=n(88002),c=n(37716),u=n(35019),d=n(50501),m=n(57158),h=((i=function(){function e(t,n,i){var c=this;l(this,e),this.apiAvEventStateService=t,this.apiAvFeedService=n,this.logger=i,this.visibleMembersUpdateSource=new r.xQ,this.visibleMembersCountMap=new Map,(0,o.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.visibleMembersUpdateSource.asObservable()]).pipe((0,a.U)(function(e){var t=s(e,1)[0];return t?t.members.filter(function(e){return c.getVisibilityCount(e.uuid)}):[]})).subscribe(function(e){c.logger.debug("Subscribing to video feeds of ".concat(e.length," visible members.")),c.apiAvFeedService.updateFeedSubscriptionsForMembers(e)})}return f(e,[{key:"setMemberVisibility",value:function(e,t){e.self||(t?this.incrementVisibilityCount(e.uuid):this.decrementVisibilityCount(e.uuid))}},{key:"incrementVisibilityCount",value:function(e){var t=this.getVisibilityCount(e);this.visibleMembersCountMap.set(e,t+1),this.visibleMembersUpdateSource.next()}},{key:"decrementVisibilityCount",value:function(e){var t=this;setTimeout(function(){var n=t.getVisibilityCount(e);n?(t.visibleMembersCountMap.set(e,n-1),t.visibleMembersUpdateSource.next()):t.logger.warn("Failed to decrement visibility count for member with UUID '".concat(e,"'. Count is already 0. Visibility."))},1e3)}},{key:"getVisibilityCount",value:function(e){return this.visibleMembersCountMap.get(e)||0}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(u.a),c.LFG(d.D),c.LFG(m.Kf))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac}),i)}}])}();