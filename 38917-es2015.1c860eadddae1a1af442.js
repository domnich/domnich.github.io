"use strict";(self.webpackChunkcloudya=self.webpackChunkcloudya||[]).push([[38917],{38917:function(e,t,n){n.r(t),n.d(t,{SettingsModule:function(){return Ki}});var i=n(3679),o=n(91841),s=n(39210),a=n(25167),r=n(11223),l=n(75382),c=n(42061),g=n(25278),d=n(17490),p=n(79765),u=n(9112),f=n(46782),_=n(37816),m=n(37716),h=n(8307),b=n(86900),C=n(45832);let x=(()=>{class e extends _.H{constructor(e,t,n,i){super(e),this.router=e,this.route=t,this.callForwardingService=n,this.snackBarService=i,this.profilesCache=new Map,this.rulesCache=new Map,this.ngUnsubscribe=new p.xQ,this.profiles=[],this.isLoadingProfiles=!0,this.loadProfiles()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadProfiles(){(0,u.aj)([this.callForwardingService.getList(),this.callForwardingService.profiles$]).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(([e,t])=>{const n=t||e;n&&(this.profiles=n,n.forEach(e=>{this.cacheProfile(e)}),this.onProfilesLoaded())})}onProfilesLoaded(){this.isLoadingProfiles=!1}activateProfile(e){this.snackBarService.open("settings.profiles.activating"),this.callForwardingService.activateProfile(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(t=>{e.update(t),this.profileSaved(e),this.snackBarService.openInfo("settings.profiles.activated",!0)})}profileSaved(e){this.cacheProfile(e)}cacheProfile(e){this.profilesCache.has(e.id)?this.profilesCache.get(e.id).update(e):this.profilesCache.set(e.id,e),e.rules.forEach(e=>{this.cacheRule(e)})}cacheProfileDelete(e){this.profilesCache.delete(e.id)}cacheRule(e){this.rulesCache.has(e.id)?this.rulesCache.get(e.id).update(e):this.rulesCache.set(e.id,e)}cacheRuleDelete(e){this.rulesCache.delete(e.id)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(h.F0),m.Y36(h.gz),m.Y36(b.V),m.Y36(C.c))},e.\u0275dir=m.lG2({type:e,features:[m.qOj]}),e})(),v=(()=>{class e{}return e.PHONENUMBER="phonenumber",e.BUSY="busy",e.VOICEMAIL="voicemail",e})();var P=n(22238),M=n(90625),O=n(87636),w=n(89973),y=n(38583),Z=n(98295),k=n(83166),A=n(85499),T=n(67441),q=n(42070),S=n(72458),I=n(56436),N=n(29790);const E=["connectedElement"];function U(e,t){if(1&e&&(m.TgZ(0,"mat-option",20),m._uU(1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e.id),m.xp6(1),m.hij(" ",e.name," ")}}function R(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",16),m.TgZ(1,"mat-form-field",17),m.TgZ(2,"mat-select",18),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().selectedProfileId=t}),m.ALo(3,"translate"),m.YNc(4,U,2,2,"mat-option",19),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngModel",e.selectedProfileId)("placeholder",m.lcZ(3,3,"settings.profiles.metadata.select_profile")),m.xp6(2),m.Q6J("ngForOf",e.profiles)}}function L(e,t){if(1&e&&(m.TgZ(0,"mat-option",21),m._uU(1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e),m.xp6(1),m.hij(" #",e," ")}}function J(e,t){1&e&&m._UZ(0,"app-svg-icon",26)}function F(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",24),m.NdJ("click",function(t){const n=m.CHM(e).$implicit;return m.oxw(2).selectNewProfileColor(t,n)}),m.YNc(1,J,1,0,"app-svg-icon",25),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw(2);m.Q6J("ngClass",n.colorClass(e)),m.xp6(1),m.Q6J("ngIf",n.colorSelected(e))}}function Q(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",22),m.NdJ("closeFn",function(){return m.CHM(e),m.oxw().toggleColorPicker()}),m.YNc(1,F,2,2,"button",23),m.qZA()}if(2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.availableColors)}}let D=(()=>{class e{constructor(t,n,i){this.dialogRef=t,this.data=n,this.overlay=i,this.ngUnsubscribe=new p.xQ,this.colors=e.numbersArray(16),this.numbers=e.numbersArray(9),this.isColorPickerShown=!1,this.profile=this.data.profile,this.copyProfile=this.data.copyProfile,this.profiles=this.data.profiles,this.isNew=this.data.profile.isNew()}ngAfterViewInit(){this.configureOverlay()}ngOnDestroy(){this.detachOverlay(),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getActionText(e){return e+(this.copyProfile?"duplicate":this.isNew?"create":"edit")}colorClass(e){return`profile-metadata__color${e}${this.colorSelected(e)?" profile-metadata__color--selected":""}`}saveProfile(){if(this._profile.name=this.name,this._profile.color=this.color,this._profile.color_index=this.colorIndex,this.copyProfile&&this.profiles&&this.profiles.length&&this._profile&&this._profile.hasOwnProperty("rules")){const e=this.profiles.filter(e=>e.id===this.selectedProfileId)[0];this._profile.rules=e.rules}this._profile.number=this.number,this.close(this._profile)}close(e){this.dialogRef.close(e)}toggleColorPicker(){this.isColorPickerShown=!this.isColorPickerShown,this.isColorPickerShown?(this.$connectedElement.nativeElement.blur(),this.overlayRef.attach(this.$template)):this.detachOverlay()}selectNewProfileColor(e,t){this.color=window.getComputedStyle(e.target).getPropertyValue("background-color"),this.colorIndex=t,this.toggleColorPicker()}disableSaveButton(){let e=[this.name,this.number,this.colorIndex];return e=this.copyProfile?[this.selectedProfileId,...e]:e,!this.validEntries(e)}configureOverlay(){this.overlayRef=this.overlay.create(new M.X_({hasBackdrop:!0,positionStrategy:this.overlay.position().connectedTo(this.$connectedElement,{originX:"start",originY:"top"},{overlayX:"start",overlayY:"top"})})),this.overlayRef.backdropClick().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.detachOverlay()}),this.overlayRef.keydownEvents().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.isColorPickerShown&&"ESCAPE"===e.key&&(e.stopPropagation(),this.detachOverlay())})}getAvailable(e,t,n){const i=e.filter(e=>t.indexOf(e)<0);return n&&(i.push(n),i.sort()),i}validEntries(e){return e.every(e=>e)}colorSelected(e){return this.colorIndex===e}detachOverlay(){this.overlayRef.detach(),this.isColorPickerShown=!1}static numbersArray(e){return Array.from(Array(e+1).keys()).slice(1)}set profile(e){this._profile=e,e.name?(this.name=e.name,this.color=e.color,this.colorIndex=e.color_index,this.number=e.number,this.isNew=e.isNew()):(this.colorIndex=this.availableColors[0],this.number=this.availableNumbers[0])}get availableNumbers(){return this.getAvailable(this.numbers,this.data.profileNumbers,this.data.profile.number)}get availableColors(){return this.getAvailable(this.colors,this.data.profileColors,this.data.profile.color_index)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(P.so),m.Y36(P.WI),m.Y36(M.aV))},e.\u0275cmp=m.Xpm({type:e,selectors:[["profile-metadata"]],viewQuery:function(e,t){if(1&e&&(m.Gf(O.ig,5),m.Gf(E,5)),2&e){let e;m.iGM(e=m.CRH())&&(t.$template=e.first),m.iGM(e=m.CRH())&&(t.$connectedElement=e.first)}},decls:19,vars:14,consts:[["data-e2e","call-forwarding-profile-modal-fragment",1,"profile-metadata__container"],["e2e","call-forwarding-profile-modal-fragment",1,"profile-metadata__edit",3,"title"],["class","profile-metadata__duplicate",4,"ngIf"],[1,"profile-metadata__row"],["floatPlaceholder","never",1,"profile-metadata__title"],["matInput","","required","","type","text","data-e2e","call-forwarding-profile-modal-fragment__name--input",1,"profile-metadata__title__input",3,"ngModel","focus","placeholder","ngModelChange"],["tabindex","0",1,"profile-metadata__color",3,"click"],["connectedElement",""],["data-e2e","call-forwarding-profile-modal-fragment__color-picker",1,"profile-metadata__color-area",3,"ngClass"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],[1,"profile-metadata__number"],["data-e2e","call-forwarding-profile-modal-fragment__number-selector",3,"ngModel","ngModelChange"],["data-e2e","call-forwarding-profile-modal-fragment__number-selector-option",3,"value",4,"ngFor","ngForOf"],["e2e","call-forwarding-profile-modal-fragment",3,"btnSaveCaption","saveDisabled","cancelClick","saveClick"],["class","profile-metadata__color-picker",3,"closeFn",4,"cdk-portal"],[1,"profile-metadata__duplicate"],["floatPlaceholder","never",1,"profile-metadata__duplicate__profiles"],["data-e2e","call-forwarding-profile-modal-fragment__profile-selector",3,"ngModel","placeholder","ngModelChange"],["data-e2e","call-forwarding-profile-modal-fragment__profile-selector-option",3,"value",4,"ngFor","ngForOf"],["data-e2e","call-forwarding-profile-modal-fragment__profile-selector-option",3,"value"],["data-e2e","call-forwarding-profile-modal-fragment__number-selector-option",3,"value"],[1,"profile-metadata__color-picker",3,"closeFn"],["class","profile-metadata__color-picker__color",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"profile-metadata__color-picker__color",3,"ngClass","click"],["icon","done","size","small",4,"ngIf"],["icon","done","size","small"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"modal-container",1),m.ALo(2,"translate"),m.TgZ(3,"section"),m.YNc(4,R,5,5,"div",2),m.TgZ(5,"div",3),m.TgZ(6,"mat-form-field",4),m.TgZ(7,"input",5),m.NdJ("ngModelChange",function(e){return t.name=e}),m.ALo(8,"translate"),m.qZA(),m.qZA(),m.TgZ(9,"div",6,7),m.NdJ("click",function(){return t.toggleColorPicker()}),m._UZ(11,"span",8),m.TgZ(12,"div",9),m._UZ(13,"div",10),m.qZA(),m.qZA(),m.TgZ(14,"mat-form-field",11),m.TgZ(15,"mat-select",12),m.NdJ("ngModelChange",function(e){return t.number=e}),m.YNc(16,L,2,2,"mat-option",13),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"footer-actions",14),m.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.saveProfile()}),m.qZA(),m.qZA(),m.qZA(),m.YNc(18,Q,2,1,"div",15)),2&e&&(m.xp6(1),m.Q6J("title",m.lcZ(2,10,t.getActionText("settings.profiles.metadata.title."))),m.xp6(3),m.Q6J("ngIf",t.copyProfile),m.xp6(3),m.Q6J("ngModel",t.name)("focus",!0)("placeholder",m.lcZ(8,12,"settings.profiles.metadata.name")),m.xp6(4),m.Q6J("ngClass","profile-metadata__color"+t.colorIndex),m.xp6(4),m.Q6J("ngModel",t.number),m.xp6(1),m.Q6J("ngForOf",t.availableNumbers),m.xp6(1),m.Q6J("btnSaveCaption",t.getActionText("settings.profiles.metadata.submit."))("saveDisabled",t.disableSaveButton()))},directives:[w.O,y.O5,Z.KE,k.Nt,i.Fj,i.Q7,i.JJ,i.On,A.R,y.mk,T.gD,y.sg,q.c,O.bH,S.ey,I.u],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]     .mat-select-trigger{font-size:1.8rem}.profile-metadata__container[_ngcontent-%COMP%]{display:flex}.profile-metadata__edit[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{background-color:#fff;padding:.8rem 2.4rem}.profile-metadata__row[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between}.profile-metadata__duplicate[_ngcontent-%COMP%]{height:7rem;position:relative}.profile-metadata__color[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;margin:0 .5rem;outline:0;width:4.8rem}.profile-metadata__color-area[_ngcontent-%COMP%]{border-radius:50%;display:block;height:2rem;width:2rem}.profile-metadata__duplicate__profiles[_ngcontent-%COMP%]{font-size:1.8rem;width:100%}.profile-metadata__title__input[_ngcontent-%COMP%]{width:18.5rem}.profile-metadata__color-picker[_ngcontent-%COMP%]{background:#fff;box-shadow:0 .5rem .5rem -.3rem #0003,0 .8rem 1rem .1rem #00000024,0 .3rem 1.4rem .2rem #0000001f;display:flex;flex-wrap:wrap;left:-10.1rem;position:absolute;top:5.1rem;width:14rem}.profile-metadata__color-picker__color[_ngcontent-%COMP%]{border:.1rem solid transparent;border-radius:50%;cursor:pointer;height:2.7rem;margin:.4rem;padding:0;width:2.7rem}.profile-metadata__color-picker__color[disabled][_ngcontent-%COMP%]{background:#fff;border:.1rem solid #b2b2b2;cursor:default}.profile-metadata__color1[_ngcontent-%COMP%]{background-color:#9a9a9a}.profile-metadata__color2[_ngcontent-%COMP%]{background-color:#f33}.profile-metadata__color3[_ngcontent-%COMP%]{background-color:#ffb366}.profile-metadata__color4[_ngcontent-%COMP%]{background-color:#ff3}.profile-metadata__color5[_ngcontent-%COMP%]{background-color:#d6d65c}.profile-metadata__color6[_ngcontent-%COMP%]{background-color:#660}.profile-metadata__color7[_ngcontent-%COMP%]{background-color:#adff33}.profile-metadata__color8[_ngcontent-%COMP%]{background-color:#4c0}.profile-metadata__color9[_ngcontent-%COMP%]{background-color:#0cc}.profile-metadata__color10[_ngcontent-%COMP%]{background-color:#9df}.profile-metadata__color11[_ngcontent-%COMP%]{background-color:#335cff}.profile-metadata__color12[_ngcontent-%COMP%]{background-color:#8533ff}.profile-metadata__color13[_ngcontent-%COMP%]{background-color:#e6ccff}.profile-metadata__color14[_ngcontent-%COMP%]{background-color:#f0f}.profile-metadata__color15[_ngcontent-%COMP%]{background-color:#99004d}.profile-metadata__color16[_ngcontent-%COMP%]{background-color:#d98cb3}"],changeDetection:0}),e})();var Y=n(39761),H=n(54395),j=n(87519),B=n(48431),G=n(90980),V=n(68409),$=n(1046),z=n(21554),X=n(18882),K=n(44163),W=n(83112);function ee(e,t){1&e&&m._UZ(0,"app-spinner",11)}function te(e,t){if(1&e&&(m.TgZ(0,"mat-option",12),m.TgZ(1,"div",13),m._UZ(2,"svg-avatar",14),m.TgZ(3,"div",15),m.TgZ(4,"span"),m._uU(5),m.qZA(),m.TgZ(6,"span",16),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){const e=t.$implicit,n=m.oxw();m.Q6J("value",e),m.xp6(2),m.Q6J("displayName",e.displayName)("iconName",n.getDiscriminatorIconName(e.discriminator)),m.xp6(2),m.uIk("data-e2e",n.data.e2e?n.data.e2e+"__name-or-number-autocomplete-option-title":null),m.xp6(1),m.hij(" ",e.displayName," "),m.xp6(1),m.uIk("data-e2e",n.data.e2e?n.data.e2e+"__name-or-number-autocomplete-option-type":null),m.xp6(1),m.hij(" ",m.lcZ(8,7,n.getDestination(e))," ")}}let ne=(()=>{class e{constructor(e,t,n,i,o,s){this.callForwardingService=e,this.dialogRef=t,this.translateService=n,this.fb=i,this.data=o,this.snackBarService=s,this.ngUnsubscribe=new p.xQ,this.destinationsPage=1,this.destinationsPageSize=25,this.destinationsSearchString="",this.filteredDestinations=[],this.genericDestinations=[],this.hasMoreDestinations=!1,this.isAddingNumber=!1,this.isLoadingDestinations=!1,this.internalSourceId=-1,this.anonymousSourceId=-3,this.genericSourceDefs={[this.internalSourceId]:{afdId:-1,discriminator:d.v.INTERNAL,displayName:this.translateService.instant("settings.call_forwarding.rule.internal"),isUsersVoicemail:!1},[this.anonymousSourceId]:{afdId:-3,discriminator:d.v.ANONYMOUS,displayName:this.translateService.instant("settings.call_forwarding.rule.anonymous"),isUsersVoicemail:!1}}}ngOnInit(){var e,t;this.isSourceDialog=null===(t=null===(e=this.data)||void 0===e?void 0:e.title)||void 0===t?void 0:t.includes("select-source"),this.isSourceDialog?this.buildFormSource():this.buildFormDestination(),this.setGenericDestinations(),this.observeSearchString()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onLazyLoading(){this.hasMoreDestinations&&!this.isLoadingDestinations&&this.loadDestinations()}onPhoneNumberClick(e,t){this.callForwardingService.addPhoneNumber(e,t).pipe((0,B.K)(e=>{this.isAddingNumber=e}),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.dialogRef.close(e)},e=>{404===e.status&&this.snackBarService.openErrorInfo("call-forwarding-destination-dialog.errors.save-rule-fail-invalid")})}selectDestination(){var e,t;let n=this.destinationForm.value.destination;const i="prefix"===n.discriminator,o=i||G.b.isInternational(n);i&&(n=n.displayName),(null===(t=null===(e=this.data.selectedProfileRules)||void 0===e?void 0:e.filter(e=>{var t,i;return"EXTERNAL"===(null===(t=e.sourceAfd)||void 0===t?void 0:t.discriminator)&&"string"==typeof n&&(null===(i=e.sourceAfd)||void 0===i?void 0:i.displayName)===n.replace("+","00")}))||void 0===t?void 0:t.length)?this.snackBarService.openErrorInfo("call-forwarding-destination-dialog.errors.save-rule-fail-repeated"):o?this.onPhoneNumberClick(n,i):this.dialogRef.close(n)}close(){this.dialogRef.close()}getDestination(e){return this.getDestinationType(this.getType(e))}getDiscriminatorIconName(e){return{[d.v.INTERNAL]:"company",[d.v.PHONEEXTENSION]:"extension",[d.v.CONFERENCESERVICE]:"conference_call_solid",[d.v.TIMECONTROLSERVICE]:"timer",[d.v.QUEUESERVICE]:"queue",[d.v.SKILLSERVICE]:"skill",[d.v.GROUPSERVICE]:"group",[d.v.IVRSERVICE]:"queue",[d.v.VIRTUALFAXEXTENSION]:"fax_solid",[d.v.VOICEMAIL]:"voicemail"}[e]||"contact"}getDestinationType(e){return`settings.call_forwarding.destinations.${e}`}destinationDisplay(e){return e?e.displayName:void 0}getType(e){switch(e.discriminator){case"EXTERNAL":return e.discriminator+"."+(e.phonebookId?e.phonebookRestricted?"private":"public":"phonenumber");case"VOICEMAIL":return e.discriminator+"."+(e.isUsersVoicemail?"own":"others");case null:return"disabled";default:return e.discriminator||""}}searchDestinations(e){this.destinationsSearchString=e,this.destinationsPage=1,this.filteredDestinations=[],this.loadDestinations()}loadDestinations(){if(this.isLoadingDestinations)return;const e={filter:this.data.filter,page:this.destinationsPage,perPage:this.destinationsPageSize,search:this.destinationsSearchString};this.callForwardingService.getAvailableDestinations(e).pipe((0,B.K)(e=>{this.isLoadingDestinations=e}),(0,f.R)(this.ngUnsubscribe)).subscribe(t=>{this.filteredDestinations=[...1===this.destinationsPage?this.genericDestinationsFiltered:[],...this.filteredDestinations,...t],this.isSourceDialog&&(null==e?void 0:e.search)&&(null==e?void 0:e.search.match(/^((\+|00)[0123456789]+)$/))&&this.filteredDestinations.unshift({displayName:e.search,discriminator:"prefix"}),this.destinationsPage++,this.hasMoreDestinations=t.length>=this.destinationsPageSize})}setGenericDestinations(){if(this.data.genericSourceAvailable&&this.data.selectedProfileRules){let e=Object.values(this.genericSourceDefs);const t=this.data.selectedProfileRules.filter(e=>e.source===this.internalSourceId||e.source===this.anonymousSourceId).map(e=>e.source);e=e.filter(e=>!t.includes(e.afdId)),this.genericDestinations=r.R.parseMultiple(e)}}observeSearchString(){this.destinationForm.get("destination").valueChanges.pipe((0,Y.O)(""),(0,H.b)(300),(0,j.x)(),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.searchDestinations(e.displayName||e)})}buildFormSource(){this.destinationForm=this.fb.group({destination:[this.selectedDestination,[i.kI.required,V.m.either(G.b.isItemSelected())]]})}buildFormDestination(){this.destinationForm=this.fb.group({destination:[this.selectedDestination,[i.kI.required,V.m.either(G.b.international(),$.C.autocompleteIsItemSelected())]]})}get genericDestinationsFiltered(){return this.genericDestinations.filter(e=>e.displayName.toLowerCase().includes(this.destinationsSearchString.toLowerCase()))}get selectedDestination(){let e;if(this.data.destinationContainer instanceof c.h&&(e=this.data.destinationContainer.sourceAfd),e){const t=!!e.afdId&&this.genericSourceDefs.hasOwnProperty(e.afdId.toString());if(!e.displayName&&t){const t=this.genericSourceDefs[e.afdId].displayName;e=Object.assign(Object.assign({},e),{displayName:t})}}return e}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(b.V),m.Y36(P.so),m.Y36(N.sK),m.Y36(i.qu),m.Y36(P.WI),m.Y36(C.c))},e.\u0275cmp=m.Xpm({type:e,selectors:[["call-forwarding-destination-dialog"]],decls:14,vars:16,consts:[[1,"call-forwarding-destination-dialog"],[3,"title"],[3,"formGroup","ngSubmit"],["fill","grey-color","icon","call","size","small",1,"destination-dialog__icon"],[1,"destination-dialog__input"],["aria-label","Number","formControlName","destination","matInput","","tabindex","-1","type","text",3,"matAutocomplete","placeholder"],["matSuffix","","size","small",4,"ngIf"],[1,"destination-dialog__autocomplete",3,"displayWith","listboxScrolled"],["auto","matAutocomplete"],["class","destination-dialog__source",3,"value",4,"ngFor","ngForOf"],[3,"btnSaveCaption","saveDisabled","e2e","cancelClick"],["matSuffix","","size","small"],[1,"destination-dialog__source",3,"value"],[1,"destination-dialog__infos"],["wrapperSize","medium",3,"displayName","iconName"],[1,"destination-dialog__id"],[1,"destination-dialog__type"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"modal-container",1),m.ALo(2,"translate"),m.TgZ(3,"form",2),m.NdJ("ngSubmit",function(){return t.selectDestination()}),m.TgZ(4,"section"),m._UZ(5,"app-svg-icon",3),m.TgZ(6,"mat-form-field",4),m._UZ(7,"input",5),m.ALo(8,"translate"),m.YNc(9,ee,1,0,"app-spinner",6),m.TgZ(10,"mat-autocomplete",7,8),m.NdJ("listboxScrolled",function(){return t.onLazyLoading()}),m.YNc(12,te,9,9,"mat-option",9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"footer-actions",10),m.NdJ("cancelClick",function(){return t.close()}),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){const e=m.MAs(11);m.uIk("data-e2e",t.data.e2e?t.data.e2e:null),m.xp6(1),m.Q6J("title",m.lcZ(2,12,t.data.title)),m.xp6(2),m.Q6J("formGroup",t.destinationForm),m.xp6(4),m.Q6J("matAutocomplete",e)("placeholder",m.lcZ(8,14,"settings.call_forwarding.destination-dialog.searchfield.hint")),m.uIk("data-e2e",t.data.e2e?t.data.e2e+"__name-or-number--input":null),m.xp6(2),m.Q6J("ngIf",t.isAddingNumber||t.isLoadingDestinations),m.xp6(1),m.Q6J("displayWith",t.destinationDisplay),m.xp6(2),m.Q6J("ngForOf",t.filteredDestinations),m.xp6(1),m.Q6J("btnSaveCaption","Select")("saveDisabled",t.destinationForm.invalid)("e2e",t.data.e2e?t.data.e2e:null)}},directives:[w.O,i._Y,i.JL,i.sg,I.u,Z.KE,i.Fj,k.Nt,z.ZL,i.JJ,i.u,y.O5,z.XC,X.X,y.sg,q.c,K.S,Z.R9,S.ey,W.T],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}.call-forwarding-destination-dialog[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;min-width:48rem;padding:.8rem 2.4rem}.destination-dialog__icon[_ngcontent-%COMP%]{align-self:center;margin-right:1rem}.destination-dialog__source[_ngcontent-%COMP%]{height:6rem;line-height:2.4rem}.destination-dialog__source[_ngcontent-%COMP%]   .destination-dialog__infos[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:1.8rem}.destination-dialog__source[_ngcontent-%COMP%]   .destination-dialog__infos[_ngcontent-%COMP%]   .destination-dialog__id[_ngcontent-%COMP%]{font-weight:bold;margin-left:1rem}.destination-dialog__source[_ngcontent-%COMP%]   .destination-dialog__infos[_ngcontent-%COMP%]   .destination-dialog__type[_ngcontent-%COMP%]{color:#b5b5b5;display:block;font-size:1.4rem;text-transform:uppercase}"]}),e})();function ie(e,t){1&e&&(m.TgZ(0,"span",16),m.TgZ(1,"hoverbox"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"settings.profiles.maxed_out")," "))}function oe(e,t){if(1&e&&(m.TgZ(0,"span",26),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw().$implicit;m.uIk("data-e2e-id",e.id),m.xp6(1),m.hij(" ",m.lcZ(2,2,"settings.profiles.metadata.basic_name")," ")}}function se(e,t){if(1&e&&(m.TgZ(0,"span",26),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.uIk("data-e2e-id",e.id),m.xp6(1),m.hij(" ",e.name," ")}}function ae(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-list-item",19),m.TgZ(1,"mat-radio-button",20),m.NdJ("click",function(){const t=m.CHM(e).$implicit,n=m.oxw(2);return n.activateProfile(t),n.selectProfile(t)}),m.qZA(),m.TgZ(2,"div",21),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).selectProfile(t)}),m.TgZ(3,"div",22),m.YNc(4,oe,3,4,"span",23),m.YNc(5,se,2,2,"ng-template",null,24,m.W1O),m.qZA(),m.TgZ(7,"div",25),m._uU(8),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.MAs(6),i=m.oxw(2);m.ekj("active",e.active)("is-selected",e.id===i.selectedProfile.id),m.s9C("id",e.id),m.xp6(1),m.MGl("id","option-",e.id,""),m.Q6J("checked",e.active)("value",e.id),m.xp6(2),m.Q6J("ngClass","c"+(null==e?null:e.color_index)),m.xp6(1),m.Q6J("ngIf",e.immutable)("ngIfElse",n),m.xp6(4),m.hij(" #",e.number," ")}}function re(e,t){if(1&e&&(m.TgZ(0,"mat-list",17),m.YNc(1,ae,9,12,"mat-list-item",18),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.Q6J("ngForOf",e.profiles)}}function le(e,t){if(1&e&&m._UZ(0,"span",36),2&e){const e=m.oxw(2);m.Q6J("ngClass","c"+(null==e.selectedProfile?null:e.selectedProfile.color_index))}}function ce(e,t){1&e&&m._UZ(0,"span",37)}function ge(e,t){1&e&&(m.TgZ(0,"div",38),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.profiles.metadata.basic_name")," "))}function de(e,t){if(1&e&&(m.TgZ(0,"div",39),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.s9C("title",e.selectedProfile.name),m.xp6(1),m.hij(" ",e.selectedProfile.name," ")}}function pe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"app-button",44),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw(3).addRuleToCurrentProfile()}),m.qZA()}}function ue(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"app-button",45),m.NdJ("appButtonClick",function(){m.CHM(e);const t=m.oxw(3);return t.deleteProfile(t.selectedProfile)}),m.qZA()}if(2&e){const e=m.oxw(3);m.Q6J("disabled",e.selectedProfile.active)}}function fe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",40),m.TgZ(1,"app-button",41),m.NdJ("appButtonClick",function(t){m.CHM(e);const n=m.oxw(2);return n.openProfileMetadataEditor(t,n.selectedProfile)}),m.qZA(),m.YNc(2,pe,1,0,"app-button",42),m.YNc(3,ue,1,1,"app-button",43),m.qZA()}if(2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngIf",!e.selectedProfile.immutable),m.xp6(1),m.Q6J("ngIf",!e.selectedRule.isWorking())}}function _e(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"call-forwarding-rules",46),m.NdJ("selectRule",function(t){return m.CHM(e),m.oxw(2).selectRule(t)}),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("rules",e.selectedProfile.rules)("selectedRule",e.selectedRule)}}function me(e,t){if(1&e&&(m.TgZ(0,"div",27),m.TgZ(1,"div",28),m.TgZ(2,"div",29),m.YNc(3,le,1,1,"span",30),m.YNc(4,ce,1,0,"span",31),m.qZA(),m.YNc(5,ge,3,3,"div",32),m.YNc(6,de,2,2,"div",33),m.YNc(7,fe,4,2,"div",34),m.qZA(),m.YNc(8,_e,1,2,"call-forwarding-rules",35),m.qZA()),2&e){const e=m.oxw();m.xp6(3),m.Q6J("ngIf",null==e.selectedProfile?null:e.selectedProfile.color_index),m.xp6(1),m.Q6J("ngIf",!(null!=e.selectedProfile&&e.selectedProfile.color_index)),m.xp6(1),m.Q6J("ngIf",e.selectedProfile.immutable),m.xp6(1),m.Q6J("ngIf",!e.selectedProfile.immutable),m.xp6(1),m.Q6J("ngIf",!e.selectedProfile.immutable),m.xp6(1),m.Q6J("ngIf",e.selectedProfile.rules)}}function he(e,t){1&e&&(m.TgZ(0,"span",57),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.call_forwarding.select-source")," "))}function be(e,t){if(1&e&&(m.ynx(0),m._uU(1),m.ALo(2,"translate"),m.BQk()),2&e){const e=t.ngIf;m.xp6(1),m.hij(" ",m.lcZ(2,1,e)," ")}}function Ce(e,t){if(1&e&&m._uU(0),2&e){const e=m.oxw(4);m.hij(" ",(null==e.selectedRule.sourceAfd?null:e.selectedRule.sourceAfd.phoneNumberFormatDisplay)||(null==e.selectedRule.sourceAfd?null:e.selectedRule.sourceAfd.displayName)," ")}}function xe(e,t){if(1&e&&(m.TgZ(0,"span"),m.YNc(1,be,3,3,"ng-container",58),m.YNc(2,Ce,1,1,"ng-template",null,59,m.W1O),m.qZA()),2&e){const e=m.MAs(3),t=m.oxw(3);m.xp6(1),m.Q6J("ngIf",t.selectedRuleLabels[t.selectedRule.type()])("ngIfElse",e)}}function ve(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",52),m.NdJ("click",function(t){m.CHM(e);const n=m.oxw(2);return!n.selectedRule.isWorking()&&n.selectDestinationFor(n.selectedRule,t)}),m.TgZ(1,"div",53),m.YNc(2,he,3,3,"span",54),m.YNc(3,xe,4,2,"span",15),m.qZA(),m.TgZ(4,"div",55),m._UZ(5,"app-svg-icon",56),m.qZA(),m.qZA()}if(2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("ngIf",!e.selectedRule.hasSource()),m.xp6(1),m.Q6J("ngIf",e.selectedRule.hasSource())}}function Pe(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"call-forwarding-timeout-select",68),m.NdJ("select",function(t){return m.CHM(e),m.oxw(4).selectTimeout(t)}),m.qZA()}if(2&e){const e=m.oxw(),t=e.$implicit,n=e.index,i=m.oxw(3);m.Q6J("disabled",i.selectedRule.isWorking())("setting",t)("values",i.timeoutValues)("e2e","main-settings-call-forwarding-page__rule-"+i.e2eRuleIndexMap[n])}}function Me(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",61),m.TgZ(1,"div",48),m.TgZ(2,"div",62),m._uU(3),m.ALo(4,"translate"),m.YNc(5,Pe,1,4,"call-forwarding-timeout-select",63),m.qZA(),m.TgZ(6,"div",64),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.TgZ(9,"call-forwarding-destination-select",65),m.NdJ("select",function(t){const n=m.CHM(e).$implicit;return m.oxw(3).selectDestination(t,n)}),m.qZA(),m.qZA(),m.TgZ(10,"div",66),m.TgZ(11,"mat-slide-toggle",67),m.NdJ("change",function(){const t=m.CHM(e).$implicit,n=m.oxw(3);return!n.selectedRule.isWorking()&&n.settingToggleActive(t)}),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=m.oxw(3);m.Q6J("ngClass",e.type),m.xp6(3),m.hij(" ",m.lcZ(4,11,"settings.call_forwarding.type."+e.type)," "),m.xp6(2),m.Q6J("ngIf",e.canHaveTimeout()),m.xp6(2),m.hij(" ",m.lcZ(8,13,"settings.call_forwarding.destination")," "),m.xp6(2),m.Q6J("destinations",i.availableDestinations)("disabled",i.selectedRule.isWorking())("setting",e)("e2e","main-settings-call-forwarding-page__rule-"+i.e2eRuleIndexMap[n]),m.xp6(2),m.Q6J("checked",e.active)("disabled",i.selectedRule.isWorking()),m.uIk("data-e2e","main-settings-call-forwarding-page__rule-"+i.e2eRuleIndexMap[n]+"-toggle")}}function Oe(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Me,12,15,"div",60),m.BQk()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.selectedRule.getSettings(!0))}}function we(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",69),m.TgZ(1,"button",70),m.NdJ("click",function(){m.CHM(e);const t=m.oxw(2);return t.deleteRule(t.selectedRule)}),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()}2&e&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"settings.call_forwarding.rule.delete")," "))}function ye(e,t){if(1&e&&(m.TgZ(0,"div",47),m.TgZ(1,"div",48),m.YNc(2,ve,6,2,"div",49),m.TgZ(3,"div",50),m.YNc(4,Oe,2,1,"ng-container",15),m.qZA(),m.YNc(5,we,4,3,"div",51),m.qZA(),m.qZA()),2&e){const e=m.oxw();m.ekj("busy",e.selectedRule.isWorking()),m.Q6J("loadingAreaIndicatorActive",e.selectedRule.isWorking()),m.xp6(2),m.Q6J("ngIf",e.selectedRule.sourceIsConfigurable()),m.xp6(1),m.ekj("blocked",!e.selectedRule.hasSource()),m.xp6(1),m.Q6J("ngIf",!e.isLoadingInitDestinations),m.xp6(1),m.Q6J("ngIf",e.selectedRule.sourceIsConfigurable())}}function Ze(e,t){1&e&&(m._uU(0),m.ALo(1,"translate"),m.ALo(2,"translate"),m.ALo(3,"translate"),m.ALo(4,"translate")),2&e&&m.HOy(" ",m.lcZ(1,4,"settings.call_forwarding.type.busy")," ",m.lcZ(2,6,"settings.call_forwarding.type.noAnswer")," ",m.lcZ(3,8,"settings.call_forwarding.type.notRegistered")," ",m.lcZ(4,10,"settings.call_forwarding.type.unconditional"),"\n")}function ke(e,t){1&e&&m.YNc(0,Ze,5,12,"ng-template")}let Ae=(()=>{class e extends x{constructor(e,t,n,i,o,s){super(e,t,n,i),this.router=e,this.route=t,this.callForwardingService=n,this.snackBarService=i,this.dialog=o,this.translateService=s,this.ngUnsubscribe=new p.xQ,this.selectedProfile=null,this.selectedRule=null,this.timeoutValues=[5,10,15,20,25,30,35,40,45,50,55,60],this.availableDestinations={all:null,internal:null,voicemail:null,busy:null,filtered:[]},this.destinationContainer=null,this.isLoadingInitDestinations=!1,this.destinationsFilter="",this.genericSourceAvailable=!1,this.selectedRuleLabels={internal:"settings.call_forwarding.rule.internal",anonymous:"settings.call_forwarding.rule.anonymous"},this.profilesMaxNum=10,this.e2eRuleIndexMap=["always","busy","no-answer","not-registered"],this.callForwardingService.activeProfile$.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{e&&Object.keys(e).length&&this.profiles.forEach(t=>{t.active=t.id===e.id})}),this.loadInitDestinations()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadInitDestinations(){this.isLoadingInitDestinations=!0,this.callForwardingService.getInitDestinations().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.availableDestinations.busy=e.find(e=>e.discriminator===d.v.BUSY),this.availableDestinations.internal=e.find(e=>e.discriminator===d.v.INTERNAL),this.availableDestinations.all=e.find(e=>e.discriminator===d.v.DEFAULT),this.availableDestinations.voicemail=e.find(e=>e.discriminator===d.v.VOICEMAIL),this.isLoadingInitDestinations=!1})}openProfileMetadataEditor(e,t,n){e&&e.stopPropagation(),t||(t=new l.y);const i=this.profiles.map(e=>e.number),o=this.profiles.map(e=>e.color_index);this.dialog.open(D,{autoFocus:!1,data:{profile:t,profileNumbers:i,copyProfile:n,profiles:n?this.profiles:null,profileColors:o}}).afterClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.handleEditedProfileMetadata(e,n)})}selectDestinationFor(e,t=null){t&&t.stopPropagation(),e instanceof c.h?(this.genericSourceAvailable=!0,this.filterAvailableDestinations("source")):e instanceof g.N&&(this.genericSourceAvailable=!1,this.filterAvailableDestinations("all")),this.destinationContainer=e,this.dialog.open(ne,{autoFocus:!1,data:{title:this.destinationContainer.getTitleKey(),filter:this.destinationsFilter,genericSourceAvailable:this.genericSourceAvailable,selectedProfileRules:this.selectedProfile.rules,selectedRule:this.selectedRule,destinationContainer:this.destinationContainer,e2e:"call-forwarding-profile-source-modal-fragment"}}).afterClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{e?this.handleDestinationContainer(e):this.deleteEmptyRule()})}onProfilesLoaded(){if(super.onProfilesLoaded(),this.profiles.length&&!this.selectedProfile){let e=this.profiles[0];this.profiles.some(t=>!!t.active&&(e=t,!0)),this.selectProfile(e)}}handleDestinationContainer(e){const t=!!this.destinationContainer&&!(!this.destinationContainer||!e);let n,i;if(this.destinationContainer&&e&&(n=this.destinationContainer.getDestination(),i={prevDestination:n,container:this.destinationContainer},this.destinationContainer.setDestination(e)),e){let t;this.destinationContainer instanceof c.h?(this.selectedProfile.id===this.destinationContainer.profileId&&this.selectedProfile.sortRules(),t=this.destinationContainer):this.destinationContainer instanceof g.N&&(t=this.destinationContainer.parentRule,t[this.destinationContainer.type].destination=e),t&&this.saveRule(t,()=>{(null==i?void 0:i.prevDestination)&&i.container.setDestination(i.prevDestination)}),this.destinationContainer=null}this.destinationContainer instanceof c.h&&this.destinationContainer.isNew()&&!e&&(this.setDestination(this.destinationContainer,e,t),this.deleteRule(this.destinationContainer),this.destinationContainer=null)}filterAvailableDestinations(e){"all"===e?this.destinationsFilter="":"source"===e&&(this.destinationsFilter="private,phoneextension,external,group")}handleEditedProfileMetadata(e,t){e&&this.saveProfile(e,t)}selectDestination(e,t){const n=t.destination;switch(t.parentRule.update(this.selectedRule),e){case v.PHONENUMBER:this.selectDestinationFor(t);break;case v.BUSY:t.destination=this.availableDestinations.busy,this.saveRule(t.parentRule,()=>{t.destination=n});break;case v.VOICEMAIL:t.destination=this.availableDestinations.voicemail,this.saveRule(t.parentRule,()=>{t.destination=n})}}selectTimeout(e){if(!this.selectedRule)return;const t=this.selectedRule.noAnswer.timeout;this.selectedRule.noAnswer.timeout=e,this.saveRule(this.selectedRule,()=>{this.selectedRule&&void 0!==t&&(this.selectedRule.noAnswer.timeout=t)})}selectProfile(e){e&&e.sortRules(),this.selectedProfile!==e&&(this.selectedProfile=e,this.selectedProfile&&this.selectedProfile.rules.length>0&&this.selectRule(this.selectedProfile.rules[0]))}addRuleToCurrentProfile(){const e=new c.h;this.selectedProfile.addRule(e),this.selectRule(e),setTimeout(()=>{this.selectDestinationFor(this.selectedRule)},1)}selectRule(e){this.selectedRule=e}settingToggleActive(e){e.parentRule.update(this.selectedRule),e.toggleActive(),this.saveRule(e.parentRule,()=>{e.parentRule.setWorking(!1),e.toggleActive()})}saveProfile(e,t){const n=e.isNew();e.setWorking(),(n?this.callForwardingService.createProfile(e):this.callForwardingService.updateProfile(e)).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(i=>{n?(t||(i.rules[0]=this.configureInitialRule(i)),this.callForwardingService.updateRule(i.rules[0]).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.processLoadedProfile(e,i,n)})):this.processLoadedProfile(e,i,n)},e=>{const t=e.error;t&&t.errors?this.isDuplicatedProfileNameError(t.errors[0]):this.snackBarService.openErrorInfo("Error occurred")})}processLoadedProfile(e,t,n){e.update(t),this.profileSaved(e,n)}configureInitialRule(e){const t=e.rules[0],n=new r.R(this.availableDestinations.voicemail);return t.unconditional.active=!1,t.unconditional.destination=n,t.noAnswer.active=!1,t.noAnswer.destination=n,t.notRegistered.active=!1,t.notRegistered.destination=n,t.busy.active=!1,t.busy.destination=n,t}deleteProfile(e){e.active||(e.isNew()?this.profileDeleted(e):(e.setWorking(),this.callForwardingService.deleteProfile(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.profileDeleted(e)})))}saveRule(e,t){e.setWorking();const n=e.isNew();(n?this.callForwardingService.createRule(e):this.callForwardingService.updateRule(e)).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(t=>{e.update(t),this.ruleSaved(e)},i=>{e.setWorking(!1),t&&t(),n&&this.deleteRule(e),this.showSaveRuleError(i)})}deleteRule(e){e.setWorking(),e.isNew()?this.ruleDeleted(e):(e.setWorking(),this.callForwardingService.deleteRule(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.ruleDeleted(e)}))}profileSaved(e,t){super.profileSaved(e)}profileDeleted(e){const t=this.profiles.findIndex(t=>e.id===t.id);if(t>=0&&this.profiles.splice(t,1),e.rules.forEach(e=>{this.ruleDeleted(e)}),e===this.selectedProfile){const e=this.profiles.filter(e=>e.active)[0];this.selectProfile(e)}this.cacheProfileDelete(e)}ruleSaved(e){this.cacheRule(e)}ruleDeleted(e){this.selectedProfile.deleteRule(e),this.selectedProfile.rules.length&&this.selectRule(this.selectedProfile.rules[0]),this.cacheRuleDelete(e)}setDestination(e,t,n){n&&e.setDestination(t)}deleteEmptyRule(){this.destinationContainer instanceof c.h&&this.destinationContainer.isNew()&&this.deleteRule(this.destinationContainer)}isDuplicatedProfileNameError(e){e.includes("the combination of 'id' and 'name' must be unique")?this.translateService.get("call-forwarding-profiles.error-duplicated-name").pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.snackBarService.openErrorInfo(e)}):this.snackBarService.openErrorInfo(e)}showSaveRuleError(e){var t,n;let i="call-forwarding.errors.save-rule-fail";const o=/DESTINATION_ID is not a valid destination/g;(null===(n=null===(t=e.error)||void 0===t?void 0:t.errors)||void 0===n?void 0:n.some(e=>o.test(e)))&&(i="call-forwarding.errors.external-number-not-allowed"),this.snackBarService.openErrorInfo(i)}get profileMetadataEditorDisabled(){return this.profiles.length>=this.profilesMaxNum}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(h.F0),m.Y36(h.gz),m.Y36(b.V),m.Y36(C.c),m.Y36(P.uw),m.Y36(N.sK))},e.\u0275cmp=m.Xpm({type:e,selectors:[["settings-call-forwarding"]],features:[m.qOj],decls:19,vars:12,consts:[["data-e2e","main-settings-call-forwarding-page",1,"layout__content"],["id","call-forwarding__profiles__tab",1,"call-forwarding__profiles-tab"],[1,"page-content"],[1,"side-nav"],[1,"side-nav__header-container"],["class","cf-buttons","appHoverbox","",4,"ngIf"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_profile_copy.tooltip","iconName","duplicate","data-e2e","main-settings-call-forwarding-page__duplicate-profile--button",3,"disabled","appButtonClick"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_profile_add.tooltip","iconName","add","data-e2e","main-settings-call-forwarding-page__add-profile--button",1,"add-profile",3,"disabled","appButtonClick"],["loading-area-indicator","",1,"side-nav__profile-container",3,"loadingAreaIndicatorActive"],["class","profiles call-forwarding__list",4,"ngIf"],[1,"call-forwarding__content","scrollable-container"],[1,"left"],["class","call-forwarding-profile",4,"ngIf"],["loading-area-indicator","",1,"right",3,"loadingAreaIndicatorActive"],["class","call-forwarding-rule","loading-area-indicator","",3,"busy","loadingAreaIndicatorActive",4,"ngIf"],[4,"ngIf"],["appHoverbox","",1,"cf-buttons"],[1,"profiles","call-forwarding__list"],["class","profile call-forwarding__list-item","data-e2e","main-settings-call-forwarding-page__profile-list-element",3,"active","is-selected","id",4,"ngFor","ngForOf"],["data-e2e","main-settings-call-forwarding-page__profile-list-element",1,"profile","call-forwarding__list-item",3,"id"],["color","primary","name","call-forwarding__profile","data-e2e","main-settings-call-forwarding-page__profile-list-element-radio-button",3,"checked","value","id","click"],[1,"profile-name",3,"click"],["data-e2e","main-settings-call-forwarding-page__profile-list-element-color",1,"profile-title",3,"ngClass"],["data-e2e","main-settings-call-forwarding-page__profile-list-element-name",4,"ngIf","ngIfElse"],["profileNotImmutable",""],["data-e2e","main-settings-call-forwarding-page__profile-list-element-number",1,"profile-number"],["data-e2e","main-settings-call-forwarding-page__profile-list-element-name"],[1,"call-forwarding-profile"],[1,"metadata"],[1,"color"],["data-e2e","main-settings-call-forwarding-page__selected-profile-color",3,"ngClass",4,"ngIf"],["class","default-color","data-e2e","main-settings-call-forwarding-page__selected-profile-color",4,"ngIf"],["class","name","data-e2e","main-settings-call-forwarding-page__selected-profile-name",4,"ngIf"],["class","name selected-name","data-e2e","main-settings-call-forwarding-page__selected-profile-name",3,"title",4,"ngIf"],["class","call-forwarding__profile-actions",4,"ngIf"],["e2e","main-settings-call-forwarding-page",3,"rules","selectedRule","selectRule",4,"ngIf"],["data-e2e","main-settings-call-forwarding-page__selected-profile-color",3,"ngClass"],["data-e2e","main-settings-call-forwarding-page__selected-profile-color",1,"default-color"],["data-e2e","main-settings-call-forwarding-page__selected-profile-name",1,"name"],["data-e2e","main-settings-call-forwarding-page__selected-profile-name",1,"name","selected-name",3,"title"],[1,"call-forwarding__profile-actions"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_profile_edit.tooltip","iconName","edit","data-e2e","main-settings-call-forwarding-page__edit-profile--button",1,"call-forwarding__profile-action",3,"appButtonClick"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_rule_add.tooltip","iconName","add","data-e2e","main-settings-call-forwarding-page__add-source--button","class","call-forwarding__profile-action",3,"appButtonClick",4,"ngIf"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_profile_delete.tooltip","iconName","delete","data-e2e","main-settings-call-forwarding-page__delete-profile--button","class","call-forwarding__profile-action",3,"disabled","appButtonClick",4,"ngIf"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_rule_add.tooltip","iconName","add","data-e2e","main-settings-call-forwarding-page__add-source--button",1,"call-forwarding__profile-action",3,"appButtonClick"],["hoverTextTranslationKey","toolbar.buttons.call_forwarding_profile_delete.tooltip","iconName","delete","data-e2e","main-settings-call-forwarding-page__delete-profile--button",1,"call-forwarding__profile-action",3,"disabled","appButtonClick"],["e2e","main-settings-call-forwarding-page",3,"rules","selectedRule","selectRule"],["loading-area-indicator","",1,"call-forwarding-rule",3,"loadingAreaIndicatorActive"],[1,"content"],["class","source","data-e2e","main-settings-call-forwarding-page__rule-set-select-source",3,"click",4,"ngIf"],[1,"destinations"],["class","delete",4,"ngIf"],["data-e2e","main-settings-call-forwarding-page__rule-set-select-source",1,"source",3,"click"],[1,"title"],["class","select",4,"ngIf"],[1,"action-icons"],["icon","search","size","small"],[1,"select"],[4,"ngIf","ngIfElse"],["ruleDisplayName",""],["class","destination",3,"ngClass",4,"ngFor","ngForOf"],[1,"destination",3,"ngClass"],[1,"type"],[3,"disabled","setting","values","e2e","select",4,"ngIf"],[1,"header"],[3,"destinations","disabled","setting","e2e","select"],[1,"switch"],["color","primary",3,"checked","disabled","change"],[3,"disabled","setting","values","e2e","select"],[1,"delete"],["mat-button","","data-e2e","main-settings-call-forwarding-page__delete-rule-set--button",3,"click"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"section",1),m.TgZ(2,"div",2),m.TgZ(3,"div",3),m.TgZ(4,"div",4),m.TgZ(5,"span"),m._uU(6),m.ALo(7,"translate"),m.qZA(),m.YNc(8,ie,4,3,"span",5),m.TgZ(9,"app-button",6),m.NdJ("appButtonClick",function(e){return t.openProfileMetadataEditor(e,void 0,!0)}),m.qZA(),m.TgZ(10,"app-button",7),m.NdJ("appButtonClick",function(e){return t.openProfileMetadataEditor(e)}),m.qZA(),m.qZA(),m.TgZ(11,"div",8),m.YNc(12,re,2,1,"mat-list",9),m.qZA(),m.qZA(),m.TgZ(13,"div",10),m.TgZ(14,"div",11),m.YNc(15,me,9,6,"div",12),m.qZA(),m.TgZ(16,"div",13),m.YNc(17,ye,6,8,"div",14),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(18,ke,1,0,void 0,15)),2&e&&(m.xp6(6),m.Oqu(m.lcZ(7,10,"settings.profiles.profiles")),m.xp6(2),m.Q6J("ngIf",t.profileMetadataEditorDisabled),m.xp6(1),m.Q6J("disabled",t.profileMetadataEditorDisabled),m.xp6(1),m.Q6J("disabled",t.profileMetadataEditorDisabled),m.xp6(1),m.Q6J("loadingAreaIndicatorActive",t.isLoadingProfiles),m.xp6(1),m.Q6J("ngIf",t.profiles),m.xp6(3),m.Q6J("ngIf",t.selectedProfile),m.xp6(1),m.Q6J("loadingAreaIndicatorActive",t.isLoadingInitDestinations),m.xp6(1),m.Q6J("ngIf",t.selectedRule),m.xp6(1),m.Q6J("ngIf",!1))},styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;height:100%}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}.layout__content[_ngcontent-%COMP%]{height:100%}.scrollable-container[_ngcontent-%COMP%]{display:flex;flex:1;margin-left:0;overflow:hidden}.scrollable-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto;overflow-y:auto}.scrollable-container[_ngcontent-%COMP%] > .left[_ngcontent-%COMP%], .scrollable-container[_ngcontent-%COMP%] > .right[_ngcontent-%COMP%]{flex:1}@media screen and (min-width: 768px) and (max-width: 1023px){.scrollable-container[_ngcontent-%COMP%] > .left[_ngcontent-%COMP%], .scrollable-container[_ngcontent-%COMP%] > .right[_ngcontent-%COMP%]{width:33.33vw!important}}@media screen and (max-width: 767px){.scrollable-container[_ngcontent-%COMP%] > .left[_ngcontent-%COMP%], .scrollable-container[_ngcontent-%COMP%] > .right[_ngcontent-%COMP%]{width:25.6rem!important}}.call-forwarding__profiles-tab[_ngcontent-%COMP%]{display:flex;height:100%}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{background-color:transparent;display:flex;flex:1;flex-direction:row;padding:0}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{border-right:.1rem solid;margin-right:0}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{border-right:.1rem solid;display:flex;flex-direction:column;width:32.2rem}@media screen and (min-width: 768px) and (max-width: 1023px){.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{width:33.33vw}}@media screen and (max-width: 767px){.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{width:25.6rem}}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]{margin:0;padding:0}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]{height:4.8rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:.8rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;font-size:1.8rem;justify-content:space-between;width:100%}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title[_ngcontent-%COMP%]{border-left:.3rem solid transparent;max-width:16.9rem;padding:1rem 0 1.2rem .5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c1[_ngcontent-%COMP%]{border-color:#9a9a9a}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c2[_ngcontent-%COMP%]{border-color:#f33}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c3[_ngcontent-%COMP%]{border-color:#ffb366}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c4[_ngcontent-%COMP%]{border-color:#ff3}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c5[_ngcontent-%COMP%]{border-color:#d6d65c}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c6[_ngcontent-%COMP%]{border-color:#660}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c7[_ngcontent-%COMP%]{border-color:#adff33}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c8[_ngcontent-%COMP%]{border-color:#4c0}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c9[_ngcontent-%COMP%]{border-color:#0cc}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c10[_ngcontent-%COMP%]{border-color:#9df}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c11[_ngcontent-%COMP%]{border-color:#335cff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c12[_ngcontent-%COMP%]{border-color:#8533ff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c13[_ngcontent-%COMP%]{border-color:#e6ccff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c14[_ngcontent-%COMP%]{border-color:#f0f}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c15[_ngcontent-%COMP%]{border-color:#99004d}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__profile-container[_ngcontent-%COMP%] > .call-forwarding__list.profiles[_ngcontent-%COMP%]   .call-forwarding__list-item.profile[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]   .profile-title.c16[_ngcontent-%COMP%]{border-color:#d98cb3}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__header-container[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid;display:flex;height:5.6rem;margin-top:0;position:relative}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__header-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;padding-left:1.4rem;padding-right:1.4rem;text-align:left}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__header-container[_ngcontent-%COMP%]   .cf-buttons[_ngcontent-%COMP%]{flex:none;height:4.8rem;padding:0;position:absolute;right:1.6rem;text-align:center;width:11.2rem;z-index:2}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .side-nav__header-container[_ngcontent-%COMP%]   app-button[_ngcontent-%COMP%]{margin-right:1.6rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid;display:flex;height:5.6rem;width:100%}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:6.4rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:.2rem solid;border-radius:50%;display:block;height:1.8rem;margin-left:2.5rem;margin-right:2.1rem;width:1.8rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c1[_ngcontent-%COMP%]{background-color:#9a9a9a}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c2[_ngcontent-%COMP%]{background-color:#f33}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c3[_ngcontent-%COMP%]{background-color:#ffb366}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c4[_ngcontent-%COMP%]{background-color:#ff3}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c5[_ngcontent-%COMP%]{background-color:#d6d65c}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c6[_ngcontent-%COMP%]{background-color:#660}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c7[_ngcontent-%COMP%]{background-color:#adff33}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c8[_ngcontent-%COMP%]{background-color:#4c0}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c9[_ngcontent-%COMP%]{background-color:#0cc}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c10[_ngcontent-%COMP%]{background-color:#9df}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c11[_ngcontent-%COMP%]{background-color:#335cff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c12[_ngcontent-%COMP%]{background-color:#8533ff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c13[_ngcontent-%COMP%]{background-color:#e6ccff}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c14[_ngcontent-%COMP%]{background-color:#f0f}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c15[_ngcontent-%COMP%]{background-color:#99004d}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]   span.c16[_ngcontent-%COMP%]{background-color:#d98cb3}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-profile[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;max-width:12rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]{position:relative}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%], .call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{border-bottom:.1rem solid;min-height:5.6rem;overflow:hidden;padding-left:2.4rem}@media screen and (max-width: 1280px){.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%], .call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{padding-right:1.6rem}}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]{margin-right:2.4rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]{position:relative}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{display:flex}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex:1;margin:2rem 0 1.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:1.8rem;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:#b5b5b5;font-size:1.6rem;margin-top:2rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   call-forwarding-destination-select[_ngcontent-%COMP%]{font-size:1.6rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{margin-right:1.6rem;margin-top:2.4rem;padding-left:.4rem}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding:.8rem;text-align:right}.call-forwarding__profiles-tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]   .call-forwarding__content[_ngcontent-%COMP%]   .call-forwarding-rule[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.6rem;text-transform:uppercase}.call-forwarding__profile-actions[_ngcontent-%COMP%]{display:flex}.call-forwarding__profile-action[_ngcontent-%COMP%]{margin-right:1.6rem}@media screen and (max-width: 1279px){.scrollable-container[_ngcontent-%COMP%]{margin-left:0}}"]}),e})();var Te=n(33935),qe=n(14944);function Se(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.hij(" ",e.setting.destination.phoneNumberFormatDisplay," ")}}function Ie(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.call_forwarding.destinations.BUSY")," "))}function Ne(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.call_forwarding.destinations.VOICEMAIL.own")," "))}function Ee(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.AsE(" ",e.setting.destination.displayName," (",m.lcZ(2,2,"settings.call_forwarding.destinations.VOICEMAIL.others"),") ")}}function Ue(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.call_forwarding.disabled")," "))}function Re(e,t){if(1&e&&(m.TgZ(0,"span",3),m.ALo(1,"translate"),m._uU(2),m.qZA()),2&e){const e=m.oxw();m.s9C("title",m.lcZ(1,2,"settings.call_forwarding.destinations."+e.setting.destination.type())),m.xp6(2),m.hij(" ",e.setting.destination.displayName," ")}}let Le=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["call-forwarding-destination"]],inputs:{setting:"setting"},decls:7,vars:6,consts:[["ellipsisTitle","",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"title",4,"ngSwitchDefault"],[3,"title"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.YNc(1,Se,2,1,"span",1),m.YNc(2,Ie,3,3,"span",1),m.YNc(3,Ne,3,3,"span",1),m.YNc(4,Ee,3,4,"span",1),m.YNc(5,Ue,3,3,"span",1),m.YNc(6,Re,3,4,"span",2),m.qZA()),2&e&&(m.Q6J("ngSwitch",null==t.setting.destination?null:t.setting.destination.type()),m.xp6(1),m.Q6J("ngSwitchCase","EXTERNAL.phonenumber"),m.xp6(1),m.Q6J("ngSwitchCase","BUSY"),m.xp6(1),m.Q6J("ngSwitchCase","VOICEMAIL.own"),m.xp6(1),m.Q6J("ngSwitchCase","VOICEMAIL.others"),m.xp6(1),m.Q6J("ngSwitchCase","disabled"))},directives:[qe.w,y.RF,y.n9,y.ED],pipes:[N.X$],styles:["div[_ngcontent-%COMP%]{width:27rem}"]}),e})();function Je(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",6),m.NdJ("click",function(){return m.CHM(e),m.oxw().$implicit.callback()}),m._uU(1),m.ALo(2,"translate"),m.qZA()}if(2&e){const e=m.oxw().$implicit,t=m.oxw();m.uIk("data-e2e",t.e2e?t.e2e+"-destination-selector-option":null),m.xp6(1),m.hij(" ",m.lcZ(2,2,e.label)," ")}}function Fe(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Je,3,4,"button",5),m.BQk()),2&e){const e=t.$implicit;m.xp6(1),m.Q6J("ngIf",e.isVisible)}}let Qe=(()=>{class e{constructor(){this.select=new m.vpe}ngOnInit(){this.menuItems=[{label:"settings.call_forwarding.destinations.VOICEMAIL.own",isVisible:!!this.destinations.voicemail,callback:()=>this.selectVoicemail()},{label:"settings.call_forwarding.destinations.BUSY",isVisible:!!this.destinations.busy,callback:()=>this.selectBusy()},{label:"settings.call_forwarding.destinations.EXTERNAL.phonenumber",isVisible:!0,callback:()=>this.selectPhonenumber()}]}selectVoicemail(){this.select.emit(v.VOICEMAIL)}selectBusy(){this.select.emit(v.BUSY)}selectPhonenumber(){this.select.emit(v.PHONENUMBER)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["call-forwarding-destination-select"]],inputs:{setting:"setting",destinations:"destinations",disabled:"disabled",e2e:"e2e"},outputs:{select:"select"},decls:5,vars:7,consts:[[1,"destination-trigger",3,"matMenuTriggerFor"],[3,"setting"],[3,"overlapTrigger"],["destinationMenu","matMenu"],[4,"ngFor","ngForOf"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m._UZ(1,"call-forwarding-destination",1),m.qZA(),m.TgZ(2,"mat-menu",2,3),m.YNc(4,Fe,2,1,"ng-container",4),m.qZA()),2&e){const e=m.MAs(3);m.ekj("disabled",t.disabled),m.Q6J("matMenuTriggerFor",e),m.uIk("data-e2e",t.e2e?t.e2e+"-destination-selector":null),m.xp6(1),m.Q6J("setting",t.setting),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",t.menuItems)}},directives:[Te.p6,Le,Te.VK,y.sg,y.O5,Te.OP],pipes:[N.X$],styles:["[_nghost-%COMP%]   .destination-trigger[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]}),e})();var De=n(90971),Ye=n(51095);function He(e,t){if(1&e&&(m.TgZ(0,"span",13),m._uU(1),m.qZA()),2&e){const e=t.ngIf;m.Q6J("title",e),m.xp6(1),m.hij(" : ",e," ")}}function je(e,t){if(1&e&&(m.TgZ(0,"div",11),m._uU(1),m.ALo(2,"translate"),m.YNc(3,He,2,2,"span",12),m.qZA()),2&e){const e=t.ngIf,n=m.oxw().$implicit;m.xp6(1),m.hij(" ",m.lcZ(2,2,e)," "),m.xp6(2),m.Q6J("ngIf",null==n.sourceAfd?null:n.sourceAfd.displayName)}}function Be(e,t){if(1&e&&(m.TgZ(0,"div",11),m.TgZ(1,"span",13),m._uU(2),m.qZA(),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.Q6J("title",(null==e.sourceAfd?null:e.sourceAfd.phoneNumberFormatDisplay)||(null==e.sourceAfd?null:e.sourceAfd.displayName)),m.xp6(1),m.hij(" ",(null==e.sourceAfd?null:e.sourceAfd.phoneNumberFormatDisplay)||(null==e.sourceAfd?null:e.sourceAfd.displayName)," ")}}function Ge(e,t){1&e&&(m.TgZ(0,"div",14),m.TgZ(1,"button",15),m._UZ(2,"app-svg-icon",16),m.qZA(),m.qZA())}function Ve(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.qZA()),2&e){const e=m.oxw().$implicit;m.xp6(1),m.hij(" \u2022 ",e.timeout,"s")}}function $e(e,t){if(1&e&&m._UZ(0,"call-forwarding-destination",23),2&e){const e=m.oxw().$implicit;m.Q6J("setting",e)}}function ze(e,t){1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.call_forwarding.overruled")," "))}function Xe(e,t){if(1&e&&(m.TgZ(0,"li",17),m.TgZ(1,"div",4),m._UZ(2,"div",5),m.qZA(),m.TgZ(3,"div",18),m.TgZ(4,"div",19),m._uU(5),m.ALo(6,"translate"),m.YNc(7,Ve,2,1,"span",20),m.qZA(),m.TgZ(8,"div",21),m.YNc(9,$e,1,1,"call-forwarding-destination",22),m.YNc(10,ze,3,3,"span",20),m.qZA(),m.qZA(),m.qZA()),2&e){const e=t.$implicit;m.xp6(2),m.ekj("active",e.active),m.xp6(3),m.hij(" ",m.lcZ(6,6,"settings.call_forwarding.type."+e.type)," "),m.xp6(2),m.Q6J("ngIf",e.canHaveTimeout()),m.xp6(2),m.Q6J("ngIf",!e.isOverruled()),m.xp6(1),m.Q6J("ngIf",e.isOverruled())}}function Ke(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"li",2),m.TgZ(1,"div",3),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw().onSelectRule(t)}),m.TgZ(2,"div",4),m._UZ(3,"span",5),m._UZ(4,"span",5),m._UZ(5,"span",5),m.qZA(),m.YNc(6,je,4,4,"div",6),m.YNc(7,Be,3,2,"ng-template",null,7,m.W1O),m.YNc(9,Ge,3,0,"div",8),m.qZA(),m.TgZ(10,"ul",9),m.YNc(11,Xe,11,8,"li",10),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.MAs(8),i=m.oxw();m.ekj("opened",e===i.selectedRule),m.uIk("data-e2e",i.e2e?i.e2e+"__rule-set-list-element":null),m.xp6(3),m.ekj("active",null==e.unconditional?null:e.unconditional.active),m.xp6(1),m.ekj("active",null==e.busy?null:e.busy.active),m.xp6(1),m.ekj("active",null==e.noAnswer?null:e.noAnswer.active),m.xp6(1),m.Q6J("ngIf",i.ruleLabels[e.type()])("ngIfElse",n),m.xp6(3),m.Q6J("ngIf",i.showArrow()),m.xp6(2),m.Q6J("ngForOf",e.getSettings())}}let We=(()=>{class e{constructor(e){this.whiteLabelService=e,this.selectRule=new m.vpe}ngOnInit(){this.ruleLabels={undefined:"settings.call_forwarding.rule.undefined",default:"settings.call_forwarding.rule.default",extension:"settings.call_forwarding.rule.extension",internal:"settings.call_forwarding.rule.internal",anonymous:"settings.call_forwarding.rule.anonymous",group:"settings.call_forwarding.rule.group"}}showArrow(){return!this.selectedRule||!!this.whiteLabelService.data.settingsCallforwardingAlwaysShowArrow}onSelectRule(e){this.selectRule.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(De.D))},e.\u0275cmp=m.Xpm({type:e,selectors:[["call-forwarding-rules"]],inputs:{rules:"rules",selectedRule:"selectedRule",e2e:"e2e"},outputs:{selectRule:"selectRule"},decls:2,vars:1,consts:[[1,"rules"],["class","rule",3,"opened",4,"ngFor","ngForOf"],[1,"rule"],[1,"head",3,"click"],[1,"status-icons"],[1,"status-icon"],["class","type",4,"ngIf","ngIfElse"],["noRuleLabels",""],["class","action-icons",4,"ngIf"],[1,"destinations"],["class","destination",4,"ngFor","ngForOf"],[1,"type"],[3,"title",4,"ngIf"],[3,"title"],[1,"action-icons"],["mat-icon-button",""],["icon","arrow_right","size","medium"],[1,"destination"],[1,"description"],[1,"title"],[4,"ngIf"],[1,"condition"],[3,"setting",4,"ngIf"],[3,"setting"]],template:function(e,t){1&e&&(m.TgZ(0,"ul",0),m.YNc(1,Ke,12,13,"li",1),m.qZA()),2&e&&(m.xp6(1),m.Q6J("ngForOf",t.rules))},directives:[y.sg,y.O5,Ye.lW,I.u,Le],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.rules[_ngcontent-%COMP%]{margin:0;padding:0}.rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]{border-bottom:.1rem solid;display:block;margin:0;padding:0}.rules[_ngcontent-%COMP%]   .rule[_ngcontent-%COMP%]   .status-icon[_ngcontent-%COMP%]{background-color:transparent;border:.2rem solid;border-radius:50%;height:.8rem;width:.8rem}.rules[_ngcontent-%COMP%]   .rule.opened[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{cursor:inherit}.rules[_ngcontent-%COMP%]   .rule.opened[_ngcontent-%COMP%]   .destinations[_ngcontent-%COMP%]{display:block}.rule[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{align-items:center;cursor:pointer;display:flex;height:5.6rem}.rule[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;width:6.4rem}.rule[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{font-size:1.8rem;width:26.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.destinations[_ngcontent-%COMP%]{display:none;padding:0}.destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]{display:flex;height:4.8rem;line-height:1;margin:0 0 1.2rem;padding:0}.destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .status-icons[_ngcontent-%COMP%]{height:4rem;margin:1.6rem 1rem 0 3.9rem;width:1.2rem}.destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;line-height:3.4rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;line-height:1.5;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.destinations[_ngcontent-%COMP%]   .destination[_ngcontent-%COMP%]   .condition[_ngcontent-%COMP%]{flex:1;font-size:1.6rem;line-height:1}"]}),e})();function et(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",4),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw().selectValue(t)}),m._uU(1),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw();m.uIk("data-e2e",n.e2e?n.e2e+"-time-selector-option":null),m.xp6(1),m.hij(" ",e," ")}}let tt=(()=>{class e{constructor(){this.select=new m.vpe}selectValue(e){this.select.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["call-forwarding-timeout-select"]],inputs:{setting:"setting",values:"values",disabled:"disabled",e2e:"e2e"},outputs:{select:"select"},decls:5,vars:7,consts:[[1,"timeout-trigger",3,"matMenuTriggerFor"],[3,"overlapTrigger"],["timeoutMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(m.TgZ(0,"span",0),m._uU(1),m.qZA(),m.TgZ(2,"mat-menu",1,2),m.YNc(4,et,2,2,"button",3),m.qZA()),2&e){const e=m.MAs(3);m.ekj("disabled",t.disabled),m.Q6J("matMenuTriggerFor",e),m.uIk("data-e2e",t.e2e?t.e2e+"-time-selector":null),m.xp6(1),m.hij(" ",t.setting.timeout,"s\n"),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",t.values)}},directives:[Te.p6,Te.VK,y.sg,Te.OP],styles:["[_nghost-%COMP%]   .timeout-trigger[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}[_nghost-%COMP%]   .disabled[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}"]}),e})();var nt=n(16492);let it=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["settings-app"]],decls:1,vars:0,consts:[["data-e2e","main-settings-page"]],template:function(e,t){1&e&&m._UZ(0,"router-outlet",0)},directives:[h.lC],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]    {display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     user-settings{overflow-y:auto}"]}),e})();var ot=n(725),st=n(88640),at=n(16936),rt=n(4929),lt=n(7539);function ct(e,t){1&e&&(m.TgZ(0,"span",11),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"New")," "))}function gt(e,t){if(1&e&&(m.TgZ(0,"li",3),m._UZ(1,"svg-avatar",4),m.TgZ(2,"div",5),m.TgZ(3,"div",6),m._uU(4),m.ALo(5,"translate"),m.qZA(),m.TgZ(6,"ul",7),m.TgZ(7,"li"),m.TgZ(8,"a",8),m.TgZ(9,"span",9),m._uU(10),m.qZA(),m.YNc(11,ct,3,3,"span",10),m.ALo(12,"async"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){const e=t.$implicit,n=m.oxw();m.xp6(4),m.lnq(" ",n.appList.productTitle," ",m.lcZ(5,8,"settings.download.for")," ",e.os," "),m.xp6(4),m.MGl("title","Download ",e.title,""),m.Q6J("href",e.link,m.LSH),m.uIk("data-e2e",e.e2e?"main-settings-download-page"+e.e2e+"--a":null),m.xp6(2),m.hij(" ",e.title," "),m.xp6(1),m.Q6J("ngIf",m.lcZ(12,10,n.checkDesktopAppUpdateService.isNewDesktopAppAvailable$))}}function dt(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",12),m.TgZ(1,"mat-grid-list",13),m.TgZ(2,"mat-grid-tile",14),m.TgZ(3,"mat-checkbox",15),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().saveDesktopAppUpdateCheck(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw().isDesktopAppAutoUpdate=t}),m.qZA(),m.qZA(),m.TgZ(4,"mat-grid-tile",16),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("colspan",4),m.xp6(1),m.Q6J("ngModel",e.isDesktopAppAutoUpdate),m.xp6(1),m.Q6J("colspan",8),m.xp6(1),m.hij(" ",m.lcZ(6,4,"settings.download.desktop_app_update.label")," ")}}let pt=(()=>{class e{constructor(e,t,n,i){this.electronService=e,this.snackbarService=t,this.localUserConfigService=n,this.checkDesktopAppUpdateService=i,this.ngUnsubscribe=new p.xQ,this.isDesktopApp=this.electronService.desktop,this.isDesktopAppAutoUpdate=!0,this.localUserConfigService.userConfig$.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.isDesktopAppAutoUpdate=e.isDesktopAppAutoUpdate})}ngOnInit(){this.appList=this.checkDesktopAppUpdateService.getDesktopAppDownloadList()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}saveDesktopAppUpdateCheck(e){this.snackbarService.open("settings.download.desktop_app_update.saving"),this.localUserConfigService.toggleDesktopAppUpdate(),this.snackbarService.openInfo("settings.download.desktop_app_update.saved",!0),e?this.checkDesktopAppUpdateService.checkDesktopAppVersion():this.checkDesktopAppUpdateService.removeDesktopAppUpdateBadge()}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(ot.d),m.Y36(C.c),m.Y36(st.i),m.Y36(at.M))},e.\u0275cmp=m.Xpm({type:e,selectors:[["download-page"]],decls:3,vars:2,consts:[["data-e2e","main-settings-download-page",1,"flexible-list"],["class","flexible-list__item",4,"ngFor","ngForOf"],["class","download-page__update__check",4,"ngIf"],[1,"flexible-list__item"],["iconName","cloudya","wrapperSize","medium",1,"download-page__icon"],[1,"download-page__infos"],[1,"download-page__infos__title"],[1,"download-page__downloads"],[1,"download-page__link",3,"href","title"],[1,"download-page__link__underline"],["class","download-page__new",4,"ngIf"],[1,"download-page__new"],[1,"download-page__update__check"],["cols","12","rowHeight","7rem"],[3,"colspan"],["color","primary",3,"ngModel","ngModelChange"],[1,"download-page__update-title",3,"colspan"]],template:function(e,t){1&e&&(m.TgZ(0,"ul",0),m.YNc(1,gt,13,12,"li",1),m.qZA(),m.YNc(2,dt,7,6,"div",2)),2&e&&(m.xp6(1),m.Q6J("ngForOf",t.appList.desktopAppItems),m.xp6(1),m.Q6J("ngIf",t.isDesktopApp))},directives:[y.sg,y.O5,W.T,rt.Il,rt.DX,lt.oG,i.JJ,i.On],pipes:[N.X$,y.Ov],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.download-page__infos[_ngcontent-%COMP%]{flex:1;margin-left:.8rem;margin-right:1.6rem}.download-page__icon[_ngcontent-%COMP%]{margin:0 1rem}.download-page__infos__title[_ngcontent-%COMP%]{font-size:1.8rem}.download-page__downloads[_ngcontent-%COMP%]{list-style:none;padding:0}.download-page__link[_ngcontent-%COMP%]{font-size:1.6rem;text-decoration:none}.download-page__new[_ngcontent-%COMP%]{font-weight:bold;margin:.5rem}.download-page__link__underline[_ngcontent-%COMP%]{text-decoration:underline}.flexible-list[_ngcontent-%COMP%]{padding-top:1.1rem}.flexible-list__item[_ngcontent-%COMP%]{cursor:default;flex-wrap:wrap;height:auto!important}.flexible-list__item[_ngcontent-%COMP%]:after{border-bottom:.1rem solid #e5e5e5;content:"";margin-left:auto;margin-top:2.2rem;width:calc(100% - 8rem)}.download-page__update-title[_ngcontent-%COMP%]{font-size:1.7rem}.download-page__update-title[_ngcontent-%COMP%]     .mat-grid-tile-content{justify-content:flex-start}.download-page__update__check[_ngcontent-%COMP%]{width:24%}']}),e})();var ut=n(84542),ft=n(7175),_t=n(52592),mt=n(78023);function ht(e,t){1&e&&(m.TgZ(0,"mat-hint",9),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.fax_login.error.required")," "))}const bt=function(e){return{maxlength:e}};function Ct(e,t){if(1&e&&(m.TgZ(0,"mat-hint",9),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.hij(" ",m.xi3(2,1,"settings.fax.fax_login.error.maxlength",m.VKq(4,bt,null==e.faxForm.controls.fax_login.errors||null==e.faxForm.controls.fax_login.errors.maxlength?null:e.faxForm.controls.fax_login.errors.maxlength.requiredLength))," ")}}function xt(e,t){1&e&&(m.TgZ(0,"mat-hint",9),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.password.error.required")," "))}const vt=function(e){return{minlength:e}};function Pt(e,t){if(1&e&&(m.TgZ(0,"mat-hint",9),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw();m.xp6(1),m.hij(" ",m.xi3(2,1,"settings.fax.password.error.minlength",m.VKq(4,vt,null==e.faxForm.controls.password.errors||null==e.faxForm.controls.password.errors.minlength?null:e.faxForm.controls.password.errors.minlength.requiredLength))," ")}}function Mt(e,t){1&e&&(m.TgZ(0,"div",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.password.error.invalid")," "))}function Ot(e,t){1&e&&(m.TgZ(0,"div",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.password.error.conflict")," "))}let wt=(()=>{class e{constructor(e,t){this.dialogRef=e,this.faxService=t,this.ngUnsubscribe=new p.xQ,this.item={fax_login:"",password:""},this.faxSubscriptionError=!1,this.faxSubscriptionErrorCode=0,this.isSending=!1,this.faxForm=new i.cw({fax_login:new i.NI(this.item.fax_login,i.kI.compose([i.kI.required,i.kI.maxLength(50)])),password:new i.NI(this.item.password,i.kI.compose([i.kI.required,i.kI.minLength(3)]))})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onModelChange(){this.faxSubscriptionError=!1}save(){this.isSending=!0,this.dialogRef.disableClose=!0,this.faxSubscriptionErrorCode=0,this.faxService.addFaxSubscription(this.item).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.dialogRef.disableClose=!1,this.isSending=!1,this.close(this.item)},e=>{this.dialogRef.disableClose=!1,this.faxSubscriptionErrorCode=e.status,this.faxSubscriptionError=!0,this.isSending=!1})}close(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(P.so),m.Y36(ft.e))},e.\u0275cmp=m.Xpm({type:e,selectors:[["add-fax-subscription"]],decls:20,vars:23,consts:[["loading-area-indicator","","data-e2e","fax-machine-modal-fragment",1,"fax-subscriptions-settings",3,"loadingAreaIndicatorActive"],["e2e","fax-machine-modal-fragment",1,"fax-subscriptions-settings__modal",3,"title"],["novalidate","",3,"formGroup","ngSubmit"],["formControlName","fax_login","matInput","","type","text","data-e2e","fax-machine-modal-fragment__login--input",3,"ngModel","focus","maxlength","placeholder","ngModelChange"],["class","mat-hint--error",4,"ngIf"],["autocomplete","foo","formControlName","password","matInput","","type","password","data-e2e","fax-machine-modal-fragment__pin--input",3,"ngModel","placeholder","minlength","ngModelChange"],["class","fax-subscriptions-settings__error-message","data-e2e","fax-machine-modal-fragment__error-message",4,"ngIf"],["color","primary","size","","buttonTextTranslationKey","cancel","type","basic-button","data-e2e","fax-machine-modal-fragment__cancel--button",1,"add-fax-subscription--cancel-button",3,"appButtonClick"],["color","primary","size","","buttonTextTranslationKey","save","type","raised-button-submit","data-e2e","fax-machine-modal-fragment__confirm--button",3,"disabled"],[1,"mat-hint--error"],["data-e2e","fax-machine-modal-fragment__error-message",1,"fax-subscriptions-settings__error-message"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"modal-container",1),m.ALo(2,"translate"),m.TgZ(3,"form",2),m.NdJ("ngSubmit",function(){return t.faxForm.valid&&t.save()}),m.TgZ(4,"section"),m.TgZ(5,"mat-form-field"),m.TgZ(6,"input",3),m.NdJ("ngModelChange",function(){return t.onModelChange()})("ngModelChange",function(e){return t.item.fax_login=e}),m.ALo(7,"translate"),m.qZA(),m.YNc(8,ht,3,3,"mat-hint",4),m.YNc(9,Ct,3,6,"mat-hint",4),m.qZA(),m.TgZ(10,"mat-form-field"),m.TgZ(11,"input",5),m.NdJ("ngModelChange",function(){return t.onModelChange()})("ngModelChange",function(e){return t.item.password=e}),m.ALo(12,"translate"),m.qZA(),m.YNc(13,xt,3,3,"mat-hint",4),m.YNc(14,Pt,3,6,"mat-hint",4),m.qZA(),m.YNc(15,Mt,3,3,"div",6),m.YNc(16,Ot,3,3,"div",6),m.qZA(),m.TgZ(17,"footer"),m.TgZ(18,"app-button",7),m.NdJ("appButtonClick",function(){return t.close()}),m.qZA(),m._UZ(19,"app-button",8),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.Q6J("loadingAreaIndicatorActive",t.isSending),m.xp6(1),m.Q6J("title",m.lcZ(2,17,"settings.fax.add_fax")),m.xp6(2),m.Q6J("formGroup",t.faxForm),m.xp6(3),m.Q6J("ngModel",t.item.fax_login)("focus",!0)("maxlength",null==t.faxForm.controls.password.errors||null==t.faxForm.controls.password.errors.maxlength?null:t.faxForm.controls.password.errors.maxlength.requiredLength)("placeholder",m.lcZ(7,19,"settings.fax.fax_login.label")),m.xp6(2),m.Q6J("ngIf",t.faxForm.controls.fax_login.hasError("required")&&t.faxForm.controls.fax_login.touched),m.xp6(1),m.Q6J("ngIf",t.faxForm.controls.fax_login.hasError("maxlength")&&t.faxForm.controls.fax_login.touched),m.xp6(2),m.s9C("minlength",null==t.faxForm.controls.password.errors||null==t.faxForm.controls.password.errors.minlength?null:t.faxForm.controls.password.errors.minlength.requiredLength),m.Q6J("ngModel",t.item.password)("placeholder",m.lcZ(12,21,"settings.fax.password.label")),m.xp6(2),m.Q6J("ngIf",t.faxForm.controls.password.hasError("required")&&t.faxForm.controls.password.touched),m.xp6(1),m.Q6J("ngIf",t.faxForm.controls.password.hasError("minlength")&&t.faxForm.controls.password.touched),m.xp6(1),m.Q6J("ngIf",t.faxSubscriptionError&&409!=t.faxSubscriptionErrorCode),m.xp6(1),m.Q6J("ngIf",t.faxSubscriptionError&&409==t.faxSubscriptionErrorCode),m.xp6(3),m.Q6J("disabled",t.faxForm.invalid))},directives:[_t.O,w.O,i._Y,i.JL,i.sg,Z.KE,i.Fj,k.Nt,i.JJ,i.u,A.R,i.nD,y.O5,i.wO,mt.V,Z.bx],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}.fax-subscriptions-settings[_ngcontent-%COMP%]{display:flex}.fax-subscriptions-settings__modal[_ngcontent-%COMP%]{max-width:30rem}.fax-subscriptions-settings__modal[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:.8rem 2.4rem}.fax-subscriptions-settings__modal[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]{color:#0003;font-size:1.4rem;margin-top:-2rem}.fax-subscriptions-settings__modal[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding:.8rem}.fax-subscriptions-settings__error-message[_ngcontent-%COMP%]{color:#b31a3e}modal-container[_ngcontent-%COMP%]{position:relative}.loading-overlay[_ngcontent-%COMP%]{align-items:center;background-color:#fff9;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0;z-index:1}.add-fax-subscription--cancel-button[_ngcontent-%COMP%]{padding-right:.8rem}"]}),e})();var yt=n(76916),Zt=n(65939),kt=n(82613),At=n(77746),Tt=n(77540),qt=n(60424);function St(e,t){1&e&&(m.TgZ(0,"span",17),m._uU(1),m.ALo(2,"uppercase"),m.ALo(3,"translate"),m.qZA()),2&e&&(m.xp6(1),m.Oqu(m.lcZ(2,1,m.lcZ(3,3,"settings.fax.faxes"))))}const It=function(e){return{active:e}};function Nt(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-list-item",21),m.TgZ(1,"span",22),m.TgZ(2,"mat-radio-button",23),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(3).setFavoriteFaxSubscription(t.id)}),m.qZA(),m.TgZ(3,"span",24),m._uU(4),m.qZA(),m.TgZ(5,"span",25),m._uU(6),m.qZA(),m.TgZ(7,"span",26),m.TgZ(8,"span",27),m._uU(9),m.qZA(),m.qZA(),m.qZA(),m.TgZ(10,"span",28),m.TgZ(11,"app-button",29),m.NdJ("appButtonClick",function(){const t=m.CHM(e).$implicit;return m.oxw(3).deleteFaxSubscription(t.id)}),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw(3);m.Q6J("ngClass",m.VKq(6,It,1===n.faxSubscriptions.favorite)),m.xp6(2),m.Q6J("checked",1===e.favorite)("value",e.id),m.xp6(2),m.Oqu(e.display_name),m.xp6(2),m.Oqu(e.fax_login),m.xp6(3),m.hij(" ",e.preferred_outbound_number||e.extension_number," ")}}function Et(e,t){if(1&e&&(m.ynx(0),m.YNc(1,Nt,12,8,"mat-list-item",20),m.BQk()),2&e){const e=m.oxw(2);m.xp6(1),m.Q6J("ngForOf",e.faxSubscriptions)}}function Ut(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",30),m.TgZ(1,"p",31),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"app-button",32),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw(2).addNewTarget()}),m.qZA(),m.qZA()}2&e&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"settings.fax.no_fax_available")," "))}function Rt(e,t){if(1&e&&(m.TgZ(0,"mat-list"),m.YNc(1,Et,2,1,"ng-container",18),m.YNc(2,Ut,5,3,"ng-template",null,19,m.W1O),m.qZA()),2&e){const e=m.MAs(3),t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.faxSubscriptions.length)("ngIfElse",e)}}function Lt(e,t){1&e&&(m.TgZ(0,"mat-list"),m.TgZ(1,"mat-list-item"),m._UZ(2,"app-spinner"),m.qZA(),m.qZA())}function Jt(e,t){1&e&&(m.TgZ(0,"span",33),m._uU(1),m.ALo(2,"uppercase"),m.ALo(3,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,m.lcZ(3,3,"settings.fax.cover_sheets"))," "))}function Ft(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-list-item",34),m.TgZ(1,"span",35),m.TgZ(2,"mat-radio-button",36),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw().setFavoriteFaxCover(t.id)}),m.qZA(),m._uU(3),m.qZA(),m.TgZ(4,"span",37),m.NdJ("click",function(t){const n=m.CHM(e).$implicit;return m.oxw().selectFaxCover(n.id,t)}),m._UZ(5,"app-svg-icon",38),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw();m.ekj("active",(null==n.selectedFaxCover?null:n.selectedFaxCover.id)==e.id),m.xp6(2),m.Q6J("checked",1===e.favorite)("value",e.id),m.xp6(1),m.hij(" ",e.name," ")}}function Qt(e,t){1&e&&(m.TgZ(0,"mat-hint",59),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.name.error.required")," "))}const Dt=function(e){return{maxlength:e}};function Yt(e,t){if(1&e&&(m.TgZ(0,"mat-hint",60),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",m.xi3(2,1,"settings.fax.name.error.maxlength",m.VKq(4,Dt,null==e.coverForm.controls.name.errors||null==e.coverForm.controls.name.errors.maxlength?null:e.coverForm.controls.name.errors.maxlength.requiredLength))," ")}}function Ht(e,t){1&e&&(m.TgZ(0,"mat-hint",61),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.subject.error.required")," "))}function jt(e,t){if(1&e&&(m.TgZ(0,"mat-hint",62),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",m.xi3(2,1,"settings.fax.subject.error.maxlength",m.VKq(4,Dt,null==e.coverForm.controls.subject.errors||null==e.coverForm.controls.subject.errors.maxlength?null:e.coverForm.controls.subject.errors.maxlength.requiredLength))," ")}}function Bt(e,t){1&e&&(m.TgZ(0,"mat-hint",63),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.fax.body.error.required")," "))}function Gt(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"app-button",64),m.NdJ("appButtonClick",function(){m.CHM(e);const t=m.oxw(2);return t.deleteFaxCover(t.selectedFaxCover.id)}),m.qZA()}}function Vt(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",39),m.TgZ(1,"div",40),m.TgZ(2,"div",41),m.TgZ(3,"form",42),m.NdJ("ngSubmit",function(){return m.CHM(e),m.oxw().onSaveFaxCover()}),m.TgZ(4,"section"),m.TgZ(5,"mat-form-field"),m._UZ(6,"input",43),m.ALo(7,"translate"),m.YNc(8,Qt,3,3,"mat-hint",44),m.YNc(9,Yt,3,6,"mat-hint",45),m.qZA(),m.TgZ(10,"mat-form-field"),m._UZ(11,"input",46),m.ALo(12,"translate"),m.YNc(13,Ht,3,3,"mat-hint",47),m.YNc(14,jt,3,6,"mat-hint",48),m.qZA(),m.TgZ(15,"mat-form-field"),m.TgZ(16,"textarea",49),m.ALo(17,"translate"),m._uU(18,"                    "),m.qZA(),m.YNc(19,Bt,3,3,"mat-hint",50),m.qZA(),m.TgZ(20,"div",51),m.TgZ(21,"p"),m.TgZ(22,"strong"),m._uU(23,"$DATE"),m.qZA(),m.qZA(),m.TgZ(24,"span",52),m._uU(25),m.ALo(26,"translate"),m.qZA(),m.TgZ(27,"p"),m.TgZ(28,"strong"),m._uU(29,"$SENDER"),m.qZA(),m.qZA(),m.TgZ(30,"span",53),m._uU(31),m.ALo(32,"translate"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(33,"footer"),m.YNc(34,Gt,1,0,"app-button",54),m._UZ(35,"span",55),m.TgZ(36,"app-button",56),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw().cancelEditFaxCover()}),m.qZA(),m._UZ(37,"app-button",57),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(38,"div",58),m._UZ(39,"fax-cover-sheet"),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(3),m.Q6J("formGroup",e.coverForm),m.xp6(3),m.Q6J("focus",!0)("placeholder",m.lcZ(7,14,"settings.fax.name.label")),m.xp6(2),m.Q6J("ngIf",e.coverForm.controls.name.hasError("required")&&e.coverForm.controls.name.touched),m.xp6(1),m.Q6J("ngIf",e.coverForm.controls.name.hasError("maxlength")&&e.coverForm.controls.name.touched),m.xp6(2),m.Q6J("placeholder",m.lcZ(12,16,"settings.fax.subject.label")),m.xp6(2),m.Q6J("ngIf",e.coverForm.controls.subject.hasError("required")&&e.coverForm.controls.subject.touched),m.xp6(1),m.Q6J("ngIf",e.coverForm.controls.subject.hasError("maxlength")&&e.coverForm.controls.name.touched),m.xp6(2),m.Q6J("placeholder",m.lcZ(17,18,"settings.fax.body.label")),m.xp6(3),m.Q6J("ngIf",e.coverForm.controls.body.hasError("required")&&e.coverForm.controls.body.touched),m.xp6(6),m.hij(" ",m.lcZ(26,20,"settings.fax.time_of_transmission")," "),m.xp6(6),m.hij(" ",m.lcZ(32,22,"settings.fax.fax_number_sender")," "),m.xp6(3),m.Q6J("ngIf",e.selectedFaxCover.id),m.xp6(3),m.Q6J("disabled",!e.coverForm.valid)}}let $t=(()=>{class e extends _.H{constructor(e,t,n,i){super(e),this.router=e,this.faxService=t,this.dialog=n,this.headerButtonService=i,this.ngUnsubscribe=new p.xQ,this.isLoadingFaxSubscriptions=!0,this.isLoadingFaxCovers=!1,this.isLoadingFaxCover=!1,this.isEditFaxCoverShown=!1,this.faxSubscriptions=[],this.faxCovers=[],this.selectedFaxCover=null,this.loadFaxSubscriptions()}ngOnInit(){this.coverForm=new i.cw({name:new i.NI("",i.kI.compose([i.kI.required,i.kI.maxLength(255)])),subject:new i.NI("",i.kI.compose([i.kI.required,i.kI.maxLength(255)])),body:new i.NI("",i.kI.required)}),this.coverForm.valueChanges.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(({subject:e,body:t})=>{this.selectedFaxCover=Object.assign(Object.assign({},this.selectedFaxCover),{subject:e,body:t}),this.faxService.coverData={subject:e,body:t}})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadFaxSubscriptions(){this.faxService.getSubscriptions().pipe((0,B.K)(e=>this.isLoadingFaxSubscriptions=e)).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.faxSubscriptions=e.data})}loadFaxCovers(){this.faxCovers=[],this.faxService.getCovers().pipe((0,B.K)(e=>this.isLoadingFaxCovers=e),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.faxCovers=e.data})}setFavoriteFaxSubscription(e){this.faxService.setFavoriteFaxSubscription(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe()}setFavoriteFaxCover(e){this.faxService.setFavoriteFaxCover(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe()}deleteFaxSubscription(e){this.faxService.deleteFaxSubscription(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.loadFaxSubscriptions()})}deleteFaxCover(e){this.isEditFaxCoverShown=!1,this.faxService.deleteFaxCover(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.loadFaxCovers()})}toggleUpdateFaxCover(){this.selectedFaxCover=null,this.isEditFaxCoverShown=!1}showAddFaxCover(){this.selectedFaxCover=null,this.isEditFaxCoverShown=!0,this.coverForm&&this.coverForm.reset()}cancelEditFaxCover(){this.selectedFaxCover=null,this.isEditFaxCoverShown=!1}selectFaxCover(e,t){t&&t.stopPropagation(),this.loadFaxCoverDetails(e)}loadFaxCoverDetails(e){this.selectedFaxCover=null,this.faxService.getCover(e).pipe((0,B.K)(e=>this.isLoadingFaxCover=e),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.selectedFaxCover=e,this.isEditFaxCoverShown=!0,this.coverForm.setValue({name:e.name,subject:e.subject,body:e.body})})}onSaveFaxSubscription(e){this.loadFaxSubscriptions()}onSaveFaxCover(){this.selectedFaxCover&&this.selectedFaxCover.id?this.faxService.updateFaxCover(this.selectedFaxCover.id,this.coverForm.value).pipe((0,B.K)(e=>this.isLoadingFaxCover=e),(0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.toggleUpdateFaxCover(),this.loadFaxCovers()}):this.faxService.addFaxCover(this.coverForm.value).pipe((0,B.K)(e=>this.isLoadingFaxCover=e),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.toggleUpdateFaxCover(),this.loadFaxCovers()})}addNewTarget(){this.dialog.open(wt).afterClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{e&&this.onSaveFaxSubscription(e)})}onTabChange(e){0===e.index?this.loadFaxSubscriptions():this.loadFaxCovers()}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(h.F0),m.Y36(ft.e),m.Y36(P.uw),m.Y36(yt.d))},e.\u0275cmp=m.Xpm({type:e,selectors:[["settings-fax"]],features:[m.qOj],decls:36,vars:18,consts:[["data-e2e","main-settings-fax-page",3,"selectedTabChange"],["mat-tab-label",""],["data-e2e","main-settings-fax-page__faxes-tab-content",1,"faxes__tab"],[1,"secondary-header"],["icon","favorite","size","small"],[1,"secondary-header__actions"],["iconName","add","size","small","e2e","main-settings-fax-page__fax-table-add",3,"appButtonClick"],[4,"ngIf"],["id","cover-sheets__tab","data-e2e","main-settings-fax-page__cover-sheets-tab-content",1,"fax__cover-sheets__tab"],[1,"side-nav"],[1,"fax__cover-sheets__add"],[1,"fax__cover-sheets__add--text"],["iconName","add","size","small","e2e","main-settings-fax-page__cover-sheet-add",3,"appButtonClick"],["loading-area-indicator","",1,"side-nav__cover-sheet-container",3,"loadingAreaIndicatorActive"],["class","fax__list-item","data-e2e","main-settings-fax-page__cover-sheet-list-element",3,"active",4,"ngFor","ngForOf"],["loading-area-indicator","",1,"cover-sheet__content",3,"loadingAreaIndicatorActive"],["class","scrollable-container",4,"ngIf"],["data-e2e","main-settings-fax-page__faxes-tab"],[4,"ngIf","ngIfElse"],["noFaxSubscriptions",""],["class","fax__list-item","itemHoverbox","","data-e2e","main-settings-fax-page__fax-table-row",3,"ngClass",4,"ngFor","ngForOf"],["itemHoverbox","","data-e2e","main-settings-fax-page__fax-table-row",1,"fax__list-item",3,"ngClass"],[1,"item-primary-content","fax-settings__list-item"],["color","primary","data-e2e","main-settings-fax-page__fax-table-row-favorite",3,"checked","value","click"],["data-e2e","main-settings-fax-page__fax-table-row-title"],["data-e2e","main-settings-fax-page__fax-table-row-id"],[1,"numbers"],["data-e2e","main-settings-fax-page__fax-table-row-number"],[1,"item-secondary-content"],["iconName","delete","size","small","data-e2e","main-settings-fax-page__fax-table-row-delete--button",3,"appButtonClick"],[1,"fax-settings__subscription-list--empty"],["data-e2e","main-settings-fax-page__fax-table-empty-paragraph"],["color","primary","buttonTextTranslationKey","settings.fax.add_fax","type","raised-button-submit","e2e","main-settings-fax-page__fax-add",1,"fax-settings__add-fax-button",3,"appButtonClick"],["data-e2e","main-settings-fax-page__cover-sheets-tab"],["data-e2e","main-settings-fax-page__cover-sheet-list-element",1,"fax__list-item"],["data-e2e","main-settings-fax-page__cover-sheet-list-title",1,"primary-content","cover-sheets__list-item"],["color","primary","data-e2e","main-settings-fax-page__cover-sheet-list-radio-button",3,"checked","value","click"],["data-e2e","main-settings-fax-page__cover-sheet-list-edit",1,"secondary-action",3,"click"],["fill","button-color","icon","edit","size","small"],[1,"scrollable-container"],[1,"left"],[1,"cover-sheet-details"],[1,"contact-form",3,"formGroup","ngSubmit"],["formControlName","name","matInput","","maxlength","50","type","text","data-e2e","main-settings-fax-page__cover-sheet-name-input",3,"focus","placeholder"],["class","mat-hint--error","data-e2e","main-settings-fax-page__cover-sheet-name-required-error",4,"ngIf"],["class","mat-hint--error","data-e2e","main-settings-fax-page__cover-sheet-name-max-length-error",4,"ngIf"],["formControlName","subject","matInput","","maxlength","50","type","text","data-e2e","main-settings-fax-page__cover-sheet-subject-input",3,"placeholder"],["class","mat-hint--error","data-e2e","main-settings-fax-page__cover-sheet-subject-required-error",4,"ngIf"],["class","mat-hint--error","data-e2e","main-settings-fax-page__cover-sheet-subject-max-length-error",4,"ngIf"],["formControlName","body","matInput","","rows","5","type","text","data-e2e","main-settings-fax-page__cover-sheet-message-textarea",3,"placeholder"],["class","mat-hint--error","data-e2e","main-settings-fax-page__cover-sheet-message-required-error",4,"ngIf"],["data-e2e","main-settings-fax-page__cover-sheet-details-info",1,"cover-sheet-details__info"],["data-e2e","main-settings-fax-page__cover-sheet-details-info-date"],["data-e2e","main-settings-fax-page__cover-sheet-details-info-sender"],["color","warn","buttonTextTranslationKey","delete","type","basic-button","e2e","main-settings-fax-page__cover-sheet-delete",3,"appButtonClick",4,"ngIf"],[1,"spacer"],["color","primary","buttonTextTranslationKey","cancel","type","basic-button","e2e","main-settings-fax-page__cover-sheet-cancel",1,"settings-fax--cancel-button",3,"appButtonClick"],["color","primary","buttonTextTranslationKey","save","type","raised-button-submit","e2e","main-settings-fax-page__cover-sheet-confirm",3,"disabled"],[1,"right"],["data-e2e","main-settings-fax-page__cover-sheet-name-required-error",1,"mat-hint--error"],["data-e2e","main-settings-fax-page__cover-sheet-name-max-length-error",1,"mat-hint--error"],["data-e2e","main-settings-fax-page__cover-sheet-subject-required-error",1,"mat-hint--error"],["data-e2e","main-settings-fax-page__cover-sheet-subject-max-length-error",1,"mat-hint--error"],["data-e2e","main-settings-fax-page__cover-sheet-message-required-error",1,"mat-hint--error"],["color","warn","buttonTextTranslationKey","delete","type","basic-button","e2e","main-settings-fax-page__cover-sheet-delete",3,"appButtonClick"]],template:function(e,t){1&e&&(m.TgZ(0,"mat-tab-group",0),m.NdJ("selectedTabChange",function(e){return t.onTabChange(e)}),m.TgZ(1,"mat-tab"),m.YNc(2,St,4,5,"ng-template",1),m.TgZ(3,"div",2),m.TgZ(4,"div",3),m.TgZ(5,"span"),m._UZ(6,"app-svg-icon",4),m.qZA(),m.TgZ(7,"span"),m._uU(8),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"span"),m._uU(11),m.ALo(12,"translate"),m.qZA(),m.TgZ(13,"span"),m._uU(14),m.ALo(15,"translate"),m.qZA(),m.TgZ(16,"div",5),m.TgZ(17,"app-button",6),m.NdJ("appButtonClick",function(){return t.addNewTarget()}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(18,"mat-radio-group"),m.YNc(19,Rt,4,2,"mat-list",7),m.YNc(20,Lt,3,0,"mat-list",7),m.qZA(),m.qZA(),m.qZA(),m.TgZ(21,"mat-tab"),m.YNc(22,Jt,4,5,"ng-template",1),m.TgZ(23,"div",8),m.TgZ(24,"div",9),m.TgZ(25,"header",10),m.TgZ(26,"span",11),m._uU(27),m.ALo(28,"translate"),m.qZA(),m.TgZ(29,"app-button",12),m.NdJ("appButtonClick",function(){return t.showAddFaxCover()}),m.qZA(),m.qZA(),m.TgZ(30,"div",13),m.TgZ(31,"mat-radio-group"),m.TgZ(32,"mat-list"),m.YNc(33,Ft,6,5,"mat-list-item",14),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(34,"div",15),m.YNc(35,Vt,40,24,"div",16),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(8),m.Oqu(m.lcZ(9,10,"settings.fax.fax_title")),m.xp6(3),m.Oqu(m.lcZ(12,12,"settings.fax.fax_id")),m.xp6(3),m.Oqu(m.lcZ(15,14,"settings.fax.fax_number")),m.xp6(5),m.Q6J("ngIf",!t.isLoadingFaxSubscriptions),m.xp6(1),m.Q6J("ngIf",t.isLoadingFaxSubscriptions),m.xp6(7),m.Oqu(m.lcZ(28,16,"settings.fax.add_cover_sheet")),m.xp6(3),m.Q6J("loadingAreaIndicatorActive",t.isLoadingFaxCovers),m.xp6(3),m.Q6J("ngForOf",t.faxCovers),m.xp6(1),m.Q6J("loadingAreaIndicatorActive",t.isLoadingFaxCover),m.xp6(1),m.Q6J("ngIf",t.isEditFaxCoverShown&&!t.isLoadingFaxCover))},directives:[Zt.SP,Zt.uX,Zt.uD,I.u,mt.V,kt.VQ,y.O5,_t.O,At.i$,y.sg,At.Tg,Tt.h,y.mk,kt.U0,K.S,i._Y,i.JL,i.sg,Z.KE,i.Fj,k.Nt,i.JJ,i.u,i.nD,A.R,qt.k,Z.bx],pipes:[N.X$,y.gd],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}[_nghost-%COMP%]    {display:flex;flex:1}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}[_nghost-%COMP%]     mat-tab-group{flex:1}[_nghost-%COMP%]     mat-tab-group .mat-tab-body-wrapper, [_nghost-%COMP%]     mat-tab-group .mat-tab-body-content{display:flex;flex:1}[_nghost-%COMP%]     mat-tab-group .mat-tab-label{opacity:.5}[_nghost-%COMP%]     mat-tab-group .mat-tab-label.mat-tab-label-active{color:#000;opacity:1}.scrollable-container[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.scrollable-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:0 0 auto;overflow-y:auto}.scrollable-container[_ngcontent-%COMP%] > .left[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}.secondary-header[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid #e5e5e5;color:#b5b5b5;display:flex;font-size:1.4rem;height:5.6rem}.secondary-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.5rem 1.5rem}.secondary-header[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1}.secondary-header[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]:first-child{fill:#b5b5b5;flex:none;padding-bottom:1rem;padding-left:1.2rem;padding-right:1.2rem;width:2.4rem}.secondary-header[_ngcontent-%COMP%]   .secondary-header__actions[_ngcontent-%COMP%]{font-size:0}.faxes__tab[_ngcontent-%COMP%]{flex:1}.faxes__tab[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]{padding-top:0}.faxes__tab[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;display:flex;flex-direction:column;height:inherit;justify-content:center;min-height:5.6rem}.faxes__tab[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}.faxes__tab[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover   .item-secondary-content[_ngcontent-%COMP%]{visibility:visible}.faxes__tab[_ngcontent-%COMP%]   .item-primary-content.fax-settings__list-item[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1}.faxes__tab[_ngcontent-%COMP%]   .item-primary-content.fax-settings__list-item[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex:1}.faxes__tab[_ngcontent-%COMP%]   .item-primary-content.fax-settings__list-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:1.6rem}.faxes__tab[_ngcontent-%COMP%]   .numbers[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}.fax-settings__list-item[_ngcontent-%COMP%]{font-size:1.8rem}.fax-settings__subscription-list--empty[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.fax__cover-sheets__tab[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .fax__cover-sheets__add[_ngcontent-%COMP%]{align-items:center;background-color:transparent;border-bottom:.1rem solid #e5e5e5;display:flex;flex-direction:row;height:5.6rem}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .fax__cover-sheets__add[_ngcontent-%COMP%]   .fax__cover-sheets__add--text[_ngcontent-%COMP%]{flex:1;font-size:1.5rem;font-weight:bold;padding-left:1.4rem;padding-right:1.4rem}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .primary-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{background-color:#fff;border-right:.1rem solid #e5e5e5;color:#000;display:flex;flex-direction:column;width:32.2rem}@media screen and (min-width: 768px) and (max-width: 1023px){.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{width:33.33vw}}@media screen and (max-width: 767px){.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]{width:25.6rem}}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-right:.4rem}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]{margin:0;padding:0}.fax__cover-sheets__tab[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover   .secondary-action[_ngcontent-%COMP%]{visibility:visible}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav__cover-sheet-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav__cover-sheet-container[_ngcontent-%COMP%]   .primary-content[_ngcontent-%COMP%]{align-items:center;display:flex;width:100%}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .side-nav__cover-sheet-container[_ngcontent-%COMP%]   .secondary-action[_ngcontent-%COMP%]{color:#000;cursor:pointer;visibility:hidden}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .cover-sheet__content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:row}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .cover-sheet__content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{border-right:.1rem solid #e5e5e5;margin-left:0;margin-right:0}.fax__cover-sheets__tab[_ngcontent-%COMP%]   .cover-sheet__content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:32.2rem}@media screen and (min-width: 768px) and (max-width: 1023px){.fax__cover-sheets__tab[_ngcontent-%COMP%]   .cover-sheet__content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:33.33vw}}@media screen and (max-width: 767px){.fax__cover-sheets__tab[_ngcontent-%COMP%]   .cover-sheet__content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:25.6rem}}.cover-sheet-details[_ngcontent-%COMP%]{flex:1;padding:1rem}.cover-sheet-details[_ngcontent-%COMP%]   .cover-sheet-details__info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.cover-sheet-details[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{display:flex;padding-top:3rem}.cover-sheet-details[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}.cover-sheets__list-item[_ngcontent-%COMP%]{font-size:1.8rem}.settings-fax--cancel-button[_ngcontent-%COMP%]{padding-right:.8rem}"]}),e})();var zt=n(42683),Xt=n(82139),Kt=n(12286),Wt=n(39249),en=n(97574),tn=n(64300),nn=n(56869),on=n(27077),sn=n(53149);function an(e,t){1&e&&m._UZ(0,"logo",10),2&e&&m.Q6J("hasLink",!1)}function rn(e,t){1&e&&m._UZ(0,"product-logo",11)}function ln(e,t){if(1&e&&(m.TgZ(0,"span",12),m._uU(1),m.qZA()),2&e){const e=m.oxw();m.Q6J("ngClass",e.visibilityClass()),m.xp6(1),m.hij(" ",e.commitInfo," ")}}function cn(e,t){if(1&e&&m._UZ(0,"app-link",13),2&e){const e=t.$implicit;m.Q6J("link",e)("e2e","main-settings-info-page"+e.e2e)}}function gn(e,t){if(1&e&&m._UZ(0,"img",14),2&e){const e=m.oxw();m.Q6J("src",e.nfonBrandingLogoSrc,m.LSH)}}const dn=function(e){return{year:e}};let pn=(()=>{class e{constructor(e,t,n,i,o,s){this.whiteLabelService=e,this.themeService=t,this.helperService=n,this.languageService=i,this.electronService=o,this.cd=s,this.ngUnsubscribe=new p.xQ,this.commitInfo=Kt.k.COMMIT_INFO,this.isInfoVisible=!1,this.legalLinks=[],this.nfonBrandingLogoSrc="/assets/logo/powered-by-nfon-logo.png",this.version=Kt.k.VERSION,this.year=(new Date).getFullYear()}ngOnInit(){this.language=this.languageService.getCurrentLanguage(),this.setWhiteLabelData(this.language),this.getDesktopAppVersion()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}toggleCommitInfo(){return this.isInfoVisible=!this.isInfoVisible}visibilityClass(){return this.isInfoVisible?"info--visible":"info--hidden"}setWhiteLabelData(e){this.logoAlternativeText=this.themeService.getThemeLabel(),this.legalLinks=this.whiteLabelService.data.legalLinks,this.copyrightTranslation=this.whiteLabelService.data.copyrightTranslation}getDesktopAppVersion(){this.electronService.desktop&&this.electronService.getAppVersion().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.version=this.generateDesktopAppVersion(e),this.cd.detectChanges()})}generateDesktopAppVersion(e){return`${e} (${this.isMacintosh()?"Mac":"Windows"}) \u2022 ${this.version}`}isMacintosh(){return navigator.platform.includes("Mac")}get isCloudyaTheme(){return this.themeService.isCloudyaTheme}get isPoweredByLogoShown(){return!!this.helperService.getDeepProperty(this.whiteLabelService.data,"isPoweredByLogoShownUserInfo")}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(De.D),m.Y36(Wt.f),m.Y36(en.$),m.Y36(tn.T),m.Y36(ot.d),m.Y36(m.sBO))},e.\u0275cmp=m.Xpm({type:e,selectors:[["info-page"]],decls:14,vars:12,consts:[["data-e2e","main-settings-info-page"],["class","info-page__logo","location","info-page","e2e","main-settings-info-page",3,"hasLink",4,"ngIf","ngIfElse"],["productNameTemplate",""],[1,"info-page__version",3,"dblclick"],["class","info-page__commit-info",3,"ngClass",4,"ngIf"],[1,"info-page__link-section"],["class","info-page__link","customClass","info-page__link",3,"link","e2e",4,"ngFor","ngForOf"],[1,"powered-by-nfon-logo"],["alt","Powered by NFON","data-e2e","main-settings-info-page__powered-by-nfon--img",3,"src",4,"ngIf"],["data-e2e","main-settings-info-page__copyright",1,"info-page__footer"],["location","info-page","e2e","main-settings-info-page",1,"info-page__logo",3,"hasLink"],["data-e2e","main-settings-info-page__product-logo",1,"info-page__product-name"],[1,"info-page__commit-info",3,"ngClass"],["customClass","info-page__link",1,"info-page__link",3,"link","e2e"],["alt","Powered by NFON","data-e2e","main-settings-info-page__powered-by-nfon--img",3,"src"]],template:function(e,t){if(1&e&&(m.TgZ(0,"section",0),m.YNc(1,an,1,1,"logo",1),m.YNc(2,rn,1,0,"ng-template",null,2,m.W1O),m.TgZ(4,"div",3),m.NdJ("dblclick",function(){return t.toggleCommitInfo()}),m._uU(5),m.qZA(),m.YNc(6,ln,2,2,"span",4),m.TgZ(7,"div",5),m.YNc(8,cn,1,2,"app-link",6),m.qZA(),m.TgZ(9,"div",7),m.YNc(10,gn,1,1,"img",8),m.qZA(),m.qZA(),m.TgZ(11,"span",9),m._uU(12),m.ALo(13,"translate"),m.qZA()),2&e){const e=m.MAs(3);m.xp6(1),m.Q6J("ngIf",!t.isCloudyaTheme)("ngIfElse",e),m.xp6(4),m.hij(" ",t.version," "),m.xp6(1),m.Q6J("ngIf",t.isCloudyaTheme),m.xp6(2),m.Q6J("ngForOf",t.legalLinks),m.xp6(2),m.Q6J("ngIf",t.isPoweredByLogoShown),m.xp6(2),m.hij(" ",m.xi3(13,7,t.copyrightTranslation,m.VKq(10,dn,t.year)),"\n")}},directives:[y.O5,y.sg,nn.R,on.i,y.mk,sn.J],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{align-items:center;display:flex;flex:1;flex-direction:column;height:100%;justify-content:space-evenly}section[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.info-page__logo[_ngcontent-%COMP%]{margin-bottom:5rem}.info-page__commit-info[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 .4rem #000;display:inline-block;padding:1rem}.info-page__link-section[_ngcontent-%COMP%]{padding:2rem}.info-page__footer[_ngcontent-%COMP%]{color:#999;font-size:1.8rem;padding:2rem}.powered-by-nfon-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:5.6rem;width:18.9rem}.info--hidden[_ngcontent-%COMP%]{visibility:hidden}.info--visible[_ngcontent-%COMP%]{-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-name:showCommit;animation-name:showCommit}@-webkit-keyframes showCommit{0%{opacity:0;transform:translateY(-50%)}to{opacity:1;transform:none}}@keyframes showCommit{0%{opacity:0;transform:translateY(-50%)}to{opacity:1;transform:none}}"],changeDetection:0}),e})();var un=n(86561),fn=n(11740);class _n extends un.H{setAttributes(e){this.id=e.id,this.display_name=e.display_name,this.extension_number=e.extension_number,this.queue_direction=e.queue_direction,this.user_extension_active=e.user_extension_active}isActive(){return this.user_extension_active}setActive(e=!0){this.user_extension_active=fn.W.parseBoolean(e)}update(e){this.id=e.id,this.display_name=e.display_name,this.extension_number=e.extension_number,this.queue_direction=e.queue_direction,this.user_extension_active=e.user_extension_active}}var mn=n(88002);function hn(e,t){if(1&e&&(m.TgZ(0,"mat-option",10),m.TgZ(1,"div",11),m._UZ(2,"svg-avatar",12),m.TgZ(3,"span",13),m.TgZ(4,"span",14),m._uU(5),m.qZA(),m.TgZ(6,"span",15),m._uU(7),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e),m.xp6(5),m.hij(" ",e.display_name,""),m.xp6(2),m.Oqu(e.extension_number)}}let bn=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t}ngOnInit(){this.createForm(),this.data.queuesAvailable=this.data.queuesAvailable.filter(e=>!(!e.display_name||!e.extension_number)),this.filteredQueues$=this.queueForm.get("queue").valueChanges.pipe((0,Y.O)(""),(0,mn.U)(e=>e?this.filterItems(e,this.data.queuesAvailable):this.data.queuesAvailable.slice()))}displayFn(e){return e&&e.display_name}save(){this.dialogRef.close(this.queueForm.controls.queue.value)}close(){this.dialogRef.close()}filterItems(e,t){const n=e.DISPLAY_NAME?e.DISPLAY_NAME.toString().toLowerCase():e.toString().toLowerCase(),i=new RegExp(`.*${n}.*`,"i");return t.filter(e=>!(!e.display_name||!e.extension_number)&&(i.test(e.display_name.toLowerCase())||i.test(e.extension_number.toString())))}createForm(){this.queueForm=new i.cw({queue:new i.NI(this.queue,i.kI.compose([i.kI.required,$.C.autocompleteIsItemSelected()]))})}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(P.so),m.Y36(P.WI))},e.\u0275cmp=m.Xpm({type:e,selectors:[["queues-form"]],decls:15,vars:13,consts:[["data-e2e","queue-selector-fragment",1,"queues-form-dialog"],[3,"title"],[3,"formGroup"],[1,"queue-container"],["icon","queue","size","small",1,"queue-container__icon"],["formControlName","queue","matInput","","data-e2e","queue-selector-fragment__search-input",3,"matAutocomplete","placeholder"],[3,"displayWith"],["auto","matAutocomplete"],["class","queues-form__option",3,"value",4,"ngFor","ngForOf"],["e2e","queue-selector-fragment",3,"saveDisabled","cancelClick","saveClick"],[1,"queues-form__option",3,"value"],[1,"queues-form__option-container"],["iconName","queue","wrapperSize","medium"],[1,"queues-form__name"],["mat-line","","data-e2e","queue-selector-fragment__search-autocomplete-option-name"],["mat-line","","data-e2e","queue-selector-fragment__search-autocomplete-option-number",1,"queues-form__extension"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"modal-container",1),m.ALo(2,"translate"),m.TgZ(3,"form",2),m.TgZ(4,"div",3),m._UZ(5,"app-svg-icon",4),m.TgZ(6,"mat-form-field"),m.TgZ(7,"label"),m._UZ(8,"input",5),m.ALo(9,"translate"),m.qZA(),m.TgZ(10,"mat-autocomplete",6,7),m.YNc(12,hn,8,3,"mat-option",8),m.ALo(13,"async"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(14,"footer-actions",9),m.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.save()}),m.qZA(),m.qZA(),m.qZA()),2&e){const e=m.MAs(11);m.xp6(1),m.Q6J("title",m.lcZ(2,7,"settings.queues.profile.queue_add_form_title")),m.xp6(2),m.Q6J("formGroup",t.queueForm),m.xp6(5),m.s9C("placeholder",m.lcZ(9,9,"settings.queues.profile.search_placeholder")),m.Q6J("matAutocomplete",e),m.xp6(2),m.Q6J("displayWith",t.displayFn),m.xp6(2),m.Q6J("ngForOf",m.lcZ(13,11,t.filteredQueues$)),m.xp6(2),m.Q6J("saveDisabled",t.queueForm.invalid)}},directives:[w.O,i._Y,i.JL,i.sg,I.u,Z.KE,i.Fj,k.Nt,z.ZL,i.JJ,i.u,z.XC,y.sg,q.c,S.ey,W.T,S.X2],pipes:[N.X$,y.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}.queue-container[_ngcontent-%COMP%]{display:flex;min-width:48rem;padding:.8rem 2.4rem}.queue-container__icon[_ngcontent-%COMP%]{align-self:center;margin-right:1rem}.queues-form__option[_ngcontent-%COMP%]{height:6rem;line-height:2.4rem}.queues-form__option-container[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:1.8rem}.queues-form__extension[_ngcontent-%COMP%]{display:block;font-size:1.4rem}.queues-form__name[_ngcontent-%COMP%]{margin-left:1rem}"]}),e})();var Cn=n(26215),xn=n(39485);let vn=(()=>{class e{constructor(e){this.http=e,this.queueProfilesSource=new Cn.X(!1),this.queueActiveProfileChange=new Cn.X({}),this.queueProfilesSubscriber$=this.queueProfilesSource.asObservable(),this.queueActiveProfileChangeSubscriber$=this.queueActiveProfileChange.asObservable()}emitQueueProfiles(e){this.queueProfilesSource.next(e)}emitQueueActiveProfileChange(e){this.queueActiveProfileChange.next(e)}getAll(){return this.http.get(this.queuesInitApiUrl)}getQueues(){return this.http.get(this.queuesQueuesApiUrl)}getProfiles(){return this.http.get(this.queuesProfilesApiUrl)}getProfile(e){return this.http.get(this.queuesProfileApiUrl+"/"+e)}saveProfile(e){return this.http.put(this.queuesProfileApiUrl+"/"+e.id,e)}createProfile(e){return this.http.post(this.queuesProfileApiUrl,e)}deleteProfile(e){return this.http.delete(this.queuesProfileApiUrl+"/"+e.id)}addQueueToProfile(e,t,n=!1){return t.isDefault()?this.activateQueue(e):this.http.put(this.queuesProfileApiUrl+"/"+t.id+"/queue/"+e.id+(n?"?activate=true":""),null)}removeQueueFromProfile(e,t,n=!1){return t.isDefault()?this.deactivateQueue(e):this.http.delete(this.queuesProfileApiUrl+"/"+t.id+"/queue/"+e.id+(n?"?deactivate=true":""))}activateQueue(e){return this.http.post(this.queuesQueueApiUrl+e.id,null)}deactivateQueue(e){return this.http.delete(this.queuesQueueApiUrl+e.id)}activateProfile(e){return this.http.post(this.queuesProfileApiUrl+"/"+e.id+"/activate",null)}get queuesInitApiUrl(){return`${xn.N.API_URL}/queues/init`}get queuesProfilesApiUrl(){return`${xn.N.API_URL}/queues/profiles`}get queuesProfileApiUrl(){return`${xn.N.API_URL}/queues/profile`}get queuesQueuesApiUrl(){return`${xn.N.API_URL}/queues/queues`}get queuesQueueApiUrl(){return`${xn.N.API_URL}/queues/queue/`}}return e.\u0275fac=function(t){return new(t||e)(m.LFG(o.eN))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Pn=n(67798),Mn=n(55821),On=n(63743);function wn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-list-item",9),m.TgZ(1,"span",10),m._uU(2),m.qZA(),m.TgZ(3,"span",10),m._uU(4),m.qZA(),m.TgZ(5,"span",11),m.TgZ(6,"button",12),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw().removeQueue(t)}),m._UZ(7,"app-svg-icon",13),m.TgZ(8,"hoverbox"),m._uU(9),m.ALo(10,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit;m.xp6(2),m.Oqu(e.display_name),m.xp6(2),m.Oqu(e.extension_number),m.xp6(5),m.hij(" ",m.lcZ(10,3,"toolbar.buttons.queue_delete.tooltip")," ")}}function yn(e,t){1&e&&(m.TgZ(0,"mat-list-item"),m._UZ(1,"app-spinner"),m.qZA())}function Zn(e,t){1&e&&(m.TgZ(0,"div",14),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.queues.no_queue_selected"),"\n"))}let kn=(()=>{class e extends _.H{constructor(e,t,n,i,o){super(e),this.router=e,this.queueService=t,this.snackBarService=n,this.dialog=i,this.helpersService=o,this.ngUnsubscribe=new p.xQ,this.headerColumnData=[{name:"display_name",title:"settings.queues.name",class:"queue name-title",e2e:"main-settings-queues-page__table-header-name"},{name:"extension_number",title:"settings.queues.number",class:"queue number-title",e2e:"main-settings-queues-page__table-header-number"}],this.queues=[],this.queuesSelected=[],this.queuesAvailable=[],this.isLoading=!1,this.initProfilesAndQueues()}initProfilesAndQueues(){this.isLoading=!0,this.queueService.getAll().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{(this.helpersService.getDeepProperty(e,"queues.data")||[]).forEach(e=>{const t=new _n(e);this.queues[t.id]=t}),this.queues.forEach(e=>{e.isActive()?this.queuesSelected.push(e):this.queuesAvailable.push(e)})},()=>{this.isLoading=!1,this.snackBarService.openErrorInfo("Error occurred")},()=>{this.isLoading=!1})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}checkIfOutboundQueuePresent(){let e=!1;for(const t of this.queues)if(t&&t.user_extension_active&&"OUTBOUND"===t.queue_direction){e=!0;break}return e}moveQueue(e,t,n){if(null!==e&&n!==t&&null!==t)if("add"==("queuesAvailable"===t?"remove":"add")){if("OUTBOUND"===e.queue_direction&&this.checkIfOutboundQueuePresent())return void this.snackBarService.openInfo("settings.queues.outbound_error");this.snackBarService.open("settings.queues.profile.adding_queue"),this.queueService.activateQueue(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.queuesSelected.push(this.queuesAvailable.splice(this.queuesAvailable.indexOf(e),1)[0]),e.setActive(!0),this.snackBarService.openInfo("settings.queues.profile.queue_added",!0)},()=>{this.snackBarService.openErrorInfo("Error occurred")})}else this.snackBarService.open("settings.queues.profile.removing_queue"),this.queueService.deactivateQueue(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{e.setActive(!1),this.snackBarService.openInfo("settings.queues.profile.queue_removed",!0)},()=>{this.snackBarService.openErrorInfo("Error occurred")})}addQueue(e){this.moveQueue(e,"queuesSelected","queuesAvailable")}removeQueue(e){this.queuesAvailable.push(this.queuesSelected.splice(this.queuesSelected.indexOf(e),1)[0]),this.moveQueue(e,"queuesAvailable","queuesSelected")}toggleAddQueueForm(){this.dialog.open(bn,{data:{queuesAvailable:this.queuesAvailable}}).afterClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{e&&this.addQueue(e)})}changeOrder(e){this.order=e.order,this.reverse=e.reverse}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(h.F0),m.Y36(vn),m.Y36(C.c),m.Y36(P.uw),m.Y36(en.$))},e.\u0275cmp=m.Xpm({type:e,selectors:[["settings-queues"]],features:[m.qOj],decls:13,vars:11,consts:[["data-e2e","main-settings-queues-page"],[1,"secondary-header"],[3,"data","orderChange"],[1,"add"],["appHoverbox","","mat-icon-button","","type","button","data-e2e","main-settings-queues-page__table-add--button",3,"click"],["fill","button-color","icon","add","size","small"],["data-e2e","main-settings-queues-page__table-row",4,"ngFor","ngForOf"],[4,"ngIf"],["class","no-queue-selected",4,"ngIf"],["data-e2e","main-settings-queues-page__table-row"],[1,"column"],[1,"column","item-secondary-content"],["appHoverbox","","mat-icon-button","","type","button","data-e2e","main-settings-queues-page__table-row-delete--button",3,"click"],["fill","button-color","icon","logout","size","small"],[1,"no-queue-selected"]],template:function(e,t){1&e&&(m.TgZ(0,"mat-list",0),m.TgZ(1,"mat-list-item",1),m.TgZ(2,"sortable-list-header",2),m.NdJ("orderChange",function(e){return t.changeOrder(e)}),m.qZA(),m.TgZ(3,"span",3),m.TgZ(4,"button",4),m.NdJ("click",function(){return t.toggleAddQueueForm()}),m._UZ(5,"app-svg-icon",5),m.TgZ(6,"hoverbox"),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(9,wn,11,5,"mat-list-item",6),m.ALo(10,"orderBy"),m.YNc(11,yn,2,0,"mat-list-item",7),m.qZA(),m.YNc(12,Zn,3,3,"div",8)),2&e&&(m.xp6(2),m.Q6J("data",t.headerColumnData),m.xp6(5),m.hij(" ",m.lcZ(8,5,"toolbar.buttons.queue_add.tooltip")," "),m.xp6(2),m.Q6J("ngForOf",m.Dn7(10,7,t.queuesSelected,t.order,!t.reverse)),m.xp6(2),m.Q6J("ngIf",t.isLoading),m.xp6(1),m.Q6J("ngIf",!t.isLoading&&0===t.queuesSelected.length))},directives:[At.i$,At.Tg,Pn.c,Ye.lW,Mn.r,I.u,On.B,y.sg,y.O5,K.S],pipes:[N.X$,nt.T],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem;width:100%}mat-list[_ngcontent-%COMP%]{overflow-y:visible;padding:0}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]:last-of-type{display:block;max-width:7rem;padding-right:0}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .item-secondary-content[_ngcontent-%COMP%]{overflow:visible;text-align:right;visibility:hidden}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:visible}.no-queue-selected[_ngcontent-%COMP%]{font-size:2.3rem;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}"]}),e})();var An=n(7685);let Tn=(()=>{class e{constructor(e,t){this.snackbarService=e,this.dialogRef=t,this.isSending=!1,this.SAVING_LABEL="",this.SUCCESS_LABEL="",this.ERROR_LABEL=""}close(){this.isSending||this.dialogRef.close()}initForm(){throw new Error("Method not implemented.")}setErrors(){throw new Error("Method not implemented.")}setErrorValue(e,t){throw new Error("Method not implemented.")}request(e){throw new Error("Method not implemented.")}save(){this.isSending=!0,this.snackbarService.open(this.SAVING_LABEL),this.request(this.formGroup.value).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}handleSuccess(){this.isSending=!1,this.snackbarService.openInfo(this.SUCCESS_LABEL),this.close()}handleError(e){this.isSending=!1,this.snackbarService.openInfo(this.ERROR_LABEL),e.error.message.includes("currentPassword")&&this.setErrorValue("currentPassword","invalid"),403===e.status&&this.setErrors()}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(C.c),m.Y36(P.so))},e.\u0275dir=m.lG2({type:e}),e})();var qn=n(96987),Sn=n(92937);const In=["passwordHintOrigin"];function Nn(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.change_password.error.current_password_required")," "))}function En(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.change_password.error.invalidPassword")," "))}function Un(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.change_password.error.invalidPassword")," "))}function Rn(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.change_password.error.not_equal")," "))}function Ln(e,t){1&e&&(m.TgZ(0,"div",11),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.change_password.hint"),"\n"))}let Jn=(()=>{class e extends Tn{constructor(e,t,n,i,o){super(e,n),this.snackbarService=e,this.userSettingsService=t,this.dialogRef=n,this.overlay=i,this.tokenService=o,this.ngUnsubscribe=new p.xQ,this.data={currentPassword:"",newPassword:"",repeatNewPassword:""},this.SAVING_LABEL="settings.extension.change_password.saving",this.SUCCESS_LABEL="settings.extension.change_password.saved",this.ERROR_LABEL="settings.extension.change_password.error.saving",this.initForm()}ngAfterViewInit(){setTimeout(()=>{this.configureOverlay()},300)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.formGroup=new i.cw({currentPassword:new i.NI(this.data.currentPassword,i.kI.required),newPassword:new i.NI(this.data.newPassword,i.kI.compose([i.kI.required,An._.password()])),repeatNewPassword:new i.NI(this.data.repeatNewPassword,i.kI.compose([i.kI.required,An._.password()]))}),this.formGroup.valueChanges.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{const e=this.formGroup.get("newPassword"),t=this.formGroup.get("repeatNewPassword");t.setErrors(t.value!==e.value?{notEqual:!0}:null)}),this.formGroup.get("newPassword").valueChanges.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{const e=this.formGroup.get("newPassword");e.hasError("invalidPassword")&&e.setErrors({invalidPassword:!0})})}setErrors(){this.formGroup.get("currentPassword").setErrors({required:!0})}setErrorValue(e,t){"invalid"===t&&this.formGroup.get(e).setErrors({invalid:!0})}request(e){return this.userSettingsService.updateUserPassword(e)}save(){this.isSending=!0,this.snackbarService.open(this.SAVING_LABEL),this.request(this.formGroup.value).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}handleSuccess(){this.isSending=!1,this.snackbarService.openInfo(this.SUCCESS_LABEL),this.tokenService.invalidateToken(),this.close()}configureOverlay(){this.overlayRef=this.overlay.create(new M.X_({hasBackdrop:!1,positionStrategy:this.overlay.position().flexibleConnectedTo(this.$passwordHintOrigin).withPositions([{originX:"end",originY:"bottom",overlayX:"start",overlayY:"center"}])})),this.overlayRef.attach(this.$passwordHint),this.dialogRef.beforeClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.destroyOverlay()})}destroyOverlay(){this.overlayRef.dispose()}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(C.c),m.Y36(qn.s),m.Y36(P.so),m.Y36(M.aV),m.Y36(Sn.B))},e.\u0275cmp=m.Xpm({type:e,selectors:[["change-password"]],viewQuery:function(e,t){if(1&e&&(m.Gf(In,5),m.Gf(O.ig,5)),2&e){let e;m.iGM(e=m.CRH())&&(t.$passwordHintOrigin=e.first),m.iGM(e=m.CRH())&&(t.$passwordHint=e.first)}},features:[m.qOj],decls:21,vars:20,consts:[["data-e2e","password-change-modal-fragment",1,"password-modal","change-password",3,"click"],[3,"title","click"],["novalidate","",3,"formGroup"],["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["formControlName","currentPassword","matInput","","type","password","data-e2e","password-change-modal-fragment__current-password--input",3,"focus","placeholder"],[4,"ngIf"],["formControlName","newPassword","matInput","","type","password","data-e2e","password-change-modal-fragment__new-password--input",3,"placeholder"],["passwordHintOrigin",""],["formControlName","repeatNewPassword","matInput","","type","password","data-e2e","password-change-modal-fragment__new-password-confirmation--input",3,"placeholder"],["e2e","password-change-modal-fragment",3,"saveDisabled","cancelClick","saveClick"],["class","password-hint",4,"cdk-portal"],[1,"password-hint"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("click",function(){return t.close()}),m.TgZ(1,"modal-container",1),m.NdJ("click",function(e){return e.stopPropagation()}),m.ALo(2,"translate"),m.TgZ(3,"form",2),m.TgZ(4,"section",3),m.TgZ(5,"mat-form-field"),m._UZ(6,"input",4),m.ALo(7,"translate"),m.YNc(8,Nn,3,3,"mat-error",5),m.YNc(9,En,3,3,"mat-error",5),m.qZA(),m.TgZ(10,"mat-form-field"),m._UZ(11,"input",6,7),m.ALo(13,"translate"),m.YNc(14,Un,3,3,"mat-error",5),m.qZA(),m.TgZ(15,"mat-form-field"),m._UZ(16,"input",8),m.ALo(17,"translate"),m.YNc(18,Rn,3,3,"mat-error",5),m.qZA(),m.qZA(),m.TgZ(19,"footer-actions",9),m.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.save()}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.YNc(20,Ln,3,3,"div",10)),2&e&&(m.xp6(1),m.Q6J("title",m.lcZ(2,12,"settings.extension.change_password.label")),m.xp6(2),m.Q6J("formGroup",t.formGroup),m.xp6(1),m.Q6J("loadingAreaIndicatorActive",t.isSending),m.xp6(2),m.Q6J("focus",!0)("placeholder",m.lcZ(7,14,"settings.extension.change_password.current_password")),m.xp6(2),m.Q6J("ngIf",t.formGroup.controls.currentPassword.hasError("required")&&t.formGroup.controls.currentPassword.touched),m.xp6(1),m.Q6J("ngIf",t.formGroup.controls.currentPassword.hasError("invalid")&&t.formGroup.controls.currentPassword.touched),m.xp6(2),m.Q6J("placeholder",m.lcZ(13,16,"settings.extension.change_password.new_password")),m.xp6(3),m.Q6J("ngIf",t.formGroup.controls.newPassword.hasError("invalidPassword")&&t.formGroup.controls.newPassword.touched),m.xp6(2),m.Q6J("placeholder",m.lcZ(17,18,"settings.extension.change_password.repeat_new_password")),m.xp6(2),m.Q6J("ngIf",t.formGroup.controls.repeatNewPassword.hasError("notEqual")&&t.formGroup.controls.repeatNewPassword.touched),m.xp6(1),m.Q6J("saveDisabled",!t.formGroup.valid))},directives:[w.O,i._Y,i.JL,i.sg,_t.O,Z.KE,i.Fj,k.Nt,i.JJ,i.u,A.R,y.O5,q.c,O.bH,Z.TO],pipes:[N.X$],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.password-modal[_ngcontent-%COMP%]{display:flex}.password-modal[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.8rem 2.4rem}.password-modal[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{color:#e5e5e5}modal-container[_ngcontent-%COMP%]{position:relative}.change-password[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]     .new-password{position:relative}.password-hint[_ngcontent-%COMP%]{background-color:#fff;box-shadow:#0000004d -.1rem .3rem 2rem;display:inline-table;max-width:30rem;padding:.8rem}.password-hint[_ngcontent-%COMP%]:before{border-bottom:1.2rem solid transparent;border-right:1.2rem solid #fff;border-top:1.2rem solid transparent;content:"";display:block;height:0;left:-1.2rem;position:absolute;top:calc(50% - 1.2rem);width:0}']}),e})();class Fn{static pin(){return function(e){return e.value&&!e.value.match(/^\d{4,10}$/)?{invalidPin:!0}:null}}}var Qn=n(27355);function Dn(e,t){1&e&&(m.TgZ(0,"mat-hint",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.voicemail.change-pin.current_pin.error.required")," "))}function Yn(e,t){1&e&&(m.TgZ(0,"mat-hint",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.voicemail.change-pin.new_pin.error.invalid_pin")," "))}function Hn(e,t){1&e&&(m.TgZ(0,"mat-hint",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.voicemail.change-pin.new_pin.error.not_equal")," "))}function jn(e,t){1&e&&(m.TgZ(0,"mat-hint",10),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.voicemail.change-pin.repeat_new_pin.error.not_equal")," "))}let Bn=(()=>{class e extends Tn{constructor(e,t,n){super(e,n),this.snackbarService=e,this.extensionService=t,this.dialogRef=n,this.ngUnsubscribe=new p.xQ,this.data={currentPin:"",newPin:"",repeatNewPin:""},this.SAVING_LABEL="settings.extension.voicemail.change-pin.saving",this.SUCCESS_LABEL="settings.extension.voicemail.change-pin.saved",this.ERROR_LABEL="settings.extension.voicemail.change-pin.error.saving",this.initForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initForm(){this.formGroup=new i.cw({currentPin:new i.NI(this.data.currentPin,i.kI.required),newPin:new i.NI(this.data.newPin,i.kI.compose([i.kI.required,Fn.pin()])),repeatNewPin:new i.NI(this.data.repeatNewPin,i.kI.compose([i.kI.required,Fn.pin()]))}),this.formGroup.get("repeatNewPin").valueChanges.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{const t=this.formGroup.get("newPin").value;this.formGroup.get("newPin").setErrors(null),this.formGroup.get("repeatNewPin").setErrors(null),t&&e!==t&&this.formGroup.get("repeatNewPin").setErrors({notEqual:!0})}),this.formGroup.get("newPin").valueChanges.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{const t=this.formGroup.get("repeatNewPin").value;this.formGroup.get("repeatNewPin").setErrors(null),this.formGroup.get("newPin").setErrors(null),t&&t!==e&&this.formGroup.get("newPin").setErrors({notEqual:!0})})}setErrors(){this.formGroup.get("currentPin").setErrors({required:!0})}request(e){return this.extensionService.updateVoicemailPIN(e)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(C.c),m.Y36(Qn.b),m.Y36(P.so))},e.\u0275cmp=m.Xpm({type:e,selectors:[["change-voicemail-pin"]],features:[m.qOj],decls:21,vars:20,consts:[["data-e2e","voicemail-pin-modal-fragment",1,"password-modal","change-voicemail-pin",3,"click"],[3,"title","click"],["novalidate","",3,"formGroup"],["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["formControlName","currentPin","matInput","","type","password","data-e2e","voicemail-pin-modal-fragment__current-pin--input",3,"focus","placeholder"],["class","mat-hint--error",4,"ngIf"],[1,"new-password"],["formControlName","newPin","matInput","","type","password","data-e2e","voicemail-pin-modal-fragment__new-pin--input",3,"placeholder"],["formControlName","repeatNewPin","matInput","","type","password","data-e2e","voicemail-pin-modal-fragment__new-pin-repeat--input",3,"placeholder"],["e2e","voicemail-pin-modal-fragment",3,"saveDisabled","cancelClick","saveClick"],[1,"mat-hint--error"]],template:function(e,t){1&e&&(m.TgZ(0,"div",0),m.NdJ("click",function(){return t.close()}),m.TgZ(1,"modal-container",1),m.NdJ("click",function(e){return e.stopPropagation()}),m.ALo(2,"translate"),m.TgZ(3,"form",2),m.TgZ(4,"section",3),m.TgZ(5,"mat-form-field"),m._UZ(6,"input",4),m.ALo(7,"translate"),m.YNc(8,Dn,3,3,"mat-hint",5),m.qZA(),m.TgZ(9,"mat-form-field"),m.TgZ(10,"div",6),m._UZ(11,"input",7),m.ALo(12,"translate"),m.YNc(13,Yn,3,3,"mat-hint",5),m.YNc(14,Hn,3,3,"mat-hint",5),m.qZA(),m.qZA(),m.TgZ(15,"mat-form-field"),m.TgZ(16,"label"),m._UZ(17,"input",8),m.ALo(18,"translate"),m.qZA(),m.YNc(19,jn,3,3,"mat-hint",5),m.qZA(),m.qZA(),m.TgZ(20,"footer-actions",9),m.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.save()}),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(1),m.Q6J("title",m.lcZ(2,12,"settings.extension.voicemail.change-pin.label")),m.xp6(2),m.Q6J("formGroup",t.formGroup),m.xp6(1),m.Q6J("loadingAreaIndicatorActive",t.isSending),m.xp6(2),m.Q6J("focus",!0)("placeholder",m.lcZ(7,14,"settings.extension.voicemail.change-pin.current_pin.label")),m.xp6(2),m.Q6J("ngIf",t.formGroup.controls.currentPin.hasError("required")&&t.formGroup.controls.currentPin.touched),m.xp6(3),m.Q6J("placeholder",m.lcZ(12,16,"settings.extension.voicemail.change-pin.new_pin.label")),m.xp6(2),m.Q6J("ngIf",t.formGroup.controls.newPin.hasError("invalidPin")&&t.formGroup.controls.newPin.touched),m.xp6(1),m.Q6J("ngIf",t.formGroup.controls.newPin.hasError("notEqual")&&t.formGroup.controls.newPin.touched),m.xp6(3),m.Q6J("placeholder",m.lcZ(18,18,"settings.extension.voicemail.change-pin.repeat_new_pin.label")),m.xp6(2),m.Q6J("ngIf",t.formGroup.controls.repeatNewPin.hasError("notEqual")&&t.formGroup.controls.repeatNewPin.touched),m.xp6(1),m.Q6J("saveDisabled",!t.formGroup.valid))},directives:[w.O,i._Y,i.JL,i.sg,_t.O,Z.KE,i.Fj,k.Nt,i.JJ,i.u,A.R,y.O5,q.c,Z.bx],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.password-modal[_ngcontent-%COMP%]{display:flex}.password-modal[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.8rem 2.4rem}.password-modal[_ngcontent-%COMP%]   modal-container[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{color:#e5e5e5}modal-container[_ngcontent-%COMP%]{position:relative}"]}),e})();var Gn=n(45435),Vn=n(57158),$n=n(51233),zn=n(27912);function Xn(e,t){if(1&e&&(m.TgZ(0,"span"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=t.ngIf;m.xp6(1),m.hij(" ",m.lcZ(2,1,"emergency_countries."+e)," ")}}function Kn(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",5),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw().changeEmergencyCountry(t.countryCode)}),m.ALo(1,"async"),m._uU(2),m.ALo(3,"translate"),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw();m.ekj("emergency-country-selection__button--selected",e.countryCode===m.lcZ(1,4,n.activeEmergencyCountryCode$)),m.Q6J("disabled",!n.user),m.xp6(2),m.hij(" ",m.lcZ(3,6,e.translationKey)," ")}}let Wn=(()=>{class e{constructor(e,t){this.emergencyCountryService=e,this.snackBarService=t,this.ngUnsubscribe=new p.xQ,this.emergencyCountryMenuItems$=this.emergencyCountryService.emergencyCountryMenuItems$,this.activeEmergencyCountryCode$=this.emergencyCountryService.activeEmergencyCountryCode$}ngOnInit(){this.emergencyCountryService.getSelectableEmergencyCountryCodeItems().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.emergencyCountryService.setEmergencyCountryMenuItems(e)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}changeEmergencyCountry(e){this.snackBarService.open("settings.extension.emergency_country.saving"),this.emergencyCountryService.changeEmergencyCountry(e).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>this.snackBarService.openInfo("settings.extension.emergency_country.saved",!0),e=>this.snackBarService.openErrorInfo("settings.extension.emergency_country.error.saved"))}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(zn.X),m.Y36(C.c))},e.\u0275cmp=m.Xpm({type:e,selectors:[["emergency-country-selection"]],inputs:{user:"user"},decls:10,vars:11,consts:[[3,"matMenuTriggerFor"],[4,"ngIf"],[1,"emergency-country-selection__menu",3,"overlapTrigger"],["emergencyCountryMenu","matMenu"],["mat-menu-item","",3,"emergency-country-selection__button--selected","disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","click"]],template:function(e,t){if(1&e&&(m.TgZ(0,"section",0),m.TgZ(1,"div"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.YNc(4,Xn,3,3,"span",1),m.ALo(5,"async"),m.qZA(),m.TgZ(6,"mat-menu",2,3),m.YNc(8,Kn,4,8,"button",4),m.ALo(9,"async"),m.qZA()),2&e){const e=m.MAs(7);m.Q6J("matMenuTriggerFor",e),m.xp6(2),m.Oqu(m.lcZ(3,5,"settings.extension.emergency_country.label")),m.xp6(2),m.Q6J("ngIf",m.lcZ(5,7,t.activeEmergencyCountryCode$)),m.xp6(2),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",m.lcZ(9,9,t.emergencyCountryMenuItems$))}},directives:[Te.p6,y.O5,Te.VK,y.sg,Te.OP],pipes:[N.X$,y.Ov],styles:[".emergency-country-selection__menu[_ngcontent-%COMP%]{max-height:25rem}.emergency-country-selection__button--selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}"]}),e})();function ei(e,t){1&e&&(m.TgZ(0,"span",5),m._uU(1),m.ALo(2,"uppercase"),m.ALo(3,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,m.lcZ(3,3,"settings.extension.basics"))," "))}function ti(e,t){1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"common_errors.username.email")," "))}function ni(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"form",16,17),m.NdJ("ngSubmit",function(){return m.CHM(e),m.oxw(2).saveUsername()}),m.TgZ(2,"mat-form-field",18),m.TgZ(3,"input",19,20),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw(2).userSettings.user.username=t}),m.ALo(5,"translate"),m.qZA(),m.YNc(6,ti,3,3,"mat-error",3),m.qZA(),m._UZ(7,"app-button",21),m.qZA()}if(2&e){const e=m.MAs(1),t=m.MAs(4),n=m.oxw(2);m.xp6(2),m.ekj("user-settings__username--error",null==t.errors?null:t.errors.pattern),m.xp6(1),m.Q6J("ngModel",n.userSettings.user.username)("placeholder",m.lcZ(5,7,"settings.extension.username.label"))("pattern",n.emailPattern),m.xp6(3),m.Q6J("ngIf",null==t.errors?null:t.errors.pattern),m.xp6(1),m.Q6J("disabled",e.invalid||!n.usernameChanged)}}function ii(e,t){if(1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.device_list."+(null==e.settings||null==e.settings.PRIMARY_DEVICE_TYPE?null:e.settings.PRIMARY_DEVICE_TYPE.NAME))," ")}}function oi(e,t){1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.select_primary_device")," "))}function si(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",34),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(3).changePrimaryDevice(t)}),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"span"),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit;m.xp6(2),m.hij("",m.lcZ(3,2,"settings.extension.device_list."+(null==e||null==e.dEVICETYPE?null:e.dEVICETYPE.NAME))," "),m.xp6(3),m.hij("(",m.lcZ(6,4,null==e||null==e.sITE?null:e.sITE.NAME),")")}}function ai(e,t){1&e&&(m.TgZ(0,"button",35),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()),2&e&&(m.xp6(2),m.Oqu(m.lcZ(3,1,"settings.extension.primary_device.none")))}function ri(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",36),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(3).changeLanguage(t.value)}),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw(3);m.ekj("button--selected",e.value===(null==n.userSettings.user?null:n.userSettings.user.language)),m.Q6J("disabled",!n.userSettings.user),m.xp6(2),m.Oqu(m.lcZ(3,4,e.title))}}function li(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"div",22),m.TgZ(2,"div",23),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.YNc(5,ii,3,3,"div",24),m.YNc(6,oi,3,3,"div",24),m.qZA(),m.TgZ(7,"mat-menu",25,26),m.YNc(9,si,7,6,"button",27),m.YNc(10,ai,4,3,"button",28),m.qZA(),m.TgZ(11,"div",29),m.TgZ(12,"div",23),m._uU(13),m.ALo(14,"translate"),m.qZA(),m.TgZ(15,"div",30),m._uU(16),m.ALo(17,"translate"),m.qZA(),m.qZA(),m.TgZ(18,"mat-menu",31,32),m.YNc(20,ri,4,6,"button",33),m.qZA(),m.BQk()),2&e){const e=m.MAs(8),t=m.MAs(19),n=m.oxw(2);m.xp6(1),m.Q6J("matMenuTriggerFor",e),m.xp6(2),m.hij(" ",m.lcZ(4,12,"settings.extension.primary_device.label")," "),m.xp6(2),m.Q6J("ngIf",null==n.settings?null:n.settings.PRIMARY_DEVICE_TYPE),m.xp6(1),m.Q6J("ngIf",!(null!=n.settings&&n.settings.PRIMARY_DEVICE_TYPE)),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",n.phones),m.xp6(1),m.Q6J("ngIf",!n.phones.length),m.xp6(1),m.Q6J("matMenuTriggerFor",t),m.xp6(2),m.Oqu(m.lcZ(14,14,"settings.extension.language.label")),m.xp6(3),m.hij("",m.lcZ(17,16,"language."+(null==n.userSettings.user?null:n.userSettings.user.language))," "),m.xp6(2),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",n.interfaceLanguages)}}function ci(e,t){if(1&e&&(m.TgZ(0,"div",37),m.TgZ(1,"div",23),m._uU(2,"Theme"),m.qZA(),m.TgZ(3,"div",30),m._uU(4),m.qZA(),m.qZA()),2&e){m.oxw();const e=m.MAs(7),t=m.oxw();m.Q6J("matMenuTriggerFor",e),m.xp6(4),m.Oqu(t.currentTheme)}}function gi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",38),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).changeTheme(t)}),m.TgZ(1,"span"),m._uU(2),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit,n=m.oxw(2);m.ekj("button--selected",e.value===n.currentTheme),m.xp6(2),m.Oqu(e.label)}}function di(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-grid-list",39),m.TgZ(1,"div",40),m.TgZ(2,"mat-grid-tile",41),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"mat-grid-tile",42),m.TgZ(6,"mat-checkbox",43),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw(2).updateExtensionCallWaiting(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw(2).settings.CALL_WAITING_INDICATION=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",40),m.TgZ(8,"mat-grid-tile",41),m._uU(9),m.ALo(10,"translate"),m.qZA(),m.TgZ(11,"mat-grid-tile",42),m.TgZ(12,"mat-checkbox",43),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw(2).toggleWelcomeSound(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw(2).isWelcomeSound=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(13,"div",40),m.TgZ(14,"mat-grid-tile",41),m._uU(15),m.ALo(16,"translate"),m.qZA(),m.TgZ(17,"mat-grid-tile",42),m.TgZ(18,"mat-checkbox",44),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw(2).updateExtensionIntercom(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw(2).settings.INTERCOM_ENABLED=t}),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(4,12,"settings.extension.call_waiting.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.settings.CALL_WAITING_INDICATION),m.xp6(2),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(10,14,"settings.login_sound.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.isWelcomeSound),m.xp6(2),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(16,16,"settings.extension.intercom.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.settings.INTERCOM_ENABLED)}}function pi(e,t){1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.phone_number_parallel_ringing")," "))}function ui(e,t){if(1&e&&(m.TgZ(0,"div",30),m._uU(1),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.hij(" ",null==e.settings||null==e.settings.parallelringExtension?null:e.settings.parallelringExtension.DISPLAY_NAME," ")}}function fi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-grid-list",39),m.TgZ(1,"div",40),m.TgZ(2,"mat-grid-tile",41),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"mat-grid-tile",42),m.TgZ(6,"mat-checkbox",45),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw(2).clearParallelRinging(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw(2).parallelringExtensionActive=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(7,"div",46),m.NdJ("click",function(){return m.CHM(e),m.oxw(2).toggleParallelRinging()}),m.YNc(8,pi,3,3,"div",24),m.YNc(9,ui,2,1,"div",24),m.qZA(),m.qZA()}if(2&e){const e=m.oxw(2);m.xp6(2),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(4,6,"settings.extension.parallel_ringing.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.parallelringExtensionActive),m.xp6(2),m.Q6J("ngIf",!e.settings.parallelringExtension.DISPLAY_NAME),m.xp6(1),m.Q6J("ngIf",e.settings.parallelringExtension.DISPLAY_NAME)}}function _i(e,t){if(1&e&&m._UZ(0,"emergency-country-selection",47),2&e){const e=m.oxw(2);m.Q6J("user",null==e.userSettings?null:e.userSettings.user)}}function mi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"section",6),m.TgZ(1,"div",7),m.YNc(2,ni,8,9,"form",8),m.TgZ(3,"app-button",9),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw().toggleChangePassword()}),m.qZA(),m.YNc(4,li,21,18,"ng-container",3),m.YNc(5,ci,5,2,"div",10),m.TgZ(6,"mat-menu",11,12),m.YNc(8,gi,3,3,"button",13),m.qZA(),m.YNc(9,di,19,18,"mat-grid-list",14),m.YNc(10,fi,10,8,"mat-grid-list",14),m.YNc(11,_i,1,1,"emergency-country-selection",15),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(2),m.Q6J("ngIf",!!e.userSettings.user),m.xp6(2),m.Q6J("ngIf",e.hasExtension),m.xp6(1),m.Q6J("ngIf",e.themeService.isDevHost),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(2),m.Q6J("ngForOf",e.themes),m.xp6(1),m.Q6J("ngIf",e.hasExtension),m.xp6(1),m.Q6J("ngIf",e.hasExtension),m.xp6(1),m.Q6J("ngIf",e.hasExtension)}}function hi(e,t){if(1&e&&(m.TgZ(0,"div",57),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.AsE(" ",m.lcZ(2,2,"settings.extension.ringtone")," ",null==e.settings.phone?null:e.settings.phone.RINGTONE_EXTERNAL," ")}}function bi(e,t){1&e&&(m.TgZ(0,"div",57),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.external_ring_tone.silent")," "))}function Ci(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",58),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).updatePrimaryDeviceRingtoneExternal(t)}),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("value",e),m.xp6(2),m.AsE("",m.lcZ(3,3,"settings.extension.ringtone")," ",e,"")}}function xi(e,t){if(1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.AsE(" ",m.lcZ(2,2,"settings.extension.ringtone")," ",null==e.settings.phone?null:e.settings.phone.RINGTONE_INTERNAL," ")}}function vi(e,t){1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.same_as_external")," "))}function Pi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",58),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).updatePrimaryDeviceRingtoneInternal(t)}),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("value",e),m.xp6(2),m.AsE("",m.lcZ(3,3,"settings.extension.ringtone")," ",e,"")}}function Mi(e,t){if(1&e&&(m.TgZ(0,"div",30),m._uU(1),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" Ringtone",e.settings.phone.RINGTONE_GROUP," ")}}function Oi(e,t){1&e&&(m.TgZ(0,"div",30),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"settings.extension.same_as_external")," "))}function wi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"button",58),m.NdJ("click",function(){const t=m.CHM(e).$implicit;return m.oxw(2).updatePrimaryDeviceRingtoneGroup(t)}),m.TgZ(1,"span"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.qZA()}if(2&e){const e=t.$implicit;m.Q6J("value",e),m.xp6(2),m.AsE("",m.lcZ(3,3,"settings.extension.ringtone")," ",e,"")}}function yi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"section"),m.TgZ(1,"h2"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"div",7),m.TgZ(5,"div",48),m.TgZ(6,"div",23),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.YNc(9,hi,3,4,"div",49),m.YNc(10,bi,3,3,"div",49),m.qZA(),m.TgZ(11,"mat-menu",11,50),m.TgZ(13,"button",51),m.NdJ("click",function(){return m.CHM(e),m.oxw().updatePrimaryDeviceRingtoneExternal(0)}),m.TgZ(14,"span"),m._uU(15),m.ALo(16,"translate"),m.qZA(),m.qZA(),m.YNc(17,Ci,4,5,"button",52),m.qZA(),m.TgZ(18,"mat-grid-list",53),m.TgZ(19,"mat-grid-tile",41),m._uU(20),m.ALo(21,"translate"),m.qZA(),m.TgZ(22,"mat-grid-tile",42),m._UZ(23,"mat-checkbox",54),m.qZA(),m.qZA(),m.TgZ(24,"div",48),m.TgZ(25,"div",23),m._uU(26),m.ALo(27,"translate"),m.qZA(),m.YNc(28,xi,3,4,"div",24),m.YNc(29,vi,3,3,"div",24),m.qZA(),m.TgZ(30,"mat-menu",11,55),m.TgZ(32,"button",51),m.NdJ("click",function(){return m.CHM(e),m.oxw().updatePrimaryDeviceRingtoneInternal(0)}),m.TgZ(33,"span"),m._uU(34),m.ALo(35,"translate"),m.qZA(),m.qZA(),m.YNc(36,Pi,4,5,"button",52),m.qZA(),m.TgZ(37,"div",48),m.TgZ(38,"div",23),m._uU(39),m.ALo(40,"translate"),m.qZA(),m.YNc(41,Mi,2,1,"div",24),m.YNc(42,Oi,3,3,"div",24),m.qZA(),m.TgZ(43,"mat-menu",11,56),m.TgZ(45,"button",51),m.NdJ("click",function(){return m.CHM(e),m.oxw().updatePrimaryDeviceRingtoneGroup(0)}),m.TgZ(46,"span"),m._uU(47),m.ALo(48,"translate"),m.qZA(),m.qZA(),m.YNc(49,wi,4,5,"button",52),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.MAs(12),t=m.MAs(31),n=m.MAs(44),i=m.oxw();m.xp6(2),m.Oqu(m.lcZ(3,34,"settings.extension.primary-device-ringtone")),m.xp6(3),m.ekj("disabled",!i.externalRingToneNumbers.length),m.Q6J("matMenuTriggerFor",e),m.xp6(2),m.hij("",m.lcZ(8,36,"settings.extension.external_ring_tone.label")," "),m.xp6(2),m.Q6J("ngIf",null!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_EXTERNAL)&&0!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_EXTERNAL)),m.xp6(1),m.Q6J("ngIf",null==(null==i.settings.phone?null:i.settings.phone.RINGTONE_EXTERNAL)||0==(null==i.settings.phone?null:i.settings.phone.RINGTONE_EXTERNAL)),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(4),m.Oqu(m.lcZ(16,38,"settings.extension.external_ring_tone.silent")),m.xp6(2),m.Q6J("ngForOf",i.externalRingToneNumbers),m.xp6(1),m.ekj("disabled",i.disabled),m.xp6(1),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(21,40,"settings.extension.define_separate_ringtones")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("disabled",i.disabled),m.xp6(1),m.ekj("disabled",!i.internalRingToneNumbers.length),m.Q6J("matMenuTriggerFor",t),m.xp6(2),m.hij("",m.lcZ(27,42,"settings.extension.internal_ring_tone.label")," "),m.xp6(2),m.Q6J("ngIf",null!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_INTERNAL)&&0!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_INTERNAL)),m.xp6(1),m.Q6J("ngIf",null==(null==i.settings.phone?null:i.settings.phone.RINGTONE_INTERNAL)||0==(null==i.settings.phone?null:i.settings.phone.RINGTONE_INTERNAL)),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(4),m.Oqu(m.lcZ(35,44,"settings.extension.same_as_external")),m.xp6(2),m.Q6J("ngForOf",i.internalRingToneNumbers),m.xp6(1),m.ekj("disabled",!i.internalRingToneNumbers.length),m.Q6J("matMenuTriggerFor",n),m.xp6(2),m.hij("",m.lcZ(40,46,"settings.extension.group_ring_tone.label")," "),m.xp6(2),m.Q6J("ngIf",null!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_GROUP)&&0!=(null==i.settings.phone?null:i.settings.phone.RINGTONE_GROUP)),m.xp6(1),m.Q6J("ngIf",null==(null==i.settings.phone?null:i.settings.phone.RINGTONE_GROUP)||0==(null==i.settings.phone?null:i.settings.phone.RINGTONE_GROUP)),m.xp6(1),m.Q6J("overlapTrigger",!1),m.xp6(4),m.Oqu(m.lcZ(48,48,"settings.extension.same_as_external")),m.xp6(2),m.Q6J("ngForOf",i.internalRingToneNumbers)}}function Zi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"section",59),m.TgZ(1,"h2"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"div",7),m.TgZ(5,"div",60),m.TgZ(6,"div",23),m._uU(7),m.ALo(8,"translate"),m.qZA(),m.TgZ(9,"div",30),m._uU(10,"Ring tone 1"),m.qZA(),m.qZA(),m.TgZ(11,"mat-grid-list",39),m.TgZ(12,"mat-grid-tile",41),m._uU(13),m.ALo(14,"translate"),m.qZA(),m.TgZ(15,"mat-grid-tile",42),m.TgZ(16,"mat-checkbox",61),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().separateRingtoreUC=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(17,"div",60),m.TgZ(18,"div",23),m._uU(19),m.ALo(20,"translate"),m.qZA(),m.TgZ(21,"div",30),m._uU(22),m.ALo(23,"translate"),m.qZA(),m.qZA(),m.TgZ(24,"div",60),m.TgZ(25,"div",23),m._uU(26),m.ALo(27,"translate"),m.qZA(),m.TgZ(28,"div",30),m._uU(29),m.ALo(30,"translate"),m.qZA(),m.qZA(),m.TgZ(31,"mat-grid-list",39),m.TgZ(32,"mat-grid-tile",41),m._uU(33),m.ALo(34,"translate"),m.qZA(),m.TgZ(35,"mat-grid-tile",42),m.TgZ(36,"mat-checkbox",61),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().separateRingtoreUC=t}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.ekj("disabled",e.disabled)("invisible",!0),m.xp6(2),m.Oqu(m.lcZ(3,22,"settings.extension.uc-ringtone")),m.xp6(5),m.hij("",m.lcZ(8,24,"settings.extension.external_ring_tone.label")," "),m.xp6(5),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(14,26,"settings.extension.define_separate_ringtones")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.separateRingtoreUC),m.xp6(1),m.ekj("disabled",e.separateRingtoreUC),m.xp6(2),m.hij("",m.lcZ(20,28,"settings.extension.internal_ring_tone.label")," "),m.xp6(3),m.Oqu(m.lcZ(23,30,"settings.extension.same_as_external")),m.xp6(2),m.ekj("disabled",e.separateRingtoreUC),m.xp6(2),m.hij("",m.lcZ(27,32,"settings.extension.group_ring_tone.label")," "),m.xp6(3),m.Oqu(m.lcZ(30,34,"settings.extension.same_as_external")),m.xp6(3),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(34,36,"settings.extension.disable_notification_sound")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.separateRingtoreUC)}}function ki(e,t){1&e&&(m.TgZ(0,"span",62),m._uU(1),m.ALo(2,"uppercase"),m.ALo(3,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,m.lcZ(3,3,"Voicemail"))," "))}function Ai(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"section"),m.TgZ(1,"div",7),m.TgZ(2,"mat-grid-list",39),m.TgZ(3,"div",40),m.TgZ(4,"mat-grid-tile",41),m._uU(5),m.ALo(6,"translate"),m.qZA(),m.TgZ(7,"mat-grid-tile",42),m.TgZ(8,"mat-checkbox",63),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().updateVoicemailViaEmail(t)})("ngModelChange",function(t){return m.CHM(e),m.oxw().voicemailSettings.VM_SENDMAILATTACHMENT=t}),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"div",40),m.TgZ(10,"mat-grid-tile",64),m._uU(11),m.ALo(12,"translate"),m.qZA(),m.TgZ(13,"mat-grid-tile",42),m.TgZ(14,"mat-checkbox",65),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().updateVoicemailDeleteOnceEmailed(t)})("ngModelChange",function(t){m.CHM(e);const n=m.oxw();return n.voicemailSettings.VM_SENDMAILATTACHMENT&&(n.voicemailSettings.VM_DELETEAFTERSENDING=t)}),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"app-button",66),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw().toggleChangeVoicemailPin()}),m.qZA(),m.qZA(),m.qZA()}if(2&e){const e=m.oxw();m.xp6(4),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(6,11,"settings.extension.voicemails_via_email.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.voicemailSettings.VM_SENDMAILATTACHMENT),m.xp6(2),m.ekj("disabled",!e.voicemailSettings.VM_SENDMAILATTACHMENT),m.Q6J("colspan",10),m.xp6(1),m.hij(" ",m.lcZ(12,13,"settings.extension.delete_voicemails_once_emailed.label")," "),m.xp6(2),m.Q6J("colspan",2),m.xp6(1),m.Q6J("ngModel",e.voicemailSettings.VM_SENDMAILATTACHMENT&&e.voicemailSettings.VM_DELETEAFTERSENDING)("disabled",!e.voicemailSettings.VM_SENDMAILATTACHMENT)}}let Ti=(()=>{class e extends _.H{constructor(e,t,n,i,o,s,a,r,l,c){super(e),this.router=e,this.extensionService=t,this.userSettingsService=n,this.snackbarService=i,this.dialog=o,this.languageService=s,this.logger=a,this.themeService=r,this.userService=l,this.localUserConfigService=c,this.ngUnsubscribe=new p.xQ,this.disabled=!0,this.hasExtension=!1,this.isLoadingSettings=!0,this.isLoadingPhones=!0,this.isLoadingVoicemailSettings=!0,this.isLoadingUserSettings=!0,this.parallelringExtensionActive=!1,this.separateRingtoreUC=!1,this.oldUsername="",this.items=[],this.settings={},this.userSettings={},this.voicemailSettings={},this.externalRingToneNumbers=[],this.internalRingToneNumbers=[],this.phones=[],this.interfaceLanguages=this.languageService.getAvailableLanguages(),this.themes=this.themeService.themes,this.currentTheme=this.themeService.getTheme(),this.emailPattern=Kt.k.EMAIL_PATTERN,this.initUser(),this.loadUserSettings(),this.localUserConfigService.userConfig$.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.isWelcomeSound=e.isWelcomeSound})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadUserSettings(){this.userSettingsService.getUserSettings().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.userSettings=e,this.oldUsername=this.userSettings.user.username,this.isLoadingUserSettings=!1},e=>{this.logger.error("Failed to load user settings. Error:",e),this.handleError("navigation.settings.user-settings.error"),this.isLoadingUserSettings=!1})}initComponentCalls(){this.hasExtension=!0,this.extensionService.getSettings().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.settings=e,this.parallelringExtensionActive=!!this.settings.parallelringExtension.DISPLAY_NAME,this.settings.PRIMARY_DEVICE_TYPE&&this.setupRingtones(),this.isLoadingSettings=!1}),this.extensionService.getPhones().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.phones=e,this.isLoadingPhones=!1}),this.extensionService.getVoicemeailSettings().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.voicemailSettings=e,this.isLoadingVoicemailSettings=!1})}isLoadingGeneral(){return this.hasExtension&&(this.isLoadingSettings||this.isLoadingPhones||this.isLoadingVoicemailSettings)||this.isLoadingUserSettings}changePrimaryDevice(e){this.snackbarService.open("settings.extension.primary_device.saving"),this.extensionService.updateSettings({PHONE_ID:e.ID}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.PRIMARY_DEVICE_TYPE=e.dEVICETYPE,this.initUser(),this.handleSuccess("settings.extension.primary_device.saved")},()=>{this.handleError("settings.extension.primary_device.error.saved")})}changeLanguage(e){this.snackbarService.open("settings.extension.language.saving"),this.userSettings.user.language=e,this.languageService.updateLanguage(e),this.userSettingsService.updateUserLanguageEndpoint({id:this.userSettings.user.id,language:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>this.handleSuccess("settings.extension.language.saved"),()=>this.handleError("settings.extension.language.error.saved"))}updateExtensionCallWaiting(e){this.snackbarService.open("settings.extension.call_waiting.saving"),this.extensionService.updateSettings({CALL_WAITING_INDICATION:Number(e)}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.handleSuccess("settings.extension.call_waiting.saved"),this.extensionService.updateLocalSettings({CALL_WAITING_INDICATION:Number(e)})},()=>{this.handleError("settings.extension.call_waiting.error.saved")})}toggleWelcomeSound(e){this.localUserConfigService.toggleWelcomeSound(),this.snackbarService.openInfo(e?"settings.login_sound.enabled":"settings.login_sound.disabled")}updateExtensionIntercom(e){this.snackbarService.open("settings.extension.intercom.saving"),this.extensionService.updateSettings({INTERCOM_ENABLED:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.handleSuccess("settings.extension.intercom.saved")},()=>{this.handleError("settings.extension.intercom.error.saved")})}updatePrimaryDeviceRingtoneExternal(e){this.snackbarService.open("settings.extension.external_ring_tone.saving"),this.extensionService.updatePhoneSettings({RINGTONE_EXTERNAL:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.phone.RINGTONE_EXTERNAL=e,this.handleSuccess("settings.extension.external_ring_tone.saved")},()=>{this.handleError("settings.extension.external_ring_tone.error.saved")})}updatePrimaryDeviceRingtoneInternal(e){this.snackbarService.open("settings.extension.internal_ring_tone.saving"),this.extensionService.updatePhoneSettings({RINGTONE_INTERNAL:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.phone.RINGTONE_INTERNAL=e,this.handleSuccess("settings.extension.internal_ring_tone.saved")},()=>{this.handleError("settings.extension.internal_ring_tone.error.saved")})}updatePrimaryDeviceRingtoneGroup(e){this.snackbarService.open("settings.extension.group_ring_tone.saving"),this.extensionService.updatePhoneSettings({RINGTONE_GROUP:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.phone.RINGTONE_GROUP=e,this.handleSuccess("settings.extension.group_ring_tone.saved")},()=>{this.handleError("settings.extension.group_ring_tone.error.saved")})}updateVoicemailViaEmail(e){this.snackbarService.open("settings.extension.voicemails_via_email.saving"),this.extensionService.updateVoicemailSettings({VM_SENDMAILATTACHMENT:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{e||(this.voicemailSettings.VM_DELETEAFTERSENDING=!1),this.voicemailSettings.VM_SENDMAILATTACHMENT=e,this.handleSuccess("settings.extension.voicemails_via_email.saved")},()=>{this.handleError("settings.extension.voicemails_via_email.error.saved")})}updateVoicemailDeleteOnceEmailed(e){this.snackbarService.open("settings.extension.delete_voicemails_once_emailed.saving"),this.extensionService.updateVoicemailSettings({VM_DELETEAFTERSENDING:e}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.voicemailSettings.VM_DELETEAFTERSENDING=e,this.handleSuccess("settings.extension.delete_voicemails_once_emailed.saved")},()=>{this.handleError("settings.extension.delete_voicemails_once_emailed.error.saved")})}toggleChangePassword(){this.dialog.open(Jn)}saveUsername(){this.snackbarService.open("settings.extension.username.saving"),this.oldUsername=this.userSettings.user.username,this.userSettingsService.updateUsername(this.userSettings.user.username).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>this.handleSuccess("settings.extension.username.saved"),()=>this.handleError("settings.extension.username.error.saving"))}toggleChangeVoicemailPin(){this.dialog.open(Bn)}toggleParallelRinging(){this.dialog.open(ne,{autoFocus:!1,data:{title:"settings.extension.parallel_ringing.label",e2e:"parallel-ringing-modal-fragment"}}).afterClosed().pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.saveParallelRinging(e)})}changeTheme(e){this.themeService.changeTheme(e.value),this.currentTheme=e.value}saveParallelRinging(e){e?(this.snackbarService.open("settings.extension.parallel_ringing.saving"),this.extensionService.updateSettings({PARALLELRING_EXTENSION_ID:e.afdId}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.parallelringExtension.DISPLAY_NAME=e.displayName,this.handleSuccess("settings.extension.parallel_ringing.saved"),this.parallelringExtensionActive=!0},()=>{this.handleError("settings.extension.parallel_ringing.error.saved")})):this.parallelringExtensionActive=!1}clearParallelRinging(e){e?this.toggleParallelRinging():(this.snackbarService.open("settings.extension.parallel_ringing.saving"),this.extensionService.updateSettings({PARALLELRING_EXTENSION_ID:""}).pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.settings.parallelringExtension.DISPLAY_NAME=null,this.handleSuccess("settings.extension.parallel_ringing.saved")},()=>{this.handleError("settings.extension.parallel_ringing.error.saved")}))}handleSuccess(e,t=!0){this.snackbarService.openInfo(e,t)}handleError(e,t=!1){this.snackbarService.openInfo(e,t)}initUser(){this.userService.userInfo$.pipe((0,Gn.h)(e=>!!(null==e?void 0:e.activePhoneExtension)),(0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.initComponentCalls()})}setupRingtones(){for(let e=1;e<=this.settings.PRIMARY_DEVICE_TYPE.RINGTONE_EXTERNAL_MAXNUMBER;e++)this.externalRingToneNumbers.push(e);for(let e=1;e<=this.settings.PRIMARY_DEVICE_TYPE.RINGTONE_INTERNAL_MAXNUMBER;e++)this.internalRingToneNumbers.push(e)}get usernameChanged(){return!!this.oldUsername&&this.oldUsername!==this.userSettings.user.username}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(h.F0),m.Y36(Qn.b),m.Y36(qn.s),m.Y36(C.c),m.Y36(P.uw),m.Y36(tn.T),m.Y36(Vn.Kf),m.Y36(Wt.f),m.Y36($n.K),m.Y36(st.i))},e.\u0275cmp=m.Xpm({type:e,selectors:[["user-settings"]],features:[m.qOj],decls:11,vars:6,consts:[["mat-tab-label",""],["data-e2e","main-settings-user-page","loading-area-indicator","",3,"loadingAreaIndicatorActive"],["class","no-top-border",4,"ngIf"],[4,"ngIf"],["class","user-settings__section__app-ringtone",3,"disabled","invisible",4,"ngIf"],["data-e2e","main-settings-user-page__default-tab"],[1,"no-top-border"],[1,"container"],["class","username-form",3,"ngSubmit",4,"ngIf"],["color","primary","e2e","main-settings-user-page__change-password","size","","buttonTextTranslationKey","settings.extension.change_password.label","type","stroked-button",1,"user-settings__button","user-settings__change-password-btn",3,"appButtonClick"],["class","user-settings__two-line-info","data-e2e","main-settings-user-page__theme-selector",3,"matMenuTriggerFor",4,"ngIf"],[3,"overlapTrigger"],["themeMenu","matMenu"],["data-e2e","main-settings-user-page__theme-selector-option","mat-menu-item","",3,"button--selected","click",4,"ngFor","ngForOf"],["cols","12",4,"ngIf"],[3,"user",4,"ngIf"],[1,"username-form",3,"ngSubmit"],["usernameForm","ngForm"],["floatPlaceholder","always",1,"username"],["matInput","","name","username","required","","type","email","data-e2e","main-settings-user-page__username--input",3,"ngModel","placeholder","pattern","ngModelChange"],["username","ngModel"],["color","primary","e2e","main-settings-user-page__username-save","buttonTextTranslationKey","save","type","basic-button-submit",1,"user-settings__button",3,"disabled"],["data-e2e","main-settings-user-page__primary-device-selector",1,"user-settings__two-line-info",3,"matMenuTriggerFor"],[1,"user-settings__selector__title"],["class","user-settings__selector-value",4,"ngIf"],[1,"user-settings__primary-device-list",3,"overlapTrigger"],["primaryDeviceMenu","matMenu"],["data-e2e","main-settings-user-page__primary-device-selector-option","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",4,"ngIf"],["data-e2e","main-settings-user-page__language-selector",1,"user-settings__two-line-info",3,"matMenuTriggerFor"],[1,"user-settings__selector-value"],[1,"user-settings__selection-menu",3,"overlapTrigger"],["languageMenu","matMenu"],["class","language-selection","data-e2e","main-settings-user-page__language-selector-option","mat-menu-item","",3,"button--selected","disabled","click",4,"ngFor","ngForOf"],["data-e2e","main-settings-user-page__primary-device-selector-option","mat-menu-item","",3,"click"],["mat-menu-item",""],["data-e2e","main-settings-user-page__language-selector-option","mat-menu-item","",1,"language-selection",3,"disabled","click"],["data-e2e","main-settings-user-page__theme-selector",1,"user-settings__two-line-info",3,"matMenuTriggerFor"],["data-e2e","main-settings-user-page__theme-selector-option","mat-menu-item","",3,"click"],["cols","12"],[1,"row"],[1,"row-title",3,"colspan"],[3,"colspan"],["color","primary","data-e2e","main-settings-user-page__call-waiting-indicator-checkbox",3,"ngModel","ngModelChange"],["color","primary","data-e2e","main-settings-user-page__intercom-checkbox",3,"ngModel","ngModelChange"],["color","primary","data-e2e","main-settings-user-page__parallel-ringing-checkbox",3,"ngModel","ngModelChange"],[1,"row",3,"click"],[3,"user"],[1,"user-settings__two-line-info",3,"matMenuTriggerFor"],["class","value",4,"ngIf"],["ringtoneExternalMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"value","click",4,"ngFor","ngForOf"],["cols","12",1,"user-settings__grid-list"],["color","primary",3,"disabled"],["ringtoneInternalMenu","matMenu"],["ringtoneGroupMenu","matMenu"],[1,"value"],["mat-menu-item","",3,"value","click"],[1,"user-settings__section__app-ringtone"],[1,"user-settings__two-line-info"],["color","primary",3,"ngModel","ngModelChange"],["data-e2e","main-settings-user-page__voicemail-tab"],["color","primary","data-e2e","main-settings-user-page__voicemail-via-e-mail-checkbox",3,"ngModel","ngModelChange"],[1,"row-title","user-settings__voicemail-grid-tile",3,"colspan"],["color","primary","data-e2e","main-settings-user-page__voicemail-delete-on-mailed-checkbox",3,"ngModel","disabled","ngModelChange"],["color","primary","e2e","main-settings-user-page__change-voicemail-pin","size","","buttonTextTranslationKey","settings.extension.voicemail.change-pin.label","type","stroked-button",1,"user-settings__button","user-settings__voicemail__button",3,"appButtonClick"]],template:function(e,t){1&e&&(m.TgZ(0,"mat-tab-group"),m.TgZ(1,"mat-tab"),m.YNc(2,ei,4,5,"ng-template",0),m.TgZ(3,"div",1),m.YNc(4,mi,12,8,"section",2),m.YNc(5,yi,50,50,"section",3),m.YNc(6,Zi,37,38,"section",4),m.qZA(),m.qZA(),m.TgZ(7,"mat-tab"),m.YNc(8,ki,4,5,"ng-template",0),m.TgZ(9,"div",1),m.YNc(10,Ai,16,15,"section",3),m.qZA(),m.qZA(),m.qZA()),2&e&&(m.xp6(3),m.Q6J("loadingAreaIndicatorActive",t.isLoadingGeneral()),m.xp6(1),m.Q6J("ngIf",!t.isLoadingGeneral()),m.xp6(1),m.Q6J("ngIf",t.hasExtension&&!t.isLoadingGeneral()&&(null==t.settings?null:t.settings.phone)&&(0!==(null==t.settings?null:t.settings.PRIMARY_DEVICE_TYPE.RINGTONE_INTERNAL_MAXNUMBER)||0!==(null==t.settings?null:t.settings.PRIMARY_DEVICE_TYPE.RINGTONE_EXTERNAL_MAXNUMBER))),m.xp6(1),m.Q6J("ngIf",t.hasExtension&&!t.isLoadingGeneral()),m.xp6(3),m.Q6J("loadingAreaIndicatorActive",t.isLoadingGeneral()),m.xp6(1),m.Q6J("ngIf",t.hasExtension&&!t.isLoadingGeneral()))},directives:[Zt.SP,Zt.uX,Zt.uD,_t.O,y.O5,mt.V,Te.VK,y.sg,i._Y,i.JL,i.F,Z.KE,k.Nt,i.Fj,i.Q7,i.JJ,i.On,i.c5,Z.TO,Te.p6,Te.OP,rt.Il,rt.DX,lt.oG,Wn],pipes:[y.gd,N.X$],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]    {background-color:#fff}.no-top-border[_ngcontent-%COMP%]{border-top:0}.avatar[_ngcontent-%COMP%]{height:15rem;margin-bottom:2.4rem;margin-top:1.6rem;position:relative;width:15rem}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;height:15rem;width:15rem}.avatar[_ngcontent-%COMP%]   .hover[_ngcontent-%COMP%]{align-items:center;background-color:#0000004d;border-radius:50%;bottom:0;cursor:pointer;display:none;justify-content:center;left:0;position:absolute;right:0;top:0}.avatar[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{fill:#fff}.avatar[_ngcontent-%COMP%]:hover   .hover[_ngcontent-%COMP%]{display:flex}.username-form[_ngcontent-%COMP%]{align-items:baseline;display:flex}.username-form[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{flex:1;margin-right:1rem}.user-settings__username--error[_ngcontent-%COMP%]{padding-bottom:1.6rem}section[_ngcontent-%COMP%]{border-top:.1rem solid #e5e5e5;display:block;margin-bottom:3.2rem}section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:.8rem 1.6rem .8rem 2.4rem;width:44rem}section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;font-size:1.5rem;line-height:1.8rem;margin:.8rem 1.6rem 1.6rem 2.4rem;position:relative}section[_ngcontent-%COMP%]   .user-settings__two-line-info[_ngcontent-%COMP%]{cursor:pointer;font-size:1.8rem;margin-bottom:2rem;margin-top:2rem}section[_ngcontent-%COMP%]   .user-settings__two-line-info.disabled[_ngcontent-%COMP%] > .value[_ngcontent-%COMP%]{color:#b2b2b2}section[_ngcontent-%COMP%]   .user-settings__two-line-info[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.6rem}  .mat-menu-panel.user-settings__primary-device-list{max-width:44rem;width:100%}.user-settings__section__app-ringtone.disabled[_ngcontent-%COMP%]{display:none}.two-line-info.disabled[_ngcontent-%COMP%], .user-settings__section__app-ringtone.disabled[_ngcontent-%COMP%], .user-settings__grid-list.disabled[_ngcontent-%COMP%], .user-settings__voicemail-grid-tile.disabled[_ngcontent-%COMP%]{color:gray;cursor:not-allowed;pointer-events:none}.row[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-top:1.5rem}.row-title[_ngcontent-%COMP%]{font-size:1.8rem}.row-title[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%]{color:#b2b2b2}.row-title[_ngcontent-%COMP%]     .mat-grid-tile-content{justify-content:flex-start}header[_ngcontent-%COMP%]   .mat-grid-list[_ngcontent-%COMP%]{height:4.8rem!important;padding-bottom:1rem!important}header[_ngcontent-%COMP%]     .mat-grid-tile-content{font-size:1.4rem!important}#call-extension__linked-extensions__tab[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .page-content[_ngcontent-%COMP%]{flex:1}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg-icon.close[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg-icon.close[_ngcontent-%COMP%]{fill:#b31a3e}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg-icon.done[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg-icon.done[_ngcontent-%COMP%]{fill:#00b300}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   header[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{color:#b5b5b5}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]   svg-icon[_ngcontent-%COMP%]{fill:#b5b5b5}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .mat-grid-tile-content, #call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]     .mat-grid-tile-content, #call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]     .mat-grid-tile-content, #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]     .mat-grid-tile-content, #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]     .mat-grid-tile-content, #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]     .mat-grid-tile-content{font-size:1.8rem;justify-content:start}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .pending[_ngcontent-%COMP%]{color:#b5b5b5}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .allowed[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .allowed[_ngcontent-%COMP%]{color:#00b300}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]     .mat-radio-label-content, #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]     .mat-radio-label-content{display:none}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;padding-bottom:4rem!important}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{padding-top:4rem!important}section[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{cursor:pointer;font-size:1.6rem}#extension__device__tab[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}.parallel-ringing[_ngcontent-%COMP%]{height:9rem;padding-bottom:1rem;padding-top:0}.button--selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}section[_ngcontent-%COMP%]   .user-settings__two-line-info[_ngcontent-%COMP%]{font-family:"BrixLight","Helvetica","Arial",sans-serif}section[_ngcontent-%COMP%]   .user-settings__two-line-info[_ngcontent-%COMP%]   .user-settings__selector-value[_ngcontent-%COMP%]{font-family:"Brix","Helvetica","Arial",sans-serif}.row-title[_ngcontent-%COMP%]{font-family:"BrixLight","Helvetica","Arial",sans-serif}#call-extension__linked-extensions__tab[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]{font-family:"BrixLight","Helvetica","Arial",sans-serif}#call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%], #call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%], #call-extension__linked-extensions__tab[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .extension[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%], #call-extension__managed-extension-by__tab[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .mat-grid-tile-content[_ngcontent-%COMP%]{font-family:"BrixLight","Helvetica","Arial",sans-serif}.color-secondary[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:"Brix","Helvetica","Arial",sans-serif}mat-grid-tile[_ngcontent-%COMP%]{height:.5rem}']}),e})();var qi=n(63265),Si=n(62886),Ii=n(11569),Ni=n(82908);function Ei(e,t){if(1&e&&m._UZ(0,"span",6),2&e){const e=m.oxw();m.Q6J("innerHTML",e.hotkeyTxt,m.oJD)}}function Ui(e,t){if(1&e&&m._uU(0),2&e){const e=m.oxw();m.Oqu(e.defaultText)}}function Ri(e,t){1&e&&(m.TgZ(0,"span",7),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"navigation.settings.hotkeys.hotkey_reserved")," "))}const Li=function(e,t){return{active:e,disabled:t}};let Ji=(()=>{class e{constructor(e,t,n,i,o){this.elementRef=e,this.hotkeysService=t,this.hotkeysStorageService=n,this.hotkeyHelperService=i,this.translateService=o,this.hotkeySet=[],this.pressedButtonsCount=0,this.savedPrevHotkey=[],this.wasEditBtnClicked=!1,this.hotkeyEntryCompleted=!1,this.reservedHotkeys=[],this.ngUnsubscribe=new p.xQ,this.hotkeyBlur=new m.vpe,this.hotkeyDisabled=new m.vpe,this.hotkeyInitialState=new m.vpe,this.isActive=!1,this.defaultText=this.translateService.instant("navigation.settings.hotkeys.not_set"),this.hotkeyTxt="",this.isReserved=!1,this.isHighlighted=!1}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngOnInit(){this.getReservedHotkeys()}ngOnChanges(e){this.canCallFunction(e.disabled)&&this.onDisabledPropChange(e.disabled.currentValue),this.canCallFunction(e.edit)&&this.onEditPropChange(e.edit.currentValue)}handleKeyboardDownEvent(e){if(this.isHighlighted=!1,this.isActive){this.pressedButtonsCount++;const t=e.key,n=this.hotkeyHelperService.isPredifinedKey(t)?t:this.getEventKey(e.code);this.updateHotkeyText(n)}}handleKeyboardUpEvent(e){this.isActive&&(this.isHighlighted=!0,--this.pressedButtonsCount,this.hotkeySet.length&&this.hotkeySet.every(e=>this.hotkeyHelperService.getKey(e))&&0===this.pressedButtonsCount?this.revertHotkey():this.generateHotkey(e.code))}clickout({target:e}){if(!this.disabled){if(this.wasEditBtnClicked&&this.isHighlighted)this.isActive=!0;else{const t=this.elementRef.nativeElement.contains(e);this.isActive=t,this.isHighlighted=t,this.edit=t,this.hotkeyBlur.emit(t),this.prepareHotkeyForSaving()}this.wasEditBtnClicked=!1}}getEventKey(e){return this.hotkeyTxt?this.hotkeyHelperService.prepareEventKey(e):""}generateHotkey(e){this.hotkeySet[this.hotkeySet.length-1]===e&&(this.hotkeySet.pop(),this.generateHotkeyTxtString())}revertHotkey(){const e=this.hotkeyHelperService.generateHotkey(this.savedPrevHotkey);e?(this.hotkeyTxt=e,this.isActive=!1):this.clearHotkey()}updateHotkeyText(e){this.hotkeyHelperService.canUpdate(e,this.hotkeySet)?this.prepareForUpdating(e):(this.update(e),this.hotkeyHelperService.isValid(this.hotkeySet)&&this.resetHotkeyStateAfterUpdating())}prepareForUpdating(e){this.hotkeyHelperService.isBackspace(e)?(this.clearHotkey(),this.hotkeyEntryCompleted=!0):this.hotkeyHelperService.isValid(this.hotkeySet)&&this.hotkeyHelperService.isPredifinedKey(e)&&(this.savePrevHotkeyToMemory(),this.clearHotkey(),this.update(e))}resetHotkeyStateAfterUpdating(){this.hotkeyHelperService.isHotkeyReserved(this.reservedHotkeys,this.hotkeySet)?(this.hotkeyEntryCompleted=!1,this.stopReservedHotkey()):(this.hotkeyEntryCompleted=!0,this.isActive=!1,this.pressedButtonsCount=0)}stopReservedHotkey(){const e=this.hotkeyHelperService.getTransformedHotkey(this.hotkeySet);this.hotkeysService.stopReservedHotkey(e),this.enableReservedMode()}clearHotkey(){this.hotkeyTxt="",this.hotkeySet=[],this.disableReservedMode()}savePrevHotkeyToMemory(){this.savedPrevHotkey=[...this.hotkeySet]}onDisabledPropChange(e){this.disabled=e,this.hotkey.enabled=!e,this.hotkeysStorageService.updateHotkeyInStorage(this.hotkey).then(()=>{this.hotkeysService.enableDisableReservedHotkey(this.hotkey)})}onEditPropChange(e){this.wasEditBtnClicked=e,this.isHighlighted=e,this.hotkeyHelperService.updateHotkeyState(this.hotkey.action,e),setTimeout(()=>{this.wasEditBtnClicked=!1,this.hotkeysStorageService.disableUserHotkeysWhileEdit(this.hotkeyHelperService.isOneOfHotkeysInEdit())},100)}updateHotkey(e){this.hotkeySet=e,this.generateHotkeyTxtString()}generateHotkeyTxtString(){this.hotkeyTxt=this.hotkeyHelperService.generateHotkey(this.hotkeySet)}saveToStorage(){this.hotkeyHelperService.isHotkeyValueChanged(this.hotkey.value,this.hotkeySet)&&(this.hotkey.value=this.hotkeySet,this.hotkeysStorageService.saveHotkey(this.hotkey))}update(e){this.hotkeySet.push(e),this.generateHotkeyTxtString()}prepareHotkeyForSaving(){this.hotkeyEntryCompleted?this.saveToStorage():(this.hotkeySet=this.hotkey.value?this.hotkey.value:[],this.generateHotkeyTxtString(),this.disableReservedMode()),this.hotkeyEntryCompleted=!1}getReservedHotkeys(){this.hotkeysStorageService.reservedHotkeys$.pipe((0,Gn.h)(e=>!!e.length),(0,f.R)(this.ngUnsubscribe)).subscribe(e=>{this.reservedHotkeys=e,this.hotkey=this.hotkeysStorageService.getDataFromStorage(this.hotkey),this.hotkeyInitialState.next(this.hotkey.enabled),this.hotkey.value&&this.updateHotkey(this.hotkey.value)})}enableReservedMode(){this.isReserved=!0,this.hotkeyDisabled.emit(!0)}disableReservedMode(){this.isReserved=!1,this.hotkeyDisabled.emit(!1)}canCallFunction(e){return!!e&&void 0!==e.previousValue}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(m.SBq),m.Y36(Si.t),m.Y36(Ii.T),m.Y36(Ni.u),m.Y36(N.sK))},e.\u0275cmp=m.Xpm({type:e,selectors:[["hotkey-input"]],hostBindings:function(e,t){1&e&&m.NdJ("keydown",function(e){return t.handleKeyboardDownEvent(e)},!1,m.evT)("keyup",function(e){return t.handleKeyboardUpEvent(e)},!1,m.evT)("click",function(e){return t.clickout(e)},!1,m.evT)},inputs:{disabled:"disabled",edit:"edit",hotkey:"hotkey"},outputs:{hotkeyBlur:"hotkeyBlur",hotkeyDisabled:"hotkeyDisabled",hotkeyInitialState:"hotkeyInitialState"},features:[m.TTD],decls:7,vars:9,consts:[[1,"hotkey-input",3,"ngClass"],[1,"hotkey-input__text"],[3,"innerHTML",4,"ngIf","ngIfElse"],["defaultValue",""],[1,"hotkey-input__message__wrapper"],["class","hotkey-input__message mat-hint--error",4,"ngIf"],[3,"innerHTML"],[1,"hotkey-input__message","mat-hint--error"]],template:function(e,t){if(1&e&&(m.TgZ(0,"div",0),m.TgZ(1,"span",1),m.YNc(2,Ei,1,1,"span",2),m.YNc(3,Ui,1,1,"ng-template",null,3,m.W1O),m.qZA(),m.qZA(),m.TgZ(5,"div",4),m.YNc(6,Ri,3,3,"span",5),m.qZA()),2&e){const e=m.MAs(4);m.Q6J("ngClass",m.WLB(6,Li,t.isHighlighted,t.disabled)),m.xp6(1),m.ekj("disabled",t.disabled),m.xp6(1),m.Q6J("ngIf",t.hotkeyTxt.length)("ngIfElse",e),m.xp6(4),m.Q6J("ngIf",t.isReserved)}},directives:[y.mk,y.O5],pipes:[N.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{position:relative}.hotkey-input[_ngcontent-%COMP%]{border:.1rem solid #999;font-size:1.8rem;height:2.8rem;line-height:2.8rem;min-width:13rem;padding:.5rem 1rem;text-align:center}.hotkey-input.active[_ngcontent-%COMP%]   .hotkey-input__text[_ngcontent-%COMP%]{background:#cdeffa}.hotkey-input.disabled[_ngcontent-%COMP%]{border:.1rem solid #e6e9eb}.hotkey-input__text[_ngcontent-%COMP%]{cursor:default;padding:.4rem;vertical-align:middle}.hotkey-input__text.disabled[_ngcontent-%COMP%]{color:#969899}.hotkey-input__message__wrapper[_ngcontent-%COMP%]{bottom:-2.5rem;font-size:1.3rem;line-height:1.6rem;position:absolute;right:0;text-align:right;white-space:nowrap}.hotkey-input__message__wrapper[_ngcontent-%COMP%]   .hotkey-input__message[_ngcontent-%COMP%]{display:block}"]}),e})();function Fi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"app-button",9),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw(2).edit()}),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("disabled",!e.isEnabled)}}function Qi(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"app-button",10),m.NdJ("appButtonClick",function(){return m.CHM(e),m.oxw(2).save()}),m.qZA()}if(2&e){const e=m.oxw(2);m.Q6J("disabled",!e.isEnabled||e.disableAction)}}function Di(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"div",1),m.TgZ(1,"div",2),m.TgZ(2,"mat-checkbox",3),m.NdJ("ngModelChange",function(t){return m.CHM(e),m.oxw().updateState(t)}),m.qZA(),m.qZA(),m.TgZ(3,"div",4),m._uU(4),m.ALo(5,"translate"),m.qZA(),m.TgZ(6,"div",5),m.TgZ(7,"hotkey-input",6),m.NdJ("hotkeyBlur",function(t){return m.CHM(e),m.oxw().hotkeyBlur(t)})("hotkeyInitialState",function(t){return m.CHM(e),m.oxw().initialState(t)})("hotkeyDisabled",function(t){return m.CHM(e),m.oxw().hotkeyDisabled(t)}),m.qZA(),m.qZA(),m.YNc(8,Fi,1,1,"app-button",7),m.YNc(9,Qi,1,1,"ng-template",null,8,m.W1O),m.qZA()}if(2&e){const e=m.MAs(10),t=m.oxw();m.xp6(2),m.Q6J("ngModel",t.isEnabled),m.xp6(2),m.hij(" ",m.lcZ(5,7,t.hotkey.label)," "),m.xp6(3),m.Q6J("hotkey",t.hotkey)("edit",t.editHotkey)("disabled",!t.isEnabled),m.xp6(1),m.Q6J("ngIf",!t.editHotkey)("ngIfElse",e)}}let Yi=(()=>{class e{constructor(e){this.cd=e,this.isEnabled=!0,this.editHotkey=!1,this.disableAction=!1,this.ready=!1}ngAfterContentChecked(){this.cd.detectChanges()}ngOnInit(){this.isEnabled=this.hotkey.enabled,setTimeout(()=>{this.ready=!0},200)}edit(){this.editHotkey=!0}save(){this.editHotkey=!1}hotkeyDisabled(e){this.disableAction=e}hotkeyBlur(e){this.editHotkey=e}updateState(e){this.isEnabled=e}initialState(e){this.updateState("boolean"!=typeof e||e)}}return e.\u0275fac=function(t){return new(t||e)(m.Y36(m.sBO))},e.\u0275cmp=m.Xpm({type:e,selectors:[["hotkey-row"]],inputs:{hotkey:"hotkey"},decls:1,vars:1,consts:[["class","hotkey-row",4,"ngIf"],[1,"hotkey-row"],[1,"hotkey-row__checkbox"],["color","primary",3,"ngModel","ngModelChange"],[1,"hotkey-row__label"],[1,"hotkey-row__input"],[3,"hotkey","edit","disabled","hotkeyBlur","hotkeyInitialState","hotkeyDisabled"],["buttonTextTranslationKey","navigation.settings.hotkeys.edit","class","hotkey-row__button","color","primary","type","basic-button-submit",3,"disabled","appButtonClick",4,"ngIf","ngIfElse"],["saveHotkey",""],["buttonTextTranslationKey","navigation.settings.hotkeys.edit","color","primary","type","basic-button-submit",1,"hotkey-row__button",3,"disabled","appButtonClick"],["buttonTextTranslationKey","navigation.settings.hotkeys.save","color","primary","type","basic-button-submit",1,"hotkey-row__button",3,"disabled","appButtonClick"]],template:function(e,t){1&e&&m.YNc(0,Di,11,9,"div",0),2&e&&m.Q6J("ngIf",t.ready)},directives:[y.O5,lt.oG,i.JJ,i.On,Ji,mt.V],pipes:[N.X$],styles:["[_nghost-%COMP%]   .hotkey-row[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;height:4rem;padding:2rem 2.9rem}[_nghost-%COMP%]   .hotkey-row__checkbox[_ngcontent-%COMP%]{margin:0 1rem .5rem 0}[_nghost-%COMP%]   .hotkey-row__label[_ngcontent-%COMP%]{flex-direction:column;font-size:1.8rem;margin-right:5rem;width:35rem}[_nghost-%COMP%]   .hotkey-row__input[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column;width:20rem}[_nghost-%COMP%]   .hotkey-row__button[_ngcontent-%COMP%]{margin-left:1.5rem}"]}),e})();function Hi(e,t){1&e&&(m.TgZ(0,"span",3),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"navigation.settings.hotkeys.guidance_title_macOS"),"\n"))}function ji(e,t){1&e&&(m.TgZ(0,"span",3),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"navigation.settings.hotkeys.guidance_title_windowsOS")," "))}function Bi(e,t){1&e&&m._UZ(0,"hotkey-row",4),2&e&&m.Q6J("hotkey",t.$implicit)}let Gi=(()=>{class e{constructor(){this.isMacOS=navigator.platform.includes("Mac"),this.userHotkeys=[{action:"hotkey-dial",label:"navigation.settings.hotkeys.dial_number",enabled:!1},{action:"hotkey-accept",label:"navigation.settings.hotkeys.accept_incoming_call",enabled:!1},{action:"hotkey-hangup",label:"navigation.settings.hotkeys.hangup_ongoing_call",enabled:!1}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.Xpm({type:e,selectors:[["hotkeys"]],decls:4,vars:3,consts:[["class","hotkeys__title",4,"ngIf","ngIfElse"],["windowsOS",""],[3,"hotkey",4,"ngFor","ngForOf"],[1,"hotkeys__title"],[3,"hotkey"]],template:function(e,t){if(1&e&&(m.YNc(0,Hi,3,3,"span",0),m.YNc(1,ji,3,3,"ng-template",null,1,m.W1O),m.YNc(3,Bi,1,1,"hotkey-row",2)),2&e){const e=m.MAs(2);m.Q6J("ngIf",t.isMacOS)("ngIfElse",e),m.xp6(3),m.Q6J("ngForOf",t.userHotkeys)}},directives:[y.O5,y.sg,Yi],pipes:[N.X$],styles:[".hotkeys__title[_ngcontent-%COMP%]{border-bottom:.1rem solid #e6e9eb;display:block;margin:0 0 2rem;padding:2rem 2.2rem}"]}),e})();var Vi=n(51681);const $i=h.Bz.forChild([{path:"",component:it,children:[{path:"",pathMatch:"full",redirectTo:"user"},{path:"devices",component:ut.f,data:{title:"navigation.settings.devices.title"}},{path:"call-forwarding",component:Ae,data:{title:"navigation.settings.call-forwarding.title"}},{path:"queues",component:kn,data:{title:"navigation.settings.queues.title"}},{path:"user",component:Ti,data:{title:"navigation.settings.user-settings.title"}},{path:"function-keys",component:zt.r,data:{title:"navigation.settings.function-keys.title"}},{path:"fax",component:$t,data:{title:"navigation.settings.fax.title"}},{path:"crm-connect",component:Xt.a,canActivate:[qi.G],data:{title:"navigation.settings.crm_connect.title"}},{path:"download",component:pt,data:{title:"navigation.settings.download.title"}},{path:"info",component:pn,data:{title:"navigation.settings.info.title"}},{path:"hotkeys",component:Gi,canActivate:[Vi.N],data:{title:"navigation.settings.hotkeys.title"}}]},{path:"**",pathMatch:"full",redirectTo:""}]);var zi=n(8493),Xi=n(45396);let Ki=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.oAB({type:e,bootstrap:[it]}),e.\u0275inj=m.cJS({providers:[o.eN,{provide:qn.s,useClass:qn.s,deps:[o.eN]}],imports:[[a.m,i.u5,s.X,nt.l,i.UX,$i,N.aw,zi.W]]}),e})();m.B6R(Ae,[y.O5,Mn.r,On.B,mt.V,_t.O,At.i$,y.sg,At.Tg,kt.U0,y.mk,We,I.u,tt,Qe,Xi.Rr,Ye.lW],[N.X$])}}]);