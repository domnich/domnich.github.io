(self.webpackChunkcloudya=self.webpackChunkcloudya||[]).push([[82756],{60800:function(){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var i="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,i){return e==Array.prototype||e==Object.prototype||(e[t]=i.value),e},n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var i=e[t];if(i&&i.Math==Math)return i}throw Error("Cannot find global object")}(this);function r(e,t){if(t)e:{var r=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in r))break e;r=r[a]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&i(r,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function a(e){var i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=a(e);for(var t,i=[];!(t=e.next()).done;)i.push(t.value);e=i}return e}r("Symbol",function(e){function t(e,t){this.g=e,i(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}}),r("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),a=0;a<r.length;a++){var s=n[r[a]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&i(s.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e});var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var d;e:{var u={};try{u.__proto__={a:!0},d=u.a;break e}catch(Je){}d=!1}c=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var m=c;function g(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,m)m(e,t);else for(var i in t)if("prototype"!=i)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(t,i);n&&Object.defineProperty(e,i,n)}else e[i]=t[i];e.ea=t.prototype}function h(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function f(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function p(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function v(e,t,i){return e.g=i,{value:t}}function b(e){this.g=new h,this.h=e}function _(e,t,i,n){try{var r=t.call(e.g.i,i);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.l=!1,r;var o=r.value}catch(a){return e.g.i=null,p(e.g,a),S(e)}return e.g.i=null,n.call(e.g,o),S(e)}function S(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(i){e.g.h=void 0,p(e.g,i)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return f(e.g),e.g.i?t=_(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=S(e)),t},this.throw=function(t){return f(e.g),e.g.i?t=_(e,e.g.i.throw,t,e.g.o):(p(e.g,t),t=S(e)),t},this.return=function(t){return function(e,t){f(e.g);var i=e.g.i;return i?_(e,"return"in i?i.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),S(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e,t){return t=new y(new b(t)),m&&e.prototype&&m(t,e.prototype),t}h.prototype.o=function(e){this.h=e},h.prototype.return=function(e){this.j={return:e},this.g=this.s};var C="function"==typeof Object.assign?Object.assign:function(e,t){for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};r("Object.assign",function(e){return e||C}),r("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(i){t.reject(i)}}function i(){this.g=null}function r(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;i.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var o=n.setTimeout;i.prototype.i=function(e){o(e,0)},i.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var i=e[t];e[t]=null;try{i()}catch(n){this.j(n)}}}this.g=null},i.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(n){i||(i=!0,e.call(t,n))}}var t=this,i=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var i=null!=e;break e;case"function":i=!0;break e;default:i=!1}i?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(i){return void this.l(i)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;o(function(){if(e.B()){var t=n.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=n.CustomEvent,t=n.Event,i=n.dispatchEvent;return void 0===i||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=n.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,i(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new i;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var i=this.j();try{e.call(t,i.resolve,i.reject)}catch(n){i.reject(n)}},t.prototype.then=function(e,i){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(i){o(i)}}:t}var r,o,a=new t(function(e,t){r=e,o=t});return this.J(n(e,r),n(i,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function i(){switch(n.h){case 1:e(n.i);break;case 2:t(n.i);break;default:throw Error("Unexpected state: "+n.h)}}var n=this;null==this.g?s.h(i):this.g.push(i),this.o=!0},t.resolve=r,t.reject=function(e){return new t(function(t,i){i(e)})},t.race=function(e){return new t(function(t,i){for(var n=a(e),o=n.next();!o.done;o=n.next())r(o.value).J(t,i)})},t.all=function(e){var i=a(e),n=i.next();return n.done?r([]):new t(function(e,t){function o(t){return function(i){a[t]=i,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(n.value).J(o(a.length-1),t),n=i.next()}while(!n.done)})},t}),r("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),r("Array.prototype.includes",function(e){return e||function(e,t){var i=this;i instanceof String&&(i=String(i));var n=i.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var r=i[t];if(r===e||Object.is(r,e))return!0}return!1}}),r("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),r("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var i=0,n=!1,r={next:function(){if(!n&&i<e.length){var t=i++;return{value:t,done:!1}}return n=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this)}});var M=this||self;function x(e,t){e=e.split(".");var i,n=M;e[0]in n||void 0===n.execScript||n.execScript("var "+e[0]);for(;e.length&&(i=e.shift());)e.length||void 0===t?n=n[i]&&n[i]!==Object.prototype[i]?n[i]:n[i]={}:n[i]=t}function O(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var k,A,F="undefined"!=typeof TextDecoder,T="undefined"!=typeof TextEncoder;function P(e){if(T)e=(A||(A=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var i=0,n=new Uint8Array(3*e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)n[i++]=o;else{if(2048>o)n[i++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<e.length){var a=e.charCodeAt(++r);if(56320<=a&&57343>=a){n[i++]=(o=1024*(o-55296)+a-56320+65536)>>18|240,n[i++]=o>>12&63|128,n[i++]=o>>6&63|128,n[i++]=63&o|128;continue}r--}if(t)throw Error("Found an unpaired surrogate");o=65533}n[i++]=o>>12|224,n[i++]=o>>6&63|128}n[i++]=63&o|128}}e=n.subarray(0,i)}return e}var Z={},D=null;function E(e,t){void 0===t&&(t=0),I(),t=Z[t];for(var i=Array(Math.floor(e.length/3)),n=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var a=e[r],s=e[r+1],c=e[r+2],l=t[a>>2];i[o++]=l+(a=t[(3&a)<<4|s>>4])+(s=t[(15&s)<<2|c>>6])+(c=t[63&c])}switch(l=0,c=n,e.length-r){case 2:c=t[(15&(l=e[r+1]))<<2]||n;case 1:i[o]=t[(e=e[r])>>2]+t[(3&e)<<4|l>>4]+c+n}return i.join("")}function I(){if(!D){D={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],i=0;5>i;i++){var n=e.concat(t[i].split(""));Z[i]=n;for(var r=0;r<n.length;r++){var o=n[r];void 0===D[o]&&(D[o]=r)}}}}var $,U="function"==typeof Uint8Array.prototype.slice;function j(e,t,i){return t===i?$||($=new Uint8Array(0)):U?e.slice(t,i):new Uint8Array(e.subarray(t,i))}var N=0;function V(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=t,e&&R(this,e)}function R(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?function(e){var t=e.length,i=3*t/4;i%3?i=Math.floor(i):-1!="=.".indexOf(e[t-1])&&(i=-1!="=.".indexOf(e[t-2])?i-2:i-1);var n=new Uint8Array(i),r=0;return function(e,t){function i(t){for(;n<e.length;){var i=e.charAt(n++),r=D[i];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(i))throw Error("Unknown base64 encoding at char: "+i)}return t}I();for(var n=0;;){var r=i(-1),o=i(0),a=i(64),s=i(64);if(64===s&&-1===r)break;t(r<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,function(e){n[r++]=e}),n.subarray(0,r)}(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.j=0,e.i=e.h.length,e.g=e.j}function L(e){var t=e.h,i=t[e.g],n=127&i;return 128>i?(e.g+=1,n):(n|=(127&(i=t[e.g+1]))<<7,128>i?(e.g+=2,n):(n|=(127&(i=t[e.g+2]))<<14,128>i?(e.g+=3,n):(n|=(127&(i=t[e.g+3]))<<21,128>i?(e.g+=4,n):(n|=(15&(i=t[e.g+4]))<<28,128>i?(e.g+=5,n>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&e.g++,n)))))}function B(e){var t=e.h[e.g],i=e.h[e.g+1],n=e.h[e.g+2],r=e.h[e.g+3];return e.g+=4,e=2*((i=(t<<0|i<<8|n<<16|r<<24)>>>0)>>31)+1,t=i>>>23&255,i&=8388607,255==t?i?NaN:1/0*e:0==t?e*Math.pow(2,-149)*i:e*Math.pow(2,t-150)*(i+Math.pow(2,23))}V.prototype.reset=function(){this.g=this.j};var Y=[];function q(){this.g=new Uint8Array(64),this.h=0}function z(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function J(e){var t={},i=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=i,t=this.o,Y.length?(i=Y.pop(),t&&(i.v=t.v),e&&R(i,e),e=i):e=new V(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function Q(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).l||0>t.g||t.g>t.i),t)return!1;e.m=e.g.g;var i=7&(t=L(e.g));return 0!=i&&5!=i&&1!=i&&2!=i&&3!=i&&4!=i?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=i,!0)}function G(e){switch(e.h){case 0:if(0!=e.h)G(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?G(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)G(e);else{var t=L(e.g);(e=e.g).g+=t}break;case 5:5!=e.h?G(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!Q(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}G(e)}break;default:e.j=!0}}function H(e,t,i){var n=e.g.i,r=L(e.g);return e.g.i=r=e.g.g+r,i(t,e),e.g.g=r,e.g.i=n,t}function W(e){var t,i=L(e.g),n=(e=e.g).g;if(e.g+=i,e=e.h,F)(t=k)||(t=k=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(n,n+i));else{i=n+i;for(var r,o,a,s=[],c=null;n<i;)128>(r=e[n++])?s.push(r):224>r?n>=i?s.push(65533):(o=e[n++],194>r||128!=(192&o)?(n--,s.push(65533)):s.push((31&r)<<6|63&o)):240>r?n>=i-1?s.push(65533):128!=(192&(o=e[n++]))||224===r&&160>o||237===r&&160<=o||128!=(192&(t=e[n++]))?(n--,s.push(65533)):s.push((15&r)<<12|(63&o)<<6|63&t):244>=r?n>=i-2?s.push(65533):128!=(192&(o=e[n++]))||o-144+(r<<28)>>30!=0||128!=(192&(t=e[n++]))||128!=(192&(a=e[n++]))?(n--,s.push(65533)):(r=(7&r)<<18|(63&o)<<12|(63&t)<<6|63&a,s.push(55296+((r-=65536)>>10&1023),56320+(1023&r))):s.push(65533),8192<=s.length&&(c=O(c,s),s.length=0);t=O(c,s)}return t}function K(){this.h=[],this.i=0,this.g=new q}function X(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function ee(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var i=e.h,n=i.length,r=0,o=0;o<n;o++){var a=i[o];0!==a.length&&(t.set(a,r),r+=a.length)}return 0!==(n=(i=e.g).h)&&(t.set(i.g.subarray(0,n),r),i.h=0),e.h=[t],t}function te(e,t,i){if(null!=i){z(e.g,8*t+5),e=e.g;var n=i;0===(n=(i=0>n?1:0)?-n:n)?N=0<1/n?0:2147483648:isNaN(n)?N=2147483647:34028234663852886e22<n?N=(i<<31|2139095040)>>>0:11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),N=(i<<31|n)>>>0):(t=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-t),n=8388607&Math.round(8388608*n),N=(i<<31|t+127<<23|n)>>>0),e.push((i=N)>>>0&255),e.push(i>>>8&255),e.push(i>>>16&255),e.push(i>>>24&255)}}q.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},q.prototype.length=function(){return this.h},q.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,j(e,0,t)},J.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var ie="function"==typeof Uint8Array;function ne(e,t,i){if(null!=e)return"object"==typeof e?ie&&e instanceof Uint8Array?i(e):re(e,t,i):t(e)}function re(e,t,i){if(Array.isArray(e)){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=ne(e[r],t,i);return Array.isArray(e)&&e.W&&ce(n),n}for(r in n={},e)n[r]=ne(e[r],t,i);return n}function oe(e){return"number"==typeof e?isFinite(e)?e:String(e):e}var ae,se={W:{value:!0,configurable:!0}};function ce(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,se),e}function le(e,t,i){var n=ae;if(ae=null,e||(e=n),n=this.constructor.ca,e||(e=n?[n]:[]),this.j=n?0:-1,this.i=null,this.g=e,e=(n=this.g.length)-1,n&&null!==(n=this.g[e])&&"object"==typeof n&&n.constructor===Object?(this.l=e-this.j,this.h=n):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,i)for(t=0;t<i.length;t++)(e=i[t])<this.l?(n=this.g[e+=this.j])?ce(n):this.g[e]=de:(ue(this),(n=this.h[e])?ce(n):this.h[e]=de)}var de=Object.freeze(ce([]));function ue(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function me(e,t,i){return-1===t?null:void 0!==i&&i||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function ge(e){var t=void 0!==t&&t,i=me(e,1,t);return null==i&&(i=de),i===de&&fe(e,1,i=ce([]),t),i}function he(e,t,i){return null==(e=null==(e=me(e,t))?e:+e)?void 0===i?0:i:e}function fe(e,t,i,n){void 0!==n&&n||t>=e.l?(ue(e),e.h[t]=i):e.g[t+e.j]=i}function pe(e,t){e.i||(e.i={});var i=e.i[1];if(!i){var n=ge(e);i=[];for(var r=0;r<n.length;r++)i[r]=new t(n[r]);e.i[1]=i}return i}function ve(e,t,i,n){var r=pe(e,i);t=t||new i,e=ge(e),null!=n?(r.splice(n,0,t),e.splice(n,0,be(t,!1))):(r.push(t),e.push(be(t,!1)))}function be(e,t){if(e.i)for(var i in e.i){var n=e.i[i];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&be(n[r],t);else n&&be(n,t)}return e.g}function _e(e,t){return null==(e=me(e,t))?0:e}function Se(e,t){return null==(e=me(e,t))?"":e}function ye(e,t){if(e=e.m){X(t,t.g.end());for(var i=0;i<e.length;i++)X(t,e[i])}}function we(e,t){if(4==t.h)return!1;var i=t.m;return G(t),t.N||(t=j(t.g.h,i,t.g.g),(i=e.m)?i.push(t):e.m=[t]),!0}function Ce(e,t){var i=void 0;return new(i||(i=Promise))(function(n,r){function o(e){try{s(t.next(e))}catch(i){r(i)}}function a(e){try{s(t.throw(e))}catch(i){r(i)}}function s(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(o,a)}s((t=t.apply(e,void 0)).next())})}function Me(e){le.call(this,e)}function xe(e,t){for(;Q(t);)switch(t.i){case 8:var i=L(t.g);fe(e,1,i);break;case 21:fe(e,2,i=B(t.g));break;case 26:fe(e,3,i=W(t));break;case 34:fe(e,4,i=W(t));break;default:if(!we(e,t))return e}return e}function Oe(e){le.call(this,e,-1,ke)}le.prototype.toJSON=function(){return re(be(this,!1),oe,E)},le.prototype.toString=function(){return be(this,!1).toString()},g(Me,le),g(Oe,le),Oe.prototype.addClassification=function(e,t){ve(this,e,Me,t)};var ke=[1];function Ae(e){le.call(this,e)}function Fe(e,t){for(;Q(t);)switch(t.i){case 13:var i=B(t.g);fe(e,1,i);break;case 21:fe(e,2,i=B(t.g));break;case 29:fe(e,3,i=B(t.g));break;case 37:fe(e,4,i=B(t.g));break;case 45:fe(e,5,i=B(t.g));break;default:if(!we(e,t))return e}return e}function Te(e){le.call(this,e,-1,Pe)}g(Ae,le),g(Te,le);var Pe=[1];function Ze(e){le.call(this,e)}function De(e,t,i){if(i=e.createShader(0===i?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(i));return i}function Ee(e){return pe(e,Me).map(function(e){return{index:_e(e,1),Y:he(e,2),label:null!=me(e,3)?Se(e,3):void 0,displayName:null!=me(e,4)?Se(e,4):void 0}})}function Ie(e){return{x:he(e,1),y:he(e,2),z:he(e,3),visibility:null!=me(e,4)?he(e,4):void 0}}function $e(e,t){this.h=e,this.g=t,this.l=0}function Ue(e,t,i){return function(e,t){var i=e.g;if(void 0===e.m){var n=De(i,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=De(i,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=i.createProgram();if(i.attachShader(o,n),i.attachShader(o,r),i.linkProgram(o),!i.getProgramParameter(o,i.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+i.getProgramInfoLog(o));n=e.m=o,i.useProgram(n),r=i.getUniformLocation(n,"sampler0"),e.j={I:i.getAttribLocation(n,"aVertex"),H:i.getAttribLocation(n,"aTex"),da:r},e.s=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,e.s),i.enableVertexAttribArray(e.j.I),i.vertexAttribPointer(e.j.I,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),e.o=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,e.o),i.enableVertexAttribArray(e.j.H),i.vertexAttribPointer(e.j.H,2,i.FLOAT,!1,0,0),i.bufferData(i.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),i.STATIC_DRAW),i.bindBuffer(i.ARRAY_BUFFER,null),i.uniform1i(r,0)}n=e.j,i.useProgram(e.m),i.canvas.width=t.width,i.canvas.height=t.height,i.viewport(0,0,t.width,t.height),i.activeTexture(i.TEXTURE0),e.h.bindTexture2d(t.glName),i.enableVertexAttribArray(n.I),i.bindBuffer(i.ARRAY_BUFFER,e.s),i.vertexAttribPointer(n.I,2,i.FLOAT,!1,0,0),i.enableVertexAttribArray(n.H),i.bindBuffer(i.ARRAY_BUFFER,e.o),i.vertexAttribPointer(n.H,2,i.FLOAT,!1,0,0),i.bindFramebuffer(i.DRAW_FRAMEBUFFER?i.DRAW_FRAMEBUFFER:i.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.colorMask(!0,!0,!0,!0),i.drawArrays(i.TRIANGLE_FAN,0,4),i.disableVertexAttribArray(n.I),i.disableVertexAttribArray(n.H),i.bindBuffer(i.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):i?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function je(e){this.g=e}g(Ze,le);var Ne=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Ve(e,t){return t+e}function Re(e,t){window[e]=t}function Le(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||Ve,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var i=(t=a(Object.keys(e.options))).next();!i.done;i=t.next()){var n=e.options[i=i.value].default;void 0!==n&&(this.j[i]="function"==typeof n?n():n)}}function Be(e,t){return Ce(e,function e(){var i,n,r=this;return w(e,function(e){return t in r.F?e.return(r.F[t]):(i=r.locateFile(t,""),n=fetch(i).then(function(e){return e.arrayBuffer()}),r.F[t]=n,e.return(n))})})}function Ye(e,t){for(var i=t.name||"$",n=[].concat(s(t.wants)),r=new e.h.StringList,o=a(t.wants),c=o.next();!c.done;c=o.next())r.push_back(c.value);o=e.h.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[n[s]]=r.get(s);var c=e.listeners[i];c&&(e.C=function(e,t,i){return Ce(e,function e(){var n,r,o,s,c,l,d,u,m,g,h,f,p=this;return w(e,function(e){switch(e.g){case 1:if(!i)return e.return(t);for(n={},r=0,o=a(Object.keys(i)),s=o.next();!s.done;s=o.next())"string"!=typeof(c=i[s.value])&&"texture"===c.type&&void 0!==t[c.stream]&&++r;1<r&&(p.G=!1),l=a(Object.keys(i)),s=l.next();case 2:if(s.done){e.g=4;break}if("string"==typeof(u=i[d=s.value]))return h=n,f=d,v(e,function(e,t,i){return Ce(e,function e(){var n,r=this;return w(e,function(e){return"number"==typeof i||i instanceof Uint8Array||i instanceof r.h.Uint8BlobList?e.return(i):i instanceof r.h.Texture2dDataOut?((n=r.s[t])||(n=new $e(r.h,r.D),r.s[t]=n),e.return(Ue(n,i,r.G))):e.return(void 0)})})}(p,d,t[u]),14);if(m=t[u.stream],"detection_list"===u.type){if(m){for(var b=m.getRectList(),_=m.getLandmarksList(),S=m.getClassificationsList(),y=[],C=0;C<b.size();++C){var M=b.get(C);e:{var x=new Ze;for(M=new J(M);Q(M);)switch(M.i){case 13:var O=B(M.g);fe(x,1,O);break;case 21:fe(x,2,O=B(M.g));break;case 29:fe(x,3,O=B(M.g));break;case 37:fe(x,4,O=B(M.g));break;case 45:fe(x,5,O=B(M.g));break;case 48:for(var k=M.g,A=128,F=0,T=O=0;4>T&&128<=A;T++)F|=(127&(A=k.h[k.g++]))<<7*T;if(128<=A&&(F|=(127&(A=k.h[k.g++]))<<28,O|=(127&A)>>4),128<=A)for(T=0;5>T&&128<=A;T++)O|=(127&(A=k.h[k.g++]))<<7*T+3;128>A?(k=F>>>0,(O=2147483648&(A=O>>>0))&&(A=~A>>>0,0==(k=1+~k>>>0)&&(A=A+1>>>0)),k=4294967296*A+(k>>>0),O=O?-k:k):(k.l=!0,O=void 0),fe(x,6,O);break;default:if(!we(x,M))break e}}x={Z:he(x,1),$:he(x,2),height:he(x,3),width:he(x,4),rotation:he(x,5,0),X:_e(x,6)},O=_.get(C);e:for(M=new Te,O=new J(O);Q(O);)switch(O.i){case 10:ve(M,k=H(O,new Ae,Fe),Ae,void 0);break;default:if(!we(M,O))break e}M=pe(M,Ae).map(Ie),k=S.get(C);e:for(O=new Oe,k=new J(k);Q(k);)switch(k.i){case 10:O.addClassification(H(k,new Me,xe));break;default:if(!we(O,k))break e}x={T:x,O:M,M:Ee(O)},y.push(x)}b=y}else b=[];n[d]=b,e.g=7;break}if("proto_list"===u.type){if(m){for(b=Array(m.size()),_=0;_<m.size();_++)b[_]=m.get(_);m.delete()}else b=[];n[d]=b,e.g=7;break}if(void 0===m){e.g=3;break}if("float_list"===u.type){n[d]=m,e.g=7;break}if("proto"===u.type){n[d]=m,e.g=7;break}if("texture"!==u.type)throw Error("Unknown output config type: '"+u.type+"'");return(g=p.s[d])||(g=new $e(p.h,p.D),p.s[d]=g),v(e,Ue(g,m,p.G),13);case 13:n[d]=e.h;case 7:u.transform&&n[d]&&(n[d]=u.transform(n[d])),e.g=3;break;case 14:h[f]=e.h;case 3:s=l.next(),e.g=2;break;case 4:return e.return(n)}})})}(e,o,t.outs).then(function(i){i=c(i);for(var r=0;r<t.wants.length;++r){var a=o[n[r]];"object"==typeof a&&a.hasOwnProperty&&a.hasOwnProperty("delete")&&a.delete()}i&&(e.C=i)}))}}),e.i.attachMultiListener(r,o),r.delete()}function qe(e){switch(void 0===e&&(e=0),e){case 1:return"selfie_segmentation_landscape.tflite";default:return"selfie_segmentation.tflite"}}function ze(e){var t=this;this.g=new Le({locateFile:(e=e||{}).locateFile,files:function(e){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:qe(e.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(e){return Ce(t,function t(){var i,n,r=this;return w(t,function(t){return 1==t.g?(i=qe(e),n="third_party/mediapipe/modules/selfie_segmentation/"+i,v(t,Be(r.g,i),2)):(r.g.overrideFile(n,t.h),t.return(!0))})})}}}})}(e=Le.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Ce(this,function e(){var t=this;return w(e,function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})})},e.setOptions=function(e,t){var i=this;if(t=t||this.g.options){for(var n=[],r=[],o={},s=a(Object.keys(e)),c=s.next();!c.done;o={K:o.K,L:o.L},c=s.next()){var l=c.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(c=t[l])&&(c.onChange&&(o.K=c.onChange,o.L=e[l],n.push(function(e){return function(){return Ce(i,function t(){var i=this;return w(t,function(t){if(1==t.g)return v(t,e.K(e.L),2);!0===t.h&&(i.o=!0),t.g=0})})}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?e[l]:0,valueBoolean:0===c.type&&e[l],valueString:2===c.type?e[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),r.push(c))))}(0!==n.length||0!==r.length)&&(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(r),this.u=(void 0===this.u?[]:this.u).concat(n))}},e.initialize=function(){return Ce(this,function e(){var t=this;return w(e,function(e){return 1==e.g?v(e,function(e){return Ce(e,function e(){var t,i,n,r,o,a,c,l,d,u,m,g=this;return w(e,function(e){switch(e.g){case 1:return t=g,g.R?(i=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(g,g.j),v(e,function(){return Ce(this,function e(){return w(e,function(e){switch(e.g){case 1:return e.m=2,v(e,WebAssembly.instantiate(Ne),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}(),2)):e.return();case 2:if(n=e.h,"object"==typeof window)return Re("createMediapipeSolutionsWasm",{locateFile:g.locateFile}),Re("createMediapipeSolutionsPackedAssets",{locateFile:g.locateFile}),a=i.filter(function(e){return void 0!==e.data}),c=i.filter(function(e){return void 0===e.data}),l=Promise.all(a.map(function(e){var i=Be(t,e.url);if(void 0!==e.path){var n=e.path;i=i.then(function(e){return t.overrideFile(n,e),Promise.resolve(e)})}return i})),d=Promise.all(c.map(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){return Ce(t,function e(){var t,i,n=this;return w(e,function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,i=window.createMediapipeSolutionsPackedAssets,v(e,t(i),2);n.h=e.h,e.g=0})})}),u=Ce(t,function e(){var t=this;return w(e,function(e){return t.g.graph&&t.g.graph.url?e=v(e,Be(t,t.g.graph.url),0):(e.g=0,e=void 0),e})}),v(e,Promise.all([d,l,u]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=i.filter(function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,s(r)),v(e,createMediapipeSolutionsWasm(Module),6);case 6:g.h=e.h,g.l=new OffscreenCanvas(1,1),g.h.canvas=g.l,o=g.h.GL.createContext(g.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),g.h.GL.makeContextCurrent(o),e.g=4;break;case 7:if(g.l=document.createElement("canvas"),!(m=g.l.getContext("webgl2",{}))&&!(m=g.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();g.D=m,g.h.canvas=g.l,g.h.createContext(g.l,!0,!0,{});case 4:g.i=new g.h.SolutionWasm,g.R=!1,e.g=0}})})}(t),2):3!=e.g?v(e,function(e){return Ce(e,function e(){var t,i,n,r,o,s,c=this;return w(e,function(e){if(1==e.g)return c.g.graph&&c.g.graph.url&&c.P===c.g.graph.url?e.return():(c.o=!0,c.g.graph&&c.g.graph.url?(c.P=c.g.graph.url,v(e,Be(c,c.g.graph.url),3)):void(e.g=2));for(2!=e.g&&c.i.loadGraph(e.h),t=a(Object.keys(c.B)),i=t.next();!i.done;i=t.next())c.i.overrideFile(n=i.value,c.B[n]);if(c.B={},c.g.listeners)for(r=a(c.g.listeners),o=r.next();!o.done;o=r.next())Ye(c,o.value);s=c.j,c.j={},c.setOptions(s),e.g=0})})}(t),3):v(e,function(e){return Ce(e,function e(){var t,i,n,r,o,s=this;return w(e,function(e){switch(e.g){case 1:if(!s.o)return e.return();if(!s.u){e.g=2;break}t=a(s.u),i=t.next();case 3:if(i.done){e.g=5;break}return v(e,(0,i.value)(),4);case 4:i=t.next(),e.g=3;break;case 5:s.u=void 0;case 2:if(s.A){for(n=new s.h.GraphOptionChangeRequestList,r=a(s.A),o=r.next();!o.done;o=r.next())n.push_back(o.value);s.i.changeOptions(n),n.delete(),s.A=void 0}s.o=!1,e.g=0}})})}(t),0)})})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Ce(this,function i(){var n,r,o,s,c,l,d,u,m,g=this;return w(i,function(i){switch(i.g){case 1:return g.g.inputs?(n=1e3*(null==t?performance.now():t),v(i,g.C,2)):i.return();case 2:return v(i,g.initialize(),3);case 3:for(r=new g.h.PacketDataList,o=a(Object.keys(e)),s=o.next();!s.done;s=o.next())if(l=g.g.inputs[c=s.value]){e:{var h=g,f=e[c];switch(l.type){case"video":var p=h.m[l.stream];if(p||(p=new $e(h.h,h.D),h.m[l.stream]=p),0===(h=p).l&&(h.l=h.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&f instanceof HTMLVideoElement){var b=f.videoWidth;p=f.videoHeight}else"undefined"!=typeof HTMLImageElement&&f instanceof HTMLImageElement?(b=f.naturalWidth,p=f.naturalHeight):(b=f.width,p=f.height);p={glName:h.l,width:b,height:p},(b=h.g).canvas.width=p.width,b.canvas.height=p.height,b.activeTexture(b.TEXTURE0),h.h.bindTexture2d(h.l),b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,f),h.h.bindTexture2d(0),h=p;break e;case"detections":for((p=h.m[l.stream])||(p=new je(h.h),h.m[l.stream]=p),(h=p).data||(h.data=new h.g.DetectionListData),h.data.reset(f.length),p=0;p<f.length;++p){var _=h.data,S=_.setBoundingBox,y=p,w=(b=f[p]).T,C=new Ze;fe(C,1,w.Z),fe(C,2,w.$),fe(C,3,w.height),fe(C,4,w.width),fe(C,5,w.rotation),fe(C,6,w.X);var M=w=new K;te(M,1,me(C,1)),te(M,2,me(C,2)),te(M,3,me(C,3)),te(M,4,me(C,4)),te(M,5,me(C,5));var x=me(C,6);if(null!=x&&null!=x){z(M.g,48);var O=M.g,k=x;x=0>k;var A=(k=Math.abs(k))>>>0;for(k=Math.floor((k-A)/4294967296),k>>>=0,x&&(k=~k>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++k&&(k=0))),x=N=A,A=k;0<A||127<x;)O.push(127&x|128),x=(x>>>7|A<<25)>>>0,A>>>=7;O.push(x)}if(ye(C,M),w=ee(w),S.call(_,y,w),b.O)for(_=0;_<b.O.length;++_)M=!!(C=b.O[_]).visibility,y=(S=h.data).addNormalizedLandmark,w=p,C=Object.assign(Object.assign({},C),{visibility:M?C.visibility:0}),fe(M=new Ae,1,C.x),fe(M,2,C.y),fe(M,3,C.z),C.visibility&&fe(M,4,C.visibility),te(O=C=new K,1,me(M,1)),te(O,2,me(M,2)),te(O,3,me(M,3)),te(O,4,me(M,4)),te(O,5,me(M,5)),ye(M,O),C=ee(C),y.call(S,w,C);if(b.M)for(_=0;_<b.M.length;++_){if(y=(S=h.data).addClassification,w=p,C=b.M[_],fe(M=new Me,2,C.Y),C.index&&fe(M,1,C.index),C.label&&fe(M,3,C.label),C.displayName&&fe(M,4,C.displayName),O=C=new K,null!=(A=me(M,1))&&null!=A)if(z(O.g,8),x=O.g,0<=A)z(x,A);else{for(k=0;9>k;k++)x.push(127&A|128),A>>=7;x.push(1)}te(O,2,me(M,2)),null!=(x=me(M,3))&&(x=P(x),z(O.g,26),z(O.g,x.length),X(O,O.g.end()),X(O,x)),null!=(x=me(M,4))&&(x=P(x),z(O.g,34),z(O.g,x.length),X(O,O.g.end()),X(O,x)),ye(M,O),C=ee(C),y.call(S,w,C)}}h=h.data;break e;default:h={}}}switch(d=h,u=l.stream,l.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},d),{stream:u,timestamp:n}));break;case"detections":(m=d).stream=u,m.timestamp=n,r.pushDetectionList(m);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return g.i.send(r),v(i,g.C,4);case 4:r.delete(),i.g=0}})})},e.onResults=function(e,t){this.listeners[t||"$"]=e},x("Solution",Le),x("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=ze.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Ce(this,function e(){var t=this;return w(e,function(e){return v(e,t.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(e){return Ce(this,function t(){var i=this;return w(t,function(t){return v(t,i.g.send(e),0)})})},e.setOptions=function(e){this.g.setOptions(e)},x("SelfieSegmentation",ze),x("VERSION","0.1.1632777926")}).call(this)},66071:function(e,t,i){"use strict";i.d(t,{g:function(){return g}});var n=i(56247),r=i(79765),o=i(46782),a=i(8359),s=i(37716),c=i(22238),l=i(67267),d=i(51095),u=i(56436),m=i(29790);let g=(()=>{class e{constructor(e,t){this.dialog=e,this.meetingService=t,this.ngUnsubscribe=new r.xQ,this.isMeetingDialogOpen=!1,this.meetingService.activeMeetingConference$.pipe((0,o.R)(this.ngUnsubscribe)).subscribe(e=>this.activeMeetingConference=e)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}showInfoDialog(){var e;switch(null===(e=this.conferenceState)||void 0===e?void 0:e.kind){case a.VW.Meeting:this.openMeetingInformationDialog(this.activeMeetingConference);break;case a.VW.Dynamic:this.showDynamicConferenceMeetingDetails()}}showDynamicConferenceMeetingDetails(){this.conferenceState&&this.meetingService.getDynamicConferenceMeeting(this.conferenceState).pipe((0,o.R)(this.ngUnsubscribe)).subscribe(e=>this.openMeetingInformationDialog(e))}openMeetingInformationDialog(e){this.isMeetingDialogOpen=!0,this.dialog.open(n.Y,{autoFocus:!1,backdropClass:"cdk-overlay-transparent-backdrop",width:"56rem",height:"52rem",panelClass:["meetings__info-dialog-container","meetings__info-dialog-in-cinema-mode"],position:{bottom:"7.5rem",left:"1rem"},data:{meeting:e,isCinemaMode:!0}}).afterClosed().pipe((0,o.R)(this.ngUnsubscribe)).subscribe(()=>{this.isMeetingDialogOpen=!1})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(c.uw),s.Y36(l.D))},e.\u0275cmp=s.Xpm({type:e,selectors:[["meeting-information-button"]],inputs:{conferenceState:"conferenceState"},decls:5,vars:6,consts:[["mat-button","",1,"meeting-information-button__meeting-details",3,"click"],["data-e2e","cinema-mode-footer-fragment__meeting-details",1,"meeting-information-button__button-text"],["fill","white","size","small",1,"meeting-information-button__button-icon",3,"icon"]],template:function(e,t){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return t.showInfoDialog()}),s.TgZ(1,"span",1),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"app-svg-icon",2),s.qZA()),2&e&&(s.ekj("meeting-information-button__meeting-dialog-opened",t.isMeetingDialogOpen),s.xp6(2),s.hij(" ",s.lcZ(3,4,"conference.meeting_details")," "),s.xp6(2),s.Q6J("icon",t.isMeetingDialogOpen?"arrow_down":"arrow_up"))},directives:[d.lW,u.u],pipes:[m.X$],styles:[".meeting-information-button__meeting-details[_ngcontent-%COMP%]{margin:-1.6rem 1.6rem -1.6rem -1.2rem;padding:1.6rem 2.4rem 1.6rem 1.6rem}.meeting-information-button__meeting-details[_ngcontent-%COMP%]   .meeting-information-button__button-text[_ngcontent-%COMP%]{display:inline-flex;font-size:1.8rem}.meeting-information-button__meeting-details[_ngcontent-%COMP%]   .meeting-information-button__button-icon[_ngcontent-%COMP%]{display:inline-flex;padding-left:.8rem}"]}),e})()},56247:function(e,t,i){"use strict";i.d(t,{Y:function(){return o}});var n=i(22238),r=i(37716);let o=(()=>{class e{constructor(e,t){this.dialogRef=e,this.meetingData=t}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(n.so),r.Y36(n.WI))},e.\u0275cmp=r.Xpm({type:e,selectors:[["meeting-information-dialog"]],decls:1,vars:2,consts:[[3,"meeting","isCinemaMode"]],template:function(e,t){1&e&&r._UZ(0,"meeting-information",0),2&e&&r.Q6J("meeting",t.meetingData.meeting)("isCinemaMode",t.meetingData.isCinemaMode)},styles:[""]}),e})()},6663:function(e,t,i){"use strict";i.d(t,{h:function(){return o}});var n=i(80037),r=i(37716);let o=(()=>{class e{transform(e,t,i){return e.filter(e=>{var i,r,o,a,s,c;return t?(null===(i=e.schedule)||void 0===i?void 0:i.repeat_frequency)?(null===(r=e.schedule)||void 0===r?void 0:r.repeat_frequency)===n.j.Nil:null===(o=e.schedule)||void 0===o?void 0:o.end_date:!((null===(a=e.schedule)||void 0===a?void 0:a.end_date)&&(!(null===(s=e.schedule)||void 0===s?void 0:s.repeat_frequency)||(null===(c=e.schedule)||void 0===c?void 0:c.repeat_frequency)===n.j.Nil))}).filter(e=>e.description.toLowerCase().includes(i.toLowerCase())).sort(this.sortMeetings)}sortMeetings(e,t){var i,n;return(null===(i=e.schedule)||void 0===i?void 0:i.end_date)&&(null===(n=t.schedule)||void 0===n?void 0:n.end_date)?new Date(e.schedule.start_date).getTime()-new Date(t.schedule.start_date).getTime():e.description.localeCompare(t.description)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Yjl({name:"meetings",type:e,pure:!0}),e})()},95105:function(e,t,i){"use strict";i.d(t,{f:function(){return d}});var n=i(80037),r=i(26215),o=i(37716),a=i(29790),s=i(38583),c=i(67267),l=i(45832);let d=(()=>{class e{constructor(e,t,i,n){this.translateService=e,this.datePipe=t,this.meetingService=i,this.snackBarService=n,this.isSendingMeetingRequestSource=new r.X(!1),this.closePlanMeetingDialogSource=new r.X(!1),this.isSendingMeetingRequest$=this.isSendingMeetingRequestSource.asObservable(),this.closePlanMeetingDialog$=this.closePlanMeetingDialogSource.asObservable()}submitMeeting(t,i,n){this.isSendingMeetingRequest(!0);const r={description:t.meetingDescription},o=t.repeatFrequency;r.schedule={end_date:this.constructDate(t.endDate,t.endTime),repeat_frequency:e.getMeetingRepeatFrequency(o),schedule_timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,start_date:this.constructDate(t.startDate,t.startTime)},e.isOnlyWeekdays(o)&&(r.schedule.by_day=["Monday","Tuesday","Wednesday","Thursday","Friday"]),i?this.meetingService.updateMeeting(r,n).pipe().subscribe(()=>{this.toggleClosePlanMeetingDialog(),this.isSendingMeetingRequest(!1)},()=>{this.isSendingMeetingRequest(!1),this.snackBarService.openErrorInfo("meetings.plan_dialog.error")}):this.meetingService.createMeeting(r).pipe().subscribe(()=>{this.toggleClosePlanMeetingDialog(),this.isSendingMeetingRequest(!1)},()=>{this.isSendingMeetingRequest(!1),this.snackBarService.openErrorInfo("meetings.plan_dialog.error")})}toggleClosePlanMeetingDialog(){this.closePlanMeetingDialogSource.next(!this.closePlanMeetingDialogSource.getValue())}isSendingMeetingRequest(e){this.isSendingMeetingRequestSource.next(e)}setRepeatFrequencyNote(t,i){if(!i||i===n.Z.DoesNotRepeat)return"";const r=e.getTranslationKey(i);t=this.datePipe.transform(t,"dd LLL, y");const o=this.translateService.instant(r);return this.translateService.instant("meetings.plan_dialog.recurrence.explanation_text",{occurrence:o,startDate:t})}getPatchValueForInitializeFormWithMeetingDetails(t){var i,r,o;const a=new Date(t.schedule.start_date),s=new Date(null!==(i=t.schedule.end_date)&&void 0!==i?i:t.schedule.start_date);let c=n.Z.EveryDay;return(null===(r=t.schedule)||void 0===r?void 0:r.repeat_frequency)?c=e.getMeetingRepeatFrequencyOptionKey(t.schedule):(null===(o=t.schedule)||void 0===o?void 0:o.end_date)&&(c=n.Z.DoesNotRepeat),{meetingDescription:t.description,startDate:this.getFormattedDateString(a),endDate:this.getFormattedDateString(s),startTime:this.getFormattedTimeString(a),endTime:this.getFormattedTimeString(s),repeatFrequency:c}}setAllDayMeetingTime(t){let i="00:00",n="23:59";if(!t){const t=new Date,r=new Date(Date.now()+e.MIN_START_END_DATE_DIF);i=this.getFormattedTimeString(t),n=this.getFormattedTimeString(r)}return{startTime:i,endTime:n}}getCurrentDate(){return this.getFormattedDateString(new Date)}getInitialTimeFromDate(t){let i=new Date;return"endTime"===t&&(i=new Date(Date.now()+e.MIN_START_END_DATE_DIF)),this.getFormattedTimeString(i)}sanitizeStartEndDate(t,i,n){const r=new Date(t),o=new Date(i);if(o.getTime()<r.getTime()&&"start"===n){const t=new Date(r.getTime()+e.MIN_START_END_DATE_DIF);i=this.getFormattedDateString(t)}if(r.getTime()>o.getTime()&&"end"===n){const i=new Date(o.getTime()-e.MIN_START_END_DATE_DIF);t=this.getFormattedDateString(i)}return{startDate:t,endDate:i}}sanitizeStartEndDateTime(t,i,n,r,o,a){let s=new Date(t+" "+i);const c=new Date(n+" "+r),l=(new Date).setHours(0,0,0,0);if(a&&s.getTime()<l){if(c.getTime()<s.getTime()&&"start"===o){const t=new Date(s.getTime()+e.MIN_START_END_DATE_DIF);r=this.getFormattedTimeString(t)}else if(s.getTime()>c.getTime()&&"end"===o){const t=new Date(c.getTime()-e.MIN_START_END_DATE_DIF);i=this.getFormattedTimeString(t)}return{startDate:t,startTime:i,endDate:n,endTime:r}}if(s.getTime()<Date.now()&&(s=new Date,t=this.getFormattedDateString(s),i=this.getFormattedTimeString(s)),c.getTime()<s.getTime()&&"start"===o){const t=new Date(s.getTime()+e.MIN_START_END_DATE_DIF);n=this.getFormattedDateString(t),r=this.getFormattedTimeString(t)}if(s.getTime()>c.getTime()&&"end"===o){const n=new Date(c.getTime()-e.MIN_START_END_DATE_DIF);t=this.getFormattedDateString(n),i=this.getFormattedTimeString(n)}return{startDate:t,startTime:i,endDate:n,endTime:r}}getFormattedTimeString(e){return`${this.addLeadingZeroToNumber(e.getHours())}:${this.addLeadingZeroToNumber(e.getMinutes())}`}getFormattedDateString(e){const t=this.addLeadingZeroToNumber(e.getMonth()+1),i=this.addLeadingZeroToNumber(e.getDate());return`${e.getFullYear()}-${t}-${i}`}addLeadingZeroToNumber(e){return(e<10?"0":"")+e}constructDate(e,t){return new Date(e+"T"+t)}static isOnlyWeekdays(e){return e===n.Z.EveryWeekday}static getMeetingRepeatFrequency(t){return e.getMeetingRepeatFrequencyByKey(t,e.isOnlyWeekdays(t),!0)}static getTranslationKey(t){return"meetings.plan_dialog.recurrence."+e.getMeetingRepeatFrequencyByKey(t,e.isOnlyWeekdays(t),!1)}static getMeetingRepeatFrequencyOptionKey(t){var i;return e.getMeetingRepeatFrequencyByValue(null!==(i=t.repeat_frequency)&&void 0!==i?i:"",!!t.by_day,!1)}static getMeetingRepeatFrequencyTranslationKey(t){var i;return"meetings.plan_dialog.recurrence."+e.getMeetingRepeatFrequencyByValue(null!==(i=t.repeat_frequency)&&void 0!==i?i:"",!!t.by_day,!0)}static getMeetingRepeatFrequencyByValue(e,t,i){switch(e){case n.j.P1D:return i?"daily":n.Z.EveryDay;case n.j.P1W:return t?i?"every_weekday":n.Z.EveryWeekday:i?"weekly":n.Z.EveryWeek;case n.j.P1M:return i?"monthly":n.Z.EveryMonth;case n.j.P1Y:return i?"yearly":n.Z.EveryYear;default:return i?"daily":n.Z.DoesNotRepeat}}static getMeetingRepeatFrequencyByKey(e,t,i){switch(e){case n.Z.DoesNotRepeat:return i?n.j.Nil:"";case n.Z.EveryWeekday:case n.Z.EveryWeek:return t?i?n.j.P1W:"weekday":i?n.j.P1W:"week";case n.Z.EveryMonth:return i?n.j.P1M:"month";case n.Z.EveryYear:return i?n.j.P1Y:"year";case n.Z.EveryDay:default:return i?n.j.P1D:"day"}}}return e.MIN_START_END_DATE_DIF=36e5,e.\u0275fac=function(t){return new(t||e)(o.LFG(a.sK),o.LFG(s.uU),o.LFG(c.D),o.LFG(l.c))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},80037:function(e,t,i){"use strict";i.d(t,{Z:function(){return n},j:function(){return r}});var n=(()=>{return(e=n||(n={})).DoesNotRepeat="doesNotRepeat",e.EveryWeekday="everyWeekday",e.EveryDay="everyDay",e.EveryWeek="everyWeek",e.EveryMonth="everyMonth",e.EveryYear="everyYear",n;var e})(),r=(()=>{return(e=r||(r={})).Nil="nil",e.P1W="P1W",e.P1D="P1D",e.P1M="P1M",e.P1Y="P1Y",r;var e})()},79108:function(e,t,i){"use strict";i.d(t,{L:function(){return De}});var n=i(79765),r=i(26215),o=i(9112),a=i(87519),s=i(88002),c=i(46782),l=i(45832),d=i(8359),u=i(37716),m=i(35019),g=i(8106),h=i(89670),f=i(50501),p=i(1933),v=i(81836),b=i(38583),_=i(94935),S=i(54278),y=i(39178),w=i(78023),C=i(56436),M=i(1704),x=i(8250),O=i(36969),k=i(11845),A=i(29790),F=i(93631),T=i(54037);let P=(()=>{class e{transform(e){return T.s.sortMembers(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Yjl({name:"videoMemberSort",type:e,pure:!0}),e})();function Z(e,t){if(1&e&&(u.TgZ(0,"span",8),u._uU(1),u.qZA()),2&e){const e=u.oxw();u.xp6(1),u.AsE(" ",null==e.conferenceState?null:e.conferenceState.description," (",null==e.conferenceState?null:e.conferenceState.members.length,") ")}}function D(e,t){}function E(e,t){1&e&&u.YNc(0,D,0,0,"ng-template")}function I(e,t){if(1&e&&(u.ynx(0),u._UZ(1,"video-member",16),u.BQk()),2&e){const e=t.$implicit;u.xp6(1),u.Q6J("member",e)("isSidebarView",!0)}}function $(e,t){if(1&e&&u._UZ(0,"video-member",16),2&e){const e=u.oxw().$implicit;u.Q6J("member",e)("isSidebarView",!0)}}function U(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"div",12),u.ynx(1),u._UZ(2,"video-member",16),u.TgZ(3,"div",17),u.NdJ("onVisibilityChange$",function(t){const i=u.CHM(e).$implicit;return u.oxw(3).onVideoMemberVisibilityChange(t,i)}),u.qZA(),u.BQk(),u.YNc(4,$,1,2,"ng-template",null,18,u.W1O),u.qZA()}if(2&e){const e=t.$implicit,i=t.last;u.xp6(2),u.Q6J("member",e)("isSidebarView",!0),u.xp6(1),u.ekj("cinema-mode-member-list__extended-visibility-indicator-last",i)}}function j(e,t){if(1&e&&(u.TgZ(0,"div",11),u.TgZ(1,"div",12),u.YNc(2,I,2,2,"ng-container",13),u.ALo(3,"conferenceMembersSelf"),u.qZA(),u.TgZ(4,"div",14),u.YNc(5,U,6,4,"div",15),u.ALo(6,"videoMemberSort"),u.ALo(7,"conferenceMembersSelf"),u.qZA(),u.qZA()),2&e){const e=u.oxw(2);u.xp6(2),u.Q6J("ngForOf",u.xi3(3,4,e.conferenceState.members,!0))("ngForTrackBy",e.trackMember),u.xp6(3),u.Q6J("ngForOf",u.lcZ(6,7,u.xi3(7,9,e.conferenceState.members,!1)))("ngForTrackBy",e.trackMember)}}function N(e,t){if(1&e&&(u.TgZ(0,"div",19),u._UZ(1,"member-list",20),u.qZA()),2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("isSidebarView",!0)("isSmallView",!0)("conferenceState",e.conferenceState)}}function V(e,t){if(1&e&&(u.ynx(0),u.YNc(1,j,8,12,"div",9),u.YNc(2,N,2,3,"ng-template",null,10,u.W1O),u.BQk()),2&e){const e=u.MAs(3),t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.viewModeActive===t.viewMode.Gallery)("ngIfElse",e)}}var R=(()=>{return(e=R||(R={}))[e.List=0]="List",e[e.Gallery=1]="Gallery",R;var e})();let L=(()=>{class e{constructor(e){this.videoVisibilityService=e,this.sideBarCloseEvent=new u.vpe,this.viewMode=R,this.viewModeActive=R.Gallery}ngOnInit(){this.updateViewToggleButtonProperties()}toggleViewMode(){this.viewModeActive=this.isListModeActive()?R.Gallery:R.List,this.updateViewToggleButtonProperties()}close(){this.sideBarCloseEvent.emit()}trackMember(e,t){return t.uuid}onVideoMemberVisibilityChange(e,t){this.videoVisibilityService.setMemberVisibility(t,e)}updateViewToggleButtonProperties(){this.viewModeToggleTranslationKey=this.isListModeActive()?"video.gallery_view":"video.list_view",this.viewModeToggleIconName=this.isListModeActive()?"gallery":"list"}isListModeActive(){return this.viewModeActive===R.List}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(y.x))},e.\u0275cmp=u.Xpm({type:e,selectors:[["cinema-mode-member-list"]],inputs:{conferenceState:"conferenceState"},outputs:{sideBarCloseEvent:"sideBarCloseEvent"},decls:12,vars:9,consts:[["activeConferenceName",""],[1,"cinema-mode-member-list__participants-list__header"],[4,"ngTemplateOutlet"],["hoverTextTranslationKey","video.hide_participant_list","iconFill","close-member-list-sidenav","iconName","close_round",3,"appButtonClick"],["type","stroked-button","data-e2e","cinema-mode-participants-list-fragment__view--button",1,"cinema-mode-member-list__view-button","exclude-app-button-style",3,"appButtonClick"],["size","medium",3,"icon"],[1,"cinema-mode-member-list__view-button__text"],[4,"ngIf"],["data-e2e","cinema-mode-participants-list-fragment__meeting-name",1,"cinema-mode-member-list__conference-name"],["class","cinema-mode-member-list__sidebar-videos","data-e2e","cinema-mode-participants-list-fragment__sidebar-video",4,"ngIf","ngIfElse"],["participantListName",""],["data-e2e","cinema-mode-participants-list-fragment__sidebar-video",1,"cinema-mode-member-list__sidebar-videos"],[1,"cinema-mode-member-list__sidebar-video"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"cinema-mode-member-list__participants-video"],["class","cinema-mode-member-list__sidebar-video",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cinema-mode-member-list__video--sidebar-view",3,"member","isSidebarView"],["observeVisibility","",1,"cinema-mode-member-list__extended-visibility-indicator",3,"onVisibilityChange$"],["participantVideo",""],[1,"cinema-mode-member-list__participants"],["data-e2e","participant-fragment",3,"isSidebarView","isSmallView","conferenceState"]],template:function(e,t){if(1&e&&(u.YNc(0,Z,2,2,"ng-template",null,0,u.W1O),u.TgZ(2,"div",1),u.YNc(3,E,1,0,void 0,2),u.TgZ(4,"app-button",3),u.NdJ("appButtonClick",function(){return t.close()}),u.qZA(),u.qZA(),u.TgZ(5,"app-button",4),u.NdJ("appButtonClick",function(){return t.toggleViewMode()}),u._UZ(6,"app-svg-icon",5),u.TgZ(7,"span",6),u._uU(8),u.ALo(9,"letterCase"),u.ALo(10,"translate"),u.qZA(),u.qZA(),u.YNc(11,V,4,2,"ng-container",7)),2&e){const e=u.MAs(1);u.xp6(3),u.Q6J("ngTemplateOutlet",e),u.xp6(3),u.Q6J("icon",t.viewModeToggleIconName),u.xp6(2),u.hij(" ",u.xi3(9,4,u.lcZ(10,7,t.viewModeToggleTranslationKey),t.viewModeToggleTranslationKey)," "),u.xp6(3),u.Q6J("ngIf",t.conferenceState)}},directives:[b.tP,w.V,C.u,b.O5,b.sg,M.B,x.n,O.U],pipes:[k.K,A.X$,F.k,P],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}.cinema-mode-member-list__participants-list__header[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;margin-bottom:1.4rem;margin-left:1rem}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]{margin-bottom:.9rem;margin-left:1rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]     .mat-button-wrapper{align-items:center;display:flex;justify-content:center;padding:.3rem}.cinema-mode-member-list__view-button[_ngcontent-%COMP%]     .mat-button-ripple{display:none}.cinema-mode-member-list__view-button__text[_ngcontent-%COMP%]{padding-left:.5rem}.cinema-mode-member-list__sidebar-videos[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:.1rem;overflow:hidden}.cinema-mode-member-list__sidebar-video[_ngcontent-%COMP%]{background:#333;margin-bottom:.3rem;position:relative}.cinema-mode-member-list__sidebar-video[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cinema-mode-member-list__video--sidebar-view[_ngcontent-%COMP%]{height:18rem;overflow:hidden}.cinema-mode-member-list__participants[_ngcontent-%COMP%], .cinema-mode-member-list__participants-video[_ngcontent-%COMP%]{max-height:100%;overflow:auto}.cinema-mode-member-list__extended-visibility-indicator[_ngcontent-%COMP%]{bottom:-18rem;position:absolute;top:-18rem}.cinema-mode-member-list__extended-visibility-indicator-last[_ngcontent-%COMP%]{bottom:0}"]}),e})();var B=i(44163),Y=i(62656);function q(e,t){if(1&e&&(u.TgZ(0,"div",1),u.TgZ(1,"span",2),u._uU(2),u.qZA(),u._uU(3),u.ALo(4,"translate"),u.qZA()),2&e){const e=u.oxw();u.xp6(2),u.hij(" ",e.speaker.caller_id_name," "),u.xp6(1),u.hij(" \xa0",u.lcZ(4,2,"conference.user_is_speaker"),"\n")}}let z=(()=>{class e{constructor(e){this.conferenceSpeakerIndicatorService=e,this.ngUnsubscribe=new n.xQ,this.conferenceSpeakerIndicatorService.speaker$.pipe((0,c.R)(this.ngUnsubscribe)).subscribe(e=>this.speaker=e)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(Y.W))},e.\u0275cmp=u.Xpm({type:e,selectors:[["cinema-mode-speaker-indicator"]],decls:1,vars:1,consts:[["class","video-conference-participant-speaker-indicator-bar__notification",4,"ngIf"],[1,"video-conference-participant-speaker-indicator-bar__notification"],[1,"video-conference-participant-speaker-indicator-bar__name"]],template:function(e,t){1&e&&u.YNc(0,q,5,4,"div",0),2&e&&u.Q6J("ngIf",t.speaker)},directives:[b.O5],pipes:[A.X$],styles:["[_nghost-%COMP%]{display:flex;height:100%;justify-content:center;left:0;pointer-events:none;position:absolute;top:0;width:100%;z-index:1000}.video-conference-participant-speaker-indicator-bar__notification[_ngcontent-%COMP%]{box-shadow:0 .3rem .5rem -.1rem #0003,0 .6rem 1rem #00000024,0 .1rem 1.8rem #0000001f;box-sizing:border-box;display:inline-flex;flex-wrap:nowrap;font-size:1.4rem;margin:.8rem;min-height:4.8rem;padding:1.6rem;position:absolute;transform-origin:center;white-space:nowrap;width:40rem}.video-conference-participant-speaker-indicator-bar__name[_ngcontent-%COMP%]{flex:0 1 auto;overflow:hidden;text-overflow:ellipsis}"]}),e})();var J=i(22759),Q=i(94402),G=i(59193),H=i(43190),W=i(28704),K=i(63327),X=i(8307),ee=i(88640),te=i(67267),ie=i(25791),ne=i(74688),re=i(99445),oe=i(10028),ae=i(83897),se=i(33935),ce=i(77746),le=i(66071),de=i(12794),ue=i(11495),me=i(3052),ge=i(44895),he=i(79098);function fe(e,t){if(1&e){const e=u.EpF();u.ynx(0),u._UZ(1,"meeting-information-button",18),u.TgZ(2,"div",19),u.ALo(3,"async"),u.TgZ(4,"span",20),u._uU(5),u.qZA(),u.TgZ(6,"app-button",21),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw(2).toggleSideBar()}),u.ALo(7,"async"),u.qZA(),u.qZA(),u.BQk()}if(2&e){const e=u.oxw(2);u.xp6(1),u.Q6J("conferenceState",e.conferenceState),u.xp6(1),u.ekj("cinema-mode-footer__meeting-list-opened",u.lcZ(3,5,e.isSidebarOpen$)),u.xp6(3),u.hij(" ",e.conferenceState.members.length," "),u.xp6(1),u.Q6J("hoverTextTranslationKey",u.lcZ(7,7,e.isSidebarOpen$)?"video.hide_participant_list":"video.show_participant_list")}}function pe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"mat-list-item"),u._UZ(1,"conference-lock-button",25),u._UZ(2,"raise-hand-button",25),u._UZ(3,"microphone",25),u.TgZ(4,"app-button",26),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw(3).endConference()}),u.qZA(),u.qZA()}if(2&e){const e=t.ngIf;u.xp6(1),u.Q6J("conferenceState",e),u.xp6(1),u.Q6J("conferenceState",e),u.xp6(1),u.Q6J("conferenceState",e)}}function ve(e,t){if(1&e&&(u.ynx(0),u._UZ(1,"app-button",22,23),u.TgZ(3,"mat-menu",13,24),u.YNc(5,pe,5,3,"mat-list-item",3),u.ALo(6,"async"),u.qZA(),u.BQk()),2&e){const e=u.MAs(2),t=u.MAs(4),i=u.oxw(2);u.xp6(1),u.Q6J("matMenuTriggerFor",t)("iconName",e.menuOpen?"arrow_down":"arrow_up"),u.xp6(4),u.Q6J("ngIf",u.lcZ(6,3,i.activeCallConferenceState$))}}function be(e,t){if(1&e&&(u.ynx(0),u.YNc(1,fe,8,9,"ng-container",3),u.YNc(2,ve,7,5,"ng-container",3),u.ALo(3,"async"),u.BQk()),2&e){const e=u.oxw();let t;u.xp6(1),u.Q6J("ngIf",e.conferenceState.kind!==e.oneOnOneConferenceKind),u.xp6(1),u.Q6J("ngIf",null==(t=u.lcZ(3,2,e.activeCallConferenceStateSelfMember$))?null:t.moderator)}}function _e(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"app-button",27),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw().hold()}),u.qZA()}}function Se(e,t){if(1&e&&(u._UZ(0,"raise-hand-button",28),u.ALo(1,"conferenceMembersSelf")),2&e){const e=u.oxw();u.Q6J("conferenceState",e.conferenceState)("conferenceMember",u.xi3(1,2,e.conferenceState.members,!0)[0])}}function ye(e,t){1&e&&(u.ynx(0),u._UZ(1,"video-camera-toggle",29),u._UZ(2,"video-screenshare-menu",29),u.BQk())}function we(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.TgZ(1,"app-button",30),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw().previousPage()}),u.ALo(2,"async"),u.ALo(3,"async"),u.qZA(),u.TgZ(4,"app-button",31),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw().nextPage()}),u.ALo(5,"async"),u.ALo(6,"async"),u.qZA(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("disabled",!u.lcZ(2,4,e.hasPreviousPage$))("iconFillClass",u.lcZ(3,6,e.hasPreviousPage$)?"white":"grey-color"),u.xp6(3),u.Q6J("disabled",!u.lcZ(5,8,e.hasNextPage$))("iconFillClass",u.lcZ(6,10,e.hasNextPage$)?"white":"grey-color")}}function Ce(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"app-button",32),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw().exitCinemaMode()}),u.qZA()}}function Me(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"app-button",35),u.NdJ("click",function(t){return u.CHM(e),u.oxw(2).openPageSizeListMenu(t)}),u.qZA()}}function xe(e,t){if(1&e){const e=u.EpF();u.ynx(0),u.YNc(1,Me,1,0,"app-button",33),u.TgZ(2,"app-button",34),u.NdJ("appButtonClick",function(){return u.CHM(e),u.oxw().openDeviceSettingsDialog()}),u.qZA(),u.BQk()}if(2&e){const e=u.oxw();u.xp6(1),u.Q6J("ngIf",e.conferenceState&&e.conferenceState.members.length>e.pageSizeOptions[0])}}function Oe(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"button",38),u.NdJ("click",function(){const t=u.CHM(e).$implicit;return u.oxw(2).updatePageSize(t)}),u.TgZ(1,"span"),u._uU(2),u.qZA(),u.qZA()}if(2&e){const e=t.$implicit;u.xp6(2),u.Oqu(e)}}function ke(e,t){if(1&e&&(u.TgZ(0,"h2",36),u._uU(1),u.ALo(2,"translate"),u.qZA(),u.YNc(3,Oe,3,1,"button",37)),2&e){const e=u.oxw();u.xp6(1),u.hij(" ",u.lcZ(2,2,"telephone.participants_per_page")," "),u.xp6(2),u.Q6J("ngForOf",e.pageSizeOptions)}}let Ae=(()=>{class e{constructor(e,t,i,r,o,a,s,l,m,g,h,f,p,v,b){this.microphoneService=e,this.sipService=t,this.apiAvService=i,this.apiAvFeedService=r,this.avApiService=o,this.router=a,this.apiAvEventStateService=s,this.videoPaginationService=l,this.localUserConfigService=m,this.meetingService=g,this.guestService=h,this.cinemaModeService=f,this.featureAccessService=p,this.callTrackerService=v,this.openDeviceSettingsService=b,this.ngUnsubscribe=new n.xQ,this.fullScreenToggleEvent=new u.vpe,this.showPageSizeListOptions=!1,this.pageSizeOptions=[6,9,12,16,20],this.oneOnOneConferenceKind=d.VW.OneOnOne,this.isSidebarOpen$=this.cinemaModeService.isSidebarOpen$,this.microphoneStatus$=this.microphoneService.microphoneStatus$,this.hasPreviousPage$=this.videoPaginationService.hasPreviousPage$,this.hasNextPage$=this.videoPaginationService.hasNextPage$,this.isPaginationAvailable$=this.videoPaginationService.isPaginationAvailable$,this.isGuest$=this.guestService.isGuest$,this.activeCallConferenceState$=this.avApiService.activeCallConferenceState$,this.activeCallConferenceStateSelfMember$=this.apiAvEventStateService.activeCallConferenceStateSelfMember$,this.isVideoAvailable$=this.featureAccessService.isVideoAvailable$,(0,J.R)(document,"fullscreenchange").pipe((0,c.R)(this.ngUnsubscribe)).subscribe(()=>{this.updateToggleFullscreenButton()}),this.updateToggleFullscreenButton()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}toggleSideBar(){this.cinemaModeService.toggleSidebar()}toggleMute(){this.microphoneService.toggleSelfMute()}toggleFullscreen(){this.fullScreenToggleEvent.emit()}hangUp(){this.meetingService.hangUp(!0)}previousPage(){this.videoPaginationService.previousPage()}nextPage(){this.videoPaginationService.nextPage()}updatePageSize(e){this.localUserConfigService.setCinemaModePageSize(e)}hold(){this.cinemaModeService.exitCinemaMode(),this.callTrackerService.hold()}exitCinemaMode(){this.cinemaModeService.exitCinemaMode()}endConference(){this.activeCallConferenceState$.pipe((0,H.w)(e=>"object"==typeof e&&null!==e?(0,Q.D)(this.apiAvService.deleteConference(e.uuid)):G.E),(0,c.R)(this.ngUnsubscribe)).subscribe(()=>this.exitCinemaMode())}hidePageSizeListMenu(){this.showPageSizeListOptions=!1}openPageSizeListMenu(e){e.stopPropagation(),this.showPageSizeListOptions=!0}openDeviceSettingsDialog(){this.openDeviceSettingsService.open({isWelcomeDialog:!1})}updateToggleFullscreenButton(){const e=document.fullscreenElement;this.fullscreenButtonIcon=e?"fullscreen_off":"fullscreen_on",this.fullscreenHoverKey=e?"telephone.fullscreen_off":"telephone.fullscreen_on"}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(W.p),u.Y36(v.y),u.Y36(K.y),u.Y36(f.D),u.Y36(m.a),u.Y36(X.F0),u.Y36(m.a),u.Y36(h.H),u.Y36(ee.i),u.Y36(te.D),u.Y36(ie.Q),u.Y36(p.H),u.Y36(ne.q),u.Y36(re.k),u.Y36(oe.I))},e.\u0275cmp=u.Xpm({type:e,selectors:[["cinema-mode-footer"]],hostBindings:function(e,t){1&e&&u.NdJ("keydown.escape",function(e){return t.exitCinemaMode(e)},!1,u.evT)},inputs:{conferenceState:"conferenceState"},outputs:{fullScreenToggleEvent:"fullScreenToggleEvent"},decls:28,vars:27,consts:[["data-e2e","cinema-mode-footer-fragment",1,"cinema-mode-footer__action-overlay"],[1,"cinema-mode-footer__action-overlay__actions"],[1,"cinema-mode-footer__conference-actions"],[4,"ngIf"],[1,"cinema-mode-footer__call-actions"],["hoverTextTranslationKey","conference.on_hold","iconFillClass","white","iconName","call_hold","iconSize","small","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"appButtonClick",4,"ngIf","ngIfElse"],["raiseHand",""],["iconFillClass","white","e2e","cinema-mode-footer-fragment__microphone","iconSize","small",3,"hoverTextTranslationKey","iconName","appButtonClick"],["hoverTextTranslationKey","telephone.hang_up","iconSize","medium","data-e2e","cinema-mode-footer-fragment__end-call",3,"isBackgroundFilled","isRounded","appButtonClick"],[1,"cinema-mode-footer__view-options"],["hoverTextTranslationKey","telephone.cinema_mode_off","iconName","cinema_mode_off","iconFillClass","white","data-e2e","cinema-mode-footer-fragment__end-cinema-mode--button",3,"appButtonClick",4,"ngIf"],["iconFillClass","white","data-e2e","cinema-mode-footer-fragment__fullscreen--svg-icon",3,"hoverTextTranslationKey","iconName","appButtonClick"],["iconFillClass","white","iconName","menu_vertical","data-e2e","cinema-mode-footer-fragment__device-settings",3,"matMenuTriggerFor","click"],["yPosition","above",1,"cinema-mode__conference-moderator-controls-list"],["optionsMenu","matMenu"],[4,"ngIf","ngIfElse"],["class","cinema-mode-footer__page-size-menu"],["pageSizeOption",""],[3,"conferenceState"],["data-e2e","cinema-mode-footer-fragment__participant-icon",1,"cinema-mode-footer__conference-participant-icons"],["data-e2e","cinema-mode-footer-fragment__participant-number",1,"cinema-mode-footer__conference-participant-number"],["iconFillClass","white","iconName","face_to_face","iconSize","small",3,"hoverTextTranslationKey","appButtonClick"],["hoverTextTranslationKey","conference.moderation_menu.tooltip","iconFillClass","white","iconSize","small",3,"matMenuTriggerFor","iconName"],["conferenceModeratorControlsOpen","matMenuTrigger"],["conferenceModeratorControls","matMenu"],["iconFillClass","black","type","basic-icon-text-button",3,"conferenceState"],["buttonTextTranslationKey","conference.end_conference","color","warn","iconFillClass","warn-color","iconName","call_end","type","basic-icon-text-button",3,"appButtonClick"],["hoverTextTranslationKey","conference.on_hold","iconFillClass","white","iconName","call_hold","iconSize","small","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"appButtonClick"],["iconFillClass","white","data-e2e","cinema-mode-footer-fragment__raise-hand--button",3,"conferenceState","conferenceMember"],["e2e","cinema-mode-footer-fragment"],["iconName","arrow_left","data-e2e","pagination-fragment__arrow-left",3,"disabled","iconFillClass","appButtonClick"],["iconName","arrow_right","data-e2e","pagination-fragment__arrow-right",3,"disabled","iconFillClass","appButtonClick"],["hoverTextTranslationKey","telephone.cinema_mode_off","iconName","cinema_mode_off","iconFillClass","white","data-e2e","cinema-mode-footer-fragment__end-cinema-mode--button",3,"appButtonClick"],["class","cinema-mode-footer__page-size-button","buttonTextTranslationKey","meetings.video.settings.change_layout","iconFillClass","black","iconName","gallery","type","basic-icon-text-button","e2e","toolbar-fragment__change-layout",3,"click",4,"ngIf"],["buttonTextTranslationKey","meetings.video.settings.call_settings","e2e","toolbar-fragment__devices","iconFillClass","black","iconName","tune","type","basic-icon-text-button",3,"appButtonClick"],["buttonTextTranslationKey","meetings.video.settings.change_layout","iconFillClass","black","iconName","gallery","type","basic-icon-text-button","e2e","toolbar-fragment__change-layout",1,"cinema-mode-footer__page-size-button",3,"click"],[1,"cinema-mode-footer__page-size-title"],["data-e2e","cinema-mode-footer-fragment__page-size-menu","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["data-e2e","cinema-mode-footer-fragment__page-size-menu","mat-menu-item","",3,"click"]],template:function(e,t){if(1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,be,4,4,"ng-container",3),u.qZA(),u.TgZ(4,"div",4),u.YNc(5,_e,1,0,"app-button",5),u.ALo(6,"async"),u.YNc(7,Se,2,5,"ng-template",null,6,u.W1O),u.TgZ(9,"app-button",7),u.NdJ("appButtonClick",function(){return t.toggleMute()}),u.ALo(10,"async"),u.ALo(11,"async"),u.qZA(),u.TgZ(12,"app-button-end-call",8),u.NdJ("appButtonClick",function(){return t.hangUp()}),u.qZA(),u.YNc(13,ye,3,0,"ng-container",3),u.ALo(14,"async"),u.qZA(),u.TgZ(15,"div",9),u.YNc(16,we,7,12,"ng-container",3),u.ALo(17,"async"),u.YNc(18,Ce,1,0,"app-button",10),u.ALo(19,"async"),u.TgZ(20,"app-button",11),u.NdJ("appButtonClick",function(){return t.toggleFullscreen()}),u.qZA(),u.TgZ(21,"app-button",12),u.NdJ("click",function(){return t.hidePageSizeListMenu()}),u.qZA(),u.TgZ(22,"mat-menu",13,14),u.TgZ(24,"mat-list-item"),u.YNc(25,xe,3,1,"ng-container",15),u.YNc(26,ke,4,4,"ng-template",16,17,u.W1O),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e){const e=u.MAs(8),i=u.MAs(23),n=u.MAs(27);u.xp6(3),u.Q6J("ngIf",t.conferenceState),u.xp6(2),u.Q6J("ngIf",u.lcZ(6,15,t.activeCallConferenceState$).kind===t.oneOnOneConferenceKind)("ngIfElse",e),u.xp6(4),u.Q6J("hoverTextTranslationKey",u.lcZ(10,17,t.microphoneStatus$).hoverTitle)("iconName",u.lcZ(11,19,t.microphoneStatus$).icon),u.xp6(3),u.Q6J("isBackgroundFilled",!0)("isRounded",!0),u.xp6(1),u.Q6J("ngIf",u.lcZ(14,21,t.isVideoAvailable$)),u.xp6(3),u.Q6J("ngIf",u.lcZ(17,23,t.isPaginationAvailable$)),u.xp6(2),u.Q6J("ngIf",!u.lcZ(19,25,t.isGuest$)),u.xp6(2),u.Q6J("hoverTextTranslationKey",t.fullscreenHoverKey)("iconName",t.fullscreenButtonIcon),u.xp6(1),u.Q6J("matMenuTriggerFor",i),u.xp6(4),u.Q6J("ngIf",!t.showPageSizeListOptions)("ngIfElse",n)}},directives:[b.O5,w.V,ae.Q,se.p6,se.VK,ce.Tg,le.g,de.K,ue.g,me.B,ge.p,he.J,b.sg,se.OP],pipes:[b.Ov,F.k,A.X$],styles:[".cinema-mode-footer__action-overlay[_ngcontent-%COMP%]{align-items:center;border-radius:.2rem;color:#fff;display:flex;justify-content:center;text-align:center}.cinema-mode-footer__action-overlay__actions[_ngcontent-%COMP%]{align-items:center;background-color:#000;border-radius:.2rem;display:flex;flex-direction:row;justify-content:space-between;max-width:100%;padding:.8rem 1.2rem;width:100%}@media screen and (max-width: 767px){.cinema-mode-footer__action-overlay__actions[_ngcontent-%COMP%]{overflow-x:auto;width:76.8rem}}.cinema-mode-footer__conference-actions[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1}.cinema-mode-footer__conference-participant-icons[_ngcontent-%COMP%]{position:relative}.cinema-mode-footer__conference-participant-number[_ngcontent-%COMP%]{color:#fff;left:3.2rem;position:absolute;top:.7rem}.cinema-mode-footer__call-actions[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:space-between;width:29.2rem}.cinema-mode-footer__view-options[_ngcontent-%COMP%]{align-items:center;display:flex;flex:1;justify-content:flex-end}.cinema-mode-footer__page-size-button[_ngcontent-%COMP%]{margin-right:1rem}.cinema-mode-footer__page-size-button[_ngcontent-%COMP%]     .mat-button-wrapper{padding-top:.3rem}.cinema-mode-footer__page-size-title[_ngcontent-%COMP%]{color:gray;font-size:inherit;font-weight:normal;margin:0;opacity:.9;padding-left:1rem;padding-right:1.5rem}.cinema-mode-footer__pagination[_ngcontent-%COMP%]{display:flex;flex:1;justify-content:center;max-width:11.2rem}  .cinema-mode__conference-moderator-controls-list{margin-bottom:1.9rem}"]}),e})();const Fe=["sidebar"];function Te(e,t){1&e&&u._UZ(0,"app-spinner",9)}function Pe(e,t){1&e&&u._UZ(0,"cinema-mode-speaker-indicator")}function Ze(e,t){if(1&e){const e=u.EpF();u.TgZ(0,"cinema-mode-footer",10),u.NdJ("fullScreenToggleEvent",function(){return u.CHM(e),u.oxw().toggleFullscreen()}),u.qZA()}2&e&&u.Q6J("conferenceState",t.ngIf)}let De=(()=>{class e{constructor(e,t,i,u,m,g,h,f){this.apiAvEventStateService=e,this.apiAvEventConnectionService=t,this.snackBarService=i,this.videoPaginationService=u,this.apiAvFeedService=m,this.cinemaModeService=g,this.sipService=h,this.element=f,this.videoFeedSubscriptions=new n.xQ,this.ngUnsubscribe=new n.xQ,this.screenShareHasChangedSource=new r.X(!1),this.isParticipantListVideoSource=new r.X(!0),this.isSelfVideoVisible=!1,this.snackBarService.setMode(l.E.CinemaMode),this.isSidebarOpen$=this.cinemaModeService.isSidebarOpen$,this.isSpeakerVisible$=this.videoPaginationService.isSpeakerVisible$,this.appliedPageSize$=this.videoPaginationService.appliedPageSize$,this.activeCallConferenceState$=this.apiAvEventStateService.activeCallConferenceState$,this.currentPageMembers$=this.videoPaginationService.currentPageMembers$,(0,o.aj)([this.apiAvFeedService.isSomebodyElseScreenSharing$.pipe((0,a.x)()),this.activeCallConferenceState$.pipe((0,s.U)(e=>(null==e?void 0:e.kind)===d.VW.OneOnOne),(0,a.x)())]).pipe((0,c.R)(this.ngUnsubscribe)).subscribe(([e,t])=>{t||(e?this.cinemaModeService.openSidebar():this.cinemaModeService.closeSidebar())}),this.apiAvEventConnectionService.connectUntil(this.ngUnsubscribe),(0,o.aj)([this.isParticipantListVideoSource,this.cinemaModeService.isSidebarOpen$]).pipe((0,c.R)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.isSelfVideoVisible=!e||!t}),this.sipService.callEnded$.pipe((0,c.R)(this.ngUnsubscribe)).subscribe(()=>this.cinemaModeService.exitCinemaMode())}ngAfterViewInit(){this.cinemaModeService.isSidebarOpen$.pipe((0,c.R)(this.ngUnsubscribe)).subscribe(e=>{var t,i;e?null===(t=this.sidebarTemplateRef)||void 0===t||t.open():null===(i=this.sidebarTemplateRef)||void 0===i||i.close(),this.snackBarService.setMode(e?l.E.CinemaModeWithSidebar:l.E.CinemaMode)})}ngOnDestroy(){this.snackBarService.setMode(l.E.Default),this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.videoFeedSubscriptions.next(),this.videoFeedSubscriptions.complete()}openSidebar(){this.cinemaModeService.openSidebar()}closeSidebar(){this.cinemaModeService.closeSidebar()}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen():this.element.nativeElement.requestFullscreen()}}return e.\u0275fac=function(t){return new(t||e)(u.Y36(m.a),u.Y36(g.Q),u.Y36(l.c),u.Y36(h.H),u.Y36(f.D),u.Y36(p.H),u.Y36(v.y),u.Y36(u.SBq))},e.\u0275cmp=u.Xpm({type:e,selectors:[["cinema-mode"]],viewQuery:function(e,t){if(1&e&&u.Gf(Fe,5),2&e){let e;u.iGM(e=u.CRH())&&(t.sidebarTemplateRef=e.first)}},decls:13,vars:13,consts:[["class","cinema-mode__spinner",4,"ngIf"],["autosize","","data-e2e","cinema-mode-fragment",1,"cinema-mode__sidenav-container",3,"hasBackdrop"],[1,"cinema-mode__sidenav-content"],[4,"ngIf"],[1,"cinema-mode__conference"],[3,"conferenceState","fullScreenToggleEvent",4,"ngIf"],["mode","side","position","end",1,"cinema-mode__participants-list",3,"openedStart","closedStart"],["sidebar",""],["data-e2e","cinema-mode-participants-list-fragment__close-sidebar",3,"conferenceState","sideBarCloseEvent"],[1,"cinema-mode__spinner"],[3,"conferenceState","fullScreenToggleEvent"]],template:function(e,t){1&e&&(u.YNc(0,Te,1,0,"app-spinner",0),u.ALo(1,"async"),u.TgZ(2,"mat-sidenav-container",1),u.TgZ(3,"mat-sidenav-content",2),u.YNc(4,Pe,1,0,"cinema-mode-speaker-indicator",3),u.ALo(5,"async"),u._UZ(6,"video-member-page",4),u.YNc(7,Ze,1,1,"cinema-mode-footer",5),u.ALo(8,"async"),u.qZA(),u.TgZ(9,"mat-sidenav",6,7),u.NdJ("openedStart",function(){return t.openSidebar()})("closedStart",function(){return t.closeSidebar()}),u.TgZ(11,"cinema-mode-member-list",8),u.NdJ("sideBarCloseEvent",function(){return t.closeSidebar()}),u.ALo(12,"async"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.Q6J("ngIf",!u.lcZ(1,5,t.activeCallConferenceState$)),u.xp6(2),u.Q6J("hasBackdrop",!1),u.xp6(2),u.Q6J("ngIf",!u.lcZ(5,7,t.isSpeakerVisible$)),u.xp6(3),u.Q6J("ngIf",u.lcZ(8,9,t.activeCallConferenceState$)),u.xp6(4),u.Q6J("conferenceState",u.lcZ(12,11,t.activeCallConferenceState$)))},directives:[b.O5,_.TM,_.Rh,S.z,_.JX,L,B.S,z,Ae],pipes:[b.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{background-color:#343434;display:flex;flex:1;flex-direction:column;height:100%;left:0;overflow:hidden;position:fixed;width:100%;z-index:2}.no-interaction[_nghost-%COMP%]{cursor:none}.cinema-mode__sidenav-container[_ngcontent-%COMP%]{align-items:center;background-color:#333;display:flex;flex:1;justify-content:center}.cinema-mode__sidenav-content[_ngcontent-%COMP%]{flex-direction:column}.cinema-mode__conference[_ngcontent-%COMP%]{align-content:center;display:flex;flex-wrap:wrap;height:calc(100% - 6.4rem);justify-content:center;width:100%}.cinema-mode__conference--pinned-view[_ngcontent-%COMP%]{flex-wrap:nowrap}.cinema-mode__participants-list[_ngcontent-%COMP%]{padding:.8rem .4rem 0 .3rem;width:32.7rem}@media screen and (max-width: 768px){.cinema-mode__participants-list[_ngcontent-%COMP%]{width:25rem}}.cinema-mode__participants-list[_ngcontent-%COMP%]     .mat-drawer-inner-container{overflow:hidden}.cinema-mode__participants-list[_ngcontent-%COMP%]   .cinema-mode__conference-name[_ngcontent-%COMP%]{color:#000}.cinema-mode__spinner[_ngcontent-%COMP%]{bottom:0;left:0;margin:auto;overflow:show;position:fixed;right:0;top:0;z-index:2}"]}),e})()},44895:function(e,t,i){"use strict";i.d(t,{p:function(){return d}});var n=i(88002),r=i(37716),o=i(50501),a=i(53264),s=i(1933),c=i(78023),l=i(38583);let d=(()=>{class e{constructor(e,t,i){this.apiAvFeedService=e,this.featureAccessVideoService=t,this.cinemaModeService=i,this.isCameraOptionEnabled$=this.featureAccessVideoService.isCameraOptionEnabled$,this.isOwnVideoOn$=this.apiAvFeedService.isOwnCameraOn$,this.iconFillClass$=this.cinemaModeService.isInCinemaMode$.pipe((0,n.U)(e=>e?"white":"button-color"))}toggleVideo(){this.apiAvFeedService.toggleOwnCamera()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.D),r.Y36(a.x),r.Y36(s.H))},e.\u0275cmp=r.Xpm({type:e,selectors:[["video-camera-toggle"]],inputs:{e2e:"e2e"},decls:5,vars:13,consts:[[1,"phone-panel-actions__call-action__button",3,"disabled","hoverTextTranslationKey","iconFillClass","iconName","e2e","appButtonClick"]],template:function(e,t){1&e&&(r.TgZ(0,"app-button",0),r.NdJ("appButtonClick",function(){return t.toggleVideo()}),r.ALo(1,"async"),r.ALo(2,"async"),r.ALo(3,"async"),r.ALo(4,"async"),r.qZA()),2&e&&r.Q6J("disabled",!r.lcZ(1,5,t.isCameraOptionEnabled$))("hoverTextTranslationKey",r.lcZ(2,7,t.isOwnVideoOn$)?"telephone.video_off":"telephone.video_on")("iconFillClass",r.lcZ(3,9,t.iconFillClass$))("iconName",r.lcZ(4,11,t.isOwnVideoOn$)?"video_on":"video_off")("e2e",t.e2e?t.e2e+"__camera-toggle":"")},directives:[c.V],pipes:[l.Ov],encapsulation:2}),e})()},54278:function(e,t,i){"use strict";i.d(t,{z:function(){return v}});var n=i(8359),r=i(55197),o=i(75604);class a{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new s(e,this.observables,this.project))}}class s extends r.L{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const n=t.length;this.values=new Array(n);for(let r=0;r<n;r++)this.toRespond.push(r);for(let r=0;r<n;r++){let e=t[r];this.add((0,o.D)(this,e,e,r))}}notifyNext(e,t,i,n,r){this.values[i]=t;const o=this.toRespond;if(o.length>0){const e=o.indexOf(i);-1!==e&&o.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}var c=i(88002),l=i(37716),d=i(89670),u=i(39178),m=i(35019),g=i(38583),h=i(1704),f=i(8250);function p(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",1),l.ALo(1,"async"),l.TgZ(2,"video-member",2),l.NdJ("onVisibilityChange$",function(t){const i=l.CHM(e).$implicit;return l.oxw().onVideoMemberVisibilityChange(t,i)}),l.ALo(3,"async"),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit,i=t.ngForOf,n=l.oxw();l.ekj("mini-video__conference--grid-view",i.length>=3)("cinema-mode__conference--grid-view",i.length>=5)("cinema-mode__video-container--single-view",1===i.length),l.uIk("pageSize",l.lcZ(1,9,n.appliedPageSize$)),l.xp6(2),l.Q6J("member",e)("oneOnOneSelf",l.lcZ(3,11,n.oneOnOneSelf$))}}let v=(()=>{class e{constructor(e,t,i){this.videoPaginationService=e,this.videoVisibilityService=t,this.apiAvEventStateService=i,this.appliedPageSize$=this.videoPaginationService.appliedPageSize$,this.currentPageMembers$=this.videoPaginationService.currentPageMembers$,this.oneOnOneSelf$=this.apiAvEventStateService.activeCallConferenceStateSelfMember$.pipe(function(...e){return t=>{let i;return"function"==typeof e[e.length-1]&&(i=e.pop()),t.lift(new a(e,i))}}(this.apiAvEventStateService.activeCallConferenceState$),(0,c.U)(([e,t])=>(null==t?void 0:t.kind)===n.VW.OneOnOne?e:null))}onVideoMemberVisibilityChange(e,t){this.videoVisibilityService.setMemberVisibility(t,e)}trackMember(e,t){return t.uuid+t.feeds.map(e=>e.uuid).join()}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.H),l.Y36(u.x),l.Y36(m.a))},e.\u0275cmp=l.Xpm({type:e,selectors:[["video-member-page"]],decls:2,vars:4,consts:[["class","cinema-mode__video-container","data-e2e","video-fragment__participants",3,"mini-video__conference--grid-view","cinema-mode__conference--grid-view","cinema-mode__video-container--single-view",4,"ngFor","ngForOf","ngForTrackBy"],["data-e2e","video-fragment__participants",1,"cinema-mode__video-container"],["observeVisibility","",3,"member","oneOnOneSelf","onVisibilityChange$"]],template:function(e,t){1&e&&(l.YNc(0,p,4,13,"div",0),l.ALo(1,"async")),2&e&&l.Q6J("ngForOf",l.lcZ(1,2,t.currentPageMembers$))("ngForTrackBy",t.trackMember)},directives:[g.sg,h.B,f.n],pipes:[g.Ov],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.cinema-mode__video-container[_ngcontent-%COMP%]{border-bottom:.2rem solid #000;border-right:.2rem solid #000;box-sizing:border-box;display:flex;height:50%;width:50%}.cinema-mode__video-container[_ngcontent-%COMP%]:nth-child(1){border-left:.2rem solid #000}.cinema-mode__video-container[_ngcontent-%COMP%]:nth-child(-n+3){border-top:.2rem solid #000}.cinema-mode__video-container[_ngcontent-%COMP%]:not(.cinema-mode__conference--grid-view):nth-child(3){border-left:.2rem solid #000;border-top:0}.cinema-mode__video-container.cinema-mode__video-container--single-view[_ngcontent-%COMP%]{height:100%;width:100%}.cinema-mode__video-container[_ngcontent-%COMP%]:not(.mini-video__conference--grid-view)[pageSize="4"]{height:100%}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="6"][_ngcontent-%COMP%]{height:calc(100% / 2);width:calc(100% / 3)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="6"][_ngcontent-%COMP%]:nth-child(3n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="9"][_ngcontent-%COMP%]{height:calc(100% / 3);width:calc(100% / 3)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="9"][_ngcontent-%COMP%]:nth-child(3n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="12"][_ngcontent-%COMP%]{height:calc(100% / 3);width:calc(100% / 4)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="12"][_ngcontent-%COMP%]:nth-child(4n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="16"][_ngcontent-%COMP%]{height:calc(100% / 4);width:calc(100% / 4)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="16"][_ngcontent-%COMP%]:nth-child(4n+1){border-left:.2rem solid #000}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="20"][_ngcontent-%COMP%]{height:calc(100% / 4);width:calc(100% / 5)}.cinema-mode__video-container.cinema-mode__conference--grid-view[pageSize="20"][_ngcontent-%COMP%]:nth-child(5n+1){border-left:.2rem solid #000}.mini-video-overlay__mini-video[_ngcontent-%COMP%]   .cinema-mode__video-container[_ngcontent-%COMP%]{height:100%}.cinema-mode__participants-list[_ngcontent-%COMP%]{background-color:#fff;padding:1rem .2rem;width:32.5rem}@media screen and (max-width: 768px){.cinema-mode__participants-list[_ngcontent-%COMP%]{width:25rem}}.cinema-mode__participants-list[_ngcontent-%COMP%]     .mat-drawer-inner-container{overflow:hidden}.cinema-mode__participants-list[_ngcontent-%COMP%]   .cinema-mode__conference-name[_ngcontent-%COMP%]{color:#000}.cinema-mode__spinner[_ngcontent-%COMP%]{bottom:0;left:0;margin:auto;overflow:show;position:fixed;right:0;top:0;z-index:2}']}),e})()},1704:function(e,t,i){"use strict";i.d(t,{B:function(){return K}});var n=i(88002),r=i(46782),o=i(79765),a=i(17564),s=i(8359),c=i(55430),l=i(37716),d=i(64676),u=i(62656),m=i(39249),g=i(63327),h=i(8106),f=i(88640),p=i(35019),v=i(80176),b=i(38583),_=i(33935),S=i(77746),y=i(56436),w=i(50501),C=i(44163);const M=["videoPlayer"];function x(e,t){1&e&&l._UZ(0,"app-spinner",3)}let O=(()=>{class e{constructor(e){this.apiAvFeedService=e,this.ngUnsubscribe=new o.xQ,this.VideoDisplayMode=c.n,this.videoDisplayMode=c.n.Fit}ngOnInit(){this.stream$=this.apiAvFeedService.getFeedStreamObservable(this.feed)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.videoPlayer.nativeElement.remove(),this.videoPlayer.nativeElement.srcObject=null}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(w.D))},e.\u0275cmp=l.Xpm({type:e,selectors:[["video-feed"]],viewQuery:function(e,t){if(1&e&&l.Gf(M,7),2&e){let e;l.iGM(e=l.CRH())&&(t.videoPlayer=e.first)}},inputs:{feed:"feed",videoDisplayMode:"videoDisplayMode"},decls:5,vars:11,consts:[["class","video-feed__spinner",4,"ngIf"],["autoplay","","playsinline","",1,"video-feed__video",3,"srcObject"],["videoPlayer",""],[1,"video-feed__spinner"]],template:function(e,t){1&e&&(l.YNc(0,x,1,0,"app-spinner",0),l.ALo(1,"async"),l._UZ(2,"video",1,2),l.ALo(4,"async")),2&e&&(l.Q6J("ngIf",!l.lcZ(1,7,t.stream$)),l.xp6(2),l.ekj("video-feed__video--crop-mode",t.videoDisplayMode==t.VideoDisplayMode.Crop)("video-feed__video--fit-mode",t.videoDisplayMode!==t.VideoDisplayMode.Crop),l.Q6J("srcObject",l.lcZ(4,9,t.stream$)),l.uIk("data-e2e","video-fragment__"+(t.feed.screenshare?"screen-share-feed":"camera-feed")))},directives:[b.O5,C.S],pipes:[b.Ov],styles:["[_nghost-%COMP%]{align-content:center;display:flex;flex:1;flex-grow:1;justify-content:center}.video-feed__video[_ngcontent-%COMP%]{max-height:100vh;max-width:100vw;width:100%}.video-feed__video.hidden[_ngcontent-%COMP%]{display:none}.video-feed__video--crop-mode[_ngcontent-%COMP%]{-o-object-fit:cover;object-fit:cover}.video-feed__video--fit-mode[_ngcontent-%COMP%]{-o-object-fit:contain;object-fit:contain}.video-feed__spinner[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%)}"]}),e})();var k=i(77310),A=i(29790);const F=["dragBoundaryViewport"],T=["dragElement"];function P(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",17),l.NdJ("dblclick",function(){return l.CHM(e),l.oxw().togglePinnedMember()}),l._UZ(1,"app-svg-icon",18),l.qZA()}}function Z(e,t){1&e&&l._UZ(0,"app-svg-icon",19)}function D(e,t){1&e&&l._UZ(0,"app-svg-icon",20)}function E(e,t){1&e&&l._UZ(0,"app-svg-icon",21)}function I(e,t){if(1&e&&(l.TgZ(0,"div",22),l._UZ(1,"img",23),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("src",e.memberTalkingGifPath,l.LSH)}}function $(e,t){1&e&&l.GkF(0)}function U(e,t){if(1&e&&(l.ynx(0),l.YNc(1,$,1,0,"ng-container",27),l.BQk()),2&e){l.oxw(2);const e=l.MAs(14);l.xp6(1),l.Q6J("ngTemplateOutlet",e)}}function j(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",24,25),l.TgZ(2,"video-feed",26),l.NdJ("dblclick",function(){return l.CHM(e),l.oxw().togglePinnedMember()}),l.qZA(),l.YNc(3,U,2,1,"ng-container",8),l.ALo(4,"async"),l.qZA()}if(2&e){const e=l.oxw();l.xp6(2),l.Q6J("feed",e.primaryVideoFeed),l.xp6(1),l.Q6J("ngIf",l.lcZ(4,2,e.videoMemberDisplayOptions$).isSecondaryVideoDisplayed&&e.isPrimaryFeedScreenshare)}}function N(e,t){1&e&&l.GkF(0)}function V(e,t){if(1&e&&(l.ynx(0),l.YNc(1,N,1,0,"ng-container",27),l.BQk()),2&e){l.oxw();const e=l.MAs(14);l.xp6(1),l.Q6J("ngTemplateOutlet",e)}}function R(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"video-feed",32),l.NdJ("dblclick",function(){return l.CHM(e),l.oxw(3).togglePinnedMember()}),l.ALo(1,"async"),l.ALo(2,"async"),l.qZA()}if(2&e){const e=l.oxw(3);let t,i;l.ekj("video-member__mirrored",(!!e.member.self||e.oneOnOneSelf)&&(null==(t=l.lcZ(1,4,e.userConfig$))?null:t.isOwnVideoMirrored)),l.Q6J("feed",e.secondaryVideoFeed)("videoDisplayMode",null==(i=l.lcZ(2,6,e.videoMemberDisplayOptions$))?null:i.displayMode)}}function L(e,t){if(1&e&&(l._UZ(0,"video-feed",33),l.ALo(1,"async")),2&e){const e=l.oxw(3);let t;l.Q6J("feed",e.tertiaryVideoFeed)("videoDisplayMode",null==(t=l.lcZ(1,2,e.videoMemberDisplayOptions$))?null:t.displayMode)}}function B(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",29,30),l.NdJ("cdkDragEnded",function(t){return l.CHM(e),l.oxw(2).calculatePositionVideoMember(t)}),l.YNc(2,R,3,8,"video-feed",10),l.YNc(3,L,2,4,"video-feed",31),l.qZA()}if(2&e){const e=l.oxw(2);l.Q6J("cdkDragDisabled",!e.isPrimaryFeedScreenshare)("cdkDragBoundary",e.dragBoundaryViewport),l.xp6(2),l.Q6J("ngIf",e.secondaryVideoFeed),l.xp6(1),l.Q6J("ngIf",e.tertiaryVideoFeed)}}function Y(e,t){if(1&e&&l.YNc(0,B,4,4,"div",28),2&e){const e=l.oxw();l.Q6J("ngIf",e.secondaryVideoFeed||e.tertiaryVideoFeed)}}function q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"video-feed",32),l.NdJ("dblclick",function(){return l.CHM(e),l.oxw().togglePinnedMember()}),l.ALo(1,"async"),l.ALo(2,"async"),l.ALo(3,"async"),l.qZA()}if(2&e){const e=l.oxw();let t,i;l.ekj("video-member__mirrored",!e.isPrimaryFeedScreenshare&&!!e.member.self&&(null==(t=l.lcZ(1,4,e.userConfig$))?null:t.isOwnVideoMirrored)),l.Q6J("feed",l.lcZ(2,6,e.isScreenshareAndSecondaryVideoAvailableInMeeting$)?e.secondaryVideoFeed:e.primaryVideoFeed)("videoDisplayMode",null==(i=l.lcZ(3,8,e.videoMemberDisplayOptions$))?null:i.displayMode)}}function z(e,t){if(1&e&&(l.TgZ(0,"div",34),l._UZ(1,"app-svg-icon",35),l.qZA()),2&e){l.oxw();const e=l.MAs(23);l.Q6J("matMenuTriggerFor",e)}}function J(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",17),l.NdJ("dblclick",function(){return l.CHM(e),l.oxw().togglePinnedMember()}),l._UZ(1,"app-svg-icon",36),l.qZA()}}function Q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",40),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).toggleRaiseHand()}),l._UZ(1,"app-svg-icon",38),l._uU(2),l.ALo(3,"translate"),l.qZA()}if(2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("icon",e.raisedHandIcon),l.xp6(1),l.hij(" ",l.lcZ(3,2,e.raisedHandText)," ")}}function G(e,t){if(1&e){const e=l.EpF();l.ynx(0),l.TgZ(1,"button",37),l.NdJ("click",function(){return l.CHM(e),l.oxw().togglePinnedMember()}),l._UZ(2,"app-svg-icon",38),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.YNc(5,Q,4,4,"button",39),l.BQk()}if(2&e){const e=l.oxw();l.xp6(2),l.Q6J("icon",e.pinnedIcon),l.xp6(1),l.hij(" ",l.lcZ(4,3,e.pinnedText)," "),l.xp6(2),l.Q6J("ngIf",e.member.self)}}function H(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",41),l.NdJ("click",function(){return l.CHM(e),l.oxw().toggleCropFitMode()}),l._UZ(1,"app-svg-icon",38),l.ALo(2,"async"),l._uU(3),l.ALo(4,"translate"),l.ALo(5,"async"),l.qZA()}if(2&e){const e=l.oxw();let t,i;l.xp6(1),l.Q6J("icon",null==(t=l.lcZ(2,2,e.videoCropStatus$))?null:t.icon),l.xp6(2),l.hij(" ",l.lcZ(4,4,null==(i=l.lcZ(5,6,e.videoCropStatus$))?null:i.text)," ")}}function W(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",42),l.NdJ("click",function(){return l.CHM(e),l.oxw().toggleSecondaryVideoDisplay()}),l._UZ(1,"app-svg-icon",38),l.ALo(2,"async"),l._uU(3),l.ALo(4,"translate"),l.ALo(5,"async"),l.qZA()}if(2&e){const e=l.oxw();let t,i;l.xp6(1),l.Q6J("icon",null==(t=l.lcZ(2,2,e.secondaryVideoStatus$))?null:t.icon),l.xp6(2),l.hij(" ",l.lcZ(4,4,null==(i=l.lcZ(5,6,e.secondaryVideoStatus$))?null:i.text)," ")}}let K=(()=>{class e{constructor(e,t,i,r,a,c,l,d,u){this.videoPinnedMemberService=e,this.conferenceSpeakerIndicatorService=t,this.themeService=i,this.apiAvService=r,this.apiAvConnectionService=a,this.localUserConfigService=c,this.videoMemberDisplayOptionsService=l,this.apiAvEventStateService=d,this.videoMemberDragService=u,this.ngUnsubscribe=new o.xQ,this.raisedHandText="conference.raise_hand",this.raisedHandIcon="raise_hand",this.isHighlighted=!1,this.setMemberTalkingGifPath(),this.userConfig$=this.localUserConfigService.userConfig$,this.apiAvConnectionService.connectUntil(this.ngUnsubscribe),this.isOneOnOneCall$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,n.U)(e=>(null==e?void 0:e.kind)===s.VW.OneOnOne))}ngOnInit(){this.videoMemberDisplayOptions$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member),this.isPinned$=this.videoPinnedMemberService.pinnedMemberId$.pipe((0,n.U)(e=>e===this.member.uuid),(0,r.R)(this.ngUnsubscribe)),this.isPinned$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(e=>{this.pinnedText=e?"conference.unpin_member":"conference.pin_member",this.pinnedIcon=e?"unpin":"pin"}),this.conferenceSpeakerIndicatorService.speaker$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(()=>{this.isHighlighted=this.conferenceSpeakerIndicatorService.isSpeaker(this.member)}),this.videoCropStatus$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member).pipe((0,n.U)(e=>this.mapDisplayOptions(e)),(0,r.R)(this.ngUnsubscribe)),this.secondaryVideoStatus$=this.videoMemberDisplayOptionsService.getObservableForMember(this.member).pipe((0,n.U)(e=>this.mapSecondaryDisplayOptions(e)),(0,r.R)(this.ngUnsubscribe))}ngOnChanges(){var e,t,i;this.primaryVideoFeed=this.getPrimaryFeed(),this.secondaryVideoFeed=this.getSecondaryFeed(),this.tertiaryVideoFeed=this.getTertiaryFeed(),this.isPrimaryFeedScreenshare=!!(null===(e=this.primaryVideoFeed)||void 0===e?void 0:e.screenshare),this.isScreenshareAndSecondaryVideoAvailableInMeeting$=this.isOneOnOneCall$.pipe((0,n.U)(e=>!(!this.isPrimaryFeedScreenshare||!this.secondaryVideoFeed||e))),this.raisedHandText=(null===(t=this.member)||void 0===t?void 0:t.raise_hand)?"conference.lower_hand":"conference.raise_hand",this.raisedHandIcon=(null===(i=this.member)||void 0===i?void 0:i.raise_hand)?"lower_hand":"raise_hand"}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setMemberTalkingGifPath(){const e=this.themeService.getTheme(),t=this.themeService.getThemeLabel().toLowerCase();switch(e){case a.B.BTItaliaTheme:case a.B.TelekomTheme:this.memberTalkingGifPath=`assets/gifs/${t}/member_talking.gif`;break;default:this.memberTalkingGifPath="assets/gifs/member_talking.gif"}}togglePinnedMember(){this.videoPinnedMemberService.togglePinnedMember(this.member)}toggleRaiseHand(){this.apiAvService.toggleRaiseHand(this.member)}toggleCropFitMode(){this.videoMemberDisplayOptionsService.toggleCropFitMode(this.member)}toggleSecondaryVideoDisplay(){this.videoMemberDisplayOptionsService.toggleSecondaryVideoDisplay(this.member)}calculatePositionVideoMember(e){this.videoMemberDragService.snapElement(this.dragBoundaryViewport.nativeElement,this.dragElement.nativeElement),e.source.reset()}getPrimaryFeed(){return this.member.feeds?this.member.feeds.find(e=>e.screenshare)||this.member.feeds[0]:null}getSecondaryFeed(){return this.oneOnOneSelf?this.getFirstNonScreenshareFeed(this.oneOnOneSelf.feeds):this.member.feeds?this.getFirstNonScreenshareFeed(this.member.feeds):null}getTertiaryFeed(){var e;return this.member.feeds&&this.oneOnOneSelf&&(null===(e=this.primaryVideoFeed)||void 0===e?void 0:e.screenshare)?this.getFirstNonScreenshareFeed(this.member.feeds):null}getFirstNonScreenshareFeed(e){return e.find(e=>!e.screenshare)||null}mapDisplayOptions(e){return e.displayMode===c.n.Crop?this.getDisplayOptionObj("fit_video_solid","conference.video_crop_on"):this.getDisplayOptionObj("crop_video_solid","conference.video_crop_off")}mapSecondaryDisplayOptions(e){return e.isSecondaryVideoDisplayed?this.getDisplayOptionObj("video_off","video.hide_speaker"):this.getDisplayOptionObj("video_on","video.show_speaker")}getDisplayOptionObj(e,t){return{icon:e,text:t}}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.G),l.Y36(u.W),l.Y36(m.f),l.Y36(g.y),l.Y36(h.Q),l.Y36(f.i),l.Y36(c.h),l.Y36(p.a),l.Y36(v.Z))},e.\u0275cmp=l.Xpm({type:e,selectors:[["video-member"]],viewQuery:function(e,t){if(1&e&&(l.Gf(F,5),l.Gf(T,5)),2&e){let e;l.iGM(e=l.CRH())&&(t.dragBoundaryViewport=e.first),l.iGM(e=l.CRH())&&(t.dragElement=e.first)}},hostVars:2,hostBindings:function(e,t){2&e&&l.ekj("video-member--highlighted",t.isHighlighted)},inputs:{member:"member",isSidebarView:"isSidebarView",oneOnOneSelf:"oneOnOneSelf"},features:[l.TTD],decls:30,vars:29,consts:[["class","video-member--video-off",3,"dblclick",4,"ngIf"],["class","video-member__raise-hand-indication","fill","white","icon","raise_hand","size","small","data-e2e","cinema-mode-fragment__raise-hand-indication",4,"ngIf"],[1,"video-member__member-info"],["fill","white","size","xs","icon","pin","data-e2e","cinema-mode-fragment__pin-participant",4,"ngIf"],["fill","mute-color","icon","mic_off","size","xs",4,"ngIf"],["data-e2e","cinema-mode-fragment__member-name",1,"video-member__member-name"],["class","video-member__member-talking",4,"ngIf"],["class","video-member__screenshare",4,"ngIf"],[4,"ngIf"],["screenshareMiniVideo",""],[3,"feed","videoDisplayMode","video-member__mirrored","dblclick",4,"ngIf"],["class","video-member__actions","data-e2e","video-action-menu-fragment__menu",3,"matMenuTriggerFor",4,"ngIf"],["videoOffView",""],["xPosition","before","yPosition","below"],["pinActions","matMenu"],["class","video-member__actions-menu-item","mat-menu-item","","data-e2e","video-action-menu-fragment__fit-or-crop-button",3,"click",4,"ngIf"],["class","video-member__actions-menu-item","mat-menu-item","",3,"click",4,"ngIf"],[1,"video-member--video-off",3,"dblclick"],["fill","video-off-color","icon","video_off",1,"video-member--video-off-icon"],["fill","white","icon","raise_hand","size","small","data-e2e","cinema-mode-fragment__raise-hand-indication",1,"video-member__raise-hand-indication"],["fill","white","size","xs","icon","pin","data-e2e","cinema-mode-fragment__pin-participant"],["fill","mute-color","icon","mic_off","size","xs"],[1,"video-member__member-talking"],["alt","",1,"video-member__member-talking-gif",3,"src"],[1,"video-member__screenshare"],["dragBoundaryViewport",""],[1,"video-member__feed",3,"feed","dblclick"],[4,"ngTemplateOutlet"],["class","video-member__screenshare-mini-video","data-e2e","video-fragment__own-preview--video","cdkDrag","",3,"cdkDragDisabled","cdkDragBoundary","cdkDragEnded",4,"ngIf"],["data-e2e","video-fragment__own-preview--video","cdkDrag","",1,"video-member__screenshare-mini-video",3,"cdkDragDisabled","cdkDragBoundary","cdkDragEnded"],["dragElement",""],[3,"feed","videoDisplayMode",4,"ngIf"],[3,"feed","videoDisplayMode","dblclick"],[3,"feed","videoDisplayMode"],["data-e2e","video-action-menu-fragment__menu",1,"video-member__actions",3,"matMenuTriggerFor"],["fill","dark-grey-color","icon","menu_horizontal","size","small"],["fill","video-off-color","icon","video_off"],["mat-menu-item","","data-e2e","video-action-menu-fragment__pin-button",1,"video-member__actions-menu-item",3,"click"],["fill","black","size","small",1,"video-member__actions-menu-icon",3,"icon"],["class","video-member__actions-menu-item","mat-menu-item","","data-e2e","video-action-menu-fragment__raise-hand-button",3,"click",4,"ngIf"],["mat-menu-item","","data-e2e","video-action-menu-fragment__raise-hand-button",1,"video-member__actions-menu-item",3,"click"],["mat-menu-item","","data-e2e","video-action-menu-fragment__fit-or-crop-button",1,"video-member__actions-menu-item",3,"click"],["mat-menu-item","",1,"video-member__actions-menu-item",3,"click"]],template:function(e,t){1&e&&(l.YNc(0,P,2,0,"div",0),l.YNc(1,Z,1,0,"app-svg-icon",1),l.TgZ(2,"div",2),l.YNc(3,D,1,0,"app-svg-icon",3),l.ALo(4,"async"),l.YNc(5,E,1,0,"app-svg-icon",4),l.TgZ(6,"span",5),l._uU(7),l.ALo(8,"translate"),l.qZA(),l.qZA(),l.YNc(9,I,2,1,"div",6),l.YNc(10,j,5,4,"div",7),l.YNc(11,V,2,1,"ng-container",8),l.ALo(12,"async"),l.YNc(13,Y,1,1,"ng-template",null,9,l.W1O),l.YNc(15,q,4,10,"video-feed",10),l.ALo(16,"async"),l.YNc(17,z,2,1,"div",11),l.ALo(18,"async"),l.ALo(19,"async"),l.YNc(20,J,2,0,"ng-template",null,12,l.W1O),l.TgZ(22,"mat-menu",13,14),l.TgZ(24,"mat-list-item"),l.YNc(25,G,6,5,"ng-container",8),l.ALo(26,"async"),l.YNc(27,H,6,8,"button",15),l.YNc(28,W,6,8,"button",16),l.ALo(29,"async"),l.qZA(),l.qZA()),2&e&&(l.Q6J("ngIf",!t.primaryVideoFeed||t.isSidebarView&&!t.secondaryVideoFeed),l.xp6(1),l.Q6J("ngIf",t.member.raise_hand),l.xp6(2),l.Q6J("ngIf",l.lcZ(4,13,t.isPinned$)),l.xp6(2),l.Q6J("ngIf",t.member.muted),l.xp6(2),l.hij(" ",t.member.self?l.lcZ(8,15,"conference.me"):t.member.caller_id_name," "),l.xp6(2),l.Q6J("ngIf",t.member.talking),l.xp6(1),l.Q6J("ngIf",!t.isSidebarView&&t.isPrimaryFeedScreenshare),l.xp6(1),l.Q6J("ngIf",!t.isPrimaryFeedScreenshare&&t.oneOnOneSelf&&l.lcZ(12,17,t.videoMemberDisplayOptions$).isSecondaryVideoDisplayed),l.xp6(4),l.Q6J("ngIf",l.lcZ(16,19,t.isScreenshareAndSecondaryVideoAvailableInMeeting$)||!t.isPrimaryFeedScreenshare&&t.primaryVideoFeed),l.xp6(2),l.Q6J("ngIf",!l.lcZ(18,21,t.isOneOnOneCall$)||l.lcZ(19,23,t.isOneOnOneCall$)&&t.primaryVideoFeed),l.xp6(8),l.Q6J("ngIf",!l.lcZ(26,25,t.isOneOnOneCall$)),l.xp6(2),l.Q6J("ngIf",!t.isSidebarView&&t.primaryVideoFeed&&!t.isPrimaryFeedScreenshare),l.xp6(1),l.Q6J("ngIf",t.isPrimaryFeedScreenshare&&(t.secondaryVideoFeed||l.lcZ(29,27,t.isOneOnOneCall$)&&t.primaryVideoFeed)))},directives:[b.O5,_.VK,S.Tg,y.u,O,b.tP,k.Zt,_.p6,_.OP],pipes:[b.Ov,A.X$],styles:['.hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;position:relative;width:100%}[_nghost-%COMP%]:hover   .video-member__actions[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]:after{border:.2rem solid transparent;bottom:0;content:"";display:block;left:0;pointer-events:none;position:absolute;right:0;top:0;transition:border .3s;z-index:100}.video-member--video-off[_ngcontent-%COMP%]{align-items:center;justify-content:center;width:100%}.video-member__raise-hand-indication[_ngcontent-%COMP%]{border-radius:50%;left:1rem;padding:.2rem;position:absolute;top:1rem;z-index:1}.video-member__member-info[_ngcontent-%COMP%]{align-items:center;align-self:flex-end;background-color:#0000004d;color:#fff;display:flex;max-width:90%;padding:.3rem .5rem;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2}.video-member__member-name[_ngcontent-%COMP%]{margin-left:.3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.video-member__member-talking[_ngcontent-%COMP%]{align-items:center;align-self:flex-end;display:flex;height:2.5rem;padding:.5rem;position:absolute;right:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:2}.video-member__member-talking[_ngcontent-%COMP%]   .video-member__member-talking-gif[_ngcontent-%COMP%]{height:2.5rem;width:2.5rem}.video-member__actions[_ngcontent-%COMP%]{align-self:flex-start;background-color:#ffffff80;cursor:pointer;display:none;font-family:"Brix","Helvetica","Arial",sans-serif;font-size:1.4rem;position:absolute;right:0;z-index:200}.video-member__actions[_ngcontent-%COMP%]     app-svg-icon{padding:.8rem}.video-member__actions-menu-item[_ngcontent-%COMP%]{align-items:center;display:flex;padding:0 2.4rem;z-index:200}.video-member__actions-menu-icon[_ngcontent-%COMP%]{margin-right:2rem}.video-member__actions-kick-member[_ngcontent-%COMP%]{color:#b30000}.video-member--video-off[_ngcontent-%COMP%]{display:flex}.video-member--video-off-icon[_ngcontent-%COMP%]{height:100%;max-height:20rem}.video-member__screenshare[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.video-member__feed[_ngcontent-%COMP%]{height:100%;width:100%}.video-member__screenshare-mini-video[_ngcontent-%COMP%]{border:.2rem solid #fff;border-radius:.2rem;box-shadow:0 0 .5rem #000;height:auto;max-width:24rem;position:absolute;right:2%;top:5%;width:33%}.video-member__screenshare-mini-video.cdk-drag[_ngcontent-%COMP%]{cursor:move}.video-member__position--left-top[_ngcontent-%COMP%]{bottom:auto;left:2%;right:auto;top:5%}.video-member__position--right-top[_ngcontent-%COMP%]{bottom:auto;left:auto;right:2%;top:5%}.video-member__position--left-bottom[_ngcontent-%COMP%]{bottom:5%;left:2%;right:auto;top:auto}.video-member__position--right-bottom[_ngcontent-%COMP%]{bottom:5%;left:auto;right:2%;top:auto}.video-member__position--center-top[_ngcontent-%COMP%]{bottom:auto;left:50%;right:auto;top:5%}.video-member__position--center-bottom[_ngcontent-%COMP%]{bottom:5%;left:50%;right:auto;top:auto}.video-member__position--left-center[_ngcontent-%COMP%]{bottom:auto;left:2%;right:auto;top:50%}.video-member__position--right-center[_ngcontent-%COMP%]{bottom:auto;left:auto;right:2%;top:50%}.video-member__mirrored[_ngcontent-%COMP%]{transform:rotateY(180deg)}']}),e})()},79098:function(e,t,i){"use strict";i.d(t,{J:function(){return f}});var n=i(88002),r=i(37716),o=i(50501),a=i(1933),s=i(53264),c=i(38583),l=i(33935),d=i(77746),u=i(78023),m=i(29790);function g(e,t){if(1&e){const e=r.EpF();r.ynx(0),r.TgZ(1,"app-button",4),r.NdJ("appButtonClick",function(){return r.CHM(e),r.oxw().publishOwnScreenShare()}),r.ALo(2,"async"),r.ALo(3,"async"),r.qZA(),r.BQk()}if(2&e){const e=r.oxw();r.xp6(1),r.Q6J("iconFillClass",r.lcZ(2,3,e.iconFillClass$))("disabled",!r.lcZ(3,5,e.isVideoEnabled$))("e2e",e.e2e?e.e2e+"__screen-sharing":"")}}function h(e,t){if(1&e&&(r._UZ(0,"app-button",5),r.ALo(1,"async")),2&e){const e=r.oxw(),t=r.MAs(5);r.Q6J("iconFillClass",r.lcZ(1,3,e.iconFillClass$))("matMenuTriggerFor",t)("e2e",e.e2e?e.e2e+"__screen-sharing":"")}}let f=(()=>{class e{constructor(e,t,i){this.apiAvFeedService=e,this.cinemaModeService=t,this.featureAccessVideoService=i,this.isVideoEnabled$=this.featureAccessVideoService.isVideoEnabled$,this.isOwnScreenShareOn$=this.apiAvFeedService.isOwnScreenShareOn$,this.iconFillClass$=this.cinemaModeService.isInCinemaMode$.pipe((0,n.U)(e=>e?"white":"button-color"))}publishOwnScreenShare(){this.apiAvFeedService.publishOwnScreenShare()}stopOwnScreenShare(){this.apiAvFeedService.stopOwnScreenShare()}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o.D),r.Y36(a.H),r.Y36(s.x))},e.\u0275cmp=r.Xpm({type:e,selectors:[["video-screenshare-menu"]],inputs:{e2e:"e2e"},decls:14,vars:10,consts:[[4,"ngIf","ngIfElse"],["menuButton",""],["screenSharingMenu","matMenu"],["mat-menu-item","",3,"click"],["hoverTextTranslationKey","telephone.screenshare_on","iconName","screen_sharing",1,"phone-panel-actions__call-action__button",3,"iconFillClass","disabled","e2e","appButtonClick"],["hoverTextTranslationKey","telephone.screenshare_switch_or_off","iconName","screen_sharing",1,"phone-panel-actions__call-action__button",3,"iconFillClass","matMenuTriggerFor","e2e"]],template:function(e,t){if(1&e&&(r.YNc(0,g,4,7,"ng-container",0),r.ALo(1,"async"),r.YNc(2,h,2,5,"ng-template",null,1,r.W1O),r.TgZ(4,"mat-menu",null,2),r.TgZ(6,"mat-list-item"),r.TgZ(7,"button",3),r.NdJ("click",function(){return t.publishOwnScreenShare()}),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.qZA(),r.TgZ(10,"mat-list-item"),r.TgZ(11,"button",3),r.NdJ("click",function(){return t.stopOwnScreenShare()}),r._uU(12),r.ALo(13,"translate"),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.MAs(3);r.Q6J("ngIf",!r.lcZ(1,4,t.isOwnScreenShareOn$))("ngIfElse",e),r.xp6(8),r.hij(" ",r.lcZ(9,6,"telephone.screenshare_switch")," "),r.xp6(4),r.hij(" ",r.lcZ(13,8,"telephone.screenshare_off")," ")}},directives:[c.O5,l.VK,d.Tg,l.OP,u.V,l.p6],pipes:[c.Ov,m.X$],encapsulation:2}),e})()},62656:function(e,t,i){"use strict";i.d(t,{W:function(){return l}});var n=i(87519),r=i(54395),o=i(26215),a=i(79765),s=i(37716),c=i(35019);let l=(()=>{class e{constructor(t){this.conferenceV2Service=t,this.speakerSource=new o.X(null),this.speakerTalkingTimeout=new a.xQ,this.conferenceV2Service.activeCallConferenceState$.subscribe(e=>{if(!e)return this.clearSpeaker();!!e.members.find(e=>{var t;return e.uuid===(null===(t=this.speakerSource.getValue())||void 0===t?void 0:t.uuid)})||this.clearSpeaker(),e.members.forEach(e=>{this.updateMember(e)})}),this.speaker$=this.speakerSource.pipe((0,n.x)()),this.speakerTalkingTimeout.pipe((0,r.b)(1e3*e.debounceTimeInSecondsAfterSpeakingStopped)).subscribe(e=>{const t=this.speakerSource.getValue();(null==t?void 0:t.uuid)!==e.uuid||t.talking||this.clearSpeaker()})}isSpeaker(e){var t;return(null===(t=this.speakerSource.getValue())||void 0===t?void 0:t.uuid)===e.uuid}updateMember(e){!e.floor||(e.talking?this.speakerSource.next(e):this.speakerTalkingTimeout.next(e))}clearSpeaker(){this.speakerSource.next(null)}}return e.debounceTimeInSecondsAfterSpeakingStopped=3,e.\u0275fac=function(t){return new(t||e)(s.LFG(c.a))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},80176:function(e,t,i){"use strict";i.d(t,{Z:function(){return o}});var n=(()=>{return(e=n||(n={})).LEFT="left",e.CENTER="center",e.RIGHT="right",e.TOP="top",e.BOTTOM="bottom",n;var e})(),r=i(37716);let o=(()=>{class e{constructor(e){this.prefixOfClass="video-member__position--",this.centerClass="center-center",this.availablePositions={x:[n.LEFT,n.CENTER,n.RIGHT],y:[n.TOP,n.CENTER,n.BOTTOM]},this.position=[n.RIGHT,n.TOP],this.renderer=e.createRenderer(null,null)}snapElement(e,t){this.dragViewportNativeElement=e,this.dragNativeElement=t,this.setBounding(e,t);const i=this.isSmallViewport(),n=this.getViewportGrid(),r=this.getElementCenter();this.calculatePosition(i,n,r),this.resetClasses(),this.addPositionClass(this.position),this.applyStyle(this.position)}setBounding(e,t){this.viewportBounding=e.getBoundingClientRect(),this.elementBounding=t.getBoundingClientRect()}calculatePosition(e,t,i){const r=[];return r[0]=i.x<t[1].x?i.x<t[0].x||e?n.LEFT:n.CENTER:n.RIGHT,r[1]=i.y<t[0].y?n.TOP:i.y<t[1].y?e?n.TOP:n.CENTER:n.BOTTOM,this.isOnCenterViewport(r)||(this.position=r),this.position}isSmallViewport(){return this.elementBounding.height>this.viewportBounding.height/2}getViewportGrid(){return[{x:Math.round(this.viewportBounding.x+this.viewportBounding.width/3),y:Math.round(this.viewportBounding.y+this.viewportBounding.height/3)},{x:Math.round(this.viewportBounding.x+2*this.viewportBounding.width/3),y:Math.round(this.viewportBounding.y+2*this.viewportBounding.height/3)}]}getElementCenter(){return{x:Math.round(this.elementBounding.x+this.elementBounding.width/2),y:Math.round(this.elementBounding.y+this.elementBounding.height/2)}}isOnCenterViewport(e){return e.join("-")===this.centerClass}resetClasses(){this.availablePositions.x.forEach(e=>{this.availablePositions.y.forEach(t=>{this.renderer.removeClass(this.dragNativeElement,this.prefixOfClass+e+"-"+t)})})}addPositionClass(e){const t=this.prefixOfClass+e.join("-");this.renderer.addClass(this.dragNativeElement,t)}applyStyle(e){const t=this.dragNativeElement.getBoundingClientRect();e[0]===n.CENTER?this.renderer.setStyle(this.dragNativeElement,"margin-left","-"+t.width/2+"px"):this.renderer.removeStyle(this.dragNativeElement,"margin-left"),e[1]===n.CENTER?this.renderer.setStyle(this.dragNativeElement,"margin-top","-"+t.height/2+"px"):this.renderer.removeStyle(this.dragNativeElement,"margin-top")}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.FYo))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},77581:function(e,t,i){"use strict";i.d(t,{r:function(){return p}}),i(6663),i(66071);var n=i(56247),r=i(67267),o=i(37716),a=i(22238),s=i(89937),c=i(234),l=i(38583),d=i(78023),u=i(29790);function m(e,t){if(1&e&&(o.TgZ(0,"li",14),o.TgZ(1,"span",15),o._uU(2),o.ALo(3,"uppercase"),o.qZA(),o.TgZ(4,"span",16),o._uU(5),o.qZA(),o.qZA()),2&e){const e=t.$implicit;o.xp6(2),o.hij(" ",o.lcZ(3,2,null==e?null:e.country)," "),o.xp6(3),o.hij(" ",null==e?null:e.number," ")}}let g=(()=>{class e{constructor(e){this.meetingService=e,this.linkUrl="",this.meetingId="",this.dialInNumbers$=this.meetingService.dialInNumbers$}ngOnInit(){this.linkUrl=r.D.getInvitationUrl(this.meeting.link_id),this.meetingId=this.meeting.conference.code.replace(/(.{3})/g,"$& ").trim()}copyInvitation(){this.meetingService.copyInvitation(this.meeting)}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.D))},e.\u0275cmp=o.Xpm({type:e,selectors:[["meeting-information"]],inputs:{meeting:"meeting",isCinemaMode:"isCinemaMode"},decls:28,vars:25,consts:[[1,"meeting-information__dialog"],["mat-dialog-title","","data-e2e","meeting-information-modal-fragment__meeting-title",1,"meeting-information__title"],[1,"meeting-information__content","mat-typography"],[1,"meeting-information__data"],[1,"meeting-information__data-title"],[1,"meeting-information__link-container"],["data-e2e","meeting-information-modal-fragment__meeting-link",1,"meeting-information__link"],["tooltipText","meetings.info_dialog.copy_link",1,"meeting-information__copy-button",3,"textToCopy"],["appSelectText","","data-e2e","meeting-information-modal-fragment__meeting-id",1,"meeting-information__meeting-id"],["data-e2e","meeting-information-modal-fragment__dial-in-numbers",1,"meeting-information__dial-in-numbers"],["data-e2e","meeting-information-modal-fragment__dial-in-number",4,"ngFor","ngForOf"],[1,"meeting-information__actions--context-menu"],["color","primary","buttonTextTranslationKey","meetings.info_dialog.close","type","basic-button","data-e2e","meeting-information-modal-fragment__close-popup",1,"meeting-information__actions--dialog-close",3,"mat-dialog-close"],["color","primary","buttonTextTranslationKey","meetings.info_dialog.copy","type","raised-button-submit","data-e2e","meeting-information-modal-fragment__copy_invitation--buttton",1,"meeting-information__copy-invitation",3,"appButtonClick"],["data-e2e","meeting-information-modal-fragment__dial-in-number"],[1,"meeting-information__country-name"],["appSelectText","",1,"meeting-information__country-number"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"h2",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-dialog-content",2),o.TgZ(4,"div",3),o.TgZ(5,"div",4),o._uU(6),o.ALo(7,"translate"),o.qZA(),o.TgZ(8,"div",5),o.TgZ(9,"div",6),o._uU(10),o.qZA(),o._UZ(11,"copy-to-clipboard-button",7),o.qZA(),o.qZA(),o.TgZ(12,"div",3),o.TgZ(13,"div",4),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.TgZ(16,"div",8),o._uU(17),o.qZA(),o.qZA(),o.TgZ(18,"div",3),o.TgZ(19,"div",4),o._uU(20),o.ALo(21,"translate"),o.qZA(),o.TgZ(22,"ul",9),o.YNc(23,m,6,4,"li",10),o.ALo(24,"async"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"mat-dialog-actions",11),o._UZ(26,"app-button",12),o.TgZ(27,"app-button",13),o.NdJ("appButtonClick",function(){return t.copyInvitation()}),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",t.meeting.description,"\n"),o.xp6(4),o.hij(" ",o.lcZ(7,17,"meetings.info_dialog.url")," "),o.xp6(2),o.ekj("cinema-mode",t.isCinemaMode),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode),o.xp6(1),o.hij(" ",t.linkUrl," "),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode),o.Q6J("textToCopy",t.linkUrl),o.xp6(3),o.hij(" ",o.lcZ(15,19,"meetings.info_dialog.meeting_id_for_dial_in")," "),o.xp6(3),o.hij(" ",t.meetingId," "),o.xp6(3),o.hij(" ",o.lcZ(21,21,"meetings.info_dialog.dial_in_numbers")," "),o.xp6(3),o.Q6J("ngForOf",o.lcZ(24,23,t.dialInNumbers$)),o.xp6(3),o.Q6J("mat-dialog-close",!1),o.xp6(1),o.ekj("cinema-mode",t.isCinemaMode))},directives:[a.uh,a.xY,s.v,c.U,l.sg,a.H8,d.V,a.ZT],pipes:[u.X$,l.Ov,l.gd],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{max-height:95vh;max-width:90vw;width:56rem}.meeting-information__dialog[_ngcontent-%COMP%]{margin:2rem}.meeting-information__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:3.6rem 0 0;padding:0}.meeting-information__title[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:bold;height:2.2rem;margin:0}.meeting-information__data[_ngcontent-%COMP%]{margin-bottom:3rem}.meeting-information__data-title[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:.8rem}.meeting-information__link-container[_ngcontent-%COMP%]{background-color:#e5f7fd;border-radius:.8rem;display:flex;height:5.6rem}.meeting-information__link[_ngcontent-%COMP%]{align-items:center;display:flex;padding:0 1.5rem;width:85%}.meeting-information__copy-button[_ngcontent-%COMP%]{padding:.5rem 0}.meeting-information__meeting-id[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.meeting-information__dial-in-numbers[_ngcontent-%COMP%]{-moz-columns:2;columns:2;margin:0;padding:0;width:34.5rem}.meeting-information__dial-in-numbers[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;line-height:2rem}.meeting-information__country-name[_ngcontent-%COMP%]{width:2.5rem}.meeting-information__actions--context-menu[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:flex-end;min-height:4rem;padding:0}.meeting-information__actions--dialog-close[_ngcontent-%COMP%]{margin-right:.8rem}"]}),e})();var h=i(95105),f=i(25167);let p=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[h.f],imports:[[f.m]]}),e})();o.B6R(n.Y,[g],[])},96292:function(e,t,i){"use strict";i.d(t,{$:function(){return v}});var n=i(38583),r=i(25167),o=i(62656),a=i(89670),s=i(50501),c=i(39178),l=i(54037),d=i(80176),u=i(71025),m=i(64676),g=i(53264),h=i(55430),f=i(77581),p=i(37716);let v=(()=>{class e{constructor(e){this.videoVisibilityService=e}}return e.\u0275fac=function(t){return new(t||e)(p.LFG(c.x))},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[o.W,a.H,c.x,l.s,d.Z,s.D,u.i,m.G,g.x,h.h],imports:[[n.ez,r.m,f.r]]}),e})()},71025:function(e,t,i){"use strict";i.d(t,{i:function(){return S}});var n=i(8359),r=i(39485),o=i(26215),a=i(22759),s=i(94402),c=i(25917),l=i(59193),d=i(15257),u=i(45435),m=i(68307),g=i(43190),h=i(37716),f=i(91841),p=i(8320),v=i(35019),b=i(81836),_=i(57158);let S=(()=>{class e{constructor(e,t,i,n,a){this.http=e,this.apiAvAuthorizationService=t,this.apiAvEventStateService=i,this.sipService=n,this.logger=a,this.apiUrl=`${r.N.API_URL}/conference/v2`,this.ownCameraConnectionSubject=new o.X(null),this.ownScreenShareConnectionSubject=new o.X(null),this.feedStreamMap=new Map,this.feedConnectionMap=new Map,this.publisherSubscriberFeedIdMap=new Map,this.ownCameraConnection$=this.ownCameraConnectionSubject.asObservable(),this.ownScreenShareConnection$=this.ownScreenShareConnectionSubject.asObservable(),this.apiAvEventStateService.activeCallConferenceState$.subscribe(e=>{this.activeConferenceUuid=(null==e?void 0:e.uuid)||null})}getFeedStreamObservable(e){return this.getFeedStreamSubject(e).asObservable()}publishOwnCameraStream(e){if(this.ownCameraConnectionSubject.getValue())return void this.logger.warn("Skipping publishing of own camera stream. Connection is already in use.");this.logger.debug("Creating new RTCPeerConnection for own camera stream.");const t=new RTCPeerConnection;this.ownCameraConnectionSubject.next(t),this.publishOwnStream(e,t)}publishOwnScreenShare(e){this.logger.debug("Creating new RTCPeerConnection for own screen-share stream.");const t=new RTCPeerConnection;this.ownScreenShareConnectionSubject.next(t),this.publishOwnStream(e,t,!0)}unsubscribeAllRemoteStreams(){this.logger.debug("Unsubscribing from all remote streams."),this.feedConnectionMap.forEach((e,t)=>{this.unsubscribeFeed(t)})}stopOwnCameraStream(){this.logger.debug("Stopping own camera stream."),this.stopOwnStream(this.ownCameraConnectionSubject,this.ownCameraFeed)}stopOwnScreenShare(){this.logger.debug("Stopping own screen-share stream."),this.stopOwnStream(this.ownScreenShareConnectionSubject,this.ownScreenShareFeed)}updateActiveFeeds(e){this.feedConnectionMap.forEach((t,i)=>{e.find(e=>e.uuid===i)||this.unsubscribeFeed(i)}),e.filter(e=>{var t,i;return e.uuid!==(null===(t=this.ownCameraFeed)||void 0===t?void 0:t.uuid)&&e.uuid!==(null===(i=this.ownScreenShareFeed)||void 0===i?void 0:i.uuid)}).forEach(e=>this.ensureFeedIsSubscribed(e))}getFeedStreamSubject(e){const t="string"==typeof e?e:e.uuid;let i=this.feedStreamMap.get(t);return i||(i=new o.X(null),this.feedStreamMap.set(t,i)),i}publishOwnStream(e,t,i=!1){(0,a.R)(t,"iceconnectionstatechange").subscribe(e=>{this.logger.debug(`ICE connection state change for own publisher connection ${i?"screen-share":"camera"} stream. Event:`,e)}),this.logger.debug(`Publishing own stream. MediaStream is '${e.active?"active":"inactive"}' with ${e.getVideoTracks().length} tracks present.`),this.makeSureVideoRoomIsPresent().pipe((0,d.q)(1),(0,u.h)(()=>"closed"!==t.connectionState),(0,m.b)(()=>{const n=e.getVideoTracks()[0];n?(e.getVideoTracks().length>1&&this.logger.warn("Stream has more than one track. Only first track will be published, additional tracks are ignored."),n.onended=()=>{this.logger.info("Stream track ended suddenly. Terminating stream sharing."),i?this.stopOwnScreenShare():this.stopOwnCameraStream()},this.logger.debug(`Adding stream track to RTCPeerConnection. Track is of kind ${n.kind} and ${n.enabled?"enabled":"disabled"} with ready state '${n.readyState}'.`),t.addTrack(n,e),setTimeout(()=>{this.logger.debug("Sender track after 5 seconds:",t.getSenders()[0].track)},5e3)):this.logger.error("Failed to publish own stream. No track found.")}),(0,g.w)(()=>(0,s.D)(t.createOffer())),(0,g.w)(e=>t.setLocalDescription(e))).subscribe(()=>{this.sendOfferToServer(t,e,i)})}makeSureVideoRoomIsPresent(){return this.logger.debug("Making sure video room is present."),this.apiAvEventStateService.activeCallConferenceState$.pipe((0,g.w)(e=>e?(this.logger.debug("Video room is already present. Continuing."),(0,c.of)(null)):(this.sipService.initVideoForActiveOneOnOneCall(),this.apiAvEventStateService.activeCallConferenceState$.pipe((0,u.h)(e=>!!e)))))}ensureFeedIsSubscribed(e){this.isFeedSubscribed(e)||this.subscribeFeed(e)}isFeedSubscribed(e){return!!this.getFeedStreamSubject(e.uuid).getValue()}subscribeFeed(e){this.logger.debug("Subscribing to feed with UUID:",e.uuid),this.getFeedStreamSubject(e).next(new MediaStream),this.http.post(`${this.apiUrl}/conferences/${this.getActiveConferenceUuid()}/feeds/${e.uuid}/subscriptions`,{},{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(t=>{this.publisherSubscriberFeedIdMap.set(e.uuid,t.uuid),this.initializeRemoteConnection(e,t)})}initializeRemoteConnection(e,t){this.logger.debug(`Starting remote connection to receive stream of feed with UUID ${e.uuid}'.`);const i={sdp:t.remote_sdp,type:"offer"},n=new RTCPeerConnection;this.feedConnectionMap.set(e.uuid,n),n.setRemoteDescription(i).then(()=>function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{c(n.next(e))}catch(t){o(t)}}function s(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){e.done?r(e.value):function(e){return e instanceof i?e:new i(function(t){t(e)})}(e.value).then(a,s)}c((n=n.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){const e=yield n.createAnswer();yield n.setLocalDescription({sdp:e.sdp,type:"answer"}),this.enableTrickle(e,t)}));const r=[];n.onicecandidate=e=>{this.onIceCandidate(e,t.uuid,r)},n.ontrack=t=>{this.logger.debug(`Received new track for stream of feed with UUID ${e.uuid}'.`),this.getFeedStreamSubject(e).next(t.streams[0])},setTimeout(()=>{this.logger.debug(`Receiver track for subscriber feed with UUID '${e.uuid}' after 5 seconds:`,n.getReceivers()[0].track)},5e3)}removeTracksFromConnection(e){const t=e.getSenders();t.length&&t.forEach(t=>{"closed"!==e.signalingState&&e.removeTrack(t)})}stopOwnStream(e,t){const i=e.getValue();i&&(i.close(),this.removeTracksFromConnection(i),e.next(null)),t&&(this.stopLocalFeed(t.uuid),this.deletePublisherFeed(t.uuid).subscribe())}unsubscribeFeed(e){this.stopLocalFeed(e);const t=this.feedConnectionMap.get(e);t?(this.deleteSubscriptionFeed(e).subscribe(),this.feedConnectionMap.delete(e),t.close(),this.removeTracksFromConnection(t),this.logger.info(`Closed an incoming video RTC connection. There are ${this.feedConnectionMap.size} open connections left.`)):this.logger.warn("Failed to stop incoming feed. No RTC connection found.")}deletePublisherFeed(e){return this.logger.debug("Deleting publisher feed with UUID:",e),this.deleteFeed(e)}deleteSubscriptionFeed(e){const t=this.publisherSubscriberFeedIdMap.get(e);return t?(this.logger.debug("Deleting subscription feed with UUID:",t),this.deleteFeed(t)):(this.logger.warn("Unable to delete subscription feed. Failed to get subscriber feed UUID from publisher feed UUID."),l.E)}deleteFeed(e){return this.activeConferenceUuid?this.http.delete(`${this.apiUrl}/conferences/${this.getActiveConferenceUuid()}/feeds/${e}`,{headers:this.apiAvAuthorizationService.getAuthHeaders()}):l.E}stopLocalFeed(e){this.logger.debug(`Stopping stream for feed with UUID '${e}'.`);const t=this.getFeedStreamSubject(e),i=t.getValue();i&&i.getTracks().forEach(e=>e.stop()),t.next(null)}sendOfferToServer(t,i,r=!1){var o;const a={local_sdp:null===(o=t.localDescription)||void 0===o?void 0:o.sdp,trickle:!0,quality:n.wu.High,screenshare:r},s=[];let c,l=!1;t.onicecandidate=t=>{t.candidate?s.push(t.candidate):(c&&this.sendCandidates(c,s.map(e.mapRTCIceCandidateToAPIAvFeedCandidate)),l=!0)},this.http.post(`${this.apiUrl}/conferences/${this.getActiveConferenceUuid()}/feeds`,a,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(n=>{n.remote_sdp?(c=n.uuid,r?this.ownScreenShareFeed=n:this.ownCameraFeed=n,this.getFeedStreamSubject(n).next(i),"closed"!==t.connectionState?t.setRemoteDescription({sdp:n.remote_sdp,type:"answer"}).then(()=>{l&&this.sendCandidates(c,s.map(e.mapRTCIceCandidateToAPIAvFeedCandidate))}):this.logger.warn("Failed to execute 'setRemoteDescription' on 'RTCPeerConnection': The RTCPeerConnection's signalingState is 'closed'.")):this.logger.error("Failed to send feed offer to server. Received no 'remote_sdp' in answer.")})}onIceCandidate(t,i,n){t.candidate?n.push(e.mapRTCIceCandidateToAPIAvFeedCandidate(t.candidate)):this.sendCandidates(i,n)}enableTrickle(e,t){const i={local_sdp:e.sdp,trickle:!0};this.http.patch(`${this.apiUrl}/conferences/${this.getActiveConferenceUuid()}/feeds/${t.uuid}`,i,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(()=>{this.logger.debug(`Activated trickle option for video feed with SDP offer UUID '${t.uuid}'.`)})}sendCandidates(e,t){this.logger.debug(`Sending ${t.length} candidates for feed with UUID:`,e);const i={candidates:t,count:t.length};this.http.post(`${this.apiUrl}/conferences/${this.getActiveConferenceUuid()}/feeds/${e}/candidates`,i,{headers:this.apiAvAuthorizationService.getAuthHeaders()}).subscribe(()=>{this.logger.debug(`Send candidates for video feed with SDP offer UUID '${e}'.`)})}getActiveConferenceUuid(){if(!this.activeConferenceUuid){const e="Failed to make AV-API call. Active conference UUID is not available.";throw this.logger.error(e),new Error(e)}return this.activeConferenceUuid}static mapRTCIceCandidateToAPIAvFeedCandidate(e){return{candidate:e.candidate,m_line_index:e.sdpMLineIndex,mid:e.sdpMid}}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(f.eN),h.LFG(p.O),h.LFG(v.a),h.LFG(b.y),h.LFG(_.Kf))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e})()},50501:function(e,t,i){"use strict";i.d(t,{D:function(){return k}});var n=i(26215),r=i(9112),o=i(88002),a=i(87519),s=i(45435),c=i(66888),l=i(94428),d=i(37716),u=i(91841),m=i(35019),g=i(725),h=i(71025),f=i(88640),p=i(60800),v=i(79765),b=i(22759),_=i(20945),S=i(68307),y=i(43190),w=i(46782),C=i(57158);let M=(()=>{class e{constructor(t){this.logger=t,this.destroyer=new v.xQ,this.videoElement=e.createElement("video"),this.canvasElement=e.createElement("canvas"),this.startSegmentation()}applyToStream(e,t){if(!t)return e;this.mediaStream=e;const i=e.getVideoTracks()[0].getSettings(),n=i.width||640;void 0===i.width&&this.logger.warn("MediaTrackSettings width is undefined. MediaTrackSettings:",i);const r=i.height||480;return void 0===i.height&&this.logger.warn("MediaTrackSettings height is undefined. MediaTrackSettings:",i),void 0===i.frameRate&&this.logger.warn("MediaTrackSettings frameRate is undefined. MediaTrackSettings:",i),this.videoElement.width=this.canvasElement.width=n,this.videoElement.height=this.canvasElement.height=r,this.videoElement.srcObject=e,(0,b.R)(this.videoElement,"loadedmetadata").pipe((0,S.b)(()=>this.videoElement.play()),(0,y.w)(()=>(0,_.F)(1e3/24)),(0,y.w)(()=>this.selfieSegmentation.send({image:this.videoElement})),(0,w.R)(this.destroyer)).subscribe(),this.videoElement.load(),this.canvasElement.captureStream(24)}destroy(){var e;this.selfieSegmentation.reset(),this.videoElement.pause(),null===(e=this.mediaStream)||void 0===e||e.getVideoTracks()[0].stop(),this.mediaStream=void 0,this.destroyer.next()}startSegmentation(){this.selfieSegmentation=new p.SelfieSegmentation({locateFile:e=>`/assets/virtual-background/${e}`}),this.selfieSegmentation.setOptions({modelSelection:1}),this.selfieSegmentation.onResults(this.onSelfieSegmentationResults.bind(this)),this.selfieSegmentation.initialize()}onSelfieSegmentationResults(e){const t=this.canvasElement.getContext("2d"),i=this.canvasElement.width,n=this.canvasElement.height;t&&(t.save(),t.clearRect(0,0,i,n),t.drawImage(e.segmentationMask,0,0,i,n),t.globalCompositeOperation="source-in",t.drawImage(e.image,0,0,i,n),t.globalCompositeOperation="destination-atop",t.filter="blur(5px)",t.drawImage(e.image,0,0,i,n),t.restore())}static createElement(e){const t=document.createElement(e);return t.style.display="none",document.body.insertAdjacentElement("beforeend",t)}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(C.Kf))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=i(8225),O=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class k{constructor(e,t,i,l,d,u,m,g){this.http=e,this.apiAvEventStateService=t,this.electronService=i,this.apiAvFeedConnectionService=l,this.localUserConfigService=d,this.virtualBackgroundService=u,this.deviceService=m,this.logger=g,this.isOwnCameraRequestedSource=new n.X(!1),this.isLoadingOwnCameraSource=new n.X(!1),this.isOwnCameraOn$=this.apiAvFeedConnectionService.ownCameraConnection$.pipe((0,o.U)(e=>!!e)),this.isOwnScreenShareOn$=this.apiAvFeedConnectionService.ownScreenShareConnection$.pipe((0,o.U)(e=>!!e)),this.isSomebodyElseScreenSharing$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,o.U)(e=>k.isSomebodyElseScreenSharing(e)),(0,a.x)()),this.isAnyFeedPresent$=this.apiAvEventStateService.activeCallConferenceState$.pipe((0,o.U)(e=>k.isAnyFeedPresent(e)),(0,a.x)()),this.localUserConfigService.userConfig$.subscribe(()=>this.restartOwnCamera()),this.deviceService.activeCamera$.pipe((0,a.x)((e,t)=>(null==e?void 0:e.deviceId)===(null==t?void 0:t.deviceId)),(0,s.h)(e=>null!==e)).subscribe(()=>this.restartOwnCamera()),this.apiAvEventStateService.activeCallConferenceState$.pipe((0,s.h)(e=>!e)).subscribe(()=>{this.stopAllStreams()}),(0,r.aj)([this.isOwnCameraRequestedSource.pipe((0,a.x)()),this.isOwnCameraOn$]).pipe((0,c.n)(()=>this.isLoadingOwnCameraSource.getValue())).subscribe(([e,t])=>{e&&!t?(this.logger.debug("Publishing own camera stream."),this.publishOwnCameraStream()):!e&&t&&(this.logger.debug("Stopping own camera stream."),this.virtualBackgroundService.destroy(),this.apiAvFeedConnectionService.stopOwnCameraStream())})}getFeedStreamObservable(e){return this.apiAvFeedConnectionService.getFeedStreamObservable(e)}toggleOwnCamera(){this.isOwnCameraRequestedSource.next(!this.isOwnCameraRequestedSource.getValue())}restartOwnCamera(){this.isOwnCameraRequestedSource.value&&(this.isOwnCameraRequestedSource.next(!1),setTimeout(()=>this.isOwnCameraRequestedSource.next(!0),0))}publishOwnScreenShare(){this.stopOwnScreenShare(),this.electronService.desktop&&document.fullscreenElement&&document.exitFullscreen(),navigator.mediaDevices.getDisplayMedia(k.screenShareStreamConstraints).then(e=>{this.apiAvFeedConnectionService.publishOwnScreenShare(e)}).catch(e=>{this.logger.error("Failed to publish own screen-share feed. Error:",e)})}stopOwnScreenShare(){this.apiAvFeedConnectionService.stopOwnScreenShare()}stopAllStreams(){this.logger.debug("Stopping all video streams."),this.stopOwnCamera(),this.stopOwnScreenShare(),this.apiAvFeedConnectionService.unsubscribeAllRemoteStreams()}updateFeedSubscriptionsForMembers(e){if(!e.length)return void this.apiAvFeedConnectionService.unsubscribeAllRemoteStreams();const t=[];e.forEach(e=>{t.push(...e.feeds)}),this.logger.debug(`Making sure streams for ${t.length} active feeds are present.`),this.apiAvFeedConnectionService.updateActiveFeeds(t)}stopOwnCamera(){this.isOwnCameraRequestedSource.next(!1),this.apiAvFeedConnectionService.stopOwnCameraStream()}publishOwnCameraStream(){const e=this.deviceService.getActiveCamera();e?(this.isLoadingOwnCameraSource.next(!0),navigator.mediaDevices.getUserMedia({audio:!1,video:{deviceId:e.deviceId}}).then(e=>{const t=this.localUserConfigService.getCurrentUserConfig().isVirtualBackgroundEnabled,i=this.virtualBackgroundService.applyToStream(e,t);this.apiAvFeedConnectionService.publishOwnCameraStream(i),this.isLoadingOwnCameraSource.next(!1)}).catch(e=>{this.logger.error("Failed to publish own video feed. Error:",e),this.isLoadingOwnCameraSource.next(!1)})):this.logger.error("Failed to publish own camera stream. No active camera set.")}static forEachFeed(e,t){!e||e.members.forEach(e=>{e.feeds.forEach(i=>{t(e,i)})})}static hasScreenShare(e){return!!e.feeds.find(e=>e.screenshare)}static isAnyFeedPresent(e){let t=!1;return k.forEachFeed(e,()=>{t=!0}),t}static isSomebodyElseScreenSharing(e){let t=!1;return k.forEachFeed(e,(e,i)=>{t=t||!e.self&&i.screenshare}),t}}k.screenShareStreamConstraints={video:{frameRate:15},audio:!1},k.\u0275fac=function(e){return new(e||k)(d.LFG(u.eN),d.LFG(m.a),d.LFG(g.d),d.LFG(h.i),d.LFG(f.i),d.LFG(M),d.LFG(x.I),d.LFG(C.Kf))},k.\u0275prov=d.Yz7({token:k,factory:k.\u0275fac}),O([(0,l.SD)({name:"ApiAvFeedService.isOwnCameraOn$"})],k.prototype,"isOwnCameraOn$",void 0),O([(0,l.SD)({name:"ApiAvFeedService.isOwnScreenShareOn$"})],k.prototype,"isOwnScreenShareOn$",void 0),O([(0,l.SD)({name:"ApiAvFeedService.isSomebodyElseScreenSharing$"})],k.prototype,"isSomebodyElseScreenSharing$",void 0),O([(0,l.SD)({name:"ApiAvFeedService.isAnyFeedPresent$"})],k.prototype,"isAnyFeedPresent$",void 0)},53264:function(e,t,i){"use strict";i.d(t,{x:function(){return M}});var n=i(88002),r=i(87519),o=i(9112),a=i(35019),s=i(94428),c=i(37716),l=i(50501),d=i(26215),u=i(45435),m=i(71289),g=i(68307),h=i(81836),f=i(79765),p=i(99445);let v=(()=>{class e{constructor(e,t){this.sipService=e,this.callTrackerService=t,this.sipMessagesSource=new f.xQ,this.sipMessages$=this.sipMessagesSource.asObservable(),this.callTrackerService.activeCall$.subscribe(e=>{e&&this.sipService.sipUserAgent.on("message",e=>this.emitSipMessage(e))})}emitSipMessage(e){this.sipMessagesSource.next(e)}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(h.y),c.LFG(p.k))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=i(74688),_=i(57158),S=(()=>{return(e=S||(S={})).Invite="invite",e.OnHold="hold",e.OnHoldResume="resume",e.FeatureSet="featav",e.FeatureSetRequest="featreq",S;var e})();class y{constructor(e,t,i,a,s){this.sipService=e,this.sipMessageService=t,this.callTrackerService=i,this.featureAccessService=a,this.logger=s,this.callFeatureSetMap=new Map,this.activeCallVideoFeatureSetSource=new d.X(null),this.canActiveCallReceiveVideo$=this.activeCallVideoFeatureSetSource.pipe((0,n.U)(e=>!!(null==e?void 0:e.videoreceive)),(0,r.x)()),this.featureAccessService.isVideoAvailable$.subscribe(e=>{this.ownFeatureSet={videoreceive:!0,videosend:e,firstTime:!1}});const c=this.callTrackerService.activeCall$.pipe((0,u.h)(e=>!!e));c.pipe((0,m.g)(500)).subscribe(()=>{this.sendOwnFeatureSet()}),this.sipFeatureSetMessage$=this.sipMessageService.sipMessages$.pipe((0,u.h)(e=>{var t;return!!(null===(t=null==e?void 0:e.request)||void 0===t?void 0:t.callId)}),(0,n.U)(e=>({callId:y.toGeneralCallId(e.request.callId),event:JSON.parse(e.body)})),(0,u.h)(e=>e.event.type===S.FeatureSet),(0,g.b)(e=>{var t;const i=null===(t=e.event)||void 0===t?void 0:t.data;i&&(this.logger.debug("Received feature set for call with ID:",e.callId),this.callFeatureSetMap.set(e.callId,i))}),(0,n.U)(()=>{})),(0,o.aj)([c,this.sipFeatureSetMessage$]).subscribe(()=>{const e=this.sipService.getActiveCall();let t=null==e?void 0:e.sipSession.request.callId;if(!t)return void this.activeCallVideoFeatureSetSource.next(null);t=y.toGeneralCallId(t);const i=this.callFeatureSetMap.get(t)||null;this.activeCallVideoFeatureSetSource.next(i)})}sendOwnFeatureSet(){this.sipService.activeCalls.forEach(e=>{e.accepted&&this.sipService.sendSIPMessage(e.sipSession,JSON.stringify({type:S.FeatureSet,source:"cloudya",data:this.ownFeatureSet}))})}static toGeneralCallId(e){return e.split("@")[0]}}y.\u0275fac=function(e){return new(e||y)(c.LFG(h.y),c.LFG(v),c.LFG(p.k),c.LFG(b.q),c.LFG(_.Kf))},y.\u0275prov=c.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);o>3&&a&&Object.defineProperty(t,i,a)}([(0,s.SD)({name:"ApiSipVideoFeatureSetService.canActiveCallReceiveVideo$"})],y.prototype,"canActiveCallReceiveVideo$",void 0);var w=i(8225),C=function(e,t,i,n){var r,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a};class M{constructor(e,t,i,s){this.apiAvFeedService=e,this.apiAvEventStateService=t,this.apiSipVideoFeatureSetService=i,this.devicesService=s,this.isCinemaModeAvailable$=this.apiAvFeedService.isAnyFeedPresent$,this.isVideoEnabled$=(0,o.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.apiSipVideoFeatureSetService.canActiveCallReceiveVideo$]).pipe((0,n.U)(([e,t])=>a.a.isOneOnOneState(e)?t:!!(null==e?void 0:e.video))),this.isCameraOptionEnabled$=(0,o.aj)([this.isVideoEnabled$,this.devicesService.videoInputDevices$.pipe((0,n.U)(e=>!!e.length))]).pipe((0,n.U)(([e,t])=>e&&t),(0,r.x)())}}M.\u0275fac=function(e){return new(e||M)(c.LFG(l.D),c.LFG(a.a),c.LFG(y),c.LFG(w.I))},M.\u0275prov=c.Yz7({token:M,factory:M.\u0275fac}),C([(0,s.SD)({name:"FeatureAccessVideoService.isCinemaModeAvailable$"})],M.prototype,"isCinemaModeAvailable$",void 0),C([(0,s.SD)({name:"FeatureAccessVideoService.isVideoEnabled$"})],M.prototype,"isVideoEnabled$",void 0),C([(0,s.SD)({name:"FeatureAccessVideoService.isCameraOptionEnabled$"})],M.prototype,"isCameraOptionEnabled$",void 0)},55430:function(e,t,i){"use strict";i.d(t,{n:function(){return o},h:function(){return a}});var n=i(26215),r=i(37716),o=(()=>{return(e=o||(o={}))[e.Crop=0]="Crop",e[e.Fit=1]="Fit",o;var e})();let a=(()=>{class e{constructor(){this.memberDisplayOptions=new Map}getObservableForMember(e){return this.getSubjectOfMember(e).asObservable()}toggleCropFitMode(e){this.updateMemberDisplayOptions(e,e=>{e.displayMode=e.displayMode===o.Crop?o.Fit:o.Crop})}toggleSecondaryVideoDisplay(e){this.updateMemberDisplayOptions(e,e=>{e.isSecondaryVideoDisplayed=!e.isSecondaryVideoDisplayed})}getSubjectOfMember(t){let i=this.memberDisplayOptions.get(t.uuid);return i||(i=new n.X(e.getDefaultOptions()),this.memberDisplayOptions.set(t.uuid,i)),i}updateMemberDisplayOptions(e,t){const i=this.getSubjectOfMember(e);let n=i.getValue();n=Object.assign({},n),t(n),i.next(n)}static getDefaultOptions(){return{displayMode:o.Crop,isSecondaryVideoDisplayed:!0}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},54037:function(e,t,i){"use strict";i.d(t,{s:function(){return o}});var n=i(50501),r=i(37716);let o=(()=>{class e{sort(t){!t||(t.members=e.sortMembers(t.members))}static sortMembers(e){return e.sort((e,t)=>{const i=n.D.hasScreenShare(e),r=n.D.hasScreenShare(t);return i&&!r?-1:r&&!i?1:e.self?-1:t.self?1:e.raise_hand&&!t.raise_hand?-1:t.raise_hand&&!e.raise_hand?1:e.caller_id_name.localeCompare(t.caller_id_name)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})()},89670:function(e,t,i){"use strict";i.d(t,{H:function(){return p}});var n=i(35019),r=i(8359),o=i(26215),a=i(9112),s=i(88640),c=i(88002),l=i(50501),d=i(37716),u=i(64676),m=i(54037),g=i(62656),h=i(1933),f=i(57158);let p=(()=>{class e{constructor(e,t,i,r,s,l,d,u){this.apiAvEventStateService=e,this.localUserConfigService=t,this.videoPinnedMemberService=i,this.videoMemberSortService=r,this.conferenceSpeakerIndicatorService=s,this.cinemaModeService=l,this.apiAvFeedService=d,this.logger=u,this.numberOfScreenShares=0,this.currentPageIndexSource=new o.X(0),this.hasPreviousPageSource=new o.X(!1),this.hasNextPageSource=new o.X(!1),this.isSpeakerVisibleSource=new o.X(!1),this.appliedPageSizeSource=new o.X(6),this.currentPageMembersSource=new o.X([]),this.currentPageIndex$=this.currentPageIndexSource.asObservable(),this.hasPreviousPage$=this.hasPreviousPageSource.asObservable(),this.hasNextPage$=this.hasNextPageSource.asObservable(),this.appliedPageSize$=this.appliedPageSizeSource.asObservable(),this.currentPageMembers$=this.currentPageMembersSource.asObservable(),(0,a.aj)([this.localUserConfigService.userConfig$,this.apiAvEventStateService.activeCallConferenceState$,this.conferenceSpeakerIndicatorService.speaker$,this.videoPinnedMemberService.pinnedMemberId$,this.currentPageIndex$,this.cinemaModeService.isInCinemaMode$]).subscribe(([e,t,i,n,r,o])=>{this.updatePagination(e,t,i,n,r,o)}),this.isPaginationAvailable$=(0,a.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.videoPinnedMemberService.pinnedMemberId$,this.hasPreviousPage$,this.hasNextPage$]).pipe((0,c.U)(([e,t,i,r])=>!n.a.isOneOnOneState(e)&&!t&&(i||r))),this.apiAvFeedService.isSomebodyElseScreenSharing$.subscribe(()=>{this.jumpToFirstPage()})}previousPage(){this.hasPreviousPageSource.getValue()?this.currentPageIndexSource.next(this.currentPageIndexSource.getValue()-1):this.logger.error("Failed to navigate to previous page of cinema mode. There is no previous page.")}nextPage(){this.hasNextPageSource.getValue()?this.currentPageIndexSource.next(this.currentPageIndexSource.getValue()+1):this.logger.error("Failed to navigate to next page of cinema mode. There is no next page.")}jumpToFirstPage(){this.currentPageIndexSource.next(0)}isMemberOnCurrentPage(e,t){return!!t.members.slice(this.getMemberStartIndex(),this.getMemberEndIndex()).find(t=>t.uuid===e.uuid)}updatePagination(t,i,n,r,o,a){const s=e.getNumberOfMembers(i);if(this.calculateAppliedPageSize(r,t.cinemaModeVideosPerPage,i,a),this.calculateNumberOfScreenShares(i),o&&!this.hasPageWithIndex(o,s))return void this.previousPage();const c=this.hasPageWithIndex(o-1,s),l=this.hasPageWithIndex(o+1,s);let d;this.hasPreviousPageSource.next(c),this.hasNextPageSource.next(l),d=!(!i||!n)&&(r?r===n.uuid:o<this.numberOfScreenShares?i.members[o].uuid===n.uuid:this.isMemberOnCurrentPage(n,i)),this.isSpeakerVisibleSource.next(d),this.updateMembersOfCurrentPage(i,r)}calculateAppliedPageSize(t,i,n,o){if(t||(null==n?void 0:n.kind)===r.VW.OneOnOne)return void this.appliedPageSizeSource.next(1);if(!o)return void this.appliedPageSizeSource.next(4);const a=e.getNumberOfMembers(n);let c=i;a&&a<i&&s.i.pageSizeOptions.forEach(e=>{e<c&&e>=a&&(c=e)}),this.appliedPageSizeSource.next(c)}calculateNumberOfScreenShares(e){this.numberOfScreenShares=0,l.D.forEachFeed(e,(e,t)=>{t.screenshare&&this.numberOfScreenShares++})}isPageIndexScreenSharePage(e){return e-this.numberOfScreenShares<0}hasPageWithIndex(e,t){if(!t||e<0)return!1;const i=this.appliedPageSizeSource.getValue();return t>e*i-this.numberOfScreenShares*(i-1)}updateMembersOfCurrentPage(e,t){if(!e)return void this.currentPageMembersSource.next([]);if(e.kind===r.VW.OneOnOne)return void this.currentPageMembersSource.next(e.members.filter(e=>!e.self));if(t)return void this.currentPageMembersSource.next(e.members.filter(e=>e.uuid===t));this.videoMemberSortService.sort(e);const i=e.members.slice(this.getMemberStartIndex(),this.getMemberEndIndex());this.currentPageMembersSource.next(i)}getMemberStartIndex(){const e=this.currentPageIndexSource.getValue();if(this.isPageIndexScreenSharePage(e))return e;const t=this.appliedPageSizeSource.getValue();return this.numberOfScreenShares+(e-this.numberOfScreenShares)*t}getMemberEndIndex(){const e=this.appliedPageSizeSource.getValue(),t=this.currentPageIndexSource.getValue();return this.isPageIndexScreenSharePage(t)?this.getMemberStartIndex()+1:this.getMemberStartIndex()+e}static getNumberOfMembers(e){return e?e.members.length:0}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(n.a),d.LFG(s.i),d.LFG(u.G),d.LFG(m.s),d.LFG(g.W),d.LFG(h.H),d.LFG(l.D),d.LFG(f.Kf))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac}),e})()},64676:function(e,t,i){"use strict";i.d(t,{G:function(){return l}});var n=i(26215),r=i(66682),o=i(37716),a=i(81836),s=i(35019),c=i(57158);let l=(()=>{class e{constructor(e,t,i){this.sipService=e,this.apiAvEventStateService=t,this.logger=i,this.pinnedMemberIdSource=new n.X(null),this.pinnedMemberId$=this.pinnedMemberIdSource.asObservable(),(0,r.T)(this.sipService.callEnded$,this.sipService.callResume$,this.sipService.outgoingCallStarted$).subscribe(()=>{this.removePinnedMember()})}togglePinnedMember(e){const t=this.pinnedMemberIdSource.getValue()===e.uuid;this.removePinnedMember(),!t&&(this.pinnedMemberIdSource.next(e.uuid),this.logger.info(`Pinned member '${null==e?void 0:e.caller_id_name}'.`))}removePinnedMember(){!this.pinnedMemberIdSource.getValue()||(this.pinnedMemberIdSource.next(null),this.logger.info("Pinned member removed."))}removePinnedMemberDelayed(){this.cancelRemovePinnedMemberDelayed(),this.unPinTimeoutId=setTimeout(()=>{this.logger.info("Un-pinning video after video-feed ended and delay time is exceeded."),this.removePinnedMember()},e.unPinMemberDelay)}cancelRemovePinnedMemberDelayed(){this.unPinTimeoutId&&clearTimeout(this.unPinTimeoutId)}}return e.unPinMemberDelay=3e3,e.\u0275fac=function(t){return new(t||e)(o.LFG(a.y),o.LFG(s.a),o.LFG(c.Kf))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac}),e})()},39178:function(e,t,i){"use strict";i.d(t,{x:function(){return d}});var n=i(79765),r=i(9112),o=i(88002),a=i(37716),s=i(35019),c=i(50501),l=i(57158);let d=(()=>{class e{constructor(e,t,i){this.apiAvEventStateService=e,this.apiAvFeedService=t,this.logger=i,this.visibleMembersUpdateSource=new n.xQ,this.visibleMembersCountMap=new Map,(0,r.aj)([this.apiAvEventStateService.activeCallConferenceState$,this.visibleMembersUpdateSource.asObservable()]).pipe((0,o.U)(([e])=>e?e.members.filter(e=>this.getVisibilityCount(e.uuid)):[])).subscribe(e=>{this.logger.debug(`Subscribing to video feeds of ${e.length} visible members.`),this.apiAvFeedService.updateFeedSubscriptionsForMembers(e)})}setMemberVisibility(e,t){e.self||(t?this.incrementVisibilityCount(e.uuid):this.decrementVisibilityCount(e.uuid))}incrementVisibilityCount(e){const t=this.getVisibilityCount(e);this.visibleMembersCountMap.set(e,t+1),this.visibleMembersUpdateSource.next()}decrementVisibilityCount(e){setTimeout(()=>{const t=this.getVisibilityCount(e);t?(this.visibleMembersCountMap.set(e,t-1),this.visibleMembersUpdateSource.next()):this.logger.warn(`Failed to decrement visibility count for member with UUID '${e}'. Count is already 0. Visibility.`)},1e3)}getVisibilityCount(e){return this.visibleMembersCountMap.get(e)||0}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.a),a.LFG(c.D),a.LFG(l.Kf))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac}),e})()}}]);