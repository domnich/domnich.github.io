"use strict";(self.webpackChunkcloudya=self.webpackChunkcloudya||[]).push([[3160],{11494:function(e,t,n){n.d(t,{YE:function(){return b},nU:function(){return T},JX:function(){return A}});var i=n(37716),o=n(19238),a=n(39490),s=n(36461),r=n(72458),c=n(79765),l=n(66682),d=n(17238),u=n(38583);const m=["mat-sort-header",""];function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",3),i.NdJ("@arrowPosition.start",function(){return i.CHM(e),i.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return i.CHM(e),i.oxw()._disableViewStateAnimation=!1}),i._UZ(1,"div",4),i.TgZ(2,"div",5),i._UZ(3,"div",6),i._UZ(4,"div",7),i._UZ(5,"div",8),i.qZA(),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("@arrowOpacity",e._getArrowViewState())("@arrowPosition",e._getArrowViewState())("@allowChildren",e._getArrowDirectionState()),i.xp6(2),i.Q6J("@indicator",e._getArrowDirectionState()),i.xp6(1),i.Q6J("@leftPointer",e._getArrowDirectionState()),i.xp6(1),i.Q6J("@rightPointer",e._getArrowDirectionState())}}const h=["*"],g=new i.OlP("MAT_SORT_DEFAULT_OPTIONS"),f=(0,r.dB)((0,r.Id)(class{}));let b=(()=>{class e extends f{constructor(e){super(),this._defaultOptions=e,this.sortables=new Map,this._stateChanges=new c.xQ,this.start="asc",this._direction="",this.sortChange=new i.vpe}get direction(){return this._direction}set direction(e){this._direction=e}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,a.Ig)(e)}register(e){this.sortables.set(e.id,e)}deregister(e){this.sortables.delete(e.id)}sort(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(e){var t,n,i;if(!e)return"";const o=null!==(n=null!==(t=null==e?void 0:e.disableClear)&&void 0!==t?t:this.disableClear)&&void 0!==n?n:!!(null===(i=this._defaultOptions)||void 0===i?void 0:i.disableClear);let a=function(e,t){let n=["asc","desc"];return"desc"==e&&n.reverse(),t||n.push(""),n}(e.start||this.start,o),s=a.indexOf(this.direction)+1;return s>=a.length&&(s=0),a[s]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(g,8))},e.\u0275dir=i.lG2({type:e,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[i.qOj,i.TTD]}),e})();const _=r.mZ.ENTERING+" "+r.yN.STANDARD_CURVE,x={indicator:(0,d.X$)("indicator",[(0,d.SB)("active-asc, asc",(0,d.oB)({transform:"translateY(0px)"})),(0,d.SB)("active-desc, desc",(0,d.oB)({transform:"translateY(10px)"})),(0,d.eR)("active-asc <=> active-desc",(0,d.jt)(_))]),leftPointer:(0,d.X$)("leftPointer",[(0,d.SB)("active-asc, asc",(0,d.oB)({transform:"rotate(-45deg)"})),(0,d.SB)("active-desc, desc",(0,d.oB)({transform:"rotate(45deg)"})),(0,d.eR)("active-asc <=> active-desc",(0,d.jt)(_))]),rightPointer:(0,d.X$)("rightPointer",[(0,d.SB)("active-asc, asc",(0,d.oB)({transform:"rotate(45deg)"})),(0,d.SB)("active-desc, desc",(0,d.oB)({transform:"rotate(-45deg)"})),(0,d.eR)("active-asc <=> active-desc",(0,d.jt)(_))]),arrowOpacity:(0,d.X$)("arrowOpacity",[(0,d.SB)("desc-to-active, asc-to-active, active",(0,d.oB)({opacity:1})),(0,d.SB)("desc-to-hint, asc-to-hint, hint",(0,d.oB)({opacity:.54})),(0,d.SB)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,d.oB)({opacity:0})),(0,d.eR)("* => asc, * => desc, * => active, * => hint, * => void",(0,d.jt)("0ms")),(0,d.eR)("* <=> *",(0,d.jt)(_))]),arrowPosition:(0,d.X$)("arrowPosition",[(0,d.eR)("* => desc-to-hint, * => desc-to-active",(0,d.jt)(_,(0,d.F4)([(0,d.oB)({transform:"translateY(-25%)"}),(0,d.oB)({transform:"translateY(0)"})]))),(0,d.eR)("* => hint-to-desc, * => active-to-desc",(0,d.jt)(_,(0,d.F4)([(0,d.oB)({transform:"translateY(0)"}),(0,d.oB)({transform:"translateY(25%)"})]))),(0,d.eR)("* => asc-to-hint, * => asc-to-active",(0,d.jt)(_,(0,d.F4)([(0,d.oB)({transform:"translateY(25%)"}),(0,d.oB)({transform:"translateY(0)"})]))),(0,d.eR)("* => hint-to-asc, * => active-to-asc",(0,d.jt)(_,(0,d.F4)([(0,d.oB)({transform:"translateY(0)"}),(0,d.oB)({transform:"translateY(-25%)"})]))),(0,d.SB)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,d.oB)({transform:"translateY(0)"})),(0,d.SB)("hint-to-desc, active-to-desc, desc",(0,d.oB)({transform:"translateY(-25%)"})),(0,d.SB)("hint-to-asc, active-to-asc, asc",(0,d.oB)({transform:"translateY(25%)"}))]),allowChildren:(0,d.X$)("allowChildren",[(0,d.eR)("* <=> *",[(0,d.IO)("@*",(0,d.pV)(),{optional:!0})])])};let v=(()=>{class e{constructor(){this.changes=new c.xQ}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const k={provide:v,deps:[[new i.FiY,new i.tp0,v]],useFactory:function(e){return e||new v}},C=(0,r.Id)(class{});let T=(()=>{class e extends C{constructor(e,t,n,i,o,a,s){super(),this._intl=e,this._changeDetectorRef=t,this._sort=n,this._columnDef=i,this._focusMonitor=o,this._elementRef=a,this._ariaDescriber=s,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(e){this._updateSortActionDescription(e)}get disableClear(){return this._disableClear}set disableClear(e){this._disableClear=(0,a.Ig)(e)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector('[role="button"]'),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{const t=!!e;t!==this._showIndicatorHint&&(this._setIndicatorHintVisible(t),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(e){!this._isDisabled()&&(e.keyCode===s.L_||e.keyCode===s.K5)&&(e.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const e=this._viewState.fromState;return(e?`${e}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(e){var t,n;this._sortButton&&(null===(t=this._ariaDescriber)||void 0===t||t.removeDescription(this._sortButton,this._sortActionDescription),null===(n=this._ariaDescriber)||void 0===n||n.describe(this._sortButton,e)),this._sortActionDescription=e}_handleStateChanges(){this._rerenderSubscription=(0,l.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(v),i.Y36(i.sBO),i.Y36(b,8),i.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),i.Y36(o.tE),i.Y36(i.SBq),i.Y36(o.$s,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t._handleClick()})("keydown",function(e){return t._handleKeydown(e)})("mouseenter",function(){return t._setIndicatorHintVisible(!0)})("mouseleave",function(){return t._setIndicatorHintVisible(!1)}),2&e&&(i.uIk("aria-sort",t._getAriaSortAttribute()),i.ekj("mat-sort-header-disabled",t._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",sortActionDescription:"sortActionDescription",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[i.qOj],attrs:m,ngContentSelectors:h,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.Hsn(2),i.qZA(),i.YNc(3,p,6,6,"div",2),i.qZA()),2&e&&(i.ekj("mat-sort-header-sorted",t._isSorted())("mat-sort-header-position-before","before"==t.arrowPosition),i.uIk("tabindex",t._isDisabled()?null:0),i.xp6(3),i.Q6J("ngIf",t._renderArrow()))},directives:[u.O5],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[x.indicator,x.leftPointer,x.rightPointer,x.arrowOpacity,x.arrowPosition,x.allowChildren]},changeDetection:0}),e})(),A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[k],imports:[[u.ez,r.BQ]]}),e})()},88738:function(e,t,n){n.d(t,{H:function(){return E}});var i=n(22238),o=n(3679),a=n(90980),s=n(79765),r=n(46782),c=n(37716),l=n(45832),d=n(29790),u=n(90500),m=n(88589),p=n(22893),h=n(74162),g=n(97597),f=n(38583),b=n(82613),_=n(98295),x=n(83166),v=n(42070),k=n(67441),C=n(18882),T=n(72458);function A(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"mat-option",20),c.NdJ("onSelectionChange",function(){const t=c.CHM(e).$implicit;return c.oxw(2).setNumberblock(t)}),c._uU(1),c.ALo(2,"nconnectPhoneNumber"),c.qZA()}if(2&e){const e=t.$implicit;c.Q6J("value",e.NUMBERROUTING_ID),c.xp6(1),c.hij(" ",c.lcZ(2,2,e)," ")}}function S(e,t){if(1&e&&(c.TgZ(0,"mat-hint",21),c._uU(1),c.qZA()),2&e){c.oxw();const e=c.MAs(13),t=c.oxw();c.xp6(1),c.AsE(" ",e.value.length,"/",t.maxExtensionLength," ")}}const y=function(e){return{maxLength:e}};function P(e,t){if(1&e&&(c.TgZ(0,"mat-error"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij(" ",c.xi3(2,1,e.translationPrefix+".form.field.extension.error.phoneNumberTooLong",c.VKq(4,y,e.maxExtensionLength))," ")}}function I(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",14),c.TgZ(1,"mat-form-field",8),c.TgZ(2,"mat-label"),c._uU(3),c.ALo(4,"translate"),c.qZA(),c.TgZ(5,"mat-select",15),c.NdJ("listboxScrolled",function(){return c.CHM(e),c.oxw().loadNumberblockEntries()}),c.ALo(6,"translate"),c.YNc(7,A,3,4,"mat-option",16),c.qZA(),c.qZA(),c.TgZ(8,"mat-form-field",17),c.TgZ(9,"mat-label"),c._uU(10),c.ALo(11,"translate"),c.qZA(),c._UZ(12,"input",18,19),c.YNc(14,S,2,2,"mat-hint",11),c.YNc(15,P,3,6,"mat-error",12),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(3),c.Oqu(c.lcZ(4,6,e.translationPrefix+".form.field.numberblock.label")),c.xp6(2),c.Q6J("placeholder",c.lcZ(6,8,e.translationPrefix+".form.field.numberblock.placeholder")),c.xp6(2),c.Q6J("ngForOf",e.mappedNumberblocks),c.xp6(3),c.Oqu(c.lcZ(11,10,e.translationPrefix+".form.field.extension.label")),c.xp6(4),c.Q6J("ngIf",e.maxExtensionLength),c.xp6(1),c.Q6J("ngIf",null==e.extension.errors?null:e.extension.errors.phoneNumberTooLong)}}function O(e,t){if(1&e&&(c.TgZ(0,"mat-form-field",8),c.TgZ(1,"mat-label"),c._uU(2),c.ALo(3,"translate"),c.qZA(),c._UZ(4,"input",22),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.Oqu(c.lcZ(3,1,e.translationPrefix+".form.field.non_editable_prefix.label"))}}function Z(e,t){if(1&e&&(c.TgZ(0,"mat-hint",21),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.AsE(" ",e.backupNumber.value.length,"/",e.maxPhoneNumberLength," ")}}function M(e,t){1&e&&(c.TgZ(0,"mat-error"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"admin.nconnect.common_form.error.field_required")," "))}function w(e,t){if(1&e&&(c.TgZ(0,"mat-error"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",c.xi3(2,1,"admin.nconnect.common_form.error.phoneNumberTooLong",c.VKq(4,y,e.maxPhoneNumberLength))," ")}}function N(e,t){1&e&&(c.TgZ(0,"mat-error"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}let E=(()=>{class e{constructor(e,t,n,i,o,a,r){this.snackBarService=e,this.dialogRef=t,this.translateService=n,this.nconnectModalService=i,this.nconnectPhoneNumberPipe=o,this.numberblockDataService=a,this.data=r,this.currentNumberblockSelectionPage=1,this.canLoadMoreNumberblockEntries=!0,this.ngUnsubscribe=new s.xQ,this.isEditModal=!1,this.maxPhoneNumberLength=20,this.mappedNumberblocks=[],this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.initNumberblockSelectionField()}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm(),this.isEditModal&&(this.addStartingPlusCharacterToBackupNumber(),this.numberblock.setValidators(null))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}cancelClick(e){this.dialogRef.close(e)}onSubmit(e){this.cancelClick(e)}setNumberblock(e){this.numberblock.setValue(this.nconnectPhoneNumberPipe.transform(e,null,!0)),this.setExtensionValidatorLength()}setExtensionValidatorLength(){this.maxExtensionLength=this.maxPhoneNumberLength-this.numberblock.value.toString().length,this.extension.setValidators([a.b.maxPhoneNumberLength(this.maxExtensionLength),o.kI.pattern(/^[0-9]*$/)]),this.extension.updateValueAndValidity()}loadNumberblockEntries(){this.canLoadMoreNumberblockEntries&&this.numberblockDataService.getMappedNumberblocks("",this.currentNumberblockSelectionPage).pipe((0,r.R)(this.ngUnsubscribe)).subscribe(e=>{e.meta.currentPage<=e.meta.pageCount?(this.mappedNumberblocks=[...this.mappedNumberblocks,...e.data],this.currentNumberblockSelectionPage++):this.canLoadMoreNumberblockEntries=!1})}addStartingPlusCharacterToBackupNumber(){const e=this.backupNumber.value.toString();this.backupNumber.setValue(e.replace(/^00/g,"+")),e.includes("+")||this.backupNumber.setValue(`+${e}`)}initNumberblockSelectionField(){const e=this.data.allMappedNumberblocks;e?(this.mappedNumberblocks=e,this.currentNumberblockSelectionPage++):this.loadNumberblockEntries()}getModalTitle(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}initModal(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}createFormControls(){this.name=new o.NI(this.data.name||""),this.numberblock=new o.NI("",o.kI.required),this.extension=new o.NI("",[a.b.maxPhoneNumberLength(this.maxExtensionLength),o.kI.pattern(/^[0-9]*$/)]),this.isPrefixBased=new o.NI(this.data.isPrefixBased||0,o.kI.required),this.backupNumber=new o.NI(this.data.backupNumber||"",[o.kI.required,a.b.international_e123(),a.b.maxPhoneNumberLength(this.maxPhoneNumberLength)]),this.numberRoutingId=new o.NI(this.data.numberRoutingId),this.nonEditablePrefix=new o.NI({value:this.data.prefix,disabled:!0})}createForm(){this.formGroup=new o.cw({name:this.name,numberblock:this.numberblock,extension:this.extension,isPrefixBased:this.isPrefixBased,backupNumber:this.backupNumber,numberRoutingId:this.numberRoutingId,nonEditablePrefix:this.nonEditablePrefix})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.c),c.Y36(i.so),c.Y36(d.sK),c.Y36(u.K),c.Y36(m.E),c.Y36(p.C),c.Y36(i.WI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["backup-number-modal"]],decls:25,vars:26,consts:[["data-e2e","admin-backup-number-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-backup-number-modal-fragment__name--input",3,"formControl"],["class","backup-number-modal__block-selection",4,"ngIf","ngIfElse"],["showNonEditablePrefix",""],["formControlName","isPrefixBased",1,"backup-number-modal__routing-type"],["radioGroup","matRadioGroup"],["data-e2e","admin-backup-number-modal-fragment__routing-type--radio-phone",1,"backup-number-modal__routing-type__radio-button",3,"value"],["data-e2e","admin-backup-number-modal-fragment__routing-type--radio-prefix",1,"backup-number-modal__routing-type__radio-button",3,"value"],["appearance","fill"],["formControlName","backupNumber","matInput","","type","phone","data-e2e","admin-backup-number-modal-fragment__backup-number--input",3,"placeholder"],["backupNumberField",""],["align","end",4,"ngIf"],[4,"ngIf"],["e2e","admin-backup-number-modal-fragment",1,"backup-number-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],[1,"backup-number-modal__block-selection"],["formControlName","numberRoutingId","data-e2e","admin-backup-number-modal-fragment__number-block",3,"placeholder","listboxScrolled"],["data-e2e","admin-backup-number-modal-fragment__number-block-option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","fill",1,"backup-number-modal__block-selection__extension"],["autocomplete","off","formControlName","extension","matInput","","data-e2e","admin-backup-number-modal-fragment__extension--input"],["extensionField",""],["data-e2e","admin-backup-number-modal-fragment__number-block-option",3,"value","onSelectionChange"],["align","end"],["formControlName","nonEditablePrefix","matInput","","disabled","","data-e2e","admin-backup-number-modal-fragment__prefix--input"]],template:function(e,t){if(1&e&&(c.TgZ(0,"nconnect-voice-modal",0),c.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),c._UZ(1,"name-input-field",1),c.YNc(2,I,16,12,"div",2),c.YNc(3,O,5,3,"ng-template",null,3,c.W1O),c.TgZ(5,"mat-radio-group",4,5),c.TgZ(7,"mat-radio-button",6),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.TgZ(10,"mat-radio-button",7),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.qZA(),c.TgZ(13,"mat-form-field",8),c.TgZ(14,"mat-label"),c._uU(15),c.ALo(16,"translate"),c.qZA(),c._UZ(17,"input",9,10),c.ALo(19,"translate"),c.YNc(20,Z,2,2,"mat-hint",11),c.YNc(21,M,3,3,"mat-error",12),c.YNc(22,w,3,6,"mat-error",12),c.YNc(23,N,3,3,"mat-error",12),c.qZA(),c.TgZ(24,"footer-actions",13),c.NdJ("cancelClick",function(){return t.cancelClick()}),c.qZA(),c.qZA()),2&e){const e=c.MAs(4);c.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),c.xp6(1),c.Q6J("formControl",t.name),c.xp6(1),c.Q6J("ngIf",!t.isEditModal)("ngIfElse",e),c.xp6(5),c.Q6J("value",0),c.xp6(1),c.hij(" ",c.lcZ(9,18,t.translationPrefix+".routing_type.phone")," "),c.xp6(2),c.Q6J("value",1),c.xp6(1),c.hij(" ",c.lcZ(12,20,t.translationPrefix+".routing_type.prefix")," "),c.xp6(4),c.Oqu(c.lcZ(16,22,t.translationPrefix+".form.field.backup_number.label")),c.xp6(2),c.Q6J("placeholder",c.lcZ(19,24,t.translationPrefix+".form.field.backup_number.placeholder")),c.xp6(3),c.Q6J("ngIf",t.maxPhoneNumberLength),c.xp6(1),c.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.required),c.xp6(1),c.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.phoneNumberTooLong),c.xp6(1),c.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.invalidPhoneNumber),c.xp6(1),c.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid)}},directives:[h.F,o.JL,o.sg,g.Y,o.JJ,o.oH,f.O5,b.VQ,o.u,b.U0,_.KE,_.hX,o.Fj,x.Nt,v.c,k.gD,C.X,f.sg,T.ey,_.bx,_.TO],pipes:[d.X$,m.E],styles:[".backup-number-modal__block-selection[_ngcontent-%COMP%]{display:flex}.backup-number-modal__block-selection__extension[_ngcontent-%COMP%]{margin-left:2rem;max-width:10rem}.backup-number-modal__routing-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}.backup-number-modal__routing-type__radio-button[_ngcontent-%COMP%]{font-weight:bold}.backup-number-modal__routing-type__radio-button[_ngcontent-%COMP%]:first-of-type{margin-right:2rem}.backup-number-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},15017:function(e,t,n){n.d(t,{_:function(){return A}});var i=n(79765),o=n(45435),a=n(46782),s=n(88002),r=n(88738),c=n(37716),l=n(8307),d=n(22238),u=n(76710),m=n(19885),p=n(38538),h=n(83282),g=n(48843),f=n(22893),b=n(134),_=n(81756),x=n(79764),v=n(29790),k=n(38583);const C=["customTypeTemplate"];function T(e,t){if(1&e&&(c._uU(0),c.ALo(1,"translate"),c.ALo(2,"translate")),2&e){const e=t.element,n=c.oxw();c.hij(" ",e.BACKUPNUMBER_IS_PREFIX?c.lcZ(1,1,n.translationPrefix+".routing_type.prefix"):c.lcZ(2,3,n.translationPrefix+".routing_type.phone")," ")}}let A=(()=>{class e{constructor(e,t,n,o,a,s,r,c,l){this.router=e,this.dialog=t,this.backupNumberDataService=n,this.dataTableLazyLoadingService=o,this.dataTableService=a,this.dataTableMessageService=s,this.nconnectAccountSelectionService=r,this.numberblockDataService=c,this.nconnectShortcutsService=l,this.ngUnsubscribe=new i.xQ,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.numberblockSelectionLoaded=!1,this.componentTranslationKey="backup_number",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`}ngOnInit(){this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.backupNumberData$=this.getInitialTableData(),this.getAllMappedNumberblocks()}),this.listenForNconnectShortcutEvents()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.backupNumberDataService.getBackupNumbers("",this.dataTableLazyLoadingService.currentPage))}deleteBackupNumber(e){this.dataTableService.deleteTableItem(this.backupNumberDataService.deleteBackupNumber(e),e.ID,this.componentTranslationKey)}editBackupNumber(e){this.openBackupNumberModal(e).pipe((0,o.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(t=>{this.dataTableService.editTableItem(this.backupNumberDataService.updateBackupNumber(e,t),this.componentTranslationKey)})}createBackupNumber(){this.openBackupNumberModal().pipe((0,o.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.createTableItem(this.backupNumberDataService.createBackupNumber(e),this.componentTranslationKey)})}getAllMappedNumberblocks(){this.numberblockDataService.getMappedNumberblocks().pipe((0,s.U)(e=>e.data),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.allMappedNumberblocks=e,this.numberblockSelectionLoaded=!0})}openBackupNumberModal(e){return this.dialog.open(r.H,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:e?"edit":"create",name:null==e?void 0:e.NAME,backupNumberId:null==e?void 0:e.ID,prefix:null==e?void 0:e.PREFIX,backupNumber:null==e?void 0:e.BACKUPNUMBER,isPrefixBased:null==e?void 0:e.BACKUPNUMBER_IS_PREFIX,numberRoutingId:null==e?void 0:e.NUMBERROUTING_ID,allMappedNumberblocks:this.allMappedNumberblocks,component:this.componentTranslationKey}}}getInitialTableData(){return this.dataTableService.getInitialTableData(this.backupNumberDataService.getBackupNumbers())}listenForNconnectShortcutEvents(){this.nconnectShortcutsService.addButtonClicked$.pipe((0,o.h)(e=>e===this.componentTranslationKey),(0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.createBackupNumber(),this.nconnectShortcutsService.resetNconnectComponent()})}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME"},{title:`${this.translationPrefix}.table.column.prefix`,columnNameId:"PREFIX"},{title:`${this.translationPrefix}.table.column.backup_number`,columnNameId:"BACKUPNUMBER"},{title:`${this.translationPrefix}.table.column.type`,columnNameId:"BACKUPNUMBER_IS_PREFIX",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.F0),c.Y36(d.uw),c.Y36(u.o),c.Y36(m.Y),c.Y36(p.n),c.Y36(h.D),c.Y36(g.c),c.Y36(f.C),c.Y36(b.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["backup-number"]],viewQuery:function(e,t){if(1&e&&c.Gf(C,7),2&e){let e;c.iGM(e=c.CRH())&&(t.customTypeTemplate=e.first)}},decls:7,vars:11,consts:[[3,"title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customTypeTemplate",""]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createBackupNumber()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deleteBackupNumber(e)})("editButtonClicked",function(e){return t.editBackupNumber(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,T,3,5,"ng-template",null,2,c.W1O),c.qZA()),2&e&&(c.Q6J("title",c.lcZ(1,5,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,7,t.backupNumberData$))("isLazyLoadingPossible",c.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[_.Z,x.Q],pipes:[v.X$,k.Ov],encapsulation:2}),e})()},92393:function(e,t,n){n.d(t,{F:function(){return C}});var i=n(3679),o=n(22238),a=n(90980),s=n(37716),r=n(45832),c=n(37130),l=n(90500),d=n(74162),u=n(97597),m=n(38583),p=n(42070),h=n(82613),g=n(98295),f=n(83166),b=n(29790);function _(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-radio-group",5),s.NdJ("change",function(t){return s.CHM(e),s.oxw().changeInboundBlacklistBlockType(t)}),s.TgZ(1,"mat-radio-button",6),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"mat-radio-button",7),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.Q6J("checked","prefix"===e.inboundBlacklistBlockType),s.xp6(1),s.hij(" ",s.lcZ(3,4,e.translationPrefix+".form.field.prefix.label")," "),s.xp6(2),s.Q6J("checked","anonymous"===e.inboundBlacklistBlockType),s.xp6(1),s.hij(" ",s.lcZ(6,6,e.translationPrefix+".form.field.prefix.anonymous")," ")}}function x(e,t){if(1&e&&(s.TgZ(0,"mat-hint"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e){const e=s.oxw(2);s.xp6(1),s.hij(" ",s.lcZ(2,1,e.translationPrefix+".form.field.prefix.hint")," ")}}function v(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}function k(e,t){if(1&e&&(s.TgZ(0,"mat-form-field",8),s.TgZ(1,"mat-label"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s._UZ(4,"input",9),s.YNc(5,x,3,3,"mat-hint",10),s.YNc(6,v,3,3,"mat-error",10),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",s.lcZ(3,3,e.translationPrefix+".form.field.prefix.label")," "),s.xp6(3),s.Q6J("ngIf",!e.isEditModal),s.xp6(1),s.Q6J("ngIf",null==e.prefix.errors?null:e.prefix.errors.isInvalidPrefix)}}let C=(()=>{class e{constructor(e,t,n,i,o,a){this.snackBarService=e,this.blacklistProfileEntryDataService=t,this.dialogRef=n,this.data=i,this.formBuilder=o,this.nconnectModalService=a,this.isEditModal=!1,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.blacklistDirection="OUT",this.inboundBlacklistBlockType="prefix",this.hasAnonymousBlacklistEntry$=this.blacklistProfileEntryDataService.hasBlacklistProfileAnonymousEntry$}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm(),this.blacklistDirection=this.data.blacklistDirection}onSubmit(e){this.cancelClick(e)}cancelClick(e){this.dialogRef.close(e)}changeInboundBlacklistBlockType(e){this.inboundBlacklistBlockType=e.value,"anonymous"===this.inboundBlacklistBlockType?(this.prefix.clearValidators(),this.prefix.markAsDirty(),this.prefix.setValue("anonymous")):this.restorePrefixFieldValidation()}restorePrefixFieldValidation(){this.prefix.reset(),this.prefix.setValidators(this.getPrefixValidators()),this.prefix.updateValueAndValidity()}getPrefixValidators(){return[i.kI.required,a.b.isInternationalPrefix(),a.b.maxPhoneNumberLength(20)]}initModal(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}getModalTitle(){return this.nconnectModalService.getModalTitle(this.data.component,this.isEditModal)}createFormControls(){this.name=new i.NI(this.data.NAME||""),this.prefix=new i.NI({value:this.data.PREFIX||"",disabled:this.isEditModal&&"anonymous"===this.data.PREFIX},this.getPrefixValidators())}createForm(){this.formGroup=new i.cw({NAME:this.name,PREFIX:this.prefix})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.c),s.Y36(c.E),s.Y36(o.so),s.Y36(o.WI),s.Y36(i.qu),s.Y36(l.K))},e.\u0275cmp=s.Xpm({type:e,selectors:[["blacklist-entry-modal"]],decls:6,vars:10,consts:[["data-e2e","admin-blacklist-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-blacklist-modal-fragment__name--input",3,"formControl"],["class","blacklist-entry-modal__type-selection",3,"change",4,"ngIf"],["appearance","fill",4,"ngIf"],["btnType","raised-button-submit","e2e","admin-blacklist-modal-fragment",1,"blacklist-entry-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],[1,"blacklist-entry-modal__type-selection",3,"change"],["value","prefix","data-e2e","admin-blacklist-modal-fragment__prefix-radio--button",1,"blacklist-entry-modal__radio-button--prefix",3,"checked"],["value","anonymous","data-e2e","admin-blacklist-modal-fragment__anonymous-radio--button",3,"checked"],["appearance","fill"],["autocomplete","off","formControlName","PREFIX","matInput","","data-e2e","admin-blacklist-modal-fragment__prefix--input"],[4,"ngIf"]],template:function(e,t){1&e&&(s.TgZ(0,"nconnect-voice-modal",0),s.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),s._UZ(1,"name-input-field",1),s.YNc(2,_,7,8,"mat-radio-group",2),s.ALo(3,"async"),s.YNc(4,k,7,5,"mat-form-field",3),s.TgZ(5,"footer-actions",4),s.NdJ("cancelClick",function(){return t.cancelClick()}),s.qZA(),s.qZA()),2&e&&(s.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),s.xp6(1),s.Q6J("formControl",t.name),s.xp6(1),s.Q6J("ngIf","IN"===t.blacklistDirection&&!s.lcZ(3,8,t.hasAnonymousBlacklistEntry$)),s.xp6(2),s.Q6J("ngIf","prefix"===t.inboundBlacklistBlockType),s.xp6(1),s.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[d.F,i.JL,i.sg,u.Y,i.JJ,i.oH,m.O5,p.c,h.VQ,h.U0,g.KE,g.hX,i.Fj,f.Nt,i.u,g.bx,g.TO],pipes:[m.Ov,b.X$],styles:[".blacklist-entry-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}.blacklist-entry-modal__type-selection[_ngcontent-%COMP%]{margin:1rem 0}.blacklist-entry-modal__radio-button--prefix[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})()},26731:function(e,t,n){n.d(t,{L:function(){return h}});var i=n(3679),o=n(22238),a=n(37716),s=n(45832),r=n(90500),c=n(74162),l=n(97597),d=n(82613),u=n(98295),m=n(42070),p=n(29790);let h=(()=>{class e{constructor(e,t,n,i,o){this.snackBarService=e,this.dialogRef=t,this.data=n,this.formBuilder=i,this.nconnectModalService=o,this.isEditModal=!1,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm()}onSubmit(e){this.cancelClick(e)}cancelClick(e){this.dialogRef.close(e)}initModal(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}getModalTitle(){return this.nconnectModalService.getModalTitle(this.data.component,this.isEditModal)}createFormControls(){this.name=new i.NI(this.data.NAME||""),this.direction=new i.NI({value:this.data.DIRECTION||"IN",disabled:this.isEditModal},i.kI.required)}createForm(){this.formGroup=new i.cw({NAME:this.name,DIRECTION:this.direction})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.c),a.Y36(o.so),a.Y36(o.WI),a.Y36(i.qu),a.Y36(r.K))},e.\u0275cmp=a.Xpm({type:e,selectors:[["blacklist-modal"]],decls:14,vars:15,consts:[["data-e2e","admin-blacklist-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-blacklist-modal-fragment__name--input",3,"formControl"],["formControlName","DIRECTION",1,"blacklist-profile-modal__direction"],["radioGroup","matRadioGroup"],[1,"blacklist-profile-modal__direction__label"],["data-e2e","admin-blacklist-modal-fragment__inbound-direction-radio--button","value","IN",1,"blacklist-profile-modal__direction__button"],["data-e2e","admin-blacklist-modal-fragment__outbound-direction-radio--button","value","OUT",1,"blacklist-profile-modal__direction__button"],["btnType","raised-button-submit","e2e","admin-blacklist-modal-fragment",1,"blacklist-profile-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"]],template:function(e,t){1&e&&(a.TgZ(0,"nconnect-voice-modal",0),a.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),a._UZ(1,"name-input-field",1),a.TgZ(2,"mat-radio-group",2,3),a.TgZ(4,"mat-label",4),a._uU(5),a.ALo(6,"translate"),a.qZA(),a.TgZ(7,"mat-radio-button",5),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"mat-radio-button",6),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.qZA(),a.TgZ(13,"footer-actions",7),a.NdJ("cancelClick",function(){return t.cancelClick()}),a.qZA(),a.qZA()),2&e&&(a.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),a.xp6(1),a.Q6J("formControl",t.name),a.xp6(4),a.hij(" ",a.lcZ(6,9,t.translationPrefix+".form.field.direction.label")," "),a.xp6(3),a.hij(" ",a.lcZ(9,11,t.translationPrefix+".form.field.direction.option.inbound")," "),a.xp6(3),a.hij(" ",a.lcZ(12,13,t.translationPrefix+".form.field.direction.option.outbound")," "),a.xp6(2),a.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[c.F,i.JL,i.sg,l.Y,i.JJ,i.oH,d.VQ,i.u,u.hX,d.U0,m.c],pipes:[p.X$],styles:[".blacklist-profile-modal__direction[_ngcontent-%COMP%]{display:flex;flex-direction:column}.blacklist-profile-modal__direction__label[_ngcontent-%COMP%]{margin-bottom:1rem}.blacklist-profile-modal__direction__button[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:.5rem}.blacklist-profile-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},71621:function(e,t,n){n.d(t,{y:function(){return S}});var i=n(45435),o=n(43190),a=n(46782),s=n(79765),r=n(25917),c=n(92393),l=n(37716),d=n(22238),u=n(8307),m=n(47444),p=n(5882),h=n(37842),g=n(37130),f=n(45832),b=n(38538),_=n(83282),x=n(19885),v=n(48843),k=n(81756),C=n(79764),T=n(38583);const A=["customCellTemplate"];let S=(()=>{class e{constructor(e,t,n,i,o,a,c,l,d,u,m,p){this.dialog=e,this.route=t,this.router=n,this.nconnectItemProviderService=i,this.confirmDialogsService=o,this.blacklistProfileDataService=a,this.blacklistProfileEntryDataService=c,this.snackBarService=l,this.dataTableService=d,this.dataTableMessageService=u,this.dataTableLazyLoadingService=m,this.nconnectAccountSelectionService=p,this.ngUnsubscribe=new s.xQ,this.isCustomBlacklistProfile=!1,this.blacklistDirection="OUT",this.componentTranslationKey="blacklist_profile_entry",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle$=(0,r.of)(`${this.translationPrefix}.title`),this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}ngOnInit(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,i.h)(e=>!!e),(0,o.w)(()=>this.route.params),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{!e.id||(this.selectedBlacklistProfileId=Number(e.id),this.setBlacklistProfileEntryView(this.selectedBlacklistProfileId),this.blacklistProfileEntryData$=this.getInitialTableData(this.selectedBlacklistProfileId))}),this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$,this.tableConfig=this.getTableConfig(),this.blacklistProfileEntryDataService.blacklistProfileEntryDataError$.pipe((0,a.R)(this.ngUnsubscribe)).subscribe(()=>this.router.navigate(["../"],{relativeTo:this.route}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.blacklistProfileEntryDataService.getBlacklistProfileEntries(this.selectedBlacklistProfileId,"",this.dataTableLazyLoadingService.currentPage))}deleteBlacklistProfileEntry(e){this.dataTableService.deleteTableItem(this.blacklistProfileEntryDataService.deleteBlacklistProfileEntry(e),e.ID,this.componentTranslationKey)}editBlacklistProfileEntry(e){this.openBlacklistProfileEntryModal(e).pipe((0,i.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(t=>{this.dataTableService.editTableItem(this.blacklistProfileEntryDataService.updateBlacklistProfileEntry(e,t),this.componentTranslationKey)})}createBlacklistProfileEntry(){this.openBlacklistProfileEntryModal().pipe((0,i.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.createTableItem(this.blacklistProfileEntryDataService.createBlacklistProfileEntry(e,this.selectedBlacklistProfileId),this.componentTranslationKey)})}getInitialTableData(e){return this.dataTableService.getInitialTableData(this.blacklistProfileEntryDataService.getBlacklistProfileEntries(e))}setBlacklistProfileEntryView(e){this.nconnectItemProviderService.nconnectItemNameAvailableFromNavigation?this.nconnectItemProviderService.nconnectItem$.pipe((0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.setBlacklistProfileState(e)}):this.blacklistProfileDataService.getBlacklistProfile(e).pipe((0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.nconnectItemProviderService.setNconnectItemName(e),this.setBlacklistProfileState(e)})}setBlacklistProfileState(e){this.blacklistDirection=e.DIRECTION,this.isCustomBlacklistProfile=!!e.CUSTOMER_ID}openBlacklistProfileEntryModal(e){return this.dialog.open(c.F,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:e?"edit":"create",NAME:null==e?void 0:e.NAME,PREFIX:null==e?void 0:e.PREFIX,component:this.componentTranslationKey,blacklistDirection:this.blacklistDirection}}}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME"},{title:`${this.translationPrefix}.table.column.prefix`,columnNameId:"PREFIX"},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.uw),l.Y36(u.gz),l.Y36(u.F0),l.Y36(m.U),l.Y36(p.U),l.Y36(h.U),l.Y36(g.E),l.Y36(f.c),l.Y36(b.n),l.Y36(_.D),l.Y36(x.Y),l.Y36(v.c))},e.\u0275cmp=l.Xpm({type:e,selectors:[["blacklist-item"]],viewQuery:function(e,t){if(1&e&&l.Gf(A,7),2&e){let e;l.iGM(e=l.CRH())&&(t.customCellTemplate=e.first)}},decls:5,vars:14,consts:[[3,"showActionButton","title","addButtonClicked"],[3,"dataTableSourceInput","hideAllDeleteButtons","hideAllEditButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"]],template:function(e,t){1&e&&(l.TgZ(0,"admin-list-header",0),l.NdJ("addButtonClicked",function(){return t.createBlacklistProfileEntry()}),l.ALo(1,"async"),l.qZA(),l.TgZ(2,"data-table",1),l.NdJ("deleteButtonClicked",function(e){return t.deleteBlacklistProfileEntry(e)})("editButtonClicked",function(e){return t.editBlacklistProfileEntry(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),l.ALo(3,"async"),l.ALo(4,"async"),l.qZA()),2&e&&(l.Q6J("showActionButton",t.isCustomBlacklistProfile)("title",l.lcZ(1,8,t.pageTitle$)),l.xp6(2),l.Q6J("dataTableSourceInput",l.lcZ(3,10,t.blacklistProfileEntryData$))("hideAllDeleteButtons",!t.isCustomBlacklistProfile)("hideAllEditButtons",!t.isCustomBlacklistProfile)("isLazyLoadingPossible",l.lcZ(4,12,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[k.Z,C.Q],pipes:[T.Ov],encapsulation:2}),e})()},39539:function(e,t,n){n.d(t,{e:function(){return J}});var i=n(26731),o=n(45435),a=n(46782),s=n(68307),r=n(43190),c=n(88002),l=n(79765),d=n(37716),u=n(47444),m=n(8307),p=n(22238),h=n(5882),g=n(37842),f=n(38538),b=n(45832),_=n(83282),x=n(19885),v=n(48843),k=n(134),C=n(81756),T=n(79764),A=n(38583),S=n(42735),y=n(3679),P=n(78023),I=n(29790),O=n(15761),Z=n(16891);const M=["customNameTemplate"],w=["customTypeTemplate"],N=["customButtonTemplate"],E=["customEntryAmountTemplate"],L=["customBlacklistDirectionTemplate"];function U(e,t){if(1&e&&(d.ynx(0),d.TgZ(1,"div",9),d._uU(2),d.qZA(),d.BQk()),2&e){const e=d.oxw().element;d.xp6(2),d.hij(" ",e.NAME," ")}}function D(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"inline-edit",10),d.NdJ("inputChanged",function(t){d.CHM(e);const n=d.oxw().element;return d.oxw().updateBlacklistProfileName(n,t)})("ngModelChange",function(t){return d.CHM(e),d.oxw().element.NAME=t}),d.qZA()}if(2&e){const e=d.oxw().element;d.Q6J("ngModel",e.NAME)}}function B(e,t){if(1&e&&(d.YNc(0,U,3,1,"ng-container",7),d.YNc(1,D,1,1,"ng-template",null,8,d.W1O)),2&e){const e=t.element,n=d.MAs(2);d.Q6J("ngIf",!e.CUSTOMER_ID)("ngIfElse",n)}}function q(e,t){1&e&&(d._uU(0),d.ALo(1,"blacklistDirection")),2&e&&d.hij(" ",d.lcZ(1,1,t.element.DIRECTION)," ")}function R(e,t){if(1&e&&(d.ynx(0),d._uU(1),d.BQk()),2&e){const e=t.element;d.xp6(1),d.hij(" ",+e.entryAmount||"-"," ")}}function $(e,t){1&e&&(d._uU(0),d.ALo(1,"tableItemType")),2&e&&d.hij(" ",d.lcZ(1,1,t.element.CUSTOMER_ID)," ")}function F(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"app-button",13),d.NdJ("appButtonClick",function(){d.CHM(e);const t=d.oxw().element,n=d.oxw();return t.isUsed?"":n.deleteBlacklistProfile(t)}),d.qZA()}if(2&e){const e=d.oxw().element,t=d.oxw();d.Q6J("iconFill",e.isUsed?"grey-color":"button-color")("hoverTextTranslationKey",e.isUsed?t.translationPrefix+".table.hoverbox_hint.delete_disabled_for_custom_blacklist":"")("isHoverboxVisible",e.isUsed)}}function Y(e,t){if(1&e){const e=d.EpF();d.YNc(0,F,1,3,"app-button",11),d.TgZ(1,"app-button",12),d.NdJ("appButtonClick",function(){const t=d.CHM(e).element;return d.oxw().goToBlacklistProfileEntryPage(t)}),d.qZA()}2&e&&d.Q6J("ngIf",t.element.CUSTOMER_ID)}let J=(()=>{class e{constructor(e,t,n,i,o,a,s,r,c,d,u,m){this.nconnectItemProviderService=e,this.route=t,this.router=n,this.dialog=i,this.confirmDialogsService=o,this.blacklistProfileDataService=a,this.dataTableService=s,this.snackBarService=r,this.dataTableMessageService=c,this.dataTableLazyLoadingService=d,this.nconnectAccountSelectionService=u,this.nconnectShortcutsService=m,this.ngUnsubscribe=new l.xQ,this.componentTranslationKey="blacklist_profile",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}ngOnInit(){this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.blacklistProfileData$=this.getInitialTableData()}),this.listenForNconnectShortcutEvents()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.blacklistProfileDataService.getBlacklistProfiles("",this.dataTableLazyLoadingService.currentPage))}goToBlacklistProfileEntryPage(e){this.nconnectItemProviderService.setNconnectItem(e),this.router.navigate([`../${e.ID}`],{relativeTo:this.route})}deleteBlacklistProfile(e){this.dataTableService.deleteTableItem(this.blacklistProfileDataService.deleteBlacklistProfile(e.ID),e.ID,this.componentTranslationKey)}updateBlacklistProfileName(e,t){if(e.NAME!==t){const n=e;n.NAME=t,this.snackBarService.open("admin.nconnect.snackbar_action.name_update.init"),this.blacklistProfileDataService.updateBlacklistProfile(n).pipe((0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.snackBarService.openInfo("admin.nconnect.snackbar_action.name_update.success",!0)},e=>{this.snackBarService.openInfo(`admin.nconnect.snackbar_action.name_update.error: ${e}`,!0)})}}createBlacklistProfile(){const e="create";this.openBlacklistProfileModal().pipe((0,o.h)(e=>!!e),(0,s.b)(()=>{this.dataTableMessageService.showDataTableSnackbar(e,"init",this.componentTranslationKey)}),(0,r.w)(e=>this.blacklistProfileDataService.createBlacklistProfile(e)),(0,c.U)(e=>e.data[0]),(0,a.R)(this.ngUnsubscribe)).subscribe(t=>{t&&(this.goToBlacklistProfileEntryPage(t),this.dataTableMessageService.showDataTableSnackbar(e,"success",this.componentTranslationKey))},t=>{this.dataTableMessageService.showDataTableSnackbar(e,"error",this.componentTranslationKey,t)})}openBlacklistProfileModal(){return this.dialog.open(i.L,this.getDialogData()).afterClosed()}getDialogData(){return{data:{type:"create",component:this.componentTranslationKey}}}getInitialTableData(){return this.dataTableService.getInitialTableData(this.blacklistProfileDataService.getBlacklistProfiles())}listenForNconnectShortcutEvents(){this.nconnectShortcutsService.addButtonClicked$.pipe((0,o.h)(e=>e===this.componentTranslationKey),(0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.createBlacklistProfile(),this.nconnectShortcutsService.resetNconnectComponent()})}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME",highlighted:!0,customCellTemplate:this.customNameTemplate,columnSize:"large"},{title:`${this.translationPrefix}.table.column.direction`,columnNameId:"DIRECTION",customCellTemplate:this.customBlacklistDirectionTemplate},{title:`${this.translationPrefix}.table.column.entries`,columnNameId:"entryAmount",customCellTemplate:this.customEntryAmountTemplate},{title:`${this.translationPrefix}.table.column.type`,columnNameId:"IS_DEFAULT",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons",customButtonTemplate:this.customButtonTemplate}]}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(u.U),d.Y36(m.gz),d.Y36(m.F0),d.Y36(p.uw),d.Y36(h.U),d.Y36(g.U),d.Y36(f.n),d.Y36(b.c),d.Y36(_.D),d.Y36(x.Y),d.Y36(v.c),d.Y36(k.f))},e.\u0275cmp=d.Xpm({type:e,selectors:[["blacklist"]],viewQuery:function(e,t){if(1&e&&(d.Gf(M,7),d.Gf(w,7),d.Gf(N,7),d.Gf(E,7),d.Gf(L,7)),2&e){let e;d.iGM(e=d.CRH())&&(t.customNameTemplate=e.first),d.iGM(e=d.CRH())&&(t.customTypeTemplate=e.first),d.iGM(e=d.CRH())&&(t.customButtonTemplate=e.first),d.iGM(e=d.CRH())&&(t.customEntryAmountTemplate=e.first),d.iGM(e=d.CRH())&&(t.customBlacklistDirectionTemplate=e.first)}},decls:15,vars:11,consts:[[3,"title","addButtonClicked"],["activeSortColumn","IS_DEFAULT",3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","endOfListReached"],["customNameTemplate",""],["customBlacklistDirectionTemplate",""],["customEntryAmountTemplate",""],["customTypeTemplate",""],["customButtonTemplate",""],[4,"ngIf","ngIfElse"],["itemCanBeEdited",""],[1,"blacklist-profile-table__name"],["e2e","admin-nconnect-voice-blacklist-profile-page",3,"ngModel","inputChanged","ngModelChange"],["iconName","delete","data-e2e","admin-nconnect-voice-blacklist-profile-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick",4,"ngIf"],["iconName","bfl_view","data-e2e","admin-nconnect-voice-blacklist-profile-page__blf--button",3,"appButtonClick"],["iconName","delete","data-e2e","admin-nconnect-voice-blacklist-profile-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick"]],template:function(e,t){1&e&&(d.TgZ(0,"admin-list-header",0),d.NdJ("addButtonClicked",function(){return t.createBlacklistProfile()}),d.ALo(1,"translate"),d.qZA(),d.TgZ(2,"data-table",1),d.NdJ("endOfListReached",function(){return t.loadMoreTableEntries()}),d.ALo(3,"async"),d.ALo(4,"async"),d.YNc(5,B,3,2,"ng-template",null,2,d.W1O),d.YNc(7,q,2,3,"ng-template",null,3,d.W1O),d.YNc(9,R,2,1,"ng-template",null,4,d.W1O),d.YNc(11,$,2,3,"ng-template",null,5,d.W1O),d.YNc(13,Y,2,1,"ng-template",null,6,d.W1O),d.qZA()),2&e&&(d.Q6J("title",d.lcZ(1,5,t.pageTitle)),d.xp6(2),d.Q6J("dataTableSourceInput",d.lcZ(3,7,t.blacklistProfileData$))("isLazyLoadingPossible",d.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[C.Z,T.Q,A.O5,S.a,y.JJ,y.On,P.V],pipes:[I.X$,A.Ov,O.b,Z.B],styles:[".blacklist-profile-table__name[_ngcontent-%COMP%]{cursor:default}"]}),e})()},97597:function(e,t,n){n.d(t,{Y:function(){return u}});var i=n(37716),o=n(3679),a=n(98295),s=n(83166),r=n(38583),c=n(29790);function l(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"admin.nconnect.common_form.field.name.error.required")," "))}function d(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"admin.nconnect.common_form.field.name.error.too_long")," "))}let u=(()=>{class e{constructor(){this.maxNameLength=45}ngOnInit(){this.setNameInputValidators()}writeValue(e){}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouch=e}setNameInputValidators(){this.formControl.setValidators([o.kI.required,o.kI.maxLength(this.maxNameLength),o.kI.pattern(/[^\s].*/)]),this.formControl.updateValueAndValidity()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["name-input-field"]],inputs:{formControl:"formControl",maxNameLength:"maxNameLength"},features:[i._Bn([{provide:o.JU,useExisting:(0,i.Gpc)(()=>e),multi:!0}])],decls:10,vars:8,consts:[["appearance","fill",1,"name-input"],["autocomplete","off","matInput","",3,"formControl"],["nameField",""],["align","end"],[4,"ngIf"]],template:function(e,t){if(1&e&&(i.TgZ(0,"mat-form-field",0),i.TgZ(1,"mat-label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"input",1,2),i.TgZ(6,"mat-hint",3),i._uU(7),i.qZA(),i.YNc(8,l,3,3,"mat-error",4),i.YNc(9,d,3,3,"mat-error",4),i.qZA()),2&e){const e=i.MAs(5);i.xp6(2),i.Oqu(i.lcZ(3,6,"admin.nconnect.common_form.field.name.label")),i.xp6(2),i.Q6J("formControl",t.formControl),i.xp6(3),i.AsE(" ",e.value.length," / ",t.maxNameLength," "),i.xp6(1),i.Q6J("ngIf",null==t.formControl?null:t.formControl.hasError("required")),i.xp6(1),i.Q6J("ngIf",null==t.formControl?null:t.formControl.hasError("maxlength"))}},directives:[a.KE,a.hX,s.Nt,o.Fj,o.JJ,o.oH,a.bx,r.O5,a.TO],pipes:[c.X$],styles:[".name-input[_ngcontent-%COMP%]{width:100%}"]}),e})()},18869:function(e,t,n){n.d(t,{z:function(){return o}});var i=n(37716);let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["nconnect-conference"]],decls:2,vars:0,template:function(e,t){1&e&&(i.TgZ(0,"p"),i._uU(1,"nconnect-conference works!"),i.qZA())},styles:[""]}),e})()},88283:function(e,t,n){n.d(t,{S:function(){return u}});var i=n(37716),o=n(134),a=n(8307),s=n(56436),r=n(38583),c=n(78023),l=n(29790);function d(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"app-button",4),i.NdJ("appButtonClick",function(){i.CHM(e);const t=i.oxw();return t.addButtonClick(t.component)}),i.qZA()}}let u=(()=>{class e{constructor(e){this.nconnectShortcutsService=e,this.cardIcon="attention",this.hideAddButton=!1}addButtonClick(e){this.nconnectShortcutsService.emitAddButtonClicked(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.f))},e.\u0275cmp=i.Xpm({type:e,selectors:[["nconnect-shortcuts-card"]],inputs:{cardLink:"cardLink",cardIcon:"cardIcon",cardTitleKey:"cardTitleKey",hideAddButton:"hideAddButton",component:"component"},decls:6,vars:7,consts:[[1,"nconnect-shortcuts-card",3,"routerLink"],["fill","button-color","size","large",1,"nconnect-shortcuts-card__icon",3,"icon"],[1,"nconnect-shortcuts-card__title"],["class","nconnect-shortcuts-card__add-button","iconName","add","data-e2e","admin-nconnect-voice-shortcuts-page__add--button",3,"appButtonClick",4,"ngIf"],["iconName","add","data-e2e","admin-nconnect-voice-shortcuts-page__add--button",1,"nconnect-shortcuts-card__add-button",3,"appButtonClick"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"app-svg-icon",1),i.TgZ(2,"div",2),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.YNc(5,d,1,0,"app-button",3),i.qZA()),2&e&&(i.Q6J("routerLink",t.cardLink),i.xp6(1),i.Q6J("icon",t.cardIcon),i.xp6(1),i.uIk("data-e2e","admin-nconnect-voice-shortcuts-page__"+t.cardTitleKey),i.xp6(1),i.hij(" ",i.lcZ(4,5,t.cardTitleKey)," "),i.xp6(2),i.Q6J("ngIf",!t.hideAddButton))},directives:[a.rH,s.u,r.O5,c.V],pipes:[l.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{align-items:center;cursor:pointer;display:inline-flex;flex-basis:32%;height:15rem;justify-content:center;margin-bottom:2rem;outline:none;overflow:hidden;position:relative}.nconnect-shortcuts-card[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:inherit;outline:none;width:100%}.nconnect-shortcuts-card__content[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.nconnect-shortcuts-card__icon[_ngcontent-%COMP%]{margin:2rem 0 1rem}.nconnect-shortcuts-card__add-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.nconnect-shortcuts-card__title[_ngcontent-%COMP%]{background:#fff;border-radius:.3rem;border-style:solid;border-width:.1rem;padding:1rem 2rem;text-transform:uppercase}"]}),e})()},40389:function(e,t,n){n.d(t,{h:function(){return m}});var i=n(79765),o=n(46782),a=n(37716),s=n(29790),r=n(50256),c=n(38583);const l=function(e){return{trunkset:e}};function d(e,t){if(1&e&&(a.TgZ(0,"div",1),a.TgZ(1,"h4",2),a.TgZ(2,"span"),a._uU(3),a.qZA(),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"p",3),a._uU(7),a.ALo(8,"translate"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(3),a.Oqu(e.NAME),a.xp6(1),a.hij(" ",a.lcZ(5,3,"admin.nconnect.shortcuts.info.fraud.title")," "),a.xp6(3),a.hij(" ",a.xi3(8,5,"admin.nconnect.shortcuts.info.fraud.message",a.VKq(8,l,e.NAME))," ")}}function u(e,t){if(1&e&&(a.TgZ(0,"div",1),a.TgZ(1,"h4",2),a.TgZ(2,"span"),a._uU(3),a.qZA(),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"p",3),a._uU(7),a.ALo(8,"translate"),a.qZA(),a.qZA()),2&e){const e=t.$implicit;a.xp6(3),a.Oqu(e.NAME),a.xp6(1),a.hij(" ",a.lcZ(5,3,"admin.nconnect.shortcuts.info.spending_management.title")," "),a.xp6(3),a.hij(" ",a.xi3(8,5,"admin.nconnect.shortcuts.info.spending_management.message",a.VKq(8,l,e.NAME))," ")}}let m=(()=>{class e{constructor(e,t){this.translateService=e,this.trunksetDataService=t,this.ngUnsubscribe=new i.xQ}ngOnInit(){this.trunksetsWithFraudIssues$=this.trunksetDataService.trunksetsWithFraudIssues$.pipe((0,o.R)(this.ngUnsubscribe)),this.trunksetsWithSpendingManagementIssues$=this.trunksetDataService.trunksetsWithSpendingManagementIssues$.pipe((0,o.R)(this.ngUnsubscribe))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.sK),a.Y36(r.R))},e.\u0275cmp=a.Xpm({type:e,selectors:[["nconnect-shortcuts-info"]],decls:4,vars:6,consts:[["class","nconnect-shortcuts-info",4,"ngFor","ngForOf"],[1,"nconnect-shortcuts-info"],[1,"nconnect-shortcuts-info__title"],[1,"nconnect-shortcuts-info__message"]],template:function(e,t){1&e&&(a.YNc(0,d,9,10,"div",0),a.ALo(1,"async"),a.YNc(2,u,9,10,"div",0),a.ALo(3,"async")),2&e&&(a.Q6J("ngForOf",a.lcZ(1,2,t.trunksetsWithFraudIssues$)),a.xp6(2),a.Q6J("ngForOf",a.lcZ(3,4,t.trunksetsWithSpendingManagementIssues$)))},directives:[c.sg],pipes:[c.Ov,s.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.nconnect-shortcuts-info[_ngcontent-%COMP%]{background:#b30000;color:#fff;margin:1rem 2rem;outline:none;overflow:hidden;padding:1.5rem}.nconnect-shortcuts-info__title[_ngcontent-%COMP%]{margin:0}.nconnect-shortcuts-info__message[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),e})()},26985:function(e,t,n){n.d(t,{S:function(){return u}});var i=n(37716),o=n(50256),a=n(81756),s=n(40389),r=n(88283),c=n(38583),l=n(29790);function d(e,t){1&e&&i._UZ(0,"nconnect-shortcuts-card",10)}let u=(()=>{class e{constructor(e){this.trunksetDataService=e,this.pageTitle="admin.nconnect.title",this.firstTrunksetId$=this.trunksetDataService.firstTrunksetId$}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.R))},e.\u0275cmp=i.Xpm({type:e,selectors:[["nconnect-shortcuts"]],decls:13,vars:11,consts:[[1,"nconnect-shortcuts__title",3,"showActionButton","title"],[1,"nconnect-shortcuts__card-section"],["cardIcon","company","cardLink","../trunkset","cardTitleKey","admin.nconnect.trunkset.title","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-trunkset",3,"hideAddButton"],["cardIcon","banned","cardLink","../blacklist","cardTitleKey","admin.nconnect.blacklist_profile.title","component","blacklist_profile","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-blacklist"],["cardIcon","easy_handling","cardTitleKey","admin.nconnect.pbx_endpoint.title","component","pbx_endpoint","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-pbx-endpoint",3,"cardLink","hideAddButton"],["cardIcon","document","cardLink","../pbx-endpoint-template","cardTitleKey","admin.nconnect.pbx_endpoint_template.title","component","pbx_endpoint_template","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-pbx-endpoint-template"],["cardIcon","world","cardLink","../number-routing","cardTitleKey","admin.nconnect.number_routing.title","component","number_routing","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-number-routing"],["cardIcon","nav","cardLink","../numberblock","cardTitleKey","admin.nconnect.numberblock.title","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-number-block",3,"hideAddButton"],["cardIcon","extension","cardLink","../backupnumbers","cardTitleKey","admin.nconnect.backup_number.title","component","backup_number","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-backup-numbers"],["cardIcon","conference_call_solid","cardLink","../services","cardTitleKey","admin.navigation.nconnect.services.conferences","component","nconnect_conference",4,"ngIf"],["cardIcon","conference_call_solid","cardLink","../services","cardTitleKey","admin.navigation.nconnect.services.conferences","component","nconnect_conference"]],template:function(e,t){1&e&&(i._UZ(0,"admin-list-header",0),i.ALo(1,"translate"),i._UZ(2,"nconnect-shortcuts-info"),i.TgZ(3,"div",1),i._UZ(4,"nconnect-shortcuts-card",2),i._UZ(5,"nconnect-shortcuts-card",3),i._UZ(6,"nconnect-shortcuts-card",4),i.ALo(7,"async"),i._UZ(8,"nconnect-shortcuts-card",5),i._UZ(9,"nconnect-shortcuts-card",6),i._UZ(10,"nconnect-shortcuts-card",7),i._UZ(11,"nconnect-shortcuts-card",8),i.YNc(12,d,1,0,"nconnect-shortcuts-card",9),i.qZA()),2&e&&(i.Q6J("showActionButton",!1)("title",i.lcZ(1,7,t.pageTitle)),i.xp6(4),i.Q6J("hideAddButton",!0),i.xp6(2),i.Q6J("cardLink","../pbx-endpoint/"+i.lcZ(7,9,t.firstTrunksetId$))("hideAddButton",!0),i.xp6(4),i.Q6J("hideAddButton",!0),i.xp6(2),i.Q6J("ngIf",!1))},directives:[a.Z,s.h,r.S,c.O5],pipes:[l.X$,c.Ov],styles:[".nconnect-shortcuts__card-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:2rem}.nconnect-shortcuts__title[_ngcontent-%COMP%]{z-index:2}"]}),e})()},74162:function(e,t,n){n.d(t,{F:function(){return r}});var i=n(37716),o=n(89973),a=n(3679);const s=["*"];let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["nconnect-voice-modal"]],inputs:{formGroup:"formGroup",modalTitle:"modalTitle"},ngContentSelectors:s,decls:3,vars:2,consts:[[3,"title"],[1,"nconnect-voice-modal__form",3,"formGroup"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"modal-container",0),i.TgZ(1,"form",1),i.Hsn(2),i.qZA(),i.qZA()),2&e&&(i.Q6J("title",t.modalTitle),i.xp6(1),i.Q6J("formGroup",t.formGroup))},directives:[o.O,a._Y,a.JL,a.sg],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;max-height:100vh;max-width:40rem;min-width:32rem}.nconnect-voice-modal__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.8rem 2.4rem}"]}),e})()},18393:function(e,t,n){n.d(t,{w:function(){return I}});var i=n(22238),o=n(3679),a=n(88002),s=n(46782),r=n(79765),c=n(37716),l=n(45832),d=n(90500),u=n(89521),m=n(50256),p=n(22893),h=n(74162),g=n(97597),f=n(98295),b=n(67441),_=n(38583),x=n(42070),v=n(72458),k=n(77746),C=n(29790),T=n(88589);function A(e,t){if(1&e&&(c.TgZ(0,"mat-option",9),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.ID),c.xp6(1),c.hij(" ",e.NAME," ")}}function S(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"mat-option",10),c.NdJ("onSelectionChange",function(){const t=c.CHM(e).$implicit;return c.oxw().getNumberBlockEntries(t.TRUNK_ID)}),c._uU(1),c.ALo(2,"nconnectPhoneNumber"),c.qZA()}if(2&e){const e=t.$implicit;c.Q6J("value",e.TRUNK_ID),c.xp6(1),c.hij(" ",c.xi3(2,2,e,"blockRangeShown")," ")}}function y(e,t){if(1&e&&(c.TgZ(0,"mat-list-option",15),c._uU(1),c.ALo(2,"nconnectPhoneNumber"),c.qZA()),2&e){const e=t.$implicit,n=c.oxw(2);c.Q6J("disabled",null!==e.NUMBERROUTING_ID&&+e.NUMBERROUTING_ID!==n.numberRoutingDialogData.numberRoutingId)("selected",+e.NUMBERROUTING_ID===n.numberRoutingDialogData.numberRoutingId)("value",e.INBOUND_TRUNK_NUMBER_ID),c.xp6(1),c.hij(" ",c.lcZ(2,4,e)," ")}}function P(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"mat-option",11),c.NdJ("click",function(){return c.CHM(e),c.oxw().selectAvailableEntries()}),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-selection-list",12,13),c.NdJ("selectionChange",function(){return c.CHM(e),c.oxw().setSelectionState()}),c.YNc(6,y,3,6,"mat-list-option",14),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.BQk()}if(2&e){const e=c.MAs(5),t=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,5,t.translationPrefix+".modal.select_all")," "),c.xp6(4),c.Q6J("ngForOf",t.allNumberblockEntries),c.xp6(2),c.lnq(" ",c.lcZ(9,7,t.translationPrefix+".modal.entry_amount"),": ",null==e.selectedOptions.selected?null:e.selectedOptions.selected.length,"/",null==e.options?null:e.options.length," ")}}let I=(()=>{class e{constructor(e,t,n,i,o,a,s,c){this.snackBarService=e,this.dialogRef=t,this.nconnectModalService=n,this.numberblockEntryDataService=i,this.trunksetDataService=o,this.numberblockDataService=a,this.numberRoutingDialogData=s,this.cdref=c,this.ngUnsubscribe=new r.xQ,this.isEditModal=!1,this.componentTranslationKey="number_routing",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.userHasSelectedNumberblock=!1,this.trunksets$=this.trunksetDataService.trunksets$,s.allNumberblocks?this.allNumberblocks=s.allNumberblocks:this.getAllNumberBlocks()}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setSelectionState(){this.userHasSelectedNumberblock=!0}getNumberBlockEntries(e){this.numberblockEntryDataService.getNumberblockEntries(e,"",1,100).pipe((0,a.U)(e=>e.data),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.allNumberblockEntries=e,this.cdref.detectChanges()})}onSubmit(e){this.cancelClick(e)}cancelClick(e){this.dialogRef.close(e)}selectAvailableEntries(){const e=[];this.allNumberblockEntries.forEach(t=>{(!t.NUMBERROUTING_ID||+t.NUMBERROUTING_ID===this.numberRoutingDialogData.numberRoutingId)&&e.push(t.INBOUND_TRUNK_NUMBER_ID)}),this.numberblockIds.setValue(e),this.setSelectionState()}getAllNumberBlocks(){this.numberblockDataService.getNumberblocks().pipe((0,a.U)(e=>e.data),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.allNumberblocks=e})}initModal(){this.isEditModal="edit"===this.numberRoutingDialogData.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}getModalTitle(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}createFormControls(){this.numberRoutingId=new o.NI(this.numberRoutingDialogData.numberRoutingId||""),this.name=new o.NI(this.numberRoutingDialogData.name||"",o.kI.required),this.numberblockIds=new o.NI(this.numberRoutingDialogData.numberblockIds||[],o.kI.required),this.trunksetId=new o.NI({value:this.numberRoutingDialogData.trunksetId||"",disabled:this.isEditModal},o.kI.required),this.trunkId=new o.NI({value:this.numberRoutingDialogData.trunkId||"",disabled:this.isEditModal},o.kI.required)}createForm(){this.formGroup=new o.cw({name:this.name,trunksetId:this.trunksetId,trunkId:this.trunkId,numberblockIds:this.numberblockIds,numberRoutingId:this.numberRoutingId})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.c),c.Y36(i.so),c.Y36(d.K),c.Y36(u.b),c.Y36(m.R),c.Y36(p.C),c.Y36(i.WI),c.Y36(c.sBO))},e.\u0275cmp=c.Xpm({type:e,selectors:[["number-routing-modal"]],decls:17,vars:19,consts:[["data-e2e","admin-number-routing-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["maxNameLength","64","data-e2e","admin-number-routing-modal-fragment__name--input",3,"formControl"],["appearance","fill"],["formControlName","trunksetId","data-e2e","admin-number-routing-modal-fragment__available-trunkset",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-trunkset--option",3,"value",4,"ngFor","ngForOf"],["formControlName","trunkId","data-e2e","admin-number-routing-modal-fragment__available-number-block",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-number-block--option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["btnType","raised-button-submit","e2e","admin-number-routing-modal-fragment",1,"number-routing-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],["data-e2e","admin-number-routing-modal-fragment__available-trunkset--option",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-number-block--option",3,"value","onSelectionChange"],[3,"click"],["formControlName","numberblockIds","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries",1,"number-routing-modal__prefix-selection",3,"selectionChange"],["numberBlockList",""],["checkboxPosition","before","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries--option",3,"disabled","selected","value",4,"ngFor","ngForOf"],["checkboxPosition","before","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries--option",3,"disabled","selected","value"]],template:function(e,t){1&e&&(c.TgZ(0,"nconnect-voice-modal",0),c.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),c._UZ(1,"name-input-field",1),c.TgZ(2,"mat-form-field",2),c.TgZ(3,"mat-label"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"mat-select",3),c.YNc(7,A,2,2,"mat-option",4),c.ALo(8,"async"),c.qZA(),c.qZA(),c.TgZ(9,"mat-form-field",2),c.TgZ(10,"mat-label"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"mat-select",5),c.YNc(14,S,3,5,"mat-option",6),c.qZA(),c.qZA(),c.YNc(15,P,10,9,"ng-container",7),c.TgZ(16,"footer-actions",8),c.NdJ("cancelClick",function(){return t.cancelClick()}),c.qZA(),c.qZA()),2&e&&(c.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),c.xp6(1),c.Q6J("formControl",t.name),c.xp6(3),c.Oqu(c.lcZ(5,13,t.translationPrefix+".form.field.trunksets.label")),c.xp6(2),c.Q6J("value",t.numberRoutingDialogData.trunksetId),c.xp6(1),c.Q6J("ngForOf",c.lcZ(8,15,t.trunksets$)),c.xp6(4),c.Oqu(c.lcZ(12,17,t.translationPrefix+".form.field.numberblock.label")),c.xp6(2),c.Q6J("value",t.numberRoutingDialogData.trunkId),c.xp6(1),c.Q6J("ngForOf",t.allNumberblocks),c.xp6(1),c.Q6J("ngIf",t.allNumberblockEntries),c.xp6(1),c.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.userHasSelectedNumberblock&&!t.name.dirty))},directives:[h.F,o.JL,o.sg,g.Y,o.JJ,o.oH,f.KE,f.hX,b.gD,o.u,_.sg,_.O5,x.c,v.ey,k.Ub,k.vS],pipes:[C.X$,_.Ov,T.E],styles:[".number-routing-modal__prefix-selection[_ngcontent-%COMP%]{border-bottom:.1rem solid #d3d3d3;border-top:.1rem solid #d3d3d3;max-height:20rem;overflow-y:auto;padding:.5rem 0}.number-routing-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},48469:function(e,t,n){n.d(t,{C:function(){return P}});var i=n(18393),o=n(79765),a=n(45435),s=n(46782),r=n(88002),c=n(37716),l=n(8307),d=n(22238),u=n(5882),m=n(38538),p=n(45832),h=n(83282),g=n(19885),f=n(17512),b=n(50256),_=n(22893),x=n(48843),v=n(134),k=n(81756),C=n(79764),T=n(29790),A=n(38583);const S=["customPrefixAmountTemplate"];function y(e,t){if(1&e&&(c.TgZ(0,"div",3),c._uU(1),c.qZA()),2&e){const e=t.element;c.xp6(1),c.hij(" ",e.numberblockIds.length||"-"," ")}}let P=(()=>{class e{constructor(e,t,n,i,a,s,r,c,l,d,u,m){this.router=e,this.dialog=t,this.confirmDialogsService=n,this.dataTableService=i,this.snackBarService=a,this.dataTableMessageService=s,this.dataTableLazyLoadingService=r,this.numberRoutingDataService=c,this.trunksetDataService=l,this.numberblockDataService=d,this.nconnectAccountSelectionService=u,this.nconnectShortcutsService=m,this.ngUnsubscribe=new o.xQ,this.componentTranslationKey="number_routing",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.numberblockSelectionLoaded=!1}ngOnInit(){this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(()=>{this.numberRoutingData$=this.getInitialTableData(),this.getAllNumberBlocks()}),this.listenForNconnectShortcutEvents()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberRoutingDataService.getNumberRoutings("",this.dataTableLazyLoadingService.currentPage))}deleteNumberRouting(e){this.dataTableService.deleteTableItem(this.numberRoutingDataService.deleteNumberRouting(e.TRUNKSET_ID,e.ID),e.ID,this.componentTranslationKey)}editNumberRouting(e){this.openNumberRoutingModal(e).pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.editTableItem(this.numberRoutingDataService.updateNumberRouting(e),this.componentTranslationKey)})}createNumberRouting(){this.openNumberRoutingModal().pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.createTableItem(this.numberRoutingDataService.createNumberRouting(e),this.componentTranslationKey)})}getAllNumberBlocks(){this.numberblockDataService.getNumberblocks().pipe((0,r.U)(e=>e.data),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.allNumberblocks=e,this.numberblockSelectionLoaded=!0})}openNumberRoutingModal(e){return this.dialog.open(i.w,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:e?"edit":"create",allNumberblocks:this.allNumberblocks,numberRoutingId:null==e?void 0:e.ID,name:null==e?void 0:e.NAME,trunkId:null==e?void 0:e.TRUNK_ID,trunksetId:null==e?void 0:e.TRUNKSET_ID,numberblockIds:null==e?void 0:e.numberblockIds,component:this.componentTranslationKey}}}getInitialTableData(){return this.dataTableService.getInitialTableData(this.numberRoutingDataService.getNumberRoutings())}listenForNconnectShortcutEvents(){this.nconnectShortcutsService.addButtonClicked$.pipe((0,a.h)(e=>e===this.componentTranslationKey),(0,s.R)(this.ngUnsubscribe)).subscribe(()=>{this.createNumberRouting(),this.nconnectShortcutsService.resetNconnectComponent()})}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME"},{title:`${this.translationPrefix}.table.column.numberblock`,columnNameId:"FORMAT_DISPLAY"},{title:`${this.translationPrefix}.table.column.prefix_amount`,columnNameId:"numberblockIds",sortingDisabled:!0,customCellTemplate:this.customPrefixAmountTemplate},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.F0),c.Y36(d.uw),c.Y36(u.U),c.Y36(m.n),c.Y36(p.c),c.Y36(h.D),c.Y36(g.Y),c.Y36(f.v),c.Y36(b.R),c.Y36(_.C),c.Y36(x.c),c.Y36(v.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["number-routing"]],viewQuery:function(e,t){if(1&e&&c.Gf(S,7),2&e){let e;c.iGM(e=c.CRH())&&(t.customPrefixAmountTemplate=e.first)}},decls:7,vars:12,consts:[[3,"isAdminHeaderButtonDisabled","title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customPrefixAmountTemplate",""],[1,"number-routing__prefix-amount"]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createNumberRouting()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deleteNumberRouting(e)})("editButtonClicked",function(e){return t.editNumberRouting(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,y,2,1,"ng-template",null,2,c.W1O),c.qZA()),2&e&&(c.Q6J("isAdminHeaderButtonDisabled",!t.numberblockSelectionLoaded)("title",c.lcZ(1,6,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,8,t.numberRoutingData$))("isLazyLoadingPossible",c.lcZ(4,10,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[k.Z,C.Q],pipes:[T.X$,A.Ov],encapsulation:2}),e})()},28019:function(e,t,n){n.d(t,{b:function(){return w}});var i=n(22238),o=n(3679),a=n(87519),s=n(54395),r=n(88002),c=n(45435),l=n(43190),d=n(46782),u=n(90980),m=n(79765),p=n(37716),h=n(90500),g=n(89521),f=n(88589),b=n(74162),_=n(98295),x=n(67441),v=n(38583),k=n(83166),C=n(42070),T=n(72458),A=n(29790);function S(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-option",9),p.NdJ("onSelectionChange",function(){const t=p.CHM(e).$implicit,n=p.oxw();return n.setTrunkId(+t.TRUNK_ID),n.validatePrefixLength(t)}),p._uU(1),p.ALo(2,"nconnectPhoneNumber"),p.qZA()}if(2&e){const e=t.$implicit;p.Q6J("value",+e.INBOUND_TRUNK_NUMBER_ID),p.xp6(1),p.hij(" ",p.lcZ(2,2,e)," ")}}function y(e,t){if(1&e&&(p.TgZ(0,"mat-hint"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",p.lcZ(2,1,e.translationPrefix+".form.field.prefix.error.range")," ")}}function P(e,t){if(1&e&&(p.TgZ(0,"mat-error"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",p.lcZ(2,1,e.translationPrefix+".form.field.prefix.error.not_selectable")," ")}}function I(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"admin.nconnect.common_form.error.field_required")," "))}function O(e,t){1&e&&(p.TgZ(0,"mat-error"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e&&(p.xp6(1),p.hij(" ",p.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}const Z=function(e){return{maxLength:e}};function M(e,t){if(1&e&&(p.TgZ(0,"mat-error"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e){const e=p.oxw();p.xp6(1),p.hij(" ",p.xi3(2,1,"admin.nconnect.common_form.error.numberTooLong",p.VKq(4,Z,e.maxPrefixInputLength))," ")}}let w=(()=>{class e{constructor(e,t,n,i,o){this.dialogRef=e,this.nconnectModalService=t,this.numberblockEntryDataService=n,this.nconnectPhoneNumberPipe=i,this.data=o,this.ngUnsubscribe=new m.xQ,this.isEditModal=!1,this.maxPhoneNumberLength=20,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.isNumblockExceeded=!1}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm(),this.listenForFormGroupChanges()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}closeDialog(e){this.dialogRef.close(e)}onSubmit(e){this.closeDialog(e)}setTrunkId(e){this.selectedTrunkId=e}validatePrefixLength(e){var t;this.selectedPhoneNumberLength=this.nconnectPhoneNumberPipe.transform(e,null,!0).length,this.maxPrefixInputLength=this.maxPhoneNumberLength-this.selectedPhoneNumberLength,null===(t=this.formGroup.controls)||void 0===t||t.prefix.setValidators([o.kI.required,o.kI.pattern(/^[0-9]*$/),u.b.maxPhoneNumberLength(this.maxPrefixInputLength)])}initModal(){this.isEditModal="edit"===this.data.type,this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal),this.modalTitle=this.getModalTitle(),this.numberblockEntries=this.data.numberblockEntries.filter(e=>!+e.IS_CUSTOM)}listenForFormGroupChanges(){this.formGroup.valueChanges.pipe((0,a.x)((e,t)=>this.distinctUntilFormGroupChanged(e,t)),(0,s.b)(300),(0,r.U)(()=>this.formGroup.getRawValue()),(0,c.h)(e=>this.filterPrefixFormDataValues(e)),(0,l.w)(e=>this.numberblockEntryDataService.checkPrefixValidity(this.selectedTrunkId,e)),(0,d.R)(this.ngUnsubscribe)).subscribe(e=>{this.setErrorWhenPrefixAlreadyUsed(!e.data[0].isPrefixFree),this.isNumblockExceeded=e.data[0].isNumblockExceeded})}distinctUntilFormGroupChanged(e,t){return e.prefix===t.prefix&&e.parentInboundTrunkNumberId===t.parentInboundTrunkNumberId}filterPrefixFormDataValues(e){return!!e.prefix&&!!e.parentInboundTrunkNumberId&&!!e.prefix.toString().match(/^[0-9]*$/i)}setErrorWhenPrefixAlreadyUsed(e){e?(this.prefix.setErrors({isPrefixAlreadyUsed:!0}),this.prefix.markAsTouched()):this.prefix.setErrors(null),this.prefix.updateValueAndValidity()}getModalTitle(){return this.nconnectModalService.getModalTitle("numberblock",this.isEditModal)}createFormControls(){var e,t;this.parentInboundTrunkNumberId=new o.NI({value:Number(null===(e=this.data.numberblockEntry)||void 0===e?void 0:e.PARENT_INBOUND_TRUNK_NUMBER_ID)||this.selectedTrunkId,disabled:this.isEditModal},o.kI.required),this.prefix=new o.NI(null===(t=this.data.numberblockEntry)||void 0===t?void 0:t.customPrefix,[o.kI.required,o.kI.pattern(/^[0-9]*$/),u.b.maxPhoneNumberLength(this.maxPrefixInputLength)])}createForm(){this.formGroup=new o.cw({parentInboundTrunkNumberId:this.parentInboundTrunkNumberId,prefix:this.prefix})}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(i.so),p.Y36(h.K),p.Y36(g.b),p.Y36(f.E),p.Y36(i.WI))},e.\u0275cmp=p.Xpm({type:e,selectors:[["numberblock-entry-modal"]],decls:16,vars:14,consts:[["data-e2e","admin-number-block-entry-modal-fragment",1,"numberblock-entry-modal",3,"formGroup","modalTitle","ngSubmit"],[1,"numberblock-entry-modal__prefix"],["appearance","fill"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number","formControlName","parentInboundTrunkNumberId"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number--option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","fill",1,"numberblock-entry-modal__prefix__number"],["autocomplete","off","data-e2e","admin-number-block-entry-modal-fragment__prefix--input","formControlName","prefix","matInput","","min","0","type","text"],[4,"ngIf"],["e2e","admin-number-block-entry-modal-fragment",1,"numberblock-entry-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number--option",3,"value","onSelectionChange"]],template:function(e,t){1&e&&(p.TgZ(0,"nconnect-voice-modal",0),p.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),p.TgZ(1,"div",1),p.TgZ(2,"mat-form-field",2),p.TgZ(3,"mat-label"),p._uU(4),p.ALo(5,"translate"),p.qZA(),p.TgZ(6,"mat-select",3),p.YNc(7,S,3,4,"mat-option",4),p.qZA(),p.qZA(),p.TgZ(8,"mat-form-field",5),p._UZ(9,"input",6),p.YNc(10,y,3,3,"mat-hint",7),p.YNc(11,P,3,3,"mat-error",7),p.YNc(12,I,3,3,"mat-error",7),p.YNc(13,O,3,3,"mat-error",7),p.YNc(14,M,3,6,"mat-error",7),p.qZA(),p.qZA(),p.TgZ(15,"footer-actions",8),p.NdJ("cancelClick",function(){return t.closeDialog()}),p.qZA(),p.qZA()),2&e&&(p.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),p.xp6(4),p.hij(" ",p.lcZ(5,12,t.translationPrefix+".form.field.parentInboundTrunkNumber.label")," "),p.xp6(3),p.Q6J("ngForOf",t.numberblockEntries),p.xp6(3),p.Q6J("ngIf",t.isNumblockExceeded),p.xp6(1),p.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.isPrefixAlreadyUsed),p.xp6(1),p.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.required),p.xp6(1),p.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.invalidPhoneNumber),p.xp6(1),p.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.phoneNumberTooLong),p.xp6(1),p.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[b.F,o.JL,o.sg,_.KE,_.hX,x.gD,o.JJ,o.u,v.sg,o.Fj,k.Nt,v.O5,C.c,T.ey,_.bx,_.TO],pipes:[A.X$,f.E],styles:[".numberblock-entry-modal[_ngcontent-%COMP%]{max-width:50rem}.numberblock-entry-modal__prefix[_ngcontent-%COMP%]{display:flex}.numberblock-entry-modal__prefix__number[_ngcontent-%COMP%]{margin-left:1.5rem;max-width:20rem}.numberblock-entry-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},28313:function(e,t,n){n.d(t,{x:function(){return N}});var i=n(45435),o=n(43190),a=n(46782),s=n(68307),r=n(79765),c=n(28019),l=n(37716),d=n(8307),u=n(22238),m=n(5882),p=n(22893),h=n(89521),g=n(47444),f=n(38538),b=n(83282),_=n(19885),x=n(48843),v=n(81756),k=n(79764),C=n(38583),T=n(55821),A=n(56436),S=n(63743),y=n(88589),P=n(29790);const I=["customPrefixTemplate"],O=["customBlockLengthTemplate"];function Z(e,t){1&e&&(l._uU(0),l.ALo(1,"nconnectPhoneNumber")),2&e&&l.hij(" ",l.lcZ(1,1,t.element)," ")}function M(e,t){if(1&e&&(l.TgZ(0,"div",5),l._UZ(1,"app-svg-icon",6),l.TgZ(2,"span",7),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"hoverbox",8),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA()),2&e){const e=l.oxw(2);l.xp6(3),l.hij(" ",l.lcZ(4,3,e.translationPrefix+".block_length_exceeded")," "),l.xp6(2),l.Q6J("showAlways",!0),l.xp6(1),l.hij(" ",l.lcZ(7,5,e.translationPrefix+".block_length_exceeded_hover-info")," ")}}function w(e,t){1&e&&l.YNc(0,M,8,7,"div",4),2&e&&l.Q6J("ngIf",+t.element.IS_NUMBLOCK_EXCEEDED)}let N=(()=>{class e{constructor(e,t,n,i,o,a,s,c,l,d,u){this.route=e,this.router=t,this.dialog=n,this.confirmDialogsService=i,this.numberblockDataService=o,this.numberblockEntryDataService=a,this.nconnectItemProviderService=s,this.dataTableService=c,this.dataTableMessageService=l,this.dataTableLazyLoadingService=d,this.nconnectAccountSelectionService=u,this.ngUnsubscribe=new r.xQ,this.componentTranslationKey="numberblock_entry",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}ngOnInit(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,i.h)(e=>!!e),(0,o.w)(()=>this.route.params),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{!e.id||(this.selectedNumberblockId=Number(e.id),this.numberblockEntryData$=this.getInitialTableData(this.selectedNumberblockId))}),this.tableConfig=this.getTableConfig(),this.numberblockEntryDataService.numberblockEntryDataError$.pipe((0,a.R)(this.ngUnsubscribe)).subscribe(()=>this.router.navigate(["../"],{relativeTo:this.route}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberblockEntryDataService.getNumberblockEntries(this.selectedNumberblockId,"",this.dataTableLazyLoadingService.currentPage))}createNumberblockEntry(){this.openNumberblockModal().pipe((0,i.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.createTableItem(this.numberblockEntryDataService.createNumberblockEntry(this.selectedNumberblockId,e),this.componentTranslationKey)})}editNumberblockEntry(e){this.openNumberblockModal(e).pipe((0,i.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(t=>{this.dataTableService.editTableItem(this.numberblockEntryDataService.updateNumberblockEntry(e,t),this.componentTranslationKey)})}deleteNumberblockEntry(e){this.dataTableService.deleteTableItem(this.numberblockEntryDataService.deleteNumberblockEntry(e),e.INBOUND_TRUNK_NUMBER_ID,this.componentTranslationKey)}getInitialTableData(e){return this.dataTableService.getInitialTableData(this.numberblockEntryDataService.getNumberblockEntries(e).pipe((0,s.b)(e=>{const t=e.data[0];this.numberblockEntries=e.data,this.setNumberblockRange(t),this.nconnectItemProviderService.nconnectItemNameAvailableFromNavigation||this.nconnectItemProviderService.setNconnectItemName(t)})))}setNumberblockRange(e){this.numberblockStart=e.NUMBERBLOCK_START,this.numberblockEnd=e.NUMBERBLOCK_END}openNumberblockModal(e){return this.dialog.open(c.b,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:e?"edit":"create",numberblockEntry:e,numberblockEntries:this.numberblockEntries,numberblockStart:this.numberblockStart,numberblockEnd:this.numberblockEnd,component:this.componentTranslationKey}}}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.prefix`,columnNameId:"PILOT",customCellTemplate:this.customPrefixTemplate},{columnNameId:"IS_NUMBLOCK_EXCEEDED",customCellTemplate:this.customBlockLengthWarningTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.gz),l.Y36(d.F0),l.Y36(u.uw),l.Y36(m.U),l.Y36(p.C),l.Y36(h.b),l.Y36(g.U),l.Y36(f.n),l.Y36(b.D),l.Y36(_.Y),l.Y36(x.c))},e.\u0275cmp=l.Xpm({type:e,selectors:[["numberblock-entry"]],viewQuery:function(e,t){if(1&e&&(l.Gf(I,7),l.Gf(O,7)),2&e){let e;l.iGM(e=l.CRH())&&(t.customPrefixTemplate=e.first),l.iGM(e=l.CRH())&&(t.customBlockLengthWarningTemplate=e.first)}},decls:9,vars:11,consts:[[3,"title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customPrefixTemplate",""],["customBlockLengthTemplate",""],["class","numberblock-detail__exceeded-info","data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info","appHoverbox","",4,"ngIf"],["data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info","appHoverbox","",1,"numberblock-detail__exceeded-info"],["fill","","icon","attention","size","medium",1,"attention-icon"],[1,"numberblock-detail__block-length-check"],["data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info-hoverbox",3,"showAlways"]],template:function(e,t){1&e&&(l.TgZ(0,"admin-list-header",0),l.NdJ("addButtonClicked",function(){return t.createNumberblockEntry()}),l.ALo(1,"async"),l.qZA(),l.TgZ(2,"data-table",1),l.NdJ("deleteButtonClicked",function(e){return t.deleteNumberblockEntry(e)})("editButtonClicked",function(e){return t.editNumberblockEntry(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),l.ALo(3,"async"),l.ALo(4,"async"),l.YNc(5,Z,2,3,"ng-template",null,2,l.W1O),l.YNc(7,w,1,1,"ng-template",null,3,l.W1O),l.qZA()),2&e&&(l.Q6J("title",l.lcZ(1,5,t.pageTitle$)),l.xp6(2),l.Q6J("dataTableSourceInput",l.lcZ(3,7,t.numberblockEntryData$))("isLazyLoadingPossible",l.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[v.Z,k.Q,C.O5,T.r,A.u,S.B],pipes:[C.Ov,y.E,P.X$],styles:[".numberblock-detail__block-length-check[_ngcontent-%COMP%]{color:#f90;font-weight:bold}.attention-icon[_ngcontent-%COMP%]{fill:#f90}.numberblock-detail__exceeded-info[_ngcontent-%COMP%]{align-items:center;display:flex}"]}),e})()},15809:function(e,t,n){n.d(t,{X:function(){return y}});var i=n(79765),o=n(45435),a=n(46782),s=n(37716),r=n(8307),c=n(22893),l=n(47444),d=n(19885),u=n(38538),m=n(48843),p=n(81756),h=n(79764),g=n(38583),f=n(29790),b=n(88589);const _=["customPrefixTemplate"],x=["customNumberblockTemplate"],v=["customPrefixAmountTemplate"];function k(e,t){1&e&&(s._uU(0),s.ALo(1,"nconnectPhoneNumber")),2&e&&s.hij(" ",s.lcZ(1,1,t.element)," ")}function C(e,t){if(1&e&&s._uU(0),2&e){const e=t.element;s.AsE(" (",e.NUMBERBLOCK_START,"-",e.NUMBERBLOCK_END,") ")}}function T(e,t){if(1&e&&(s.ynx(0),s._uU(1),s.BQk()),2&e){const e=s.oxw().element;s.xp6(1),s.hij(" ",e.numberOfPrefixes," ")}}function A(e,t){if(1&e&&(s.TgZ(0,"div",7),s._uU(1),s.qZA()),2&e){const e=s.oxw().element;s.xp6(1),s.hij(" ",e.numberOfPrefixes," ")}}function S(e,t){if(1&e&&(s.YNc(0,T,2,1,"ng-container",5),s.YNc(1,A,2,1,"ng-template",null,6,s.W1O)),2&e){const e=t.element,n=s.MAs(2);s.Q6J("ngIf",e.numberOfPrefixes<=1)("ngIfElse",n)}}let y=(()=>{class e{constructor(e,t,n,o,a,s,r){this.router=e,this.route=t,this.numberblockDataService=n,this.nconnectItemProviderService=o,this.dataTableLazyLoadingService=a,this.dataTableService=s,this.nconnectAccountSelectionService=r,this.ngUnsubscribe=new i.xQ,this.componentTranslationKey="numberblock",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}ngOnInit(){this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(e=>!!e),(0,a.R)(this.ngUnsubscribe)).subscribe(()=>{this.numberblockData$=this.getInitialTableData()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberblockDataService.getNumberblocks("",this.dataTableLazyLoadingService.currentPage))}openTableEntries(e){this.nconnectItemProviderService.setNconnectItemName(e),this.router.navigate([`../${e.TRUNK_ID}`],{relativeTo:this.route})}getInitialTableData(){return this.dataTableService.getInitialTableData(this.numberblockDataService.getNumberblocks())}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.prefix`,columnNameId:"prefix",customCellTemplate:this.customPrefixTemplate,sortingDisabled:!0},{title:`${this.translationPrefix}.table.column.numberblock`,columnNameId:"numberblock",customCellTemplate:this.customNumberblockTemplate,sortingDisabled:!0},{title:`${this.translationPrefix}.table.column.prefix_amount`,columnNameId:"numberOfPrefixes",customCellTemplate:this.customPrefixAmountTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.F0),s.Y36(r.gz),s.Y36(c.C),s.Y36(l.U),s.Y36(d.Y),s.Y36(u.n),s.Y36(m.c))},e.\u0275cmp=s.Xpm({type:e,selectors:[["numberblock"]],viewQuery:function(e,t){if(1&e&&(s.Gf(_,7),s.Gf(x,7),s.Gf(v,7)),2&e){let e;s.iGM(e=s.CRH())&&(t.customPrefixTemplate=e.first),s.iGM(e=s.CRH())&&(t.customNumberblockTemplate=e.first),s.iGM(e=s.CRH())&&(t.customPrefixAmountTemplate=e.first)}},decls:11,vars:13,consts:[[3,"showActionButton","title"],["customEditButton","bfl_view",3,"dataTableSourceInput","hideAllDeleteButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","editButtonClicked","endOfListReached"],["customPrefixTemplate",""],["customNumberblockTemplate",""],["customPrefixAmountTemplate",""],[4,"ngIf","ngIfElse"],["showPrefixEntriesInHoverBox",""],[1,"numberblock-list__prefix-amount"]],template:function(e,t){1&e&&(s._UZ(0,"admin-list-header",0),s.ALo(1,"translate"),s.TgZ(2,"data-table",1),s.NdJ("editButtonClicked",function(e){return t.openTableEntries(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),s.ALo(3,"async"),s.ALo(4,"async"),s.YNc(5,k,2,3,"ng-template",null,2,s.W1O),s.YNc(7,C,1,2,"ng-template",null,3,s.W1O),s.YNc(9,S,3,2,"ng-template",null,4,s.W1O),s.qZA()),2&e&&(s.Q6J("showActionButton",!1)("title",s.lcZ(1,7,t.pageTitle)),s.xp6(2),s.Q6J("dataTableSourceInput",s.lcZ(3,9,t.numberblockData$))("hideAllDeleteButtons",!0)("isLazyLoadingPossible",s.lcZ(4,11,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[p.Z,h.Q,g.O5],pipes:[f.X$,g.Ov,b.E],encapsulation:2}),e})()},23111:function(e,t,n){n.d(t,{H:function(){return x}});var i=n(22238),o=n(3679),a=n(37716),s=n(45832),r=n(90500),c=n(74162),l=n(38583),d=n(98295),u=n(67441),m=n(72458),p=n(82613),h=n(97597),g=n(42070),f=n(29790);function b(e,t){if(1&e&&a._UZ(0,"name-input-field",19),2&e){const e=a.oxw();a.Q6J("formControl",e.name)}}function _(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"footer-actions",20),a.NdJ("cancelClick",function(){return a.CHM(e),a.oxw().closeDialog()}),a.qZA()}if(2&e){const e=a.oxw();a.Q6J("btnCancelCaption",e.buttonCaptionCancel)("btnSaveCaption",e.buttonCaptionSubmit)("saveDisabled",!e.formGroup.valid||!e.formGroup.dirty)}}let x=(()=>{class e{constructor(e,t,n,i){this.snackBarService=e,this.dialogRef=t,this.data=n,this.nconnectModalService=i,this.isGlobalPbxEndpointTemplate=!1,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.isEditModal=!1}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm(),this.isGlobalPbxEndpointTemplate&&this.formGroup.disable()}closeDialog(e){this.dialogRef.close(e)}onSubmit(e){this.closeDialog(e)}initModal(){this.isGlobalPbxEndpointTemplate=null===this.data.customerId,this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}getModalTitle(){return this.isGlobalPbxEndpointTemplate?this.data.name:this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}createFormControls(){this.name=new o.NI(this.data.name||""),this.clipStyle=new o.NI(this.data.clipStyle||"AUTO",o.kI.required),this.numberFormat=new o.NI(this.data.numberFormat||"E164",o.kI.required),this.authStyle=new o.NI({value:this.data.authStyle||"REGISTRATION",disabled:this.isEditModal},o.kI.required),this.inboundRuriFormat=new o.NI(this.data.inboundRuriFormat||"KNUM",o.kI.required)}createForm(){this.formGroup=new o.cw({name:this.name,clipStyle:this.clipStyle,numberFormat:this.numberFormat,authStyle:this.authStyle,inboundRuriFormat:this.inboundRuriFormat})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.c),a.Y36(i.so),a.Y36(i.WI),a.Y36(r.K))},e.\u0275cmp=a.Xpm({type:e,selectors:[["pbx-endpoint-template-modal"]],decls:47,vars:39,consts:[["data-e2e","admin-pbx-endpoint-template-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-pbx-endpoint-template-modal-fragment__name--input",3,"formControl",4,"ngIf"],["appearance","fill"],["formControlName","numberFormat","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format--dropdown"],["value","E164","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-e164--option"],["value","NATIONAL","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-national--option"],["value","LOCAL","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-local--option"],[1,"pbx-endpoint-template-modal__auth-title"],["formControlName","authStyle",1,"pbx-endpoint-template-modal__auth-methods"],["value","REGISTRATION","data-e2e","admin-pbx-endpoint-template-modal-fragment__auth-registration--radio",1,"pbx-endpoint-template-modal__auth-method"],["value","IP","data-e2e","admin-pbx-endpoint-template-modal-fragment__auth-ip--radio",1,"pbx-endpoint-template-modal__auth-method"],["appearance","fill",1,"pbx-endpoint-template-modal__clip"],["formControlName","clipStyle","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style--dropdown"],["value","AUTO","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style-auto--option"],["value","FROMNAME","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style-from-name--option"],["formControlName","inboundRuriFormat","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-formats--dropdown"],["value","KNUM","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-format-knum--option"],["value","E164","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-format-e164--option"],["class","pbx-endpoint-template-modal__footer-actions","e2e","admin-pbx-endpoint-template-modal-fragment",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick",4,"ngIf"],["data-e2e","admin-pbx-endpoint-template-modal-fragment__name--input",3,"formControl"],["e2e","admin-pbx-endpoint-template-modal-fragment",1,"pbx-endpoint-template-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"]],template:function(e,t){1&e&&(a.TgZ(0,"nconnect-voice-modal",0),a.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),a.YNc(1,b,1,1,"name-input-field",1),a.TgZ(2,"mat-form-field",2),a.TgZ(3,"mat-label"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.TgZ(6,"mat-select",3),a.TgZ(7,"mat-option",4),a._uU(8),a.ALo(9,"translate"),a.qZA(),a.TgZ(10,"mat-option",5),a._uU(11),a.ALo(12,"translate"),a.qZA(),a.TgZ(13,"mat-option",6),a._uU(14),a.ALo(15,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(16,"p",7),a._uU(17),a.ALo(18,"translate"),a.qZA(),a.TgZ(19,"mat-radio-group",8),a.TgZ(20,"mat-radio-button",9),a._uU(21),a.ALo(22,"translate"),a.qZA(),a.TgZ(23,"mat-radio-button",10),a._uU(24),a.ALo(25,"translate"),a.qZA(),a.qZA(),a.TgZ(26,"mat-form-field",11),a.TgZ(27,"mat-label"),a._uU(28),a.ALo(29,"translate"),a.qZA(),a.TgZ(30,"mat-select",12),a.TgZ(31,"mat-option",13),a._uU(32),a.ALo(33,"translate"),a.qZA(),a.TgZ(34,"mat-option",14),a._uU(35),a.ALo(36,"translate"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(37,"mat-form-field",2),a.TgZ(38,"mat-label"),a._uU(39),a.ALo(40,"translate"),a.qZA(),a.TgZ(41,"mat-select",15),a.TgZ(42,"mat-option",16),a._uU(43),a.qZA(),a.TgZ(44,"mat-option",17),a._uU(45),a.qZA(),a.qZA(),a.qZA(),a.YNc(46,_,1,3,"footer-actions",18),a.qZA()),2&e&&(a.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),a.xp6(1),a.Q6J("ngIf",!t.isGlobalPbxEndpointTemplate),a.xp6(3),a.Oqu(a.lcZ(5,17,t.translationPrefix+".form.field.number_format.label")),a.xp6(4),a.hij(" ",a.lcZ(9,19,t.translationPrefix+".form.field.number_format.option.international")," "),a.xp6(3),a.hij(" ",a.lcZ(12,21,t.translationPrefix+".form.field.number_format.option.national")," "),a.xp6(3),a.hij(" ",a.lcZ(15,23,t.translationPrefix+".form.field.number_format.option.local")," "),a.xp6(3),a.hij(" ",a.lcZ(18,25,t.translationPrefix+".form.field.authentication.label"),": "),a.xp6(4),a.hij("",a.lcZ(22,27,t.translationPrefix+".form.field.authentication.option.register")," "),a.xp6(3),a.hij("",a.lcZ(25,29,t.translationPrefix+".form.field.authentication.option.ip")," "),a.xp6(4),a.Oqu(a.lcZ(29,31,t.translationPrefix+".form.field.clip_style.label")),a.xp6(4),a.hij(" ",a.lcZ(33,33,t.translationPrefix+".form.field.clip_style.option.from_id")," "),a.xp6(3),a.hij(" ",a.lcZ(36,35,t.translationPrefix+".form.field.clip_style.option.from_name")," "),a.xp6(4),a.Oqu(a.lcZ(40,37,t.translationPrefix+".form.field.inbound_ruri_format.label")),a.xp6(4),a.hij(" ","KNUM"," "),a.xp6(2),a.hij(" ","E164"," "),a.xp6(1),a.Q6J("ngIf",!t.isGlobalPbxEndpointTemplate))},directives:[c.F,o.JL,o.sg,l.O5,d.KE,d.hX,u.gD,o.JJ,o.u,m.ey,p.VQ,p.U0,h.Y,o.oH,g.c],pipes:[f.X$],styles:[".pbx-endpoint-template-modal__auth-title[_ngcontent-%COMP%]{margin:1rem 0}.pbx-endpoint-template-modal__auth-methods[_ngcontent-%COMP%]{margin:0 0 1.5rem}.pbx-endpoint-template-modal__auth-method[_ngcontent-%COMP%]:first-of-type{margin-right:2.5rem}.pbx-endpoint-template-modal__clip[_ngcontent-%COMP%]{margin-top:1.5rem}.pbx-endpoint-template-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},84451:function(e,t,n){n.d(t,{m:function(){return w}});var i=n(79765),o=n(43190),a=n(45435),s=n(46782),r=n(23111),c=n(37716),l=n(8307),d=n(22238),u=n(50112),m=n(5882),p=n(38538),h=n(19885),g=n(48843),f=n(89447),b=n(50256),_=n(47444),x=n(134),v=n(81756),k=n(79764),C=n(38583),T=n(78023),A=n(29790),S=n(16891);const y=["customTypeTemplate"],P=["customButtonTemplate"];function I(e,t){1&e&&(c._uU(0),c.ALo(1,"tableItemType")),2&e&&c.hij(" ",c.lcZ(1,1,t.element.CUSTOMER_ID)," ")}function O(e,t){if(1&e){const e=c.EpF();c.ynx(0),c.TgZ(1,"app-button",7),c.NdJ("appButtonClick",function(){c.CHM(e);const t=c.oxw().element,n=c.oxw();return t.isUsed?"":n.deletePbxEndpointTemplate(t)}),c.qZA(),c.TgZ(2,"app-button",8),c.NdJ("appButtonClick",function(){c.CHM(e);const t=c.oxw().element;return c.oxw().editPbxEndpointTemplate(t)}),c.qZA(),c.BQk()}if(2&e){const e=c.oxw().element,t=c.oxw();c.xp6(1),c.Q6J("iconFill",e.isUsed?"grey-color":"button-color")("hoverTextTranslationKey",e.isUsed?t.translationPrefix+".table.hoverbox_hint.delete_disabled_for_custom_template":"")("isHoverboxVisible",e.isUsed)}}function Z(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"app-button",9),c.NdJ("appButtonClick",function(){c.CHM(e);const t=c.oxw().element;return c.oxw().viewPbxEndpointTemplate(t)}),c.qZA()}}function M(e,t){if(1&e&&(c.YNc(0,O,3,3,"ng-container",5),c.YNc(1,Z,1,0,"ng-template",null,6,c.W1O)),2&e){const e=t.element,n=c.MAs(2);c.Q6J("ngIf",e.CUSTOMER_ID)("ngIfElse",n)}}let w=(()=>{class e{constructor(e,t,n,o,a,s,r,c,l,d,u,m){this.router=e,this.route=t,this.dialog=n,this.pbxEndpointTemplateDataService=o,this.confirmDialogsService=a,this.dataTableService=s,this.dataTableLazyLoadingService=r,this.nconnectAccountSelectionService=c,this.accountService=l,this.trunksetDataService=d,this.nconnectItemProviderService=u,this.nconnectShortcutsService=m,this.ngUnsubscribe=new i.xQ,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.componentTranslationKey="pbx_endpoint_template",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`}ngOnInit(){this.tableConfig=this.getTableConfig(),this.accountService.selectedAccountModules$.pipe((0,o.w)(()=>this.trunksetDataService.trunksets$),(0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{(null==e?void 0:e.length)?this.nconnectItemProviderService.setNconnectItemName(e[0]):this.router.navigate(["../"],{relativeTo:this.route})}),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(()=>{this.pbxEndpointTemplateData$=this.getInitialTableData()}),this.listenForNconnectShortcutEvents()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.pbxEndpointTemplateDataService.getPbxEndpointTemplates("",this.dataTableLazyLoadingService.currentPage))}deletePbxEndpointTemplate(e){this.dataTableService.deleteTableItem(this.pbxEndpointTemplateDataService.deletePbxEndpointTemplate(e.ID),e.ID,this.componentTranslationKey)}editPbxEndpointTemplate(e){this.openPbxEndpointTemplateModal(e).pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(t=>{this.dataTableService.editTableItem(this.pbxEndpointTemplateDataService.updatePbxEndpointTemplate(e.ID,t),this.componentTranslationKey)})}viewPbxEndpointTemplate(e){this.openPbxEndpointTemplateModal(e)}createPbxEndpointTemplate(){this.openPbxEndpointTemplateModal().pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.dataTableService.createTableItem(this.pbxEndpointTemplateDataService.createPbxEndpointTemplate(e),this.componentTranslationKey)})}openPbxEndpointTemplateModal(e){return this.dialog.open(r.H,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:e?"edit":"create",pbxEndpointTemplateId:null==e?void 0:e.ID,name:null==e?void 0:e.NAME,customerId:null==e?void 0:e.CUSTOMER_ID,clipStyle:null==e?void 0:e.CLIP_STYLE,numberFormat:null==e?void 0:e.NUMBER_FORMAT,authStyle:null==e?void 0:e.AUTH_STYLE,inboundRuriFormat:null==e?void 0:e.INBOUND_RURI_FORMAT,component:this.componentTranslationKey}}}getInitialTableData(){return this.dataTableService.getInitialTableData(this.pbxEndpointTemplateDataService.getPbxEndpointTemplates())}listenForNconnectShortcutEvents(){this.nconnectShortcutsService.addButtonClicked$.pipe((0,a.h)(e=>e===this.componentTranslationKey),(0,s.R)(this.ngUnsubscribe)).subscribe(()=>{this.createPbxEndpointTemplate(),this.nconnectShortcutsService.resetNconnectComponent()})}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME"},{title:`${this.translationPrefix}.table.column.type`,columnNameId:"CUSTOMER_ID",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons",customButtonTemplate:this.customButtonTemplate}]}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(l.F0),c.Y36(l.gz),c.Y36(d.uw),c.Y36(u.p),c.Y36(m.U),c.Y36(p.n),c.Y36(h.Y),c.Y36(g.c),c.Y36(f.B),c.Y36(b.R),c.Y36(_.U),c.Y36(x.f))},e.\u0275cmp=c.Xpm({type:e,selectors:[["pbx-endpoint-template"]],viewQuery:function(e,t){if(1&e&&(c.Gf(y,7),c.Gf(P,7)),2&e){let e;c.iGM(e=c.CRH())&&(t.customTypeTemplate=e.first),c.iGM(e=c.CRH())&&(t.customButtonTemplate=e.first)}},decls:9,vars:11,consts:[[3,"title","addButtonClicked"],["activeSortColumn","CUSTOMER_ID","activeSortColumnSortDirection","desc",3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__customer-type"],["customTypeTemplate",""],["customButtonTemplate",""],[4,"ngIf","ngIfElse"],["showDefaultButtons",""],["iconName","delete","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick"],["iconName","edit","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__edit--button",3,"appButtonClick"],["iconName","info","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__info--button",3,"appButtonClick"]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createPbxEndpointTemplate()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deletePbxEndpointTemplate(e)})("editButtonClicked",function(e){return t.editPbxEndpointTemplate(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,I,2,3,"ng-template",2,3,c.W1O),c.YNc(7,M,3,2,"ng-template",null,4,c.W1O),c.qZA()),2&e&&(c.Q6J("title",c.lcZ(1,5,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,7,t.pbxEndpointTemplateData$))("isLazyLoadingPossible",c.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[v.Z,k.Q,C.O5,T.V],pipes:[A.X$,C.Ov,S.B],encapsulation:2}),e})()},15697:function(e,t,n){n.d(t,{X:function(){return K}});var i=n(79764),o=n(46782),a=n(37716),s=n(69553),r=n(19885),c=n(32789),l=n(65860),d=n(11494),u=n(38583),m=n(14944),p=n(78023),h=n(44163),g=n(38052),f=n(67961),b=n(29790),_=n(37833);function x(e,t){if(1&e&&(a.TgZ(0,"mat-header-cell",13),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw(2).$implicit;a.Q6J("className",a.lcZ(1,4,e))("disabled",e.sortingDisabled),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,e)),a.xp6(2),a.hij(" ",a.lcZ(5,8,e.title)," ")}}function v(e,t){}const k=function(e,t,n,i){return{element:e,column:t,index:n,last:i}};function C(e,t){if(1&e&&(a.TgZ(0,"mat-cell",15),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a.YNc(4,v,0,0,"ng-template",16),a.qZA(),a.qZA()),2&e){const e=t.$implicit,n=t.index,i=t.last,o=a.oxw(2).$implicit;a.Q6J("className",a.lcZ(1,4,o)),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,o)),a.xp6(2),a.Q6J("ngTemplateOutletContext",a.l5B(8,k,e,o,n,i))("ngTemplateOutlet",o.customCellTemplate)}}function T(e,t){1&e&&(a.ynx(0),a.YNc(1,x,6,10,"mat-header-cell",11),a.YNc(2,C,5,13,"mat-cell",12),a.BQk())}function A(e,t){if(1&e&&(a.TgZ(0,"mat-header-cell",13),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw(3).$implicit;a.Q6J("className",a.lcZ(1,4,e))("disabled",e.sortingDisabled),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,e)),a.xp6(2),a.hij(" ",a.lcZ(5,8,e.title)," ")}}function S(e,t){if(1&e&&(a.TgZ(0,"mat-cell",15),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.qZA(),a.qZA()),2&e){const e=t.$implicit,n=a.oxw(3).$implicit;a.Q6J("className",a.lcZ(1,3,n)),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,5,n)),a.xp6(2),a.hij(" ",e[n.columnNameId]," ")}}function y(e,t){1&e&&(a.ynx(0),a.YNc(1,A,6,10,"mat-header-cell",11),a.YNc(2,S,5,7,"mat-cell",12),a.BQk())}function P(e,t){if(1&e&&a.YNc(0,y,3,0,"ng-container",8),2&e){const e=a.oxw().$implicit,t=a.MAs(5);a.Q6J("ngIf","buttons"!==e.columnNameId)("ngIfElse",t)}}function I(e,t){1&e&&a._UZ(0,"mat-header-cell")}function O(e,t){}function Z(e,t){if(1&e&&(a.ynx(0),a.YNc(1,O,0,0,"ng-template",16),a.BQk()),2&e){const e=a.oxw(2),t=e.$implicit,n=e.index,i=e.last,o=a.oxw(2).$implicit;a.xp6(1),a.Q6J("ngTemplateOutletContext",a.l5B(2,k,t,o,n,i))("ngTemplateOutlet",o.customButtonTemplate)}}function M(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-button",24),a.NdJ("appButtonClick",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).deleteButtonClick(t)}),a.qZA()}}function w(e,t){if(1&e){const e=a.EpF();a.TgZ(0,"app-button",25),a.NdJ("appButtonClick",function(){a.CHM(e);const t=a.oxw(3).$implicit;return a.oxw(3).editButtonClick(t)}),a.qZA()}if(2&e){const e=a.oxw(6);a.Q6J("iconName",e.customEditButton)}}function N(e,t){if(1&e&&(a.YNc(0,M,1,0,"app-button",22),a.YNc(1,w,1,1,"app-button",23)),2&e){const e=a.oxw(5);a.Q6J("ngIf",!e.hideAllDeleteButtons),a.xp6(1),a.Q6J("ngIf",!e.hideAllEditButtons)}}function E(e,t){if(1&e&&(a.TgZ(0,"div",20),a.YNc(1,Z,2,7,"ng-container",8),a.YNc(2,N,2,2,"ng-template",null,21,a.W1O),a.qZA()),2&e){const e=a.MAs(3),t=a.oxw(3).$implicit;a.xp6(1),a.Q6J("ngIf",t.customButtonTemplate)("ngIfElse",e)}}function L(e,t){if(1&e&&(a.TgZ(0,"mat-cell"),a.YNc(1,E,4,2,"div",19),a.ALo(2,"isEditableDataTableItem"),a.qZA()),2&e){const e=t.$implicit;a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,e))}}function U(e,t){1&e&&(a.YNc(0,I,1,0,"mat-header-cell",17),a.YNc(1,L,3,3,"mat-cell",18))}function D(e,t){if(1&e&&(a.ynx(0,7),a.YNc(1,T,3,0,"ng-container",8),a.YNc(2,P,1,2,"ng-template",null,9,a.W1O),a.YNc(4,U,2,0,"ng-template",null,10,a.W1O),a.BQk()),2&e){const e=t.$implicit,n=a.MAs(3);a.Q6J("matColumnDef",e.columnNameId),a.xp6(1),a.Q6J("ngIf",e.customCellTemplate)("ngIfElse",n)}}function B(e,t){1&e&&a._UZ(0,"mat-header-row",26)}const q=function(e){return{disabled:e}};function R(e,t){1&e&&(a._UZ(0,"mat-row",27),a.ALo(1,"isEditableDataTableItem")),2&e&&a.Q6J("ngClass",a.VKq(3,q,!a.lcZ(1,1,t.$implicit)))}function $(e,t){1&e&&a._UZ(0,"app-spinner",28)}function F(e,t){if(1&e&&(a.TgZ(0,"div",31),a.TgZ(1,"span"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()),2&e){const e=a.oxw(3);a.xp6(2),a.Oqu(a.lcZ(3,1,e.noDataEntriesText))}}function Y(e,t){1&e&&a.GkF(0)}function J(e,t){if(1&e&&(a.ynx(0),a.YNc(1,F,4,3,"div",29),a.YNc(2,Y,1,0,"ng-container",30),a.BQk()),2&e){const e=a.oxw(2);a.xp6(1),a.Q6J("ngIf",!e.noDataEntriesAvailableTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",e.noDataEntriesAvailableTemplate)}}function Q(e,t){if(1&e&&a.YNc(0,J,3,2,"ng-container",6),2&e){const e=a.oxw();a.Q6J("ngIf",0===e.dataTableSourceMatTable.data.length)}}function z(e,t){1&e&&a._UZ(0,"app-spinner",33)}function j(e,t){if(1&e&&(a.ynx(0),a.YNc(1,z,1,0,"app-spinner",32),a.ALo(2,"async"),a.BQk()),2&e){const e=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,e.isLazyLoadingInProgress$))}}let K=(()=>{class e extends i.Q{constructor(e,t){super(e,t),this.pbxEndpointDataTableService=e,this.dataTableLazyLoadingService=t}ngOnInit(){this.initColumnData(this.tableConfig),this.listenForTableActionChanges(),this.pbxEndpointDataTableService.moveTableItem$.pipe((0,o.R)(this.ngUnsubscribe)).subscribe(e=>{this.movePbxEndpointPosition(e),this.setTableSourceAndSort()})}ngOnChanges(e){e.isLazyLoadingPossible&&(this.isLazyLoadingPossible=e.isLazyLoadingPossible.currentValue),e.dataTableSourceInput&&(null===e.dataTableSourceInput.currentValue&&(this.dataTableSourceMatTable=null),e.dataTableSourceInput.currentValue&&this.setTableSourceAndSort())}ngOnDestroy(){super.ngOnDestroy()}movePbxEndpointPosition(e){const t=this.getAdjustedPbxEndpoint(e.pbxEndpoints[0]),n=this.getAdjustedPbxEndpoint(e.pbxEndpoints[1]),i="UP"===e.moveOption?e.index-1:e.index+1;this.dataTableSourceInput[e.index]=t,this.dataTableSourceInput[i]=n,[this.dataTableSourceInput[e.index],this.dataTableSourceInput[i]]=[this.dataTableSourceInput[i],this.dataTableSourceInput[e.index]]}getAdjustedPbxEndpoint(e){const t=this.dataTableSourceInput.find(t=>t.ID===e.ID);return t.PRIORITY=e.PRIORITY,t}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(s.E),a.Y36(r.Y))},e.\u0275cmp=a.Xpm({type:e,selectors:[["pbx-endpoint-data-table"]],features:[a.qOj,a.TTD],decls:9,vars:10,consts:[["infiniteScroller","","matSort","","data-e2e","data-table-fragment",3,"dataSource","matSortActive","matSortDirection","endOfListReached"],[3,"matColumnDef",4,"ngFor","ngForOf"],["data-e2e","data-table-fragment__header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","data-table__row","data-e2e","data-table-fragment__row",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","data-table__app-spinner",4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[3,"matColumnDef"],[4,"ngIf","ngIfElse"],["showDefaultTemplate",""],["showButtons",""],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled",4,"matHeaderCellDef"],["data-e2e","data-table-fragment__cell",3,"className",4,"matCellDef"],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled"],["ellipsisTitle","",3,"ngClass"],["data-e2e","data-table-fragment__cell",3,"className"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","data-table__buttons",4,"ngIf"],[1,"data-table__buttons"],["showDefaultActionButtons",""],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick",4,"ngIf"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick",4,"ngIf"],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick"],["data-e2e","data-table-fragment__header-row"],["data-e2e","data-table-fragment__row",1,"data-table__row",3,"ngClass"],[1,"data-table__app-spinner"],["class","data-table__no-data",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"data-table__no-data"],["class","data-table__load-more-spinner",4,"ngIf"],[1,"data-table__load-more-spinner"]],template:function(e,t){if(1&e&&(a.TgZ(0,"mat-table",0),a.NdJ("endOfListReached",function(){return t.onEndOfListReached()}),a.YNc(1,D,6,3,"ng-container",1),a.YNc(2,B,1,0,"mat-header-row",2),a.ynx(3),a.YNc(4,R,2,5,"mat-row",3),a.BQk(),a.qZA(),a.YNc(5,$,1,0,"app-spinner",4),a.YNc(6,Q,1,1,"ng-template",null,5,a.W1O),a.YNc(8,j,3,3,"ng-container",6)),2&e){const e=a.MAs(7);a.Q6J("dataSource",t.dataTableSourceMatTable)("matSortActive",t.activeSortColumn)("matSortDirection",t.activeSortColumnSortDirection),a.xp6(1),a.Q6J("ngForOf",t.displayedColumns),a.xp6(1),a.Q6J("matHeaderRowDef",t.columnNameIds)("matHeaderRowDefSticky",!0),a.xp6(2),a.Q6J("matRowDefColumns",t.columnNameIds),a.xp6(1),a.Q6J("ngIf",!t.dataTableSourceMatTable)("ngIfElse",e),a.xp6(3),a.Q6J("ngIf",t.dataTableSourceMatTable&&t.isLazyLoadingPossible)}},directives:[c.BZ,l.A,d.YE,u.sg,c.as,c.nj,u.O5,c.w1,c.fO,c.Dz,c.ge,d.nU,m.w,u.mk,c.ev,u.tP,p.V,c.XQ,c.Gk,h.S],pipes:[g.w,f.Y,b.X$,_.C,u.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;position:relative}.data-table__content--highlighted[_ngcontent-%COMP%]{width:100%}.data-table__buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}mat-cell[_ngcontent-%COMP%]{font-size:1.8rem}.mat-column-buttons[_ngcontent-%COMP%]{flex:0;opacity:0;position:absolute;right:0;transition:opacity 50ms;z-index:1}.cell-size--small[_ngcontent-%COMP%]{flex:0 0 5%!important}.cell-size--medium[_ngcontent-%COMP%]{flex:0 0 15%!important}.cell-size--large[_ngcontent-%COMP%]{flex:0 0 30%!important}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{max-width:40rem;padding:0 2.4rem}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{padding:0 .8rem}mat-row[_ngcontent-%COMP%]{height:5.6rem;position:relative}mat-row[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:1}.data-table__row.disabled[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{color:#b2b2b2}.data-table__row.disabled[_ngcontent-%COMP%]:hover{background-color:inherit}.data-table__row.disabled[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:0}.data-table__no-data[_ngcontent-%COMP%]{font-size:2.4rem;left:0;position:absolute;right:0;text-align:center;top:10rem}.data-table__app-spinner[_ngcontent-%COMP%]{position:absolute;top:10rem}.data-table__load-more-spinner[_ngcontent-%COMP%]{background:linear-gradient(#ffffff80,#fff);bottom:0;min-height:4rem;position:absolute;right:.5rem;z-index:1}"]}),e})()},40532:function(e,t,n){n.d(t,{D:function(){return V}});var i=n(22238),o=n(3679),a=n(39761),s=n(88002),r=n(46782),c=n(68307),l=n(71289),d=n(79765),u=n(25917),m=n(37716),p=n(45832),h=n(5882),g=n(90500),f=n(29790),b=n(69553),_=n(83282),x=n(84594),v=n(6869),k=n(74162),C=n(97597),T=n(38583),A=n(42070),S=n(98295),y=n(83166),P=n(21554),I=n(68140),O=n(72458),Z=n(55821),M=n(63743),w=n(56436),N=n(67441),E=n(44163),L=n(3425),U=n(92996),D=n(14320);function B(e,t){if(1&e&&(m.TgZ(0,"hoverbox"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(3);m.xp6(1),m.hij(" ",m.lcZ(2,1,e.msTeamsHoverboxHint)," ")}}function q(e,t){if(1&e&&(m.TgZ(0,"mat-option",13),m._uU(1),m.ALo(2,"pbxAuthMethod"),m.YNc(3,B,3,3,"hoverbox",3),m.qZA()),2&e){const e=t.$implicit,n=m.oxw(2);m.Q6J("value",e)("disabled","MSTEAMS"===e.AUTH_STYLE&&!n.isMsTeamsTemplateSelectable),m.xp6(1),m.AsE(" ",e.NAME," ",m.lcZ(2,5,e.AUTH_STYLE)," "),m.xp6(2),m.Q6J("ngIf","MSTEAMS"===e.AUTH_STYLE&&!n.isMsTeamsTemplateSelectable)}}function R(e,t){if(1&e&&(m.TgZ(0,"mat-hint",14),m._UZ(1,"app-svg-icon",15),m._uU(2),m.ALo(3,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(2),m.hij(" ",m.lcZ(3,1,e.translationPrefix+".form.field.pbx_endpoint_template.hint")," ")}}function $(e,t){if(1&e){const e=m.EpF();m.TgZ(0,"mat-form-field",7),m.TgZ(1,"mat-label"),m._uU(2),m.ALo(3,"translate"),m.qZA(),m.TgZ(4,"input",8),m.NdJ("userInputInProgress",function(t){return m.CHM(e),m.oxw().setUserInputState(t)}),m.qZA(),m.TgZ(5,"mat-autocomplete",9,10),m.NdJ("optionSelected",function(t){return m.CHM(e),m.oxw().onTemplateSelection(t)}),m.YNc(7,q,4,7,"mat-option",11),m.ALo(8,"async"),m.qZA(),m.YNc(9,R,4,3,"mat-hint",12),m.qZA()}if(2&e){const e=m.MAs(6),t=m.oxw();m.ekj("pbx-endpoint-modal__template-selection","REGISTRATION"===t.authStyle),m.xp6(2),m.Oqu(m.lcZ(3,7,t.translationPrefix+".form.field.pbx_endpoint_template.label")),m.xp6(2),m.Q6J("matAutocomplete",e),m.xp6(1),m.Q6J("displayWith",t.displayTemplateName),m.xp6(2),m.Q6J("ngForOf",m.lcZ(8,9,t.filteredPbxEndpointTemplates$)),m.xp6(2),m.Q6J("ngIf","REGISTRATION"===t.authStyle)}}function F(e,t){if(1&e&&(m.TgZ(0,"mat-option",18),m._uU(1),m.qZA()),2&e){const e=t.$implicit;m.Q6J("value",e)("disabled",e.isUsed),m.xp6(1),m.hij(" ",e.DOMAIN," ")}}function Y(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"mat-form-field",7),m.TgZ(2,"mat-label"),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"mat-select",16),m.YNc(6,F,2,3,"mat-option",17),m.ALo(7,"async"),m.qZA(),m.qZA(),m.BQk()),2&e){const e=m.oxw();m.xp6(3),m.hij(" ",m.lcZ(4,2,e.translationPrefix+".form.field.ms_teams.select_box_label")," "),m.xp6(3),m.Q6J("ngForOf",m.lcZ(7,4,e.msTeamsDomains$))}}function J(e,t){if(1&e&&(m.TgZ(0,"mat-hint",26),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",m.lcZ(2,1,e.translationPrefix+".form.field.protocol.info.always_srtp")," ")}}function Q(e,t){if(1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.Oqu(m.lcZ(2,1,e.translationPrefix+".form.field.ip_adress.error.bad_format"))}}function z(e,t){if(1&e&&(m.TgZ(0,"mat-error"),m._uU(1),m.ALo(2,"translate"),m.qZA()),2&e){const e=m.oxw(2);m.xp6(1),m.hij(" ",m.lcZ(2,1,e.translationPrefix+".form.field.port.error.range")," ")}}function j(e,t){if(1&e&&(m.ynx(0),m.TgZ(1,"mat-form-field",7),m.TgZ(2,"mat-label"),m._uU(3),m.ALo(4,"translate"),m.qZA(),m.TgZ(5,"mat-select",19,20),m.TgZ(7,"mat-option",21),m._uU(8,"TCP"),m.qZA(),m.TgZ(9,"mat-option",22),m._uU(10,"UDP"),m.qZA(),m.TgZ(11,"mat-option",23),m._uU(12,"TLS"),m.qZA(),m.qZA(),m.YNc(13,J,3,3,"mat-hint",24),m.qZA(),m.TgZ(14,"mat-form-field",7),m.TgZ(15,"mat-label"),m._uU(16),m.ALo(17,"translate"),m.qZA(),m._UZ(18,"input",25),m.TgZ(19,"mat-hint",26),m._uU(20),m.ALo(21,"translate"),m.qZA(),m.YNc(22,Q,3,3,"mat-error",3),m.qZA(),m.TgZ(23,"mat-form-field",7),m.TgZ(24,"mat-label"),m._uU(25),m.ALo(26,"translate"),m.qZA(),m._UZ(27,"input",27),m.YNc(28,z,3,3,"mat-error",3),m.qZA(),m.BQk()),2&e){const e=m.MAs(6),t=m.oxw();m.xp6(3),m.Oqu(m.lcZ(4,7,t.translationPrefix+".form.field.protocol.label")),m.xp6(10),m.Q6J("ngIf","tls"===e.value||"tls"===(null==t.data.pbxEndpoint?null:t.data.pbxEndpoint.PROTOCOL)),m.xp6(3),m.Oqu(m.lcZ(17,9,t.translationPrefix+".form.field.ip_adress.label")),m.xp6(4),m.Oqu(m.lcZ(21,11,t.translationPrefix+".form.field.ip_adress.hint")),m.xp6(2),m.Q6J("ngIf",t.host.errors),m.xp6(3),m.Oqu(m.lcZ(26,13,t.translationPrefix+".form.field.port.label")),m.xp6(3),m.Q6J("ngIf",t.port.errors)}}function K(e,t){1&e&&m._UZ(0,"app-spinner")}function H(e,t){if(1&e&&m._UZ(0,"pbx-endpoint-sms-info",28),2&e){const e=m.oxw();m.Q6J("isSendingSms",e.isSendingSms)("smsSendFail",e.smsSendFail)("smsSendSuccess",e.smsSendSuccess)("username",e.username)}}function G(e,t){if(1&e&&m._UZ(0,"pbx-endpoint-reset-section",29),2&e){const e=m.oxw();m.Q6J("authStyle",e.authStyle)("pbxEndpoint",e.data.pbxEndpoint)}}let V=(()=>{class e{constructor(e,t,n,i,o,a,s,r,c,l){this.snackBarService=e,this.dialogRef=t,this.data=n,this.confirmDialogsService=i,this.nconnectModalService=o,this.translateService=a,this.pbxEndpointDataTableService=s,this.dataTableMessageService=r,this.pbxEndpointDataService=c,this.msTeamsService=l,this.ngUnsubscribe=new d.xQ,this.isEditModal=!1,this.creatingPBXEndpointInProgress=!1,this.pbxEndpointSuccessfullyCreated=!1,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.isUserInputInProgress=!1,this.smsSendSuccess=!1,this.smsSendFail=!1,this.isSendingSms=!1,this.isMsTeamsTemplateSelectable=!1,this.msTeamsHoverboxHint="",this.msTeamsDomains$=this.msTeamsService.msTeamsDomains$,this.filteredPbxEndpointTemplates$=(0,u.of)(n.pbxEndpointTemplates),this.selectedTrunksetId=n.selectedTrunksetId}ngOnInit(){var e,t;this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal),this.setMsTeamsContent(),this.createFormControls(),this.createForm(),this.filteredPbxEndpointTemplates$=this.listenForTemplateChanges(),this.isEditModal&&(this.setSelectedTemplate(null===(e=this.data.pbxEndpoint)||void 0===e?void 0:e.PBXENDPOINT_TEMPLATE_ID),this.username=null===(t=this.data.pbxEndpoint)||void 0===t?void 0:t.USERNAME)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}cancelClick(e){this.dialogRef.close(e)}onSubmit(e){this.isEditModal?this.cancelClick(e):this.pbxEndpointSuccessfullyCreated?this.doTaskAfterPbxEndpointHasBeenCreated():this.createPbxEndpoint(e)}onTemplateSelection(e){const t=e.option.value;this.setUserInputState(!1),this.setSelectedTemplate(t.ID),this.setMsTeamsDomainFormInitValue(t)}displayTemplateName(e){return null==e?void 0:e.NAME}setUserInputState(e){this.isUserInputInProgress=e}setAuthStyleValidators(e){this.authStyle=e.AUTH_STYLE,"IP"===this.authStyle?(this.setValidatorsForProtocolField(),this.setValidatorsForHostField(),this.setValidatorsForPortField()):this.clearValidators(),this.updateValidators()}setMsTeamsDomainFormInitValue(e){var t;"MSTEAMS"===e.AUTH_STYLE?this.msTeamsDomain.setValue((null===(t=this.availableMsTeamsDomains)||void 0===t?void 0:t.length)&&this.availableMsTeamsDomains[0]):this.msTeamsDomain.reset()}setHoverboxTextForMsTeamsTemplate(){var e;let t="";this.data.amountPbxEndpoints>0?t="pbx_endpoint_already_exists":0===this.data.msTeamsDomains.length?t="no_linkable_domains_available":(null===(e=this.availableMsTeamsDomains)||void 0===e?void 0:e.length)||(t="no_unused_domains_available"),this.msTeamsHoverboxHint=`${this.translationPrefix}.form.field.ms_teams.${t}`}setSelectedTemplate(e){this.selectedTemplate=this.data.pbxEndpointTemplates.find(t=>t.ID===e),this.setAuthStyleValidators(this.selectedTemplate)}listenForTemplateChanges(){return this.pbxEndpointTemplate.valueChanges.pipe((0,a.O)(""),(0,s.U)(e=>this.getTemplateName(e,this.data.pbxEndpointTemplates)),(0,s.U)(e=>this.filterTemplates(e,this.data.pbxEndpointTemplates)),(0,r.R)(this.ngUnsubscribe))}getTemplateName(e,t){if("string"==typeof e)return e;{const n=t.find(t=>t.ID===e.ID);return(null==n?void 0:n.NAME)||"-"}}filterTemplates(e,t){return t.filter(t=>t.NAME.toLowerCase().includes(e.toLowerCase()))}doTaskAfterPbxEndpointHasBeenCreated(){this.smsSendSuccess||this.sendSms(this.createdPbxEndpoint),this.cancelClick()}createPbxEndpoint(e){const t="create";this.setCreatingPbxProgressState(!0),this.dataTableMessageService.showDataTableSnackbar(t,"init",this.componentTranslationKey),("IP"===this.authStyle||"MSTEAMS"===this.authStyle)&&this.cancelClick(),this.pbxEndpointDataService.createPbxEndpoint(this.selectedTrunksetId,e).subscribe(e=>{"success"===e.appStatusCode&&("REGISTRATION"===this.authStyle&&this.setModalForPbxEndpointWithRegistrationAuthStyle(e.data[0]),this.pbxEndpointSuccessfullyCreated=!0,this.pbxEndpointDataTableService.addTableItem(e.data[0]),this.dataTableMessageService.showDataTableSnackbar(t,"success",this.componentTranslationKey)),this.setCreatingPbxProgressState(!1)})}setCreatingPbxProgressState(e){this.creatingPBXEndpointInProgress=e}setModalForPbxEndpointWithRegistrationAuthStyle(e){this.createdPbxEndpoint=e,this.username=this.createdPbxEndpoint.USERNAME,this.modalTitle=this.createdPbxEndpoint.NAME,this.buttonCaptionSubmit=`${this.translationPrefix}.button.send`,this.formGroup.disable()}updateValidators(){this.protocol.updateValueAndValidity(),this.host.updateValueAndValidity(),this.port.updateValueAndValidity()}clearValidators(){this.protocol.clearValidators(),this.host.clearValidators(),this.port.clearValidators()}setValidatorsForPortField(){this.port.setValidators(o.kI.compose([o.kI.required,o.kI.min(1),o.kI.max(65535),o.kI.pattern(/^[0-9]*$/)]))}setValidatorsForProtocolField(){this.protocol.setValidators(o.kI.required)}setValidatorsForHostField(){this.host.setValidators(o.kI.compose([o.kI.required,o.kI.pattern(e.IP_ADRESS_PATTERN)]))}getModalTitle(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}sendSms(e){this.pbxEndpointDataService.setPassword(e).pipe((0,c.b)(()=>{this.isSendingSms=!0}),(0,l.g)(2e3),(0,r.R)(this.ngUnsubscribe)).subscribe(e=>{this.handleSmsApiResponse("success"===e.appStatusCode)})}handleSmsApiResponse(e){this.setSmsStates(e),this.showSmsSnackbar(e)}setSmsStates(e){this.smsSendSuccess=e,this.smsSendFail=!e,this.isSendingSms=!1,e&&(this.buttonCaptionSubmit=`${this.translationPrefix}.button.ok`)}showSmsSnackbar(e){this.snackBarService.openInfo(`${this.translationPrefix}.sms_info.${e?"sending_sms_success":"sending_sms_failed"}`)}setMsTeamsContent(){var e;this.availableMsTeamsDomains=this.data.msTeamsDomains.filter(e=>!e.isUsed),this.isMsTeamsTemplateSelectable=this.data.msTeamsDomains.length>0&&0===this.data.amountPbxEndpoints&&!!(null===(e=this.availableMsTeamsDomains)||void 0===e?void 0:e.length),this.isMsTeamsTemplateSelectable||this.setHoverboxTextForMsTeamsTemplate()}createFormControls(){const e=this.data.pbxEndpoint,t=this.data.msTeamsDomains.find(t=>Number(null==t?void 0:t.PBXENDPOINT_ID)===(null==e?void 0:e.ID));this.name=new o.NI((null==e?void 0:e.NAME)||""),this.pbxEndpointTemplate=new o.NI((null==e?void 0:e.PBXENDPOINT_TEMPLATE_ID)||"",o.kI.required),this.protocol=new o.NI((null==e?void 0:e.PROTOCOL)||""),this.host=new o.NI((null==e?void 0:e.HOST)||""),this.port=new o.NI((null==e?void 0:e.PORT)||""),this.msTeamsDomain=new o.NI({value:t,disabled:this.isEditModal})}createForm(){this.formGroup=new o.cw({name:this.name,pbxEndpointTemplate:this.pbxEndpointTemplate,protocol:this.protocol,host:this.host,port:this.port,msTeamsDomain:this.msTeamsDomain})}}return e.IP_ADRESS_PATTERN=/^(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))$/,e.\u0275fac=function(t){return new(t||e)(m.Y36(p.c),m.Y36(i.so),m.Y36(i.WI),m.Y36(h.U),m.Y36(g.K),m.Y36(f.sK),m.Y36(b.E),m.Y36(_.D),m.Y36(x.W),m.Y36(v.C))},e.\u0275cmp=m.Xpm({type:e,selectors:[["pbx-endpoint-modal"]],decls:9,vars:12,consts:[["data-e2e","admin-pbx-endpoint-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-pbx-endpoint-modal-fragment__name--input",3,"formControl"],["appearance","fill",3,"pbx-endpoint-modal__template-selection",4,"ngIf"],[4,"ngIf"],[3,"isSendingSms","smsSendFail","smsSendSuccess","username",4,"ngIf"],[3,"authStyle","pbxEndpoint",4,"ngIf"],["e2e","admin-pbx-endpoint-modal-fragment",1,"pbx-endpoint-modal__footer-actions",3,"btnSaveCaption","cancelButtonIsHidden","saveDisabled","cancelClick"],["appearance","fill"],["formControlName","pbxEndpointTemplate","matInput","","tabEnterAutocomplete","","data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--input",3,"matAutocomplete","userInputInProgress"],[3,"displayWith","optionSelected"],["auto1","matAutocomplete"],["data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--option","appHoverbox","",3,"value","disabled",4,"ngFor","ngForOf"],["class","pbx-endpoint-modal__mat-hint",4,"ngIf"],["data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--option","appHoverbox","",3,"value","disabled"],[1,"pbx-endpoint-modal__mat-hint"],["fill","missed-color","icon","attention",1,"pbx-endpoint-modal__attention-icon"],["formControlName","msTeamsDomain"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["formControlName","protocol","data-e2e","admin-pbx-endpoint-modal-fragment__protocol"],["protocol",""],["value","tcp","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-tcp"],["value","udp","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-udp"],["value","tls","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-tls"],["align","end",4,"ngIf"],["formControlName","host","matInput","","placeholder","XXX.XXX.XXX","data-e2e","admin-pbx-endpoint-modal-fragment__host--input"],["align","end"],["formControlName","port","matInput","","placeholder","XXXX","data-e2e","admin-pbx-endpoint-modal-fragment__port--input"],[3,"isSendingSms","smsSendFail","smsSendSuccess","username"],[3,"authStyle","pbxEndpoint"]],template:function(e,t){1&e&&(m.TgZ(0,"nconnect-voice-modal",0),m.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),m._UZ(1,"name-input-field",1),m.YNc(2,$,10,11,"mat-form-field",2),m.YNc(3,Y,8,6,"ng-container",3),m.YNc(4,j,29,15,"ng-container",3),m.YNc(5,K,1,0,"app-spinner",3),m.YNc(6,H,1,4,"pbx-endpoint-sms-info",4),m.YNc(7,G,1,2,"pbx-endpoint-reset-section",5),m.TgZ(8,"footer-actions",6),m.NdJ("cancelClick",function(){return t.cancelClick()}),m.qZA(),m.qZA()),2&e&&(m.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),m.xp6(1),m.Q6J("formControl",t.name),m.xp6(1),m.Q6J("ngIf",!t.isEditModal),m.xp6(1),m.Q6J("ngIf","MSTEAMS"===t.authStyle),m.xp6(1),m.Q6J("ngIf","IP"===t.authStyle),m.xp6(1),m.Q6J("ngIf",t.creatingPBXEndpointInProgress&&"REGISTRATION"===t.authStyle),m.xp6(1),m.Q6J("ngIf",t.pbxEndpointSuccessfullyCreated||t.isEditModal&&"REGISTRATION"===t.authStyle),m.xp6(1),m.Q6J("ngIf",t.isEditModal),m.xp6(1),m.Q6J("btnSaveCaption",t.buttonCaptionSubmit)("cancelButtonIsHidden",t.smsSendSuccess)("saveDisabled",!t.formGroup.valid&&!t.formGroup.disabled||!t.formGroup.dirty||t.creatingPBXEndpointInProgress||t.isSendingSms||t.isUserInputInProgress))},directives:[k.F,o.JL,o.sg,C.Y,o.JJ,o.oH,T.O5,A.c,S.KE,S.hX,o.Fj,y.Nt,P.ZL,o.u,I.o,P.XC,T.sg,O.ey,Z.r,M.B,S.bx,w.u,N.gD,S.TO,E.S,L.A,U.W],pipes:[f.X$,T.Ov,D.M],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-modal__template-selection[_ngcontent-%COMP%]{margin-bottom:1.5rem}.pbx-endpoint-modal__mat-hint[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint-modal__attention-icon[_ngcontent-%COMP%]{margin-right:.5rem;max-width:3rem}.pbx-endpoint-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},92996:function(e,t,n){n.d(t,{W:function(){return p}});var i=n(79765),o=n(46782),a=n(71289),s=n(37716),r=n(29790),c=n(5882),l=n(84594),d=n(45832),u=n(38583);function m(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"a",1),s.NdJ("click",function(){return s.CHM(e),s.oxw().resetPassword()}),s._uU(1),s.ALo(2,"translate"),s.qZA()}if(2&e){const e=s.oxw();s.xp6(1),s.hij(" ",s.lcZ(2,1,e.translationPrefix+".button.reset_password")," ")}}let p=(()=>{class e{constructor(e,t,n,o){this.translateService=e,this.confirmDialogsService=t,this.pbxEndpointDataService=n,this.snackBarService=o,this.ngUnsubscribe=new i.xQ,this.componentTranslationKey="pbx_endpoint",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}resetUserAgent(){this.confirmDialogsService.doTaskAfterConfirmation(this.pbxEndpointDataService.resetUserAgent(this.pbxEndpoint),"",this.translateService.instant(`${this.translationPrefix}.confirm_dialog.reset_useragent`)).pipe((0,o.R)(this.ngUnsubscribe)).subscribe(e=>{"success"===e.appStatusCode?this.snackBarService.openInfo(`${this.translationPrefix}.button.reset_useragent_success`):this.snackBarService.openErrorInfo(`${this.translationPrefix}.button.reset_useragent_fail`)},e=>{this.snackBarService.openErrorInfo(`${this.translationPrefix}.button.reset_useragent_fail`)})}resetPassword(){this.confirmDialogsService.doTaskAfterConfirmation(this.pbxEndpointDataService.setPassword(this.pbxEndpoint),"",this.translateService.instant(`${this.translationPrefix}.confirm_dialog.reset_password`)).pipe((0,a.g)(1e3),(0,o.R)(this.ngUnsubscribe)).subscribe(e=>{"success"===e.appStatusCode?this.snackBarService.openInfo(`${this.translationPrefix}.sms_info.sending_sms_again_success`):this.snackBarService.openErrorInfo(`${this.translationPrefix}.sms_info.sending_sms_failed`)},e=>{this.snackBarService.openErrorInfo(`${this.translationPrefix}.sms_info.sending_sms_failed`)})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(r.sK),s.Y36(c.U),s.Y36(l.W),s.Y36(d.c))},e.\u0275cmp=s.Xpm({type:e,selectors:[["pbx-endpoint-reset-section"]],inputs:{pbxEndpoint:"pbxEndpoint",authStyle:"authStyle"},decls:5,vars:4,consts:[[1,"pbx-endpoint-reset-section"],[1,"pbx-endpoint-reset-section__reset-link",3,"click"],["class","pbx-endpoint-reset-section__reset-link",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(s.TgZ(0,"section",0),s.TgZ(1,"a",1),s.NdJ("click",function(){return t.resetUserAgent()}),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,m,3,3,"a",2),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,2,t.translationPrefix+".button.reset_useragent")," "),s.xp6(2),s.Q6J("ngIf","REGISTRATION"===t.authStyle))},directives:[u.O5],pipes:[r.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-reset-section[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column;margin:1rem 0}.pbx-endpoint-reset-section__reset-link[_ngcontent-%COMP%]{color:#000;cursor:pointer;font-size:1.8rem;font-weight:bold;margin-bottom:1rem;text-decoration:none}.pbx-endpoint-reset-section__reset-link[_ngcontent-%COMP%]:focus{color:#003d55}"]}),e})()},3425:function(e,t,n){n.d(t,{A:function(){return u}});var i=n(37716),o=n(38583),a=n(44163),s=n(29790);function r(e,t){if(1&e&&(i.TgZ(0,"p",7),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,e.translationPrefix+".sms_info.info")," ")}}function c(e,t){if(1&e&&(i.TgZ(0,"div",8),i.TgZ(1,"span"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"app-spinner",9),i.qZA()),2&e){const e=i.oxw();i.xp6(2),i.hij(" ",i.lcZ(3,1,e.translationPrefix+".sms_info.sending_sms")," ")}}function l(e,t){if(1&e&&(i.TgZ(0,"p",10),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,e.translationPrefix+".sms_info.sending_sms_success")," ")}}function d(e,t){if(1&e&&(i.TgZ(0,"p",11),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){const e=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,e.translationPrefix+".sms_info.sending_sms_failed")," ")}}let u=(()=>{class e{constructor(){this.componentTranslationKey="pbx_endpoint",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["pbx-endpoint-sms-info"]],inputs:{username:"username",isSendingSms:"isSendingSms",smsSendSuccess:"smsSendSuccess",smsSendFail:"smsSendFail"},decls:10,vars:8,consts:[[1,"pbx-endpoint-sms-info"],[1,"pbx-endpoint-sms-info__title"],[1,"pbx-endpoint-sms-info__credentials"],["class","pbx-endpoint-sms-info__text",4,"ngIf"],["class","pbx-endpoint-sms-info__send-info",4,"ngIf"],["class","pbx-endpoint-sms-info__text pbx-endpoint-sms-info__text--success",4,"ngIf"],["class","pbx-endpoint-sms-info__text pbx-endpoint-sms-info__text--failed",4,"ngIf"],[1,"pbx-endpoint-sms-info__text"],[1,"pbx-endpoint-sms-info__send-info"],[1,"pbx-endpoint-sms-info__spinner"],[1,"pbx-endpoint-sms-info__text","pbx-endpoint-sms-info__text--success"],[1,"pbx-endpoint-sms-info__text","pbx-endpoint-sms-info__text--failed"]],template:function(e,t){1&e&&(i.TgZ(0,"section",0),i.TgZ(1,"h6",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"p",2),i._uU(5),i.qZA(),i.YNc(6,r,3,3,"p",3),i.YNc(7,c,5,3,"div",4),i.YNc(8,l,3,3,"p",5),i.YNc(9,d,3,3,"p",6),i.qZA()),2&e&&(i.xp6(2),i.Oqu(i.lcZ(3,6,t.translationPrefix+".sms_info.sip_username")),i.xp6(3),i.Oqu(t.username),i.xp6(1),i.Q6J("ngIf",!t.isSendingSms&&!t.smsSendSuccess&&!t.smsSendFail),i.xp6(1),i.Q6J("ngIf",t.isSendingSms),i.xp6(1),i.Q6J("ngIf",t.smsSendSuccess),i.xp6(1),i.Q6J("ngIf",t.smsSendFail))},directives:[o.O5,a.S],pipes:[s.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-sms-info[_ngcontent-%COMP%]{padding:1rem 0}.pbx-endpoint-sms-info__title[_ngcontent-%COMP%]{margin:1rem 0 0}.pbx-endpoint-sms-info__credentials[_ngcontent-%COMP%]{font-weight:bold;margin:.5rem 0 3rem}.pbx-endpoint-sms-info__text[_ngcontent-%COMP%]{font-weight:bold;margin:0}.pbx-endpoint-sms-info__text--success[_ngcontent-%COMP%]{color:#00b300}.pbx-endpoint-sms-info__text--failed[_ngcontent-%COMP%]{color:#b31a3e}.pbx-endpoint-sms-info__send-info[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;font-weight:bold;justify-content:center}.pbx-endpoint-sms-info__spinner[_ngcontent-%COMP%]{margin-top:1rem}"]}),e})()},39977:function(e,t,n){n.d(t,{D:function(){return R}});var i=n(40532),o=n(26215),a=n(79765),s=n(25917),r=n(45435),c=n(43190),l=n(46782),d=n(68307),u=n(88002),m=n(19773),p=n(37716),h=n(8307),g=n(22238),f=n(5882),b=n(29790),_=n(84594),x=n(91856),v=n(69553),k=n(19885),C=n(47444),T=n(50256),A=n(48843),S=n(50112),y=n(45832),P=n(89447),I=n(6869),O=n(57158);const Z=["customPbxTemplate"],M=["customNameTemplate"],w=["customStateTemplate"],N=["customPriorityTemplate"];function E(e,t){if(1&e&&(p.TgZ(0,"span",10),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e){const e=p.oxw(2);p.xp6(1),p.hij(" ",p.lcZ(2,1,e.translationPrefix+".table.primary_label")," ")}}function L(e,t){if(1&e&&(p.TgZ(0,"div",7),p.TgZ(1,"span",8),p._uU(2),p.qZA(),p.YNc(3,E,3,3,"span",9),p.qZA()),2&e){const e=t.element,n=p.oxw();p.xp6(2),p.Oqu(e.NAME),p.xp6(1),p.Q6J("ngIf",e.ID===(null==n.primaryPbxEndpoint?null:n.primaryPbxEndpoint.ID))}}function U(e,t){1&e&&p._uU(0),2&e&&p.hij(" ",t.element.PBXENDPOINT_TEMPLATE_NAME," ")}function D(e,t){if(1&e&&(p.TgZ(0,"hoverbox"),p._uU(1),p.ALo(2,"translate"),p.qZA()),2&e){const e=p.oxw(2);p.xp6(1),p.hij(" ",p.lcZ(2,1,e.translationPrefix+".table.hoverbox_hint")," ")}}function B(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"mat-slide-toggle",11),p.NdJ("change",function(t){const n=p.CHM(e),i=n.element,o=n.index;return p.oxw().toggleActiveState(t,i,o)}),p.YNc(1,D,3,3,"hoverbox",12),p.ALo(2,"async"),p.qZA()}if(2&e){const e=t.element,n=t.index,i=p.oxw();p.Q6J("checked",1===e.IS_ACTIVE)("disabled",i.isToggleStateChangeInProgress&&i.firstDisabledIndex===n),p.xp6(1),p.Q6J("ngIf",p.lcZ(2,3,i.showActivationHoverBox$)&&!e.IS_ACTIVE)}}function q(e,t){if(1&e){const e=p.EpF();p.TgZ(0,"div",13),p.TgZ(1,"app-button",14),p.NdJ("appButtonClick",function(){const t=p.CHM(e),n=t.element,i=t.index;return p.oxw().movePbxEndpoint(n,i,"UP")}),p.qZA(),p.TgZ(2,"app-button",15),p.NdJ("appButtonClick",function(){const t=p.CHM(e),n=t.element,i=t.index;return p.oxw().movePbxEndpoint(n,i,"DOWN")}),p.qZA(),p.qZA()}if(2&e){const e=t.index,n=t.last,i=p.oxw();p.xp6(1),p.Q6J("disabled",0===e||i.isPositionChangeInProgress&&(i.firstDisabledIndex===e||i.secondDisabledIndex===e)),p.xp6(1),p.Q6J("disabled",n||i.isPositionChangeInProgress&&(i.firstDisabledIndex===e||i.secondDisabledIndex===e))}}let R=(()=>{class e{constructor(e,t,n,i,r,c,l,d,u,m,p,h,g,f,b,_,x){this.router=e,this.dialog=t,this.confirmDialogsService=n,this.translateService=i,this.pbxEndpointDataService=r,this.route=c,this.routerEventService=l,this.pbxEndpointDataTableService=d,this.dataTableLazyLoadingService=u,this.nconnectItemProviderService=m,this.trunksetDataService=p,this.nconnectAccountSelectionService=h,this.pbxEndpointTemplateDataService=g,this.snackBarService=f,this.accountService=b,this.msTeamsService=_,this.logger=x,this.isOnlyOneActivePbxEndpointAllowed=!0,this.showActivationHoverBoxSource=new o.X(!1),this.ngUnsubscribe=new a.xQ,this.pbxEndpointTemplatesLoaded=!1,this.pbxEndpointWithMsTeamsExists$=this.msTeamsService.pbxEndpointWithMsTeamsExists$,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.componentTranslationKey="pbx_endpoint",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle$=(0,s.of)(`${this.translationPrefix}.title`),this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isToggleStateChangeInProgress=!1,this.isPositionChangeInProgress=!1,this.showActivationHoverBox$=this.showActivationHoverBoxSource.asObservable()}ngOnInit(){this.setPageTitle(),this.listenForAccountSelection(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,r.h)(e=>!!e),(0,c.w)(()=>this.route.params),(0,c.w)(e=>this.getTrunksetByPassedId(Number(e.id))),(0,r.h)(e=>this.filterOutInvalidValues(e)),(0,l.R)(this.ngUnsubscribe)).subscribe(e=>{var t;this.pbxEndpointData$=this.getInitialTableData((null===(t=e)||void 0===t?void 0:t.ID)||e).pipe((0,d.b)(e=>{this.pbxEndpoints=e;const t=!!this.pbxEndpoints.find(e=>e.IS_ACTIVE);this.setHoverBoxVisibility(t),this.setPrimaryPbxEndpoint()}),(0,l.R)(this.ngUnsubscribe)),"number"!=typeof e&&(this.setNconnectItemName(e),this.setPermissionForMaxAmountOfActivePbxEndpoints(e)),this.setMsTeamsDomains(),this.getPbxEndpointTemplates()}),this.tableConfig=this.getTableConfig(),this.listenForPbxEndpointDeletions(),this.listenForMsTeamsEndpointEvents()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}deletePbxEndpoint(e){this.pbxEndpointDataTableService.deleteTableItem(this.pbxEndpointDataService.deletePbxEndpoint(e.TRUNKSET_ID,e.ID),e.ID,this.componentTranslationKey)}editPbxEndpoint(e){this.openPbxEndpointModal(e).afterClosed().pipe((0,r.h)(e=>!!e),(0,l.R)(this.ngUnsubscribe)).subscribe(t=>{this.pbxEndpointDataTableService.editTableItem(this.pbxEndpointDataService.updatePbxEndpoint(e,t),this.componentTranslationKey)})}initToggleActionsWhenIsActive(e,t,n){this.createConfirmDialog().pipe((0,l.R)(this.ngUnsubscribe)).subscribe(i=>{i?this.deactivatePbxEndpoint(e,t,n):this.setSlideToggleAsActive(t,e)})}initToggleActionsWhenIsDeactivated(e,t,n){this.setPbxEndpointState(e,t,n,!0)}toggleActiveState(e,t,n){t.IS_ACTIVE?this.initToggleActionsWhenIsActive(e,t,n):this.initToggleActionsWhenIsDeactivated(e,t,n)}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.pbxEndpointDataService.getPbxEndpointsOfTrunkset(this.selectedTrunksetId,"",this.dataTableLazyLoadingService.currentPage))}movePbxEndpoint(e,t,n){this.initMovingOfPbxEndpoint(e,t,n),this.pbxEndpointDataService.setPriority(e,n).pipe((0,l.R)(this.ngUnsubscribe)).subscribe(e=>{"success"===e.appStatusCode&&(this.pbxEndpointDataTableService.moveTableItem(e.data,t,n),this.showMovePbxEndpointSuccessMessage(n)),this.setPositionChangeProgressState(!1),this.setPrimaryPbxEndpoint()},e=>{this.snackBarService.openErrorInfo(`${this.translationPrefix}.snackbar.priority_change_fail`),this.setPositionChangeProgressState(!1)})}openPbxEndpointModal(e){return this.dialog.open(i.D,this.getDialogData(e))}filterOutInvalidValues(e){const t=e;return null!=t&&(isNaN(t)?!!Object.keys(e).length:!!t)}setNconnectItemName(e){this.nconnectItemProviderService.setNconnectItemName(e)}setHoverBoxVisibility(e){this.showActivationHoverBoxSource.next(e&&this.isOnlyOneActivePbxEndpointAllowed)}listenForAccountSelection(){this.accountService.selectedAccountModules$.pipe((0,c.w)(()=>this.trunksetDataService.trunksets$),(0,r.h)(e=>!!e),(0,l.R)(this.ngUnsubscribe)).subscribe(e=>{if(null==e?void 0:e.length){const t=e[0];this.setNconnectItemName(t),this.router.navigate([`../${t.ID}`],{relativeTo:this.route})}else this.redirectToShortcutsPage()})}setPermissionForMaxAmountOfActivePbxEndpoints(e){this.isOnlyOneActivePbxEndpointAllowed="off"===e.STRATEGY}getPbxEndpointTemplates(){this.pbxEndpointTemplateDataService.getPbxEndpointTemplates("",1,50).pipe((0,l.R)(this.ngUnsubscribe)).subscribe(e=>{this.pbxEndpointTemplates=e.data,this.pbxEndpointTemplatesLoaded=!0})}listenForPbxEndpointDeletions(){this.pbxEndpointDataService.reloadPbxEndpointsAfterDelete$.pipe((0,c.w)(()=>this.pbxEndpointDataService.getPbxEndpointsOfTrunkset(this.selectedTrunksetId)),(0,l.R)(this.ngUnsubscribe)).subscribe(e=>{this.pbxEndpointData$=(0,s.of)(e.data),this.pbxEndpoints=e.data,this.setPrimaryPbxEndpoint(),this.setMsTeamsDomains()})}listenForMsTeamsEndpointEvents(){this.msTeamsService.reloadMsTeams$.pipe((0,l.R)(this.ngUnsubscribe)).subscribe(()=>this.setMsTeamsDomains())}setToggleActionProgressState(e){this.isToggleStateChangeInProgress=e}deactivatePbxEndpoint(e,t,n){this.setPbxEndpointState(e,t,n,!1)}setSlideToggleAsInactive(e,t){this.setToggleSourceState(e,t,0,!1)}setSlideToggleAsActive(e,t){this.setToggleSourceState(e,t,1,!0)}setToggleSourceState(e,t,n,i){e.IS_ACTIVE=n,t.source.checked=i}initToggleAction(e,t,n){this.setToggleActionProgressState(e),this.currentlyEditedPbxEndpointId=t,this.firstDisabledIndex=n}setPbxEndpointState(e,t,n,i){this.initToggleAction(!0,t.ID,n),this.pbxEndpointDataService.setActiveState(t,i).pipe((0,l.R)(this.ngUnsubscribe)).subscribe(n=>{this.setHoverBoxVisibility(!!n.data[0].NUMBER_OF_ACTIVE_PBX_ENDPOINTS),i?(this.isOnlyOneActivePbxEndpointAllowed&&this.switchOffAllOtherPbxEndpoints(t,n.data[0].PBX_ENDPOINTS),this.setSlideToggleAsActive(t,e)):this.setSlideToggleAsInactive(t,e),this.showStateChangeSuccessMessage(i),this.setToggleActionProgressState(!1),this.setPrimaryPbxEndpoint()},n=>{this.handleErrorWhenStateChangeFailed(e,t,i)})}switchOffAllOtherPbxEndpoints(e,t){if(t.length>1){this.pbxEndpoints.filter(t=>t.ID!==e.ID);for(const e of this.pbxEndpoints)e.IS_ACTIVE=0}}showStateChangeSuccessMessage(e){this.snackBarService.openInfo(`${this.translationPrefix}.snackbar.${e?"activate_endpoint_success":"deactivate_endpoint_success"}`)}handleErrorWhenStateChangeFailed(e,t,n){this.snackBarService.openErrorInfo(`${this.translationPrefix}.snackbar.${n?"activate_endpoint_fail":"deactivate_endpoint_fail"}`),this.setSlideToggleAsInactive(t,e),this.setToggleActionProgressState(!1)}showMovePbxEndpointSuccessMessage(e){this.snackBarService.openInfo(`${this.translationPrefix}.snackbar.${"UP"===e?"priority_up_success":"priority_down_success"}`)}setPositionChangeProgressState(e){this.isPositionChangeInProgress=e}initMovingOfPbxEndpoint(e,t,n){this.setPositionChangeProgressState(!0),this.currentlyEditedPbxEndpointId=e.ID,this.disableAffectedIndices(t,n)}disableAffectedIndices(e,t){this.firstDisabledIndex=e,this.secondDisabledIndex="UP"===t?e-1:e+1}getDialogData(e){return{data:{type:e?"edit":"create",pbxEndpoint:e,selectedTrunksetId:this.selectedTrunksetId,pbxEndpointTemplates:this.pbxEndpointTemplates,component:this.componentTranslationKey,msTeamsDomains:this.msTeamsDomains,amountPbxEndpoints:this.pbxEndpoints.length}}}setPrimaryPbxEndpoint(){this.primaryPbxEndpoint=this.pbxEndpoints.find(e=>e.IS_ACTIVE)}getTrunksetByPassedId(e){return!isNaN(e)&&e>0?(this.selectedTrunksetId=e,this.trunksetDataService.trunksets$.pipe((0,r.h)(e=>!!e),(0,u.U)(e=>e.filter(e=>e.ID===this.selectedTrunksetId)),(0,u.U)(e=>e[0]))):(this.redirectToShortcutsPage(),(0,s.of)({}))}getInitialTableData(e){return this.pbxEndpointDataTableService.getInitialTableData(this.pbxEndpointDataService.getPbxEndpointsOfTrunkset(e))}setPageTitle(){this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$}setMsTeamsDomains(){this.msTeamsService.getMsTeamsDomains().pipe((0,l.R)(this.ngUnsubscribe)).subscribe(e=>{this.msTeamsDomains=e.data})}redirectToShortcutsPage(){this.logger.info("Redirecting to '/shortcuts' page."),this.router.navigate(["../../shortcuts"],{relativeTo:this.route})}createConfirmDialog(){return this.translateService.stream([`${this.translationPrefix}.confirm_dialog.title`,`${this.translationPrefix}.confirm_dialog.question`]).pipe((0,m.zg)(e=>this.confirmDialogsService.confirm(e[`${this.translationPrefix}.confirm_dialog.title`],e[`${this.translationPrefix}.confirm_dialog.question`])),(0,l.R)(this.ngUnsubscribe))}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME",customCellTemplate:this.customNameTemplate,sortingDisabled:!0},{title:`${this.translationPrefix}.table.column.pbx_endpoint_template`,columnNameId:"PBXENDPOINT_TEMPLATE_ID",customCellTemplate:this.customPbxTemplate,sortingDisabled:!0},{title:`${this.translationPrefix}.table.column.active`,columnNameId:"IS_ACTIVE",customCellTemplate:this.customStateTemplate,columnSize:"small",sortingDisabled:!0},{title:`${this.translationPrefix}.table.column.priority`,columnNameId:"PRIORITY",customCellTemplate:this.customPriorityTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(p.Y36(h.F0),p.Y36(g.uw),p.Y36(f.U),p.Y36(b.sK),p.Y36(_.W),p.Y36(h.gz),p.Y36(x.r),p.Y36(v.E),p.Y36(k.Y),p.Y36(C.U),p.Y36(T.R),p.Y36(A.c),p.Y36(S.p),p.Y36(y.c),p.Y36(P.B),p.Y36(I.C),p.Y36(O.Kf))},e.\u0275cmp=p.Xpm({type:e,selectors:[["pbx-endpoint"]],viewQuery:function(e,t){if(1&e&&(p.Gf(Z,7),p.Gf(M,7),p.Gf(w,7),p.Gf(N,7)),2&e){let e;p.iGM(e=p.CRH())&&(t.customPbxTemplate=e.first),p.iGM(e=p.CRH())&&(t.customNameTemplate=e.first),p.iGM(e=p.CRH())&&(t.customStateTemplate=e.first),p.iGM(e=p.CRH())&&(t.customPriorityTemplate=e.first)}},inputs:{showPbxEndpointsForTrunkset:"showPbxEndpointsForTrunkset"},decls:14,vars:14,consts:[[3,"isAdminHeaderButtonDisabled","title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customNameTemplate",""],["data-e2e","admin-nconnect-voice-pbx-endpoint-page__name-template"],["customPbxTemplate",""],["customStateTemplate",""],["customPriorityTemplate",""],[1,"pbx-endpoint__name-section"],["ellipsisTitle","","data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-name"],["class","pbx-endpoint__name-section__primary-label","data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-badge",4,"ngIf"],["data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-badge",1,"pbx-endpoint__name-section__primary-label"],["appHoverbox","","data-e2e","admin-nconnect-voice-pbx-endpoint-page__toggle",3,"checked","disabled","change"],[4,"ngIf"],[1,"pbx-endpoint__priority-buttons"],["iconName","arrow_up_long","iconSize","small","data-e2e","admin-nconnect-voice-pbx-endpoint-page__arrow-up",3,"disabled","appButtonClick"],["iconName","arrow_down_long","iconSize","small","data-e2e","admin-nconnect-voice-pbx-endpoint-page__arrow-down",3,"disabled","appButtonClick"]],template:function(e,t){1&e&&(p.TgZ(0,"admin-list-header",0),p.NdJ("addButtonClicked",function(){return t.openPbxEndpointModal()}),p.ALo(1,"async"),p.ALo(2,"async"),p.qZA(),p.TgZ(3,"pbx-endpoint-data-table",1),p.NdJ("deleteButtonClicked",function(e){return t.deletePbxEndpoint(e)})("editButtonClicked",function(e){return t.editPbxEndpoint(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),p.ALo(4,"async"),p.ALo(5,"async"),p.YNc(6,L,4,2,"ng-template",null,2,p.W1O),p.YNc(8,U,1,1,"ng-template",3,4,p.W1O),p.YNc(10,B,3,5,"ng-template",null,5,p.W1O),p.YNc(12,q,3,2,"ng-template",null,6,p.W1O),p.qZA()),2&e&&(p.Q6J("isAdminHeaderButtonDisabled",!t.pbxEndpointTemplatesLoaded||p.lcZ(1,6,t.pbxEndpointWithMsTeamsExists$))("title",p.lcZ(2,8,t.pageTitle$)),p.xp6(3),p.Q6J("dataTableSourceInput",p.lcZ(4,10,t.pbxEndpointData$))("isLazyLoadingPossible",p.lcZ(5,12,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},styles:[".pbx-endpoint__priority-buttons[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint__name-section[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint__name-section__primary-label[_ngcontent-%COMP%]{background:#008000;color:#fff;margin-left:1rem;padding:.5rem 1rem}"]}),e})()},42735:function(e,t,n){n.d(t,{a:function(){return f}});var i=n(37716),o=n(3679),a=n(38583),s=n(14944),r=n(78023),c=n(83166),l=n(30234),d=n(98295);function u(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"span",3),i.NdJ("click",function(){i.CHM(e);const t=i.oxw();return t.beginEdit(t.inputFieldValue)}),i._uU(2),i.qZA(),i.TgZ(3,"app-button",4),i.NdJ("appButtonClick",function(){i.CHM(e);const t=i.oxw();return t.beginEdit(t.inputFieldValue)}),i.qZA(),i.BQk()}if(2&e){const e=i.oxw();i.xp6(2),i.hij(" ",e.inputFieldValue," ")}}function m(e,t){if(1&e){const e=i.EpF();i.ynx(0),i.TgZ(1,"app-button",8),i.NdJ("appButtonClick",function(){i.CHM(e);const t=i.oxw(2);return t.submitName(t.inputFieldValue.length)}),i.qZA(),i.BQk()}}function p(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"app-button",9),i.NdJ("appButtonClick",function(){return i.CHM(e),i.oxw(2).exitEditMode()}),i.qZA()}}function h(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"input",5),i.NdJ("blur",function(){i.CHM(e);const t=i.oxw();return t.submitName(t.inputFieldValue.length)})("keyup",function(){return i.CHM(e),i.oxw().updateSaveButtonVisibility()})("keyup.enter",function(){i.CHM(e);const t=i.oxw();return t.submitName(t.inputFieldValue.length)})("keyup.escape",function(){return i.CHM(e),i.oxw().exitEditMode()})("ngModelChange",function(t){return i.CHM(e),i.oxw().inputFieldValue=t}),i.qZA(),i.TgZ(1,"mat-hint",6),i._uU(2),i.qZA(),i.YNc(3,m,2,0,"ng-container",1),i.YNc(4,p,1,0,"ng-template",null,7,i.W1O)}if(2&e){const e=i.MAs(5),t=i.oxw();i.Q6J("ngModel",t.inputFieldValue)("name",t.inputFieldValue)("required",t.required),i.xp6(2),i.AsE(" ",t.inputFieldValue.length," / ",t.maxInputLength," "),i.xp6(1),i.Q6J("ngIf",t.showSaveButton)("ngIfElse",e)}}const g={provide:o.JU,useExisting:(0,i.Gpc)(()=>f),multi:!0};let f=(()=>{class e{constructor(){this.preValue="",this.required=!0,this.maxInputLength=45,this.inputChanged=new i.vpe,this.inputFieldValue="",this.showSaveButton=!1,this.editModeActive=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}writeValue(e){this.inputFieldValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}submitName(e){e>0&&e<=this.maxInputLength&&(this.editModeActive=!1,this.inputChanged.emit(this.inputFieldValue))}beginEdit(e){this.preValue=e,this.editModeActive=!0}exitEditMode(){this.inputFieldValue=this.preValue,this.editModeActive=!1}updateSaveButtonVisibility(){this.showSaveButton=!!this.inputFieldValue&&this.inputFieldValue.length<=this.maxInputLength&&this.preValue!==this.inputFieldValue}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["inline-edit"]],inputs:{required:"required",maxInputLength:"maxInputLength"},outputs:{inputChanged:"inputChanged"},features:[i._Bn([g])],decls:4,vars:2,consts:[["data-e2e","inline-edit-fragment",1,"inline-edit"],[4,"ngIf","ngIfElse"],["showInputField",""],["ellipsisTitle","","tabindex","0",1,"inline-edit__field",3,"click"],["iconName","edit","iconSize","small","data-e2e","inline-edit-fragment--edit-button",1,"inline-edit__icon","inline-edit__icon--edit",3,"appButtonClick"],["data-e2e","inline-edit-fragment--input","dynamicAutofocus","","matInput","",1,"inline-edit__input",3,"ngModel","name","required","blur","keyup","keyup.enter","keyup.escape","ngModelChange"],["align","end",1,"inline-edit__hint"],["closeButton",""],["iconName","done","iconSize","small","data-e2e","inline-edit-fragment--save-button",1,"inline-edit__icon","inline-edit__icon--save",3,"appButtonClick"],["iconName","close","data-e2e","inline-edit-fragment--close-button",3,"appButtonClick"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,u,4,1,"ng-container",1),i.YNc(2,h,6,7,"ng-template",null,2,i.W1O),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",!t.editModeActive)("ngIfElse",e)}},directives:[a.O5,s.w,r.V,c.Nt,o.Fj,l.C,o.JJ,o.On,o.Q7,d.bx],styles:[".inline-edit[_ngcontent-%COMP%]{align-items:center;display:flex}.inline-edit__input[_ngcontent-%COMP%], .inline-edit__input[_ngcontent-%COMP%]:focus{background:transparent;border:0;border-bottom:.1rem solid #000;outline:none;width:100%}.inline-edit__hint[_ngcontent-%COMP%]{margin-left:1rem}.inline-edit__icon--edit[_ngcontent-%COMP%]{opacity:0}mat-row:hover[_nghost-%COMP%]   .inline-edit__icon--edit[_ngcontent-%COMP%], mat-row:hover   [_nghost-%COMP%]   .inline-edit__icon--edit[_ngcontent-%COMP%]{opacity:1;transition:opacity 50ms}"]}),e})()},70532:function(e,t,n){n.d(t,{T:function(){return u}});var i=n(22238),o=n(37716),a=n(38583),s=n(42070),r=n(56706),c=n(29790);function l(e,t){1&e&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"admin.nconnect.shortcuts.info.fraud.message")," "))}function d(e,t){1&e&&(o.TgZ(0,"p"),o._uU(1),o.ALo(2,"translate"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"admin.nconnect.shortcuts.info.spending_management.message")," "))}let u=(()=>{class e{constructor(e,t){this.trunkset=e,this.dialogRef=t}closeModal(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(i.WI),o.Y36(i.so))},e.\u0275cmp=o.Xpm({type:e,selectors:[["trunkset-modal-fraud-info"]],decls:8,vars:10,consts:[["mat-dialog-title","",1,"trunkset-modal-info__title"],[4,"ngIf"],["btnSaveCaption","done",3,"cancelButtonIsHidden","saveClick"]],template:function(e,t){1&e&&(o.TgZ(0,"h4",0),o._uU(1),o.qZA(),o.TgZ(2,"mat-dialog-content"),o.YNc(3,l,3,3,"p",1),o.ALo(4,"trunksetFraudCheck"),o.YNc(5,d,3,3,"p",1),o.ALo(6,"trunksetFraudCheck"),o.qZA(),o.TgZ(7,"footer-actions",2),o.NdJ("saveClick",function(){return t.closeModal()}),o.qZA()),2&e&&(o.xp6(1),o.hij(" Trunkset: ",t.trunkset.NAME,"\n"),o.xp6(2),o.Q6J("ngIf",o.xi3(4,4,t.trunkset,"FRAUD")),o.xp6(2),o.Q6J("ngIf",o.xi3(6,7,t.trunkset,"SPENDING_LIMIT")),o.xp6(2),o.Q6J("cancelButtonIsHidden",!0))},directives:[i.uh,i.xY,a.O5,s.c],pipes:[r.x,c.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;max-width:60rem;padding:.8rem 2.4rem}.trunkset-modal-info__title[_ngcontent-%COMP%]{margin-bottom:0}"]}),e})()},96162:function(e,t,n){n.d(t,{r:function(){return S}});var i=n(22238),o=n(3679),a=n(79765),s=n(25917),r=n(39761),c=n(88002),l=n(46782),d=n(37716),u=n(74162),m=n(97597),p=n(98295),h=n(67441),g=n(38583),f=n(83166),b=n(21554),_=n(68140),x=n(72458),v=n(42070),k=n(29790);function C(e,t){if(1&e&&(d.TgZ(0,"mat-option",15),d._uU(1),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.abbreviation),d.xp6(1),d.hij(" ",e.name," ")}}function T(e,t){if(1&e&&(d.TgZ(0,"mat-option",8),d.TgZ(1,"span",16),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.ID),d.xp6(2),d.Oqu(e.NAME)}}function A(e,t){if(1&e&&(d.TgZ(0,"mat-option",12),d.TgZ(1,"span",16),d._uU(2),d.qZA(),d.qZA()),2&e){const e=t.$implicit;d.Q6J("value",e.ID),d.xp6(2),d.Oqu(e.NAME)}}let S=(()=>{class e{constructor(e,t){this.dialogRef=e,this.data=t,this.ngUnsubscribe=new a.xQ,this.componentTranslationKey=this.data.component,this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.isUserInputInProgress=!1,this.loadBalancingStrategies=[{abbreviation:"pb",name:"Primary / Backup"},{abbreviation:"rr",name:"Round-Robin"},{abbreviation:"ra",name:"Forking"}],this.filteredInboundBlacklistProfiles$=(0,s.of)(t.allInboundBlacklists),this.filteredOutboundBlacklistProfiles$=(0,s.of)(t.allOutboundBlacklists)}ngOnInit(){this.initModal(),this.createFormControls(),this.createForm(),this.filteredInboundBlacklistProfiles$=this.listenForBlacklistInboundIdChanges(),this.filteredOutboundBlacklistProfiles$=this.listenForBlacklistOutboundIdChanges()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}setUserInputState(e){this.isUserInputInProgress=e}initModal(){this.modalTitle=this.data.name||"",this.isLoadBalancingAllowed="off"!==this.data.loadBalancingStrategy}closeDialog(e){this.dialogRef.close(e)}onSubmit(){this.closeDialog(this.formGroup.getRawValue())}displayBlacklistProfileName(e){return t=>{const n=Array.isArray(e)?e.find(e=>e.ID===t):void 0;return(null==n?void 0:n.NAME)||"-"}}listenForBlacklistInboundIdChanges(){return this.blacklistInboundId.valueChanges.pipe((0,r.O)(""),(0,c.U)(e=>this.getBlacklistProfileName(e,this.data.allInboundBlacklists)),(0,c.U)(e=>this.filterBlacklistProfiles(e,this.data.allInboundBlacklists)),(0,l.R)(this.ngUnsubscribe))}listenForBlacklistOutboundIdChanges(){return this.blacklistOutboundId.valueChanges.pipe((0,r.O)(""),(0,c.U)(e=>this.getBlacklistProfileName(e,this.data.allOutboundBlacklists)),(0,c.U)(e=>this.filterBlacklistProfiles(e,this.data.allOutboundBlacklists)),(0,l.R)(this.ngUnsubscribe))}getBlacklistProfileName(e,t){if("string"==typeof e)return e;{const n=t.find(t=>t.ID===e);return(null==n?void 0:n.NAME)||"-"}}filterBlacklistProfiles(e,t){return t.filter(t=>t.NAME.toLowerCase().includes(e.toLowerCase()))}createFormControls(){this.name=new o.NI(this.data.name||""),this.loadBalancingStrategy=new o.NI({value:this.data.loadBalancingStrategy,disabled:!this.isLoadBalancingAllowed},o.kI.required),this.blacklistInboundId=new o.NI({value:this.data.blacklistInboundId||1,disabled:!this.data.allInboundBlacklists},o.kI.required),this.blacklistOutboundId=new o.NI({value:this.data.blacklistOutboundId||1,disabled:!this.data.allOutboundBlacklists},o.kI.required)}createForm(){this.formGroup=new o.cw({name:this.name,loadBalancingStrategy:this.loadBalancingStrategy,blacklistInboundId:this.blacklistInboundId,blacklistOutboundId:this.blacklistOutboundId})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(i.so),d.Y36(i.WI))},e.\u0275cmp=d.Xpm({type:e,selectors:[["trunkset-modal"]],decls:35,vars:36,consts:[["data-e2e","admin-trunkset-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-trunkset-modal-fragment__name--input",3,"formControl"],["appearance","fill"],["formControlName","loadBalancingStrategy","data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy"],["data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy--option",3,"value",4,"ngFor","ngForOf"],["formControlName","blacklistInboundId","matInput","","tabEnterAutocomplete","","data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--input",3,"matAutocomplete","userInputInProgress"],[3,"displayWith","optionSelected"],["auto1","matAutocomplete"],["data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--option",3,"value"],["data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--option",3,"value",4,"ngFor","ngForOf"],["formControlName","blacklistOutboundId","matInput","","tabEnterAutocomplete","","data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--input",3,"matAutocomplete","userInputInProgress"],["auto2","matAutocomplete"],["data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--option",3,"value"],["data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--option",3,"value",4,"ngFor","ngForOf"],["e2e","admin-trunkset-modal-fragment",1,"trunkset-modal__footer-actions",3,"saveDisabled","cancelClick"],["data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy--option",3,"value"],["mat-line",""]],template:function(e,t){if(1&e&&(d.TgZ(0,"nconnect-voice-modal",0),d.NdJ("ngSubmit",function(){return t.onSubmit()}),d._UZ(1,"name-input-field",1),d.TgZ(2,"mat-form-field",2),d.TgZ(3,"mat-label"),d._uU(4),d.ALo(5,"translate"),d.qZA(),d.TgZ(6,"mat-select",3),d.YNc(7,C,2,2,"mat-option",4),d.qZA(),d.qZA(),d.TgZ(8,"mat-form-field",2),d.TgZ(9,"mat-label"),d._uU(10),d.ALo(11,"translate"),d.qZA(),d.TgZ(12,"input",5),d.NdJ("userInputInProgress",function(e){return t.setUserInputState(e)}),d.qZA(),d.TgZ(13,"mat-autocomplete",6,7),d.NdJ("optionSelected",function(){return t.setUserInputState(!1)}),d.ALo(15,"async"),d.TgZ(16,"mat-option",8),d._uU(17),d.ALo(18,"translate"),d.qZA(),d.YNc(19,T,3,2,"mat-option",9),d.ALo(20,"async"),d.qZA(),d.qZA(),d.TgZ(21,"mat-form-field",2),d.TgZ(22,"mat-label"),d._uU(23),d.ALo(24,"translate"),d.qZA(),d.TgZ(25,"input",10),d.NdJ("userInputInProgress",function(e){return t.setUserInputState(e)}),d.qZA(),d.TgZ(26,"mat-autocomplete",6,11),d.NdJ("optionSelected",function(){return t.setUserInputState(!1)}),d.ALo(28,"async"),d.TgZ(29,"mat-option",12),d._uU(30),d.ALo(31,"translate"),d.qZA(),d.YNc(32,A,3,2,"mat-option",13),d.ALo(33,"async"),d.qZA(),d.qZA(),d.TgZ(34,"footer-actions",14),d.NdJ("cancelClick",function(){return t.closeDialog()}),d.qZA(),d.qZA()),2&e){const e=d.MAs(14),n=d.MAs(27);d.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),d.xp6(1),d.Q6J("formControl",t.name),d.xp6(3),d.Oqu(d.lcZ(5,18,t.translationPrefix+".form.field.load_balancing")),d.xp6(3),d.Q6J("ngForOf",t.loadBalancingStrategies),d.xp6(3),d.Oqu(d.lcZ(11,20,t.translationPrefix+".form.field.blacklist.inbound")),d.xp6(2),d.Q6J("matAutocomplete",e),d.xp6(1),d.Q6J("displayWith",t.displayBlacklistProfileName(d.lcZ(15,22,t.filteredInboundBlacklistProfiles$))),d.xp6(3),d.Q6J("value",1),d.xp6(1),d.hij("",d.lcZ(18,24,t.translationPrefix+".form.field.blacklist.allow_all")," "),d.xp6(2),d.Q6J("ngForOf",d.lcZ(20,26,t.filteredInboundBlacklistProfiles$)),d.xp6(4),d.Oqu(d.lcZ(24,28,t.translationPrefix+".form.field.blacklist.outbound")),d.xp6(2),d.Q6J("matAutocomplete",n),d.xp6(1),d.Q6J("displayWith",t.displayBlacklistProfileName(d.lcZ(28,30,t.filteredOutboundBlacklistProfiles$))),d.xp6(3),d.Q6J("value",1),d.xp6(1),d.Oqu(d.lcZ(31,32,t.translationPrefix+".form.field.blacklist.allow_all")),d.xp6(2),d.Q6J("ngForOf",d.lcZ(33,34,t.filteredOutboundBlacklistProfiles$)),d.xp6(2),d.Q6J("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty||t.isUserInputInProgress)}},directives:[u.F,o.JL,o.sg,m.Y,o.JJ,o.oH,p.KE,p.hX,h.gD,o.u,g.sg,o.Fj,f.Nt,b.ZL,_.o,b.XC,x.ey,v.c,x.X2],pipes:[k.X$,g.Ov],styles:[".trunkset-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),e})()},70584:function(e,t,n){n.d(t,{x:function(){return B}});var i=n(96162),o=n(79765),a=n(45435),s=n(46782),r=n(88002),c=n(70532),l=n(37716),d=n(8307),u=n(22238),m=n(29790),p=n(50256),h=n(19885),g=n(37842),f=n(48843),b=n(83282),_=n(38538),x=n(81756),v=n(79764),k=n(14944),C=n(38583),T=n(78023),A=n(56706),S=n(97469);const y=["customInboundBlacklistTemplate"],P=["customOutboundBlacklistTemplate"],I=["customNameTemplate"],O=["customLoadBalancingTemplate"];function Z(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"app-button",10),l.NdJ("appButtonClick",function(){l.CHM(e);const t=l.oxw().element;return l.oxw().openInfoModal(t)}),l.qZA()}}function M(e,t){if(1&e&&(l.TgZ(0,"div",7),l.TgZ(1,"span",8),l._uU(2),l.qZA(),l.YNc(3,Z,1,0,"app-button",9),l.ALo(4,"trunksetFraudCheck"),l.qZA()),2&e){const e=t.element;l.xp6(2),l.Oqu(e.NAME),l.xp6(1),l.Q6J("ngIf",l.lcZ(4,2,e))}}function w(e,t){1&e&&(l._uU(0),l.ALo(1,"loadbalancingStrategy")),2&e&&l.hij(" ",l.lcZ(1,1,t.element.STRATEGY)," ")}function N(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"translate"),l.BQk()),2&e){const e=l.oxw().element,t=l.oxw();l.xp6(1),l.hij(" ",1===e.INBOUND_BLACKLIST_PROFILE_ID?l.lcZ(2,1,t.translationPrefix+".form.field.blacklist.allow_all"):e.inboundBlacklistProfileName," ")}}function E(e,t){if(1&e&&l.YNc(0,N,3,3,"ng-container",11),2&e){const e=t.element;l.oxw();const n=l.MAs(14);l.Q6J("ngIf",e.inboundBlacklistProfileName)("ngIfElse",n)}}function L(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"translate"),l.BQk()),2&e){const e=l.oxw().element,t=l.oxw();l.xp6(1),l.hij(" ",1===e.OUTBOUND_BLACKLIST_PROFILE_ID?l.lcZ(2,1,t.translationPrefix+".form.field.blacklist.allow_all"):e.outboundBlacklistProfileName," ")}}function U(e,t){if(1&e&&l.YNc(0,L,3,3,"ng-container",11),2&e){const e=t.element;l.oxw();const n=l.MAs(14);l.Q6J("ngIf",e.outboundBlacklistProfileName)("ngIfElse",n)}}function D(e,t){if(1&e&&(l._uU(0),l.ALo(1,"translate")),2&e){const e=l.oxw();l.hij(" ",l.lcZ(1,1,e.translationPrefix+".table.cell.blacklist_not_set")," ")}}let B=(()=>{class e{constructor(e,t,n,i,a,s,r,c,l){this.router=e,this.dialog=t,this.translateService=n,this.trunksetDataService=i,this.dataTableLazyLoadingService=a,this.blacklistProfileDataService=s,this.nconnectAccountSelectionService=r,this.dataTableMessageService=c,this.dataTableService=l,this.ngUnsubscribe=new o.xQ,this.componentTranslationKey="trunkset",this.translationPrefix=`admin.nconnect.${this.componentTranslationKey}`,this.pageTitle=`${this.translationPrefix}.title`,this.noDataEntriesText=`${this.translationPrefix}.table.no_data`,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}ngOnInit(){this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(()=>{this.trunksetData$=this.getInitialTableData(),this.initBlacklistProfileFormData()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadMoreTableEntries(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.trunksetDataService.getTrunksets("",this.dataTableLazyLoadingService.currentPage))}editTrunkset(e){this.openTrunksetModal(e).pipe((0,a.h)(e=>!!e),(0,s.R)(this.ngUnsubscribe)).subscribe(t=>{this.dataTableService.editTableItem(this.trunksetDataService.updateTrunkset(e.ID,t),this.componentTranslationKey)})}openInfoModal(e){this.dialog.open(c.T,{data:e,autoFocus:!1})}setBlacklistProfileFormData(e){this.outboundBlacklistProfiles=this.filterBlacklistProfiles(e,"OUT"),this.inboundBlacklistProfiles=this.filterBlacklistProfiles(e,"IN")}initBlacklistProfileFormData(){this.blacklistProfileDataService.getBlacklistProfiles("",1,100).pipe((0,r.U)(e=>e.data),(0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.setBlacklistProfileFormData(e)})}filterBlacklistProfiles(e,t){return null==e?void 0:e.filter(e=>e.DIRECTION===t)}getInitialTableData(){return this.dataTableService.getInitialTableData(this.trunksetDataService.getTrunksets())}openTrunksetModal(e){return this.dialog.open(i.r,this.getDialogData(e)).afterClosed()}getDialogData(e){return{data:{type:"edit",name:e.NAME,loadBalancingStrategy:e.STRATEGY,blacklistInboundId:e.INBOUND_BLACKLIST_PROFILE_ID,blacklistOutboundId:e.OUTBOUND_BLACKLIST_PROFILE_ID,allInboundBlacklists:this.inboundBlacklistProfiles,allOutboundBlacklists:this.outboundBlacklistProfiles,component:this.componentTranslationKey}}}getTableConfig(){return[{title:`${this.translationPrefix}.table.column.name`,columnNameId:"NAME",customCellTemplate:this.customNameTemplate},{title:`${this.translationPrefix}.table.column.load_balancing`,columnNameId:"STRATEGY",customCellTemplate:this.customLoadBalancingTemplate},{title:`${this.translationPrefix}.table.column.concurrent_calls`,columnNameId:"CONCURRENT_CALLS"},{title:`${this.translationPrefix}.table.column.blacklist_inbound`,columnNameId:"inboundBlacklistProfileName",customCellTemplate:this.customInboundBlacklistTemplate},{title:`${this.translationPrefix}.table.column.blacklist_outbound`,columnNameId:"outboundBlacklistProfileName",customCellTemplate:this.customOutboundBlacklistTemplate},{columnNameId:"buttons"}]}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(d.F0),l.Y36(u.uw),l.Y36(m.sK),l.Y36(p.R),l.Y36(h.Y),l.Y36(g.U),l.Y36(f.c),l.Y36(b.D),l.Y36(_.n))},e.\u0275cmp=l.Xpm({type:e,selectors:[["trunkset"]],viewQuery:function(e,t){if(1&e&&(l.Gf(y,7),l.Gf(P,7),l.Gf(I,7),l.Gf(O,7)),2&e){let e;l.iGM(e=l.CRH())&&(t.customInboundBlacklistTemplate=e.first),l.iGM(e=l.CRH())&&(t.customOutboundBlacklistTemplate=e.first),l.iGM(e=l.CRH())&&(t.customNameTemplate=e.first),l.iGM(e=l.CRH())&&(t.customLoadBalancingTemplate=e.first)}},decls:15,vars:13,consts:[[3,"showActionButton","title"],[3,"dataTableSourceInput","hideAllDeleteButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","editButtonClicked","endOfListReached"],["customNameTemplate",""],["customLoadBalancingTemplate",""],["customInboundBlacklistTemplate",""],["customOutboundBlacklistTemplate",""],["blacklistNotSet",""],[1,"trunkset__name-section"],["ellipsisTitle",""],["class","trunkset__attention-icon","iconFill","attention-color","iconName","attention","iconSize","medium",3,"appButtonClick",4,"ngIf"],["iconFill","attention-color","iconName","attention","iconSize","medium",1,"trunkset__attention-icon",3,"appButtonClick"],[4,"ngIf","ngIfElse"]],template:function(e,t){1&e&&(l._UZ(0,"admin-list-header",0),l.ALo(1,"translate"),l.TgZ(2,"data-table",1),l.NdJ("editButtonClicked",function(e){return t.editTrunkset(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),l.ALo(3,"async"),l.ALo(4,"async"),l.YNc(5,M,5,4,"ng-template",null,2,l.W1O),l.YNc(7,w,2,3,"ng-template",null,3,l.W1O),l.YNc(9,E,1,2,"ng-template",null,4,l.W1O),l.YNc(11,U,1,2,"ng-template",null,5,l.W1O),l.YNc(13,D,2,3,"ng-template",null,6,l.W1O),l.qZA()),2&e&&(l.Q6J("showActionButton",!1)("title",l.lcZ(1,7,t.pageTitle)),l.xp6(2),l.Q6J("dataTableSourceInput",l.lcZ(3,9,t.trunksetData$))("hideAllDeleteButtons",!0)("isLazyLoadingPossible",l.lcZ(4,11,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[x.Z,v.Q,k.w,C.O5,T.V],pipes:[m.X$,C.Ov,A.x,S.Z],styles:["@media screen and (max-width: 1023px){[_nghost-%COMP%]{width:100vw}[_nghost-%COMP%]   data-table[_ngcontent-%COMP%]{width:96rem}}.trunkset__attention-icon[_ngcontent-%COMP%]{margin-left:1.5rem}.trunkset__name-section[_ngcontent-%COMP%]{align-items:center;display:flex}"]}),e})()},48637:function(e,t,n){n.d(t,{A2:function(){return k},ap:function(){return v}});n(15017),n(88738),n(39539),n(71621),n(26731),n(92393),n(28313),n(28019),n(48469),n(18393),n(39977),n(40532),n(70584),n(96162);n(37716);n(26985),n(3425),n(74162),n(14320),n(84451),n(23111),n(92996);var i=n(97469),o=(n(97597),n(40389),n(42735),n(38052),n(67961),n(37833),n(15809),n(88589)),a=n(16891),s=n(15761),r=n(47444),c=n(48843),l=n(50256),d=n(6798),u=n(76710),m=n(37842),p=n(37130),h=n(22893),g=n(89521),f=n(17512),b=n(84594),_=n(50112),x=(n(15697),n(56706),n(88283),n(70532),n(6869));n(18869);const v=[u.o,m.U,p.E,x.C,h.C,g.b,f.v,b.W,_.p,o.E],k=[s.b,a.B,i.Z,c.c,r.U,d.I,l.R]},15761:function(e,t,n){n.d(t,{b:function(){return a}});var i=n(37716),o=n(29790);let a=(()=>{class e{constructor(e){this.translateService=e,this.translationPrefix="admin.nconnect.pipe.blacklist_direction"}transform(e){return this.translateService.instant(`${this.translationPrefix}.${"IN"===e?"inbound":"outbound"}`)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.sK,16))},e.\u0275pipe=i.Yjl({name:"blacklistDirection",type:e,pure:!0}),e})()},67961:function(e,t,n){n.d(t,{Y:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e){return{"data-table__content--highlighted":!!e.highlighted}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"dataTableColumnHighlighted",type:e,pure:!0}),e})()},38052:function(e,t,n){n.d(t,{w:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e){return e.columnSize?"cell-size--"+e.columnSize:""}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"dataTableColumnSize",type:e,pure:!0}),e})()},37833:function(e,t,n){n.d(t,{C:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e){return e.hasOwnProperty("OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID")||e.hasOwnProperty("OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID")?!(e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1||e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1):!e.hasOwnProperty("IS_CUSTOM")||!!Number(e.IS_CUSTOM)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"isEditableDataTableItem",type:e,pure:!0}),e})()},97469:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e){switch(e){case"pb":return"Primary / Backup";case"rr":return"Round-Robin";case"ra":return"Forking";default:return"-"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"loadbalancingStrategy",type:e,pure:!0}),e})()},88589:function(e,t,n){n.d(t,{E:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e,t,n){const i=`+${e.COUNTRY_CODE} ${e.NDC} ${e.PILOT}`;return n?i.replace(/\s+/g,""):"blockRangeShown"===t&&e.hasOwnProperty("NUMBERBLOCK_START")?`${i} (${e.NUMBERBLOCK_START}-${e.NUMBERBLOCK_END})`:i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"nconnectPhoneNumber",type:e,pure:!0}),e})()},14320:function(e,t,n){n.d(t,{M:function(){return a}});var i=n(37716),o=n(29790);let a=(()=>{class e{constructor(e){this.translateService=e,this.translationPrefix="admin.nconnect.pipe.pbx_auth_method"}transform(e){let t="";switch(e){case"IP":t="ip";break;case"REGISTRATION":t="register";break;case"MSTEAMS":t="ms_teams"}return`(${this.translateService.instant(`${this.translationPrefix}.auth_text`)}: ${this.translateService.instant(`${this.translationPrefix}.${t}`)})`}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.sK,16))},e.\u0275pipe=i.Yjl({name:"pbxAuthMethod",type:e,pure:!0}),e})()},16891:function(e,t,n){n.d(t,{B:function(){return a}});var i=n(37716),o=n(29790);let a=(()=>{class e{constructor(e){this.translateService=e,this.translationPrefix="admin.nconnect.pipe.custom_global"}transform(e){return this.translateService.instant(`${this.translationPrefix}.${e?"custom":"global"}`)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.sK,16))},e.\u0275pipe=i.Yjl({name:"tableItemType",type:e,pure:!0}),e})()},56706:function(e,t,n){n.d(t,{x:function(){return o}});var i=n(37716);let o=(()=>{class e{transform(e,t){switch(t){case"FRAUD":return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1;case"SPENDING_LIMIT":return e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1;case"BLOCKED":return!!e.BLOCKED_AT&&e.BLOCKED_AT>1;default:return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1||e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=i.Yjl({name:"trunksetFraudCheck",type:e,pure:!0}),e})()},76710:function(e,t,n){n.d(t,{o:function(){return u}});var i=n(25917),o=n(99385),a=n(5304),s=n(45435),r=n(37716),c=n(19122),l=n(48843),d=n(57158);let u=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.setEndpointUrl()}getBackupNumbers(e="",t=1,n=25){const s=(0,o.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}/backupnumbers?${s}`).pipe((0,a.K)(e=>(this.logger.error("Failed to get backup numbers:",e),(0,i.of)([]))))}createBackupNumber(e){return this.apiAdminService.post(`${this.endpointUrl}/numberrouting/${e.numberRoutingId}/backupnumbers`,this.getAdjustedRequestBodyData(e))}updateBackupNumber(e,t){return this.apiAdminService.put(`${this.endpointUrl}/numberrouting/${t.numberRoutingId}/backupnumbers/${e.ID}`,this.getAdjustedRequestBodyData(t))}deleteBackupNumber(e){return this.apiAdminService.delete(`${this.endpointUrl}/numberrouting/${e.NUMBERROUTING_ID}/backupnumbers/${e.ID}`)}getAdjustedRequestBodyData(e){var t;return{NAME:e.name,PREFIX:e.nonEditablePrefix||e.numberblock.toString()+(null===(t=e.extension)||void 0===t?void 0:t.toString()),BACKUPNUMBER:e.backupNumber,BACKUPNUMBER_IS_PREFIX:e.isPrefixBased}}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}`})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.i),r.LFG(l.c),r.LFG(d.Kf))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},37842:function(e,t,n){n.d(t,{U:function(){return m}});var i=n(25917),o=n(5304),a=n(88002),s=n(45435),r=n(99385),c=n(37716),l=n(19122),d=n(48843),u=n(57158);let m=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.setEndpointUrl()}getBlacklistProfiles(e="",t=1,n=25){const a=(0,r.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}?${a}`).pipe((0,o.K)(e=>(this.logger.error("Failed to get blacklist profiles:",e),(0,i.of)([]))))}createBlacklistProfile(e){return this.apiAdminService.post(`${this.endpointUrl}`,e)}getBlacklistProfile(e){return this.apiAdminService.get(`${this.endpointUrl}/${e}`).pipe((0,a.U)(e=>e.data[0]))}updateBlacklistProfile(e){return this.apiAdminService.put(`${this.endpointUrl}/${e.ID}`,e)}deleteBlacklistProfile(e){return this.apiAdminService.delete(`${this.endpointUrl}/${e}`)}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/siptrunk-blacklist-profile`})}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.i),c.LFG(d.c),c.LFG(u.Kf))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},37130:function(e,t,n){n.d(t,{E:function(){return h}});var i=n(79765),o=n(26215),a=n(25917),s=n(68307),r=n(5304),c=n(45435),l=n(99385),d=n(37716),u=n(19122),m=n(48843),p=n(57158);let h=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.blacklistProfileEntryDataErrorSource=new i.xQ,this.hasBlacklistProfileAnonymousEntrySource=new o.X(!1),this.blacklistProfileEntryDataError$=this.blacklistProfileEntryDataErrorSource.asObservable(),this.hasBlacklistProfileAnonymousEntry$=this.hasBlacklistProfileAnonymousEntrySource.asObservable(),this.setEndpointUrl()}createBlacklistProfileEntry(e,t){return this.apiAdminService.post(`${this.endpointUrl}/${t}/siptrunk-blacklist-entry`,e).pipe((0,s.b)(e=>{this.checkForAnonymousEntry(e.data,t)}))}getBlacklistProfileEntries(e,t="",n=1,i=25){const o=(0,l.U8)(t,n,i);return this.apiAdminService.get(`${this.endpointUrl}/${e}/siptrunk-blacklist-entry?${o}`).pipe((0,s.b)(t=>{this.checkForAnonymousEntry(t.data,e)}),(0,r.K)(e=>(this.logger.error("Failed to get blacklist profile entries:",e),this.blacklistProfileEntryDataErrorSource.next(),(0,a.of)({data:[]}))))}updateBlacklistProfileEntry(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e.SIPTRUNK_BLACKLIST_PROFILE_ID}/siptrunk-blacklist-entry/${e.ID}`,t).pipe((0,s.b)(t=>{this.checkForAnonymousEntry(t.data,e.SIPTRUNK_BLACKLIST_PROFILE_ID)}))}deleteBlacklistProfileEntry(e){return this.apiAdminService.delete(`${this.endpointUrl}/${e.SIPTRUNK_BLACKLIST_PROFILE_ID}/siptrunk-blacklist-entry/${e.ID}`).pipe((0,s.b)(t=>{this.checkForAnonymousEntry(t.data,e.SIPTRUNK_BLACKLIST_PROFILE_ID)}))}getBlacklistEntryAnonymous(e){return this.apiAdminService.get(`${this.endpointUrl}/${e}/anonymous`)}checkForAnonymousEntry(e,t){this.findAnonymousBlacklistEntry(e)?this.getBlacklistEntryAnonymous(t).subscribe(e=>{var t;this.hasBlacklistProfileAnonymousEntrySource.next(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.hasAnonymous)},e=>{this.logger.error(e)}):this.hasBlacklistProfileAnonymousEntrySource.next(!1)}findAnonymousBlacklistEntry(e){return!!e.find(e=>e.PREFIX.includes("anonymous"))}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/siptrunk-blacklist-profile`})}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.i),d.LFG(m.c),d.LFG(p.Kf))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6869:function(e,t,n){n.d(t,{C:function(){return p}});var i=n(79765),o=n(82298),a=n(25917),s=n(68307),r=n(5304),c=n(45435),l=n(37716),d=n(19122),u=n(48843),m=n(57158);let p=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.reloadMsTeamsSource=new i.xQ,this.pbxEndpointWithMsTeamsExistsSource=new o.t(1),this.msTeamsDomainsSource=new o.t(1),this.reloadMsTeams$=this.reloadMsTeamsSource.asObservable(),this.pbxEndpointWithMsTeamsExists$=this.pbxEndpointWithMsTeamsExistsSource.asObservable(),this.msTeamsDomains$=this.msTeamsDomainsSource.asObservable(),this.setEndpointUrl()}getMsTeamsDomains(e="all"){return this.apiAdminService.get(`${this.endpointUrl}?filter=${e}`).pipe((0,s.b)(e=>{this.msTeamsDomainsSource.next(e.data)}),(0,r.K)(e=>(this.logger.error("MS Teams domain error:",e),(0,a.of)([]))))}checkTrunksetForExistingMsTeamsEndpoint(e,t=!1){const n=!!e.find(e=>"MSTEAMS"===e.TYPE);this.pbxEndpointWithMsTeamsExistsSource.next(n),n&&t&&this.reloadMsTeamsSource.next()}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/pbxendpoint/ms-teams`})}static getRequestBodyForMsTeamsAuthStyle(e){return{AUTH_STYLE:"MSTEAMS",LYNC_SITE_ID:e.LYNC_SITE_ID}}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(d.i),l.LFG(u.c),l.LFG(m.Kf))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},17512:function(e,t,n){n.d(t,{v:function(){return u}});var i=n(99385),o=n(25917),a=n(5304),s=n(45435),r=n(37716),c=n(19122),l=n(48843),d=n(57158);let u=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.setEndpointUrl()}getNumberRoutings(e="",t=1,n=25){const s=(0,i.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}/numberrouting?${s}`).pipe((0,a.K)(e=>(this.logger.error("Failed to get number routings:",e),(0,o.of)([]))))}createNumberRouting(e){return this.apiAdminService.post(`${this.endpointUrl}/trunkset/${e.trunksetId}/numberrouting`,this.getAdjustedRequestBodyData(e))}updateNumberRouting(e){return this.apiAdminService.put(`${this.endpointUrl}/trunkset/${e.trunksetId}/numberrouting/${e.numberRoutingId}`,this.getAdjustedRequestBodyData(e))}deleteNumberRouting(e,t){return this.apiAdminService.delete(`${this.endpointUrl}/trunkset/${e}/numberrouting/${t}`)}getAdjustedRequestBodyData(e){return{NAME:e.name,TRUNK_ID:e.trunkId,numberblockIds:e.numberblockIds}}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}`})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.i),r.LFG(l.c),r.LFG(d.Kf))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},22893:function(e,t,n){n.d(t,{C:function(){return u}});var i=n(99385),o=n(25917),a=n(5304),s=n(45435),r=n(37716),c=n(19122),l=n(48843),d=n(57158);let u=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.setEndpointUrl()}getNumberblocks(e="",t=1,n=25){const s=(0,i.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}/numberblock?${s}`).pipe((0,a.K)(e=>(this.logger.error("Failed to get numberblocks:",e),(0,o.of)([]))))}getNumberblock(e,t){return this.apiAdminService.get(`${this.endpointUrl}/trunk/${e}/numberblock/${t}`)}getMappedNumberblocks(e="",t=1,n=25){const s=(0,i.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}/numberblock-mapped?${s}`).pipe((0,a.K)(e=>(this.logger.error("Failed to get numberblock mapped:",e),(0,o.of)([]))))}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}`})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.i),r.LFG(l.c),r.LFG(d.Kf))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},89521:function(e,t,n){n.d(t,{b:function(){return m}});var i=n(79765),o=n(25917),a=n(5304),s=n(45435),r=n(99385),c=n(37716),l=n(19122),d=n(48843),u=n(57158);let m=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.numberblockEntryDataErrorSource=new i.xQ,this.numberblockEntryDataError$=this.numberblockEntryDataErrorSource.asObservable(),this.setEndpointUrl()}createNumberblockEntry(e,t){return this.apiAdminService.post(`${this.endpointUrl}/${e}/numberblock`,this.getAdjustedRequestBodyData(t))}getNumberblockEntries(e,t="",n=1,i=25){const s=(0,r.U8)(t,n,i);return this.apiAdminService.get(`${this.endpointUrl}/${e}/numberblock?${s}`).pipe((0,a.K)(e=>(this.logger.error("Failed to get numberblock entries:",e),this.numberblockEntryDataErrorSource.next(),(0,o.of)([]))))}updateNumberblockEntry(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e.TRUNK_ID}/numberblock/${e.INBOUND_TRUNK_NUMBER_ID}`,this.getAdjustedRequestBodyData(t))}deleteNumberblockEntry(e){return this.apiAdminService.delete(`${this.endpointUrl}/${e.TRUNK_ID}/numberblock/${e.INBOUND_TRUNK_NUMBER_ID}`)}checkPrefixValidity(e,t){return this.apiAdminService.post(`${this.endpointUrl}/${e}/numberblock/valid`,this.getAdjustedRequestBodyData(t)).pipe((0,a.K)(e=>(this.logger.error("Failed to check numberblock prefix:",e),(0,o.of)([]))))}getAdjustedRequestBodyData(e){return{prefix:e.prefix.toString(),parentInboundTrunkNumberId:e.parentInboundTrunkNumberId}}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/trunk`})}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.i),c.LFG(d.c),c.LFG(u.Kf))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},84594:function(e,t,n){n.d(t,{W:function(){return g}});var i=n(79765),o=n(25917),a=n(68307),s=n(5304),r=n(45435),c=n(99385),l=n(6869),d=n(37716),u=n(19122),m=n(48843),p=n(45832),h=n(57158);let g=(()=>{class e{constructor(e,t,n,o,a){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.snackBarService=n,this.msTeamsService=o,this.logger=a,this.setPasswordErrorSource=new i.xQ,this.reloadPbxEndpointsAfterDeleteSource=new i.xQ,this.setPasswordError$=this.setPasswordErrorSource.asObservable(),this.reloadPbxEndpointsAfterDelete$=this.reloadPbxEndpointsAfterDeleteSource.asObservable(),this.setEndpointUrl()}getPbxEndpointsOfTrunkset(e,t="",n=1,i=25){const r=(0,c.U8)(t,n,i);return this.apiAdminService.get(`${this.endpointUrl}/${e}/pbxendpoint?${r}&sort=PRIORITY`).pipe((0,a.b)(e=>{this.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data)}),(0,s.K)(e=>(this.logger.error("Failed to get PBX endpoints:",e),(0,o.of)([]))))}createPbxEndpoint(t,n){return this.apiAdminService.post(`${this.endpointUrl}/${t}/pbxendpoint`,e.getAdjustedRequestBodyForPost(n)).pipe((0,a.b)(e=>{this.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data,!0)}),(0,s.K)(e=>{var t;const n=null===(t=e.error.errors[0])||void 0===t?void 0:t.message,i="admin.nconnect.pbx_endpoint.form.error";let a=`${i}.creation_failed`;return n.includes("already used")?a=`${i}.already_used`:n.includes("allowed range")&&(a=`${i}.ip_not_allowed`),this.snackBarService.openErrorInfo(a),(0,o.of)([])}))}updatePbxEndpoint(t,n){return this.apiAdminService.put(`${this.endpointUrl}/${t.TRUNKSET_ID}/pbxendpoint/${t.ID}`,e.getAdjustedRequestBodyForPut(n))}deletePbxEndpoint(e,t){return this.apiAdminService.delete(`${this.endpointUrl}/${e}/pbxendpoint/${t}`).pipe((0,a.b)(e=>{this.reloadPbxEndpointsAfterDeleteSource.next(),this.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data,!0)}))}setPassword(e){return this.apiAdminService.put(`${this.endpointUrl}/${e.TRUNKSET_ID}/pbxendpoint/${e.ID}/setpassword`).pipe((0,s.K)(e=>(this.setPasswordErrorSource.next(),this.logger.error("Failed to set PBX password:",e),(0,o.of)({appStatusCode:!1}))))}resetUserAgent(e){return this.apiAdminService.put(`${this.endpointUrl}/${e.TRUNKSET_ID}/pbxendpoint/${e.ID}/resetuseragentcheck`).pipe((0,s.K)(e=>(this.logger.error("Failed to reset user agent:",e),(0,o.of)({appStatusCode:!1}))))}setActiveState(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e.TRUNKSET_ID}/pbxendpoint/${e.ID}/activation`,{enable:t})}setPriority(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e.TRUNKSET_ID}/pbxendpoint/${e.ID}/priority`,{move:t})}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,r.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/trunkset`})}static getAdjustedRequestBodyForPost(t){const n={NAME:t.name,PBXENDPOINT_TEMPLATE_ID:t.pbxEndpointTemplate.ID};return t.protocol?Object.assign(Object.assign({},n),e.getRequestBodyForIpAuthStyle(t)):t.msTeamsDomain?Object.assign(Object.assign({},n),l.C.getRequestBodyForMsTeamsAuthStyle(t.msTeamsDomain)):n}static getRequestBodyForIpAuthStyle(e){return{HOST:e.host,PORT:Number(e.port),PROTOCOL:e.protocol}}static getAdjustedRequestBodyForPut(e){return e.protocol?{NAME:e.name,HOST:e.host,PORT:e.port,PROTOCOL:e.protocol}:{NAME:e.name}}}return e.\u0275fac=function(t){return new(t||e)(d.LFG(u.i),d.LFG(m.c),d.LFG(p.c),d.LFG(l.C),d.LFG(h.Kf))},e.\u0275prov=d.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},50112:function(e,t,n){n.d(t,{p:function(){return u}});var i=n(5304),o=n(45435),a=n(99385),s=n(25917),r=n(37716),c=n(19122),l=n(48843),d=n(57158);let u=(()=>{class e{constructor(e,t,n){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.logger=n,this.setEndpointUrl()}getPbxEndpointTemplates(e="",t=1,n=25){const o=(0,a.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}?${o}`).pipe((0,i.K)(e=>(this.logger.error("Failed to get PBX endpoint templates:",e),(0,s.of)([]))))}createPbxEndpointTemplate(e){return this.apiAdminService.post(`${this.endpointUrl}`,this.getAdjustedRequestBodyData(e))}updatePbxEndpointTemplate(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e}`,this.getAdjustedRequestBodyData(t))}deletePbxEndpointTemplate(e){return this.apiAdminService.delete(`${this.endpointUrl}/${e}`)}getAdjustedRequestBodyData(e){return{NAME:e.name,CLIP_STYLE:e.clipStyle,NUMBER_FORMAT:e.numberFormat,AUTH_STYLE:e.authStyle,INBOUND_RURI_FORMAT:e.inboundRuriFormat}}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/pbxendpointtemplate`})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c.i),r.LFG(l.c),r.LFG(d.Kf))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},50256:function(e,t,n){n.d(t,{R:function(){return f}});var i=n(82298),o=n(26215),a=n(25917),s=n(99385),r=n(45435),c=n(43190),l=n(68307),d=n(5304),u=n(37716),m=n(19122),p=n(48843),h=n(89447),g=n(57158);let f=(()=>{class e{constructor(e,t,n,a){this.apiAdminService=e,this.nconnectAccountSelectionService=t,this.accountService=n,this.logger=a,this.firstTrunksetIdSource=new i.t(1),this.trunksetsSource=new o.X(null),this.trunksetsWithFraudIssuesSource=new o.X(void 0),this.trunksetsWithSpendingManagementIssuesSource=new o.X(void 0),this.firstTrunksetId$=this.firstTrunksetIdSource.asObservable(),this.trunksets$=this.trunksetsSource.asObservable(),this.trunksetsWithFraudIssues$=this.trunksetsWithFraudIssuesSource.asObservable(),this.trunksetsWithSpendingManagementIssues$=this.trunksetsWithSpendingManagementIssuesSource.asObservable(),this.setEndpointUrl(),this.accountService.selectedAccountModules$.pipe((0,r.h)(e=>e.includes("nconnect_voice")),(0,c.w)(()=>this.getTrunksets())).subscribe()}updateTrunkset(e,t){return this.apiAdminService.put(`${this.endpointUrl}/${e}`,this.getAdjustedRequestBodyData(t)).pipe((0,l.b)(e=>{this.findEditedTrunksetAndEmitTrunksets(e.data[0])}))}getTrunksets(e="",t=1,n=25){const i=(0,s.U8)(e,t,n);return this.apiAdminService.get(`${this.endpointUrl}?${i}`).pipe((0,l.b)(e=>{const t=e.data;this.emitTrunksets(t),this.emitFirstTrunksetId(t),this.setTrunksetsWithFraudIssues(t),this.setTrunksetsWithSpendingManagementIssues(t)}),(0,d.K)(e=>(this.logger.error("Failed fetching Trunksets:",e),(0,a.of)([]))))}getValueOfTrunksets(){return this.trunksetsSource.getValue()||[]}findEditedTrunksetAndEmitTrunksets(e){const t=this.getValueOfTrunksets(),n=t.findIndex(t=>t.ID===(null==e?void 0:e.ID));t[n]=e,this.emitTrunksets(t)}emitTrunksets(e){this.trunksetsSource.next(e)}emitFirstTrunksetId(e){var t;const n=(null===(t=e[0])||void 0===t?void 0:t.ID)||0;this.firstTrunksetIdSource.next(n)}setTrunksetsWithFraudIssues(e={}){const t=e.filter(e=>e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1);this.trunksetsWithFraudIssuesSource.next(t)}setTrunksetsWithSpendingManagementIssues(e){const t=e.filter(e=>e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1);this.trunksetsWithSpendingManagementIssuesSource.next(t)}getAdjustedRequestBodyData(e){return{NAME:e.name,STRATEGY:e.loadBalancingStrategy,INBOUND_BLACKLIST_PROFILE_ID:e.blacklistInboundId,OUTBOUND_BLACKLIST_PROFILE_ID:e.blacklistOutboundId}}setEndpointUrl(){this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,r.h)(e=>!!e)).subscribe(()=>{this.endpointUrl=`${this.nconnectAccountSelectionService.getNconnectApiUrl()}/trunkset`})}}return e.\u0275fac=function(t){return new(t||e)(u.LFG(m.i),u.LFG(p.c),u.LFG(h.B),u.LFG(g.Kf))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},19885:function(e,t,n){n.d(t,{Y:function(){return s}});var i=n(26215),o=n(79765),a=n(37716);let s=(()=>{class e{constructor(){this.isLazyLoadingPossibleSource=new i.X(!1),this.isLazyLoadingInProgressSource=new i.X(!1),this.addLazyLoadedTableItemsSource=new o.xQ,this.totalPageCount=1,this.currentPage=1,this.isLazyLoadingInProgress$=this.isLazyLoadingInProgressSource.asObservable(),this.isLazyLoadingPossible$=this.isLazyLoadingPossibleSource.asObservable(),this.addLazyLoadedTableItems$=this.addLazyLoadedTableItemsSource.asObservable()}emitLazyLoadedTableItems(e){this.addLazyLoadedTableItemsSource.next(e)}loadMoreTableEntries(e){this.isLazyLoadingPossibleSource.getValue()&&(this.setLazyLoadingProgressState(!0),e.subscribe(e=>{this.emitLazyLoadedTableItems(e.data),this.updateLazyLoadingState(),this.setLazyLoadingProgressState(!1)}))}initLazyLoadingState(e){this.setTotalPageCount(e),this.setInitialLazyLoadingState()}setLazyLoadingProgressState(e){this.isLazyLoadingInProgressSource.next(e)}setLoadButtonVisibility(){this.isLazyLoadingPossibleSource.next(this.currentPage<this.totalPageCount)}setTotalPageCount(e){this.totalPageCount=e}incrementCurrentPage(){this.currentPage++}updateLazyLoadingState(){this.setLoadButtonVisibility(),this.incrementCurrentPage()}setInitialLazyLoadingState(){this.currentPage=1,this.setLoadButtonVisibility(),this.incrementCurrentPage()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},83282:function(e,t,n){n.d(t,{D:function(){return r}});var i=n(37716),o=n(45832),a=n(29790),s=n(57158);let r=(()=>{class e{constructor(e,t,n){this.snackBarService=e,this.translateService=t,this.logger=n}showDataTableSnackbar(e,t,n,i){const o=this.translateService.instant(`admin.nconnect.item.${n}`);this.openSnackbarMessage(t,`admin.nconnect.snackbar_action.${e}.${t}`,{nconnectItem:o},i)}openSnackbarMessage(e,t,n,i){switch(i&&(this.logger.error("Displaying error snackbar for error:",i),this.snackBarService.openErrorInfo(i.message)),e){case"init":this.snackBarService.open(t,"",{},n);break;case"success":this.snackBarService.openInfo(t,!0,"",{},n)}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o.c),i.LFG(a.sK),i.LFG(s.Kf))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},38538:function(e,t,n){n.d(t,{n:function(){return d}});var i=n(79765),o=n(68307),a=n(88002),s=n(37716),r=n(5882),c=n(83282),l=n(19885);let d=(()=>{class e{constructor(e,t,n){this.confirmDialogsService=e,this.dataTableMessageService=t,this.dataTableLazyLoadingService=n,this.addTableItemSource=new i.xQ,this.updateTableItemSource=new i.xQ,this.removeTableItemSource=new i.xQ,this.addTableItem$=this.addTableItemSource.asObservable(),this.updateTableItem$=this.updateTableItemSource.asObservable(),this.removeTableItem$=this.removeTableItemSource.asObservable()}addTableItem(e){this.addTableItemSource.next(e)}getInitialTableData(e){return e.pipe((0,o.b)(e=>{var t;this.dataTableLazyLoadingService.initLazyLoadingState(null===(t=e.meta)||void 0===t?void 0:t.pageCount)}),(0,a.U)(e=>e.data||[]))}editTableItem(e,t){this.initTableItemTask(e,t,"update")}createTableItem(e,t){this.initTableItemTask(e,t,"create")}deleteTableItem(e,t,n){const i="delete";this.confirmDialogsService.doTaskAfterConfirmation(e).pipe((0,o.b)(()=>{this.dataTableMessageService.showDataTableSnackbar(i,"init",n)})).subscribe(()=>{this.removeTableItemSource.next(t),this.dataTableMessageService.showDataTableSnackbar(i,"success",n)},e=>{this.dataTableMessageService.showDataTableSnackbar(i,"error",n,e)})}emitUpdatedTableItem(e){this.updateTableItemSource.next(e)}initTableItemTask(e,t,n){this.dataTableMessageService.showDataTableSnackbar(n,"init",t),e.subscribe(e=>{"success"===e.appStatusCode&&(this.initTaskAfterApiSuccess(n,e.data[0]),this.dataTableMessageService.showDataTableSnackbar(n,"success",t))},e=>{this.dataTableMessageService.showDataTableSnackbar(n,"error",t,e)})}initTaskAfterApiSuccess(e,t){"create"===e?this.addTableItem(t):this.emitUpdatedTableItem(t)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.U),s.LFG(c.D),s.LFG(l.Y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},48843:function(e,t,n){n.d(t,{c:function(){return p}});var i=n(26215),o=n(9112),a=n(45435),s=n(87519),r=n(88002),c=n(39485),l=n(37716),d=n(89447),u=n(51233),m=n(8307);let p=(()=>{class e{constructor(e,t,n){this.accountService=e,this.userService=t,this.router=n,this.isNconnectVoiceAccountSelectedSource=new i.X(null),this.isNconnectAccountSelected$=this.isNconnectVoiceAccountSelectedSource.asObservable(),this.listenForSelectedAccountChanges()}getNconnectApiUrl(){return this.nconnectApiUrl}setNconnectAccess(e,t){this.setNconnectApiUrl(e),t||this.redirectToAdminUserPage(),this.isNconnectVoiceAccountSelectedSource.next(t)}redirectToAdminUserPage(){this.router.navigate(["/admin/user"])}checkNconnectModuleAvailability(e){return!!(null==e?void 0:e.includes("nconnect_voice"))}listenForSelectedAccountChanges(){(0,o.aj)([this.accountService.selectedAccount$.pipe((0,a.h)(e=>!!e),(0,s.x)()),this.accountService.selectedAccountModules$.pipe((0,r.U)(e=>this.checkNconnectModuleAvailability(e)),(0,s.x)())]).subscribe(([e,t])=>{this.setNconnectAccess(e,t)})}setNconnectApiUrl(e){this.nconnectApiUrl=`${c.N.API_URL}/nconnectvoice/${e.accountType}:${e.accountId}`}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(d.B),l.LFG(u.K),l.LFG(m.F0))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},47444:function(e,t,n){n.d(t,{U:function(){return d}});var i=n(26215),o=n(82298),a=n(37716),s=n(8307),r=n(97469),c=n(16891),l=n(15761);let d=(()=>{class e{constructor(e,t,n,a){this.router=e,this.loadbalancingStrategyPipe=t,this.tableItemTypePipe=n,this.blacklistDirectionPipe=a,this.nconnectItemNameSource=new i.X(""),this.nconnectItemSource=new o.t(1),this.nconnectItemNameAvailableFromNavigation=!1,this.nconnectItemName$=this.nconnectItemNameSource.asObservable(),this.nconnectItem$=this.nconnectItemSource.asObservable()}setNconnectItem(e){this.nconnectItemSource.next(e),this.setNconnectItemName(e)}setNconnectItemName(e){let t;this.router.url.includes("blacklist")?(t=this.getBlacklistEntryName(e),this.emitItemName(t)):this.router.url.includes("pbx-endpoint")?(t=this.getTrunksetPageTitle(e),this.emitItemName(t)):this.router.url.includes("numberblock")&&(t=this.getNumberblockEntryName(e),this.emitItemName(t))}emitItemName(e){this.nconnectItemNameAvailableFromNavigation=!0,this.nconnectItemNameSource.next(e)}getTrunksetPageTitle(e){return`${e.NAME} (${this.getTrunksetStrategyName(e)})`}getTrunksetStrategyName(e){return this.loadbalancingStrategyPipe.transform(e.STRATEGY)}getBlacklistEntryName(e){const t=this.blacklistDirectionPipe.transform(e.DIRECTION),n=this.tableItemTypePipe.transform(e.CUSTOMER_ID);return`${e.NAME} (${t}, ${n})`}getNumberblockEntryName(e){return`+${e.COUNTRY_CODE} ${e.NDC} ${e.PILOT} (${e.NUMBERBLOCK_START}-${e.NUMBERBLOCK_END})`}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.F0),a.LFG(r.Z),a.LFG(c.B),a.LFG(l.b))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},90500:function(e,t,n){n.d(t,{K:function(){return a}});var i=n(37716),o=n(29790);let a=(()=>{class e{constructor(e){this.translateService=e}getModalTitle(e,t){const n=`admin.nconnect.${e}.modal.title`;return this.translateService.instant(t?`${n}.edit`:`${n}.create`)}getButtonCaption(e,t){let n="";return n="save"===e?t?"admin.nconnect.common_form.button.save":"admin.nconnect.common_form.button.create":"admin.nconnect.common_form.button.cancel",n}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(o.sK))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},134:function(e,t,n){n.d(t,{f:function(){return a}});var i=n(26215),o=n(37716);let a=(()=>{class e{constructor(){this.addButtonClickedSource=new i.X(void 0),this.addButtonClicked$=this.addButtonClickedSource.asObservable()}emitAddButtonClicked(e){this.addButtonClickedSource.next(e)}resetNconnectComponent(){this.emitAddButtonClicked(void 0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},69553:function(e,t,n){n.d(t,{E:function(){return l}});var i=n(79765),o=n(38538),a=n(37716),s=n(5882),r=n(83282),c=n(19885);let l=(()=>{class e extends o.n{constructor(e,t,n){super(e,t,n),this.confirmDialogsService=e,this.dataTableMessageService=t,this.dataTableLazyLoadingService=n,this.moveTableItemSource=new i.xQ,this.moveTableItem$=this.moveTableItemSource.asObservable()}moveTableItem(e,t,n){this.moveTableItemSource.next({pbxEndpoints:e,index:t,moveOption:n})}}return e.\u0275fac=function(t){return new(t||e)(a.LFG(s.U),a.LFG(r.D),a.LFG(c.Y))},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},81756:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(37716),o=n(14944),a=n(38583),s=n(78023);function r(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"app-button",2),i.NdJ("appButtonClick",function(){return i.CHM(e),i.oxw().adminListHeaderButtonClick()}),i.qZA()}if(2&e){const e=i.oxw();i.Q6J("disabled",e.isAdminHeaderButtonDisabled)}}let c=(()=>{class e{constructor(){this.title="",this.showActionButton=!0,this.isAdminHeaderButtonDisabled=!1,this.addButtonClicked=new i.vpe}adminListHeaderButtonClick(){this.addButtonClicked.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["admin-list-header"]],inputs:{title:"title",showActionButton:"showActionButton",isAdminHeaderButtonDisabled:"isAdminHeaderButtonDisabled"},outputs:{addButtonClicked:"addButtonClicked"},decls:3,vars:2,consts:[["ellipsisTitle","","data-e2e","admin-list-header-fragment__title",1,"admin-list-header__title"],["class","admin-list-header__button","iconName","add","data-e2e","admin-list-header-fragment__add--button",3,"disabled","appButtonClick",4,"ngIf"],["iconName","add","data-e2e","admin-list-header-fragment__add--button",1,"admin-list-header__button",3,"disabled","appButtonClick"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.qZA(),i.YNc(2,r,1,1,"app-button",1)),2&e&&(i.xp6(1),i.hij(" ",t.title,"\n"),i.xp6(1),i.Q6J("ngIf",t.showActionButton))},directives:[o.w,a.O5,s.V],styles:["[_nghost-%COMP%]{align-items:center;background:#fff;display:flex;height:6.4rem;justify-content:space-between;position:-webkit-sticky;position:sticky;top:0;z-index:2}.admin-list-header__title[_ngcontent-%COMP%]{font-size:2.6rem;max-width:80rem;padding-left:2rem}.admin-list-header__button[_ngcontent-%COMP%]{margin-right:1rem}"]}),e})()},79764:function(e,t,n){n.d(t,{Q:function(){return K}});var i=n(37716),o=n(32789),a=n(11494),s=n(46782),r=n(79765),c=n(38538),l=n(19885),d=n(65860),u=n(38583),m=n(14944),p=n(78023),h=n(44163),g=n(38052),f=n(67961),b=n(29790),_=n(37833);function x(e,t){if(1&e&&(i.TgZ(0,"mat-header-cell",13),i.ALo(1,"dataTableColumnSize"),i.TgZ(2,"div",14),i.ALo(3,"dataTableColumnHighlighted"),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA()),2&e){const e=i.oxw(2).$implicit;i.Q6J("className",i.lcZ(1,4,e))("disabled",e.sortingDisabled),i.xp6(2),i.Q6J("ngClass",i.lcZ(3,6,e)),i.xp6(2),i.hij(" ",i.lcZ(5,8,e.title)," ")}}function v(e,t){}const k=function(e,t,n,i){return{element:e,column:t,index:n,last:i}};function C(e,t){if(1&e&&(i.TgZ(0,"mat-cell",15),i.ALo(1,"dataTableColumnSize"),i.TgZ(2,"div",14),i.ALo(3,"dataTableColumnHighlighted"),i.YNc(4,v,0,0,"ng-template",16),i.qZA(),i.qZA()),2&e){const e=t.$implicit,n=t.index,o=t.last,a=i.oxw(2).$implicit;i.Q6J("className",i.lcZ(1,4,a)),i.xp6(2),i.Q6J("ngClass",i.lcZ(3,6,a)),i.xp6(2),i.Q6J("ngTemplateOutletContext",i.l5B(8,k,e,a,n,o))("ngTemplateOutlet",a.customCellTemplate)}}function T(e,t){1&e&&(i.ynx(0),i.YNc(1,x,6,10,"mat-header-cell",11),i.YNc(2,C,5,13,"mat-cell",12),i.BQk())}function A(e,t){if(1&e&&(i.TgZ(0,"mat-header-cell",13),i.ALo(1,"dataTableColumnSize"),i.TgZ(2,"div",14),i.ALo(3,"dataTableColumnHighlighted"),i._uU(4),i.ALo(5,"translate"),i.qZA(),i.qZA()),2&e){const e=i.oxw(3).$implicit;i.Q6J("className",i.lcZ(1,4,e))("disabled",e.sortingDisabled),i.xp6(2),i.Q6J("ngClass",i.lcZ(3,6,e)),i.xp6(2),i.hij(" ",i.lcZ(5,8,e.title)," ")}}function S(e,t){if(1&e&&(i.TgZ(0,"mat-cell",15),i.ALo(1,"dataTableColumnSize"),i.TgZ(2,"div",14),i.ALo(3,"dataTableColumnHighlighted"),i._uU(4),i.qZA(),i.qZA()),2&e){const e=t.$implicit,n=i.oxw(3).$implicit;i.Q6J("className",i.lcZ(1,3,n)),i.xp6(2),i.Q6J("ngClass",i.lcZ(3,5,n)),i.xp6(2),i.hij(" ",e[n.columnNameId]," ")}}function y(e,t){1&e&&(i.ynx(0),i.YNc(1,A,6,10,"mat-header-cell",11),i.YNc(2,S,5,7,"mat-cell",12),i.BQk())}function P(e,t){if(1&e&&i.YNc(0,y,3,0,"ng-container",8),2&e){const e=i.oxw().$implicit,t=i.MAs(5);i.Q6J("ngIf","buttons"!==e.columnNameId)("ngIfElse",t)}}function I(e,t){1&e&&i._UZ(0,"mat-header-cell")}function O(e,t){}function Z(e,t){if(1&e&&(i.ynx(0),i.YNc(1,O,0,0,"ng-template",16),i.BQk()),2&e){const e=i.oxw(2),t=e.$implicit,n=e.index,o=e.last,a=i.oxw(2).$implicit;i.xp6(1),i.Q6J("ngTemplateOutletContext",i.l5B(2,k,t,a,n,o))("ngTemplateOutlet",a.customButtonTemplate)}}function M(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"app-button",24),i.NdJ("appButtonClick",function(){i.CHM(e);const t=i.oxw(3).$implicit;return i.oxw(3).deleteButtonClick(t)}),i.qZA()}}function w(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"app-button",25),i.NdJ("appButtonClick",function(){i.CHM(e);const t=i.oxw(3).$implicit;return i.oxw(3).editButtonClick(t)}),i.qZA()}if(2&e){const e=i.oxw(6);i.Q6J("iconName",e.customEditButton)}}function N(e,t){if(1&e&&(i.YNc(0,M,1,0,"app-button",22),i.YNc(1,w,1,1,"app-button",23)),2&e){const e=i.oxw(5);i.Q6J("ngIf",!e.hideAllDeleteButtons),i.xp6(1),i.Q6J("ngIf",!e.hideAllEditButtons)}}function E(e,t){if(1&e&&(i.TgZ(0,"div",20),i.YNc(1,Z,2,7,"ng-container",8),i.YNc(2,N,2,2,"ng-template",null,21,i.W1O),i.qZA()),2&e){const e=i.MAs(3),t=i.oxw(3).$implicit;i.xp6(1),i.Q6J("ngIf",t.customButtonTemplate)("ngIfElse",e)}}function L(e,t){if(1&e&&(i.TgZ(0,"mat-cell"),i.YNc(1,E,4,2,"div",19),i.ALo(2,"isEditableDataTableItem"),i.qZA()),2&e){const e=t.$implicit;i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,e))}}function U(e,t){1&e&&(i.YNc(0,I,1,0,"mat-header-cell",17),i.YNc(1,L,3,3,"mat-cell",18))}function D(e,t){if(1&e&&(i.ynx(0,7),i.YNc(1,T,3,0,"ng-container",8),i.YNc(2,P,1,2,"ng-template",null,9,i.W1O),i.YNc(4,U,2,0,"ng-template",null,10,i.W1O),i.BQk()),2&e){const e=t.$implicit,n=i.MAs(3);i.Q6J("matColumnDef",e.columnNameId),i.xp6(1),i.Q6J("ngIf",e.customCellTemplate)("ngIfElse",n)}}function B(e,t){1&e&&i._UZ(0,"mat-header-row",26)}const q=function(e){return{disabled:e}};function R(e,t){1&e&&(i._UZ(0,"mat-row",27),i.ALo(1,"isEditableDataTableItem")),2&e&&i.Q6J("ngClass",i.VKq(3,q,!i.lcZ(1,1,t.$implicit)))}function $(e,t){1&e&&i._UZ(0,"app-spinner",28)}function F(e,t){if(1&e&&(i.TgZ(0,"div",31),i.TgZ(1,"span"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.qZA()),2&e){const e=i.oxw(3);i.xp6(2),i.Oqu(i.lcZ(3,1,e.noDataEntriesText))}}function Y(e,t){1&e&&i.GkF(0)}function J(e,t){if(1&e&&(i.ynx(0),i.YNc(1,F,4,3,"div",29),i.YNc(2,Y,1,0,"ng-container",30),i.BQk()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("ngIf",!e.noDataEntriesAvailableTemplate),i.xp6(1),i.Q6J("ngTemplateOutlet",e.noDataEntriesAvailableTemplate)}}function Q(e,t){if(1&e&&i.YNc(0,J,3,2,"ng-container",6),2&e){const e=i.oxw();i.Q6J("ngIf",0===e.dataTableSourceMatTable.data.length)}}function z(e,t){1&e&&i._UZ(0,"app-spinner",33)}function j(e,t){if(1&e&&(i.ynx(0),i.YNc(1,z,1,0,"app-spinner",32),i.ALo(2,"async"),i.BQk()),2&e){const e=i.oxw();i.xp6(1),i.Q6J("ngIf",i.lcZ(2,1,e.isLazyLoadingInProgress$))}}let K=(()=>{class e{constructor(e,t){this.dataTableService=e,this.dataTableLazyLoadingService=t,this.ngUnsubscribe=new r.xQ,this.activeSortColumnSortDirection="asc",this.hideAllEditButtons=!1,this.hideAllDeleteButtons=!1,this.customEditButton="edit",this.noDataEntriesText="admin.nconnect.data_table.no_data",this.isLazyLoadingPossible=!1,this.showLoadingSpinner=!1,this.editButtonClicked=new i.vpe,this.deleteButtonClicked=new i.vpe,this.endOfListReached=new i.vpe,this.isLazyLoadingInProgress$=this.dataTableLazyLoadingService.isLazyLoadingInProgress$}ngOnInit(){this.initColumnData(this.tableConfig),this.listenForTableActionChanges()}ngOnChanges(e){var t;e.isLazyLoadingPossible&&(this.isLazyLoadingPossible=e.isLazyLoadingPossible.currentValue),(null===(t=e.dataTableSourceInput)||void 0===t?void 0:t.currentValue)&&this.setTableSourceAndSort()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}onEndOfListReached(){this.endOfListReached.emit(!0)}editButtonClick(e){this.editButtonClicked.emit(e)}deleteButtonClick(e){this.deleteButtonClicked.emit(e)}setTableSourceAndSort(){this.dataTableSourceMatTable=new o.by(this.dataTableSourceInput),this.dataTableSourceMatTable.sort=this.sort,this.dataTableSourceMatTable.sortingDataAccessor=(e,t)=>"string"==typeof e[t]?e[t].toLocaleLowerCase():e[t]}initColumnData(e){this.columnNameIds=this.getDisplayedColumnNameIds(e),this.displayedColumns=e}listenForTableActionChanges(){this.dataTableService.updateTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.updateTableItem(e),this.setTableSourceAndSort()}),this.dataTableService.removeTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.removeTableItem(e),this.setTableSourceAndSort()}),this.dataTableService.addTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.addSingleTableItem(e),this.setTableSourceAndSort()}),this.dataTableLazyLoadingService.addLazyLoadedTableItems$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(e=>{this.addLazyLoadedTableItems(e),this.setTableSourceAndSort()})}addSingleTableItem(e){this.dataTableSourceInput.push(e)}addLazyLoadedTableItems(e){this.dataTableSourceInput.push(...e)}removeTableItem(e){const t=this.dataTableSourceInput.findIndex(t=>this.compareTableItemWithPassedID(t,e));this.dataTableSourceInput.splice(t,1)}updateTableItem(e){const t=this.dataTableSourceInput.findIndex(t=>this.compareTableItemWithUpdatedItem(t,e));(this.dataTableSourceInput=this.dataTableSourceInput.filter(t=>!this.compareTableItemWithUpdatedItem(t,e))).splice(t,0,e)}getDisplayedColumnNameIds(e){return e.map(e=>e.columnNameId)}compareTableItemWithPassedID(e,t){return e.hasOwnProperty("ID")?e.ID===t:e.INBOUND_TRUNK_NUMBER_ID===t}compareTableItemWithUpdatedItem(e,t){return e.hasOwnProperty("ID")&&t.hasOwnProperty("ID")?e.ID===t.ID:e.INBOUND_TRUNK_NUMBER_ID===t.INBOUND_TRUNK_NUMBER_ID}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(c.n),i.Y36(l.Y))},e.\u0275cmp=i.Xpm({type:e,selectors:[["data-table"]],viewQuery:function(e,t){if(1&e&&i.Gf(a.YE,5),2&e){let e;i.iGM(e=i.CRH())&&(t.sort=e.first)}},inputs:{tableConfig:"tableConfig",activeSortColumn:"activeSortColumn",activeSortColumnSortDirection:"activeSortColumnSortDirection",hideAllEditButtons:"hideAllEditButtons",hideAllDeleteButtons:"hideAllDeleteButtons",customEditButton:"customEditButton",noDataEntriesAvailableTemplate:"noDataEntriesAvailableTemplate",noDataEntriesText:"noDataEntriesText",isLazyLoadingPossible:"isLazyLoadingPossible",showLoadingSpinner:"showLoadingSpinner",dataTableSourceInput:"dataTableSourceInput"},outputs:{editButtonClicked:"editButtonClicked",deleteButtonClicked:"deleteButtonClicked",endOfListReached:"endOfListReached"},features:[i.TTD],decls:9,vars:10,consts:[["infiniteScroller","","matSort","","data-e2e","data-table-fragment",3,"dataSource","matSortActive","matSortDirection","endOfListReached"],[3,"matColumnDef",4,"ngFor","ngForOf"],["data-e2e","data-table-fragment__header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","data-table__row","data-e2e","data-table-fragment__row",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","data-table__app-spinner",4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[3,"matColumnDef"],[4,"ngIf","ngIfElse"],["showDefaultTemplate",""],["showButtons",""],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled",4,"matHeaderCellDef"],["data-e2e","data-table-fragment__cell",3,"className",4,"matCellDef"],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled"],["ellipsisTitle","",3,"ngClass"],["data-e2e","data-table-fragment__cell",3,"className"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","data-table__buttons",4,"ngIf"],[1,"data-table__buttons"],["showDefaultActionButtons",""],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick",4,"ngIf"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick",4,"ngIf"],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick"],["data-e2e","data-table-fragment__header-row"],["data-e2e","data-table-fragment__row",1,"data-table__row",3,"ngClass"],[1,"data-table__app-spinner"],["class","data-table__no-data",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"data-table__no-data"],["class","data-table__load-more-spinner",4,"ngIf"],[1,"data-table__load-more-spinner"]],template:function(e,t){if(1&e&&(i.TgZ(0,"mat-table",0),i.NdJ("endOfListReached",function(){return t.onEndOfListReached()}),i.YNc(1,D,6,3,"ng-container",1),i.YNc(2,B,1,0,"mat-header-row",2),i.ynx(3),i.YNc(4,R,2,5,"mat-row",3),i.BQk(),i.qZA(),i.YNc(5,$,1,0,"app-spinner",4),i.YNc(6,Q,1,1,"ng-template",null,5,i.W1O),i.YNc(8,j,3,3,"ng-container",6)),2&e){const e=i.MAs(7);i.Q6J("dataSource",t.dataTableSourceMatTable)("matSortActive",t.activeSortColumn)("matSortDirection",t.activeSortColumnSortDirection),i.xp6(1),i.Q6J("ngForOf",t.displayedColumns),i.xp6(1),i.Q6J("matHeaderRowDef",t.columnNameIds)("matHeaderRowDefSticky",!0),i.xp6(2),i.Q6J("matRowDefColumns",t.columnNameIds),i.xp6(1),i.Q6J("ngIf",!t.dataTableSourceMatTable)("ngIfElse",e),i.xp6(3),i.Q6J("ngIf",t.dataTableSourceMatTable&&t.isLazyLoadingPossible)}},directives:[o.BZ,d.A,a.YE,u.sg,o.as,o.nj,u.O5,o.w1,o.fO,o.Dz,o.ge,a.nU,m.w,u.mk,o.ev,u.tP,p.V,o.XQ,o.Gk,h.S],pipes:[g.w,f.Y,b.X$,_.C,u.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;position:relative}.data-table__content--highlighted[_ngcontent-%COMP%]{width:100%}.data-table__buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}mat-cell[_ngcontent-%COMP%]{font-size:1.8rem}.mat-column-buttons[_ngcontent-%COMP%]{flex:0;opacity:0;position:absolute;right:0;transition:opacity 50ms;z-index:1}.cell-size--small[_ngcontent-%COMP%]{flex:0 0 5%!important}.cell-size--medium[_ngcontent-%COMP%]{flex:0 0 15%!important}.cell-size--large[_ngcontent-%COMP%]{flex:0 0 30%!important}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{max-width:40rem;padding:0 2.4rem}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{padding:0 .8rem}mat-row[_ngcontent-%COMP%]{height:5.6rem;position:relative}mat-row[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:1}.data-table__row.disabled[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{color:#b2b2b2}.data-table__row.disabled[_ngcontent-%COMP%]:hover{background-color:inherit}.data-table__row.disabled[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:0}.data-table__no-data[_ngcontent-%COMP%]{font-size:2.4rem;left:0;position:absolute;right:0;text-align:center;top:10rem}.data-table__app-spinner[_ngcontent-%COMP%]{position:absolute;top:10rem}.data-table__load-more-spinner[_ngcontent-%COMP%]{background:linear-gradient(#ffffff80,#fff);bottom:0;min-height:4rem;position:absolute;right:.5rem;z-index:1}"]}),e})()},6798:function(e,t,n){n.d(t,{I:function(){return p}});var i=n(25917),o=n(9112),a=n(45435),s=n(87519),r=n(88002),c=n(68307),l=n(37716),d=n(8307),u=n(89447),m=n(48843);let p=(()=>{class e{constructor(e,t,n){this.router=e,this.accountService=t,this.nconnectAccountSelectionService=n}canActivate(){return this.checkNconnectAccess()}canActivateChild(){return this.checkNconnectAccess()}checkNconnectAccess(){return this.accountService.selectedAccount?(0,o.aj)([this.accountService.selectedAccount$.pipe((0,a.h)(e=>!!e),(0,s.x)()),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.x)())]).pipe((0,r.U)(([e,t])=>null===t||!!e&&t),(0,c.b)(e=>{e||this.redirectToAdminUserPage()})):(this.redirectToAdminUserPage(),(0,i.of)(!1))}redirectToAdminUserPage(){this.router.navigate(["/admin/user"])}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(d.F0),l.LFG(u.B),l.LFG(m.c))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},3160:function(e,t,n){n.r(t),n.d(t,{AdminModule:function(){return ga}});var i=n(39210),o=n(22238),a=n(38583),s=n(37716),r=n(72458),c=n(51095),l=n(67441),d=n(11436),u=(n(39490),n(79765)),m=n(98295);let p=(()=>{class e{constructor(){this.changes=new u.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,t,n)=>{if(0==n||0==t)return`0 of ${n}`;const i=e*t;return`${i+1} \u2013 ${i<(n=Math.max(n,0))?Math.min(i+t,n):i+t} of ${n}`}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const h={provide:p,deps:[[new s.FiY,new s.tp0,p]],useFactory:function(e){return e||new p}};let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({providers:[h],imports:[[a.ez,c.ot,l.LD,d.AV,r.BQ]]}),e})();var f=n(11494),b=n(16492),_=n(25167),x=n(37692);class v extends x.H{setAttributes(e){this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.username=e.username,this.extension=e.extension,this.language=e.language,this.client=e.hasAccess,this.admin=e.hasAdminAccess}fromJSON(e){this.setAttributes(e)}fromUnallocatedExtension(e){this.id=e.id,this.lastname=e.display_name,this.username=e.email,this.extension=e.extension_number}equals(e){return typeof e==typeof this&&this.id===e.id}isNew(){return!Boolean(this.id)}getFullName(){return`${this.firstname} ${this.lastname}`}}var k=n(28123),C=n(89447),T=n(46782),A=n(45435),S=n(87519),y=n(17685),P=n(8307),I=n(89973),O=n(10253),Z=n(29790);function M(e,t){1&e&&(s.TgZ(0,"p"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin_session_ended_modal.close_message")," "))}function w(e,t){1&e&&(s.TgZ(0,"p"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin_session_ended_modal.as_admin.text")," "))}let N=(()=>{class e{constructor(e){this.data=e,this.adminSessionEndedAsClient=e.adminSessionEndedAsClient,this.adminSessionEndedAsAdmin=e.adminSessionEndedAsAdmin}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.WI))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-session-ended-modal"]],decls:6,vars:5,consts:[["data-e2e","admin-session-timeout-modal-fragment",1,"admin-session-ended",3,"title"],["data-e2e","admin-session-timeout-modal-fragment__content--section"],[4,"ngIf"],["logoutButtonType","ok"]],template:function(e,t){1&e&&(s.TgZ(0,"modal-container",0),s.ALo(1,"translate"),s.TgZ(2,"section",1),s.YNc(3,M,3,3,"p",2),s.YNc(4,w,3,3,"p",2),s.qZA(),s._UZ(5,"logout-button",3),s.qZA()),2&e&&(s.Q6J("title",s.lcZ(1,3,"admin_session_ended_modal.title")),s.xp6(3),s.Q6J("ngIf",t.adminSessionEndedAsClient),s.xp6(1),s.Q6J("ngIf",t.adminSessionEndedAsAdmin))},directives:[I.O,a.O5,O.M],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{align-items:center;background-color:#0000004d;display:flex;flex:1;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .admin-session-ended[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .admin-session-ended[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:.8rem 2.4rem}"]}),e})();var E=n(8780);let L=(()=>{class e{constructor(e,t,n){this.router=e,this.dialog=t,this.loginService=n,this.adminSessionTimeoutInMinutes=10,this.isAdminSessionEndedAsAdmin=!1,this.isAdminSessionEndedAsClient=!1,this.startAdminSession(),this.router.events.subscribe(e=>{e instanceof P.OD&&this.startAdminSession()})}startAdminSession(){this.stopAdminSession(),this.adminExpirationCheckingInterval=setInterval(()=>{!this.loginService.authCredentials.clientAccess&&this.loginService.authCredentials.adminAccess?this.isAdminSessionEndedAsAdmin=!0:this.isAdminSessionEndedAsClient=!0,this.router.url.includes("admin")&&this.openAdminSessionEndedModal()},60*this.adminSessionTimeoutInMinutes*1e3)}openAdminSessionEndedModal(){this.dialog.open(N,{data:{adminSessionEndedAsAdmin:this.isAdminSessionEndedAsAdmin,adminSessionEndedAsClient:this.isAdminSessionEndedAsClient},disableClose:!0}),k.Q.removeItem("AdminToken"),this.stopAdminSession()}stopAdminSession(){this.adminExpirationCheckingInterval&&(clearInterval(this.adminExpirationCheckingInterval),this.adminExpirationCheckingInterval=null)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(P.F0),s.LFG(o.uw),s.LFG(E.r))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var U=n(92937),D=n(47203),B=n(28859),q=n(62782),R=n(20626),$=n(94935),F=n(66356),Y=n(25917),J=n(51233),Q=n(90971),z=n(39249),j=n(97574),K=n(47444),H=n(91856),G=n(50256),V=n(48843),X=n(74688),W=n(3088),ee=n(55821),te=n(63743),ne=n(56869);const ie=function(e){return["user",e,"phonenumber"]};function oe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",10),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemRouterLink",s.VKq(4,ie,e.activeUser.id))("itemTitle",s.lcZ(1,2,"admin.navigation.user.phonenumber.title"))}}const ae=function(e){return["user",e,"permissions"]};function se(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",11),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemRouterLink",s.VKq(4,ae,e.activeUser.id))("itemTitle",s.lcZ(1,2,"admin.navigation.user.permissions.title"))}}const re=function(){return{exact:!1}},ce=function(e){return["user",e]};function le(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",6),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw().sideNavItemClicked(!1)}),s.TgZ(1,"sidenav-item",7),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw().sideNavItemClicked(!1)}),s.ALo(2,"translate"),s.qZA(),s.YNc(3,oe,2,6,"sidenav-item",8),s.YNc(4,se,2,6,"sidenav-item",9),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("itemRouterLinkActiveOptions",s.DdM(9,re))("itemRouterLink",s.VKq(10,ce,e.activeUser.id))("itemTitle",e.activeUser.getFullName()),s.xp6(1),s.Q6J("itemRouterLink",s.VKq(12,ce,e.activeUser.id))("itemTitle",s.lcZ(2,7,"admin.navigation.user.data.title")),s.xp6(2),s.Q6J("ngIf",e.isKAccountSelected),s.xp6(1),s.Q6J("ngIf",e.isKAccountSelected)}}function de(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",17),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemTitle",s.lcZ(1,1,"admin.navigation.wizards.migration_wizard.title"))}function ue(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",18),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemTitle",s.lcZ(1,1,"admin.navigation.wizards.import.title"))}function me(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",14),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.YNc(2,de,2,3,"sidenav-item",15),s.YNc(3,ue,2,3,"sidenav-item",16),s.ALo(4,"async"),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemTitle",s.lcZ(1,3,"admin.navigation.wizards.title")),s.xp6(2),s.Q6J("ngIf",e.isWizardPageActive),s.xp6(1),s.Q6J("ngIf",s.lcZ(4,5,e.isWizardPageActive&&e.hasBulkImportModule$))}}function pe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",19),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemTitle",s.lcZ(1,1,"admin.navigation.license.title"))}function he(e,t){if(1&e&&(s.ynx(0),s.YNc(1,me,5,7,"sidenav-item",12),s.YNc(2,pe,2,3,"sidenav-item",13),s.BQk()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.isKAccountSelected),s.xp6(1),s.Q6J("ngIf",e.isKAccountSelected)}}const ge=function(e){return["/admin/nconnect-voice/blacklist",e]};function fe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",30),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(4).sideNavItemClicked(!1)}),s.ALo(1,"async"),s.qZA()}if(2&e){const e=s.oxw(4);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemRouterLink",s.VKq(6,ge,e.paramId))("itemTitle",s.lcZ(1,3,e.nconnectItemName$))}}function be(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",28),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,fe,2,8,"sidenav-item",29),s.qZA()}if(2&e){const e=s.oxw(3);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemTitle",s.lcZ(1,3,"admin.navigation.nconnect.blacklist.title")),s.xp6(2),s.Q6J("ngIf",e.showBlacklistEntryItem)}}function _e(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",26),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.YNc(2,be,3,6,"sidenav-item",27),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemTitle",s.lcZ(1,2,"admin.navigation.nconnect.trunkset.title")),s.xp6(2),s.Q6J("ngIf",e.showBlacklistItem)}}function xe(e,t){1&e&&(s.TgZ(0,"hoverbox",34),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.Q6J("showAlways",!0),s.xp6(1),s.hij(" ",s.lcZ(2,2,"admin.nconnect.trunkset.table.no_data")," "))}function ve(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",36),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(4).sideNavItemClicked(!1)}),s.qZA()}if(2&e){const e=s.oxw().$implicit;s.Q6J("itemRouterLink","/admin/nconnect-voice/pbx-endpoint/"+e.ID)("itemTitle",e.NAME)}}function ke(e,t){if(1&e&&(s.ynx(0),s.YNc(1,ve,1,2,"sidenav-item",35),s.BQk()),2&e){const e=s.oxw(3);s.xp6(1),s.Q6J("ngIf",e.showPbxEndpointItem)}}function Ce(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",31),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!0)}),s.ALo(1,"async"),s.ALo(2,"translate"),s.YNc(3,xe,3,4,"hoverbox",32),s.ALo(4,"async"),s.YNc(5,ke,2,1,"ng-container",33),s.ALo(6,"async"),s.qZA()}if(2&e){const e=s.oxw(2);let t;s.Q6J("itemRouterLinkActiveOptions",s.DdM(13,re))("itemRouterLink","/admin/nconnect-voice/pbx-endpoint/"+s.lcZ(1,5,e.firstTrunksetId$))("itemTitle",s.lcZ(2,7,"admin.navigation.nconnect.pbx_endpoint.title")),s.xp6(3),s.Q6J("ngIf",!(null!=(t=s.lcZ(4,9,e.pbxEndpointMenuItems$))&&t.length)),s.xp6(2),s.Q6J("ngForOf",s.lcZ(6,11,e.pbxEndpointMenuItems$))}}const Te=function(e){return["/admin/nconnect-voice/numberblock",e]};function Ae(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",30),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(4).sideNavItemClicked(!1)}),s.ALo(1,"async"),s.qZA()}if(2&e){const e=s.oxw(4);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemRouterLink",s.VKq(6,Te,e.paramId))("itemTitle",s.lcZ(1,3,e.nconnectItemName$))}}function Se(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",40),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,Ae,2,8,"sidenav-item",29),s.qZA()}if(2&e){const e=s.oxw(3);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemTitle",s.lcZ(1,3,"admin.navigation.nconnect.numberblock.title")),s.xp6(2),s.Q6J("ngIf",e.showNumberblockEntryItem)}}function ye(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",41),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemRouterLinkActiveOptions",s.DdM(4,re))("itemTitle",s.lcZ(1,2,"admin.navigation.nconnect.backup_number.title"))}function Pe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",37),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,Se,3,6,"sidenav-item",38),s.YNc(3,ye,2,5,"sidenav-item",39),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemTitle",s.lcZ(1,3,"admin.navigation.nconnect.number_routing.title")),s.xp6(2),s.Q6J("ngIf",e.showNumberRoutingItems),s.xp6(1),s.Q6J("ngIf",e.showNumberRoutingItems)}}function Ie(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",44),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemRouterLinkActiveOptions",s.DdM(4,re))("itemTitle",s.lcZ(1,2,"admin.navigation.nconnect.template.pbx_endpoint_template"))}function Oe(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",42),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,Ie,2,5,"sidenav-item",43),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemTitle",s.lcZ(1,3,"admin.navigation.nconnect.template.title")),s.xp6(2),s.Q6J("ngIf",e.showTemplateItem)}}function Ze(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",47),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(3).sideNavItemClicked(!1)}),s.ALo(1,"translate"),s.qZA()}2&e&&s.Q6J("itemRouterLinkActiveOptions",s.DdM(4,re))("itemTitle",s.lcZ(1,2,"admin.navigation.nconnect.services.conference"))}function Me(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",45),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw(2).sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,Ze,2,5,"sidenav-item",46),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("itemRouterLinkActiveOptions",s.DdM(5,re))("itemTitle",s.lcZ(1,3,"admin.navigation.nconnect.services.title")),s.xp6(2),s.Q6J("ngIf",e.showServiceItem)}}function we(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"sidenav-item",20),s.NdJ("itemClicked",function(){return s.CHM(e),s.oxw().sideNavItemClicked(!0)}),s.ALo(1,"translate"),s.YNc(2,_e,3,4,"sidenav-item",21),s.YNc(3,Ce,7,14,"sidenav-item",22),s.YNc(4,Pe,4,5,"sidenav-item",23),s.YNc(5,Oe,3,6,"sidenav-item",24),s.YNc(6,Me,3,6,"sidenav-item",25),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("itemRouterLinkActiveOptions",s.DdM(9,re))("itemTitle",s.lcZ(1,7,"admin.navigation.nconnect.title")),s.xp6(2),s.Q6J("ngIf",e.isNconnectPageActive),s.xp6(1),s.Q6J("ngIf",e.isNconnectPageActive),s.xp6(1),s.Q6J("ngIf",e.isNconnectPageActive),s.xp6(1),s.Q6J("ngIf",e.isNconnectPageActive),s.xp6(1),s.Q6J("ngIf",!1)}}function Ne(e,t){1&e&&s._UZ(0,"logo",48),2&e&&s.Q6J("hasLink",!1)}let Ee=(()=>{class e{constructor(e,t,n,i,o,a,r,c,l,d,m,p){this.adminService=e,this.userService=t,this.accountService=n,this.whiteLabelService=i,this.themeService=o,this.helpersService=a,this.nconnectItemProviderService=r,this.routerEventService=c,this.trunksetDataService=l,this.route=d,this.nconnectAccountSelectionService=m,this.featureAccessService=p,this.ngUnsubscribe=new u.xQ,this.itemClicked=new s.vpe,this.pbxEndpointMenuItems$=this.trunksetDataService.trunksets$,this.firstTrunksetId$=this.trunksetDataService.firstTrunksetId$,this.hasNconnectAccess$=(0,Y.of)(null),this.showBlacklistItem=!1,this.showBlacklistEntryItem=!1,this.showPbxEndpointItem=!1,this.showNumberRoutingItems=!1,this.showTemplateItem=!1,this.showServiceItem=!1,this.showNumberblockEntryItem=!1,this.isKAccountSelected=!1,this.isUserPageActive=!1,this.isWizardPageActive=!1,this.hasBulkImportModule$=this.featureAccessService.hasUserModuleBulkImport$,this.isNconnectPageActive=!1,e.emitChange.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.activeUser=e||null})}ngOnInit(){this.routerEventService.routeChanged$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.setSidenavItemVisibility(e)}),this.routerEventService.routeParamIdChanged$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.paramId=e}),this.accountService.selectedAccount$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.setMainSidenavItemVisibility()}),this.nconnectItemName$=this.nconnectItemProviderService.nconnectItemName$}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}sideNavItemClicked(e){this.itemClicked.emit(e)}setMainSidenavItemVisibility(){this.isKAccountSelected=this.accountService.isKAccountSelected,this.hasNconnectAccess$=this.nconnectAccountSelectionService.isNconnectAccountSelected$}setSidenavItemVisibility(e){this.checkIfItemCanBeShown(["nconnect-voice"],e)&&this.setNconnectItemVisibility(e),this.isUserPageActive=this.checkIfItemCanBeShown(["admin/user"],e),this.isWizardPageActive=this.checkIfItemCanBeShown(["wizard"],e),this.isNconnectPageActive=this.checkIfItemCanBeShown(["nconnect"],e)}setNconnectItemVisibility(e){this.showNumberRoutingItems=this.checkIfItemCanBeShown(["number-routing","numberblock","backupnumbers"],e),this.showBlacklistItem=this.checkIfItemCanBeShown(["trunkset","blacklist"],e),this.showBlacklistEntryItem=this.checkIfItemCanBeShown(["blacklist"],e,!0),this.showNumberblockEntryItem=this.checkIfItemCanBeShown(["numberblock"],e,!0),this.showPbxEndpointItem=this.checkIfItemCanBeShown(["pbx-endpoint/"],e),this.showTemplateItem=this.checkIfItemCanBeShown(["pbx-endpoint-template"],e),this.showServiceItem=this.checkIfItemCanBeShown(["services"],e)}checkIfItemCanBeShown(e,t,n){return n?t.includes(e[0])&&!t.endsWith(e[0]):!!e.find(e=>t.includes(e))}get isHiddenIcon(){return!!this.helpersService.getDeepProperty(this.whiteLabelService.data,"sidenav.logoHidden")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(D.l),s.Y36(J.K),s.Y36(C.B),s.Y36(Q.D),s.Y36(z.f),s.Y36(j.$),s.Y36(K.U),s.Y36(H.r),s.Y36(G.R),s.Y36(P.gz),s.Y36(V.c),s.Y36(X.q))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-sidenav"]],outputs:{itemClicked:"itemClicked"},decls:9,vars:11,consts:[[1,"sidenav"],["data-e2e","admin-navigator-fragment__user--a","itemLevel","1","itemRouterLink","/admin/user",3,"itemTitle"],["data-e2e","admin-navigator-fragment__user","itemLevel","2",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],[4,"ngIf"],["data-e2e","admin-navigator-fragment__nconnect-voice--a","itemLevel","1","itemRouterLink","/admin/nconnect-voice",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["class","sidenav__footer","location","sidenav__footer",3,"hasLink",4,"ngIf"],["data-e2e","admin-navigator-fragment__user","itemLevel","2",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__user-data--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__phone-number--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__permissions--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__phone-number--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__permissions--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__wizards--a","hasSubItems","true","itemLevel","1","itemRouterLink","/admin/wizards",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__license--a","itemLevel","1","itemRouterLink","/admin/license",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__wizards--a","hasSubItems","true","itemLevel","1","itemRouterLink","/admin/wizards",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__migration-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/migration-wizard",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__import-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/export-import",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__migration-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/migration-wizard",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__import-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/export-import",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__license--a","itemLevel","1","itemRouterLink","/admin/license",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__nconnect-voice--a","itemLevel","1","itemRouterLink","/admin/nconnect-voice",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__trunkset--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/trunkset",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__pbx-endpoint--a","itemLevel","2","appHoverbox","",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__number-routing--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/number-routing",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__pbx-endpoint-template--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","2","itemRouterLink","/admin/nconnect-voice/services",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__trunkset--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/trunkset",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__blacklist--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/blacklist",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__blacklist--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/blacklist",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","4",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["itemLevel","4",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__pbx-endpoint--a","itemLevel","2","appHoverbox","",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],[3,"showAlways",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"showAlways"],["itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__number-routing--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/number-routing",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__number-block--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/numberblock",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__backup-numbers--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/backupnumbers",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__number-block--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/numberblock",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__backup-numbers--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/backupnumbers",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__pbx-endpoint-template--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","2","itemRouterLink","/admin/nconnect-voice/services",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/services/conference",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/services/conference",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["location","sidenav__footer",1,"sidenav__footer",3,"hasLink"]],template:function(e,t){1&e&&(s.TgZ(0,"nav",0),s.TgZ(1,"sidenav-item",1),s.ALo(2,"translate"),s.YNc(3,le,5,14,"sidenav-item",2),s.qZA(),s.YNc(4,he,3,2,"ng-container",3),s.ALo(5,"async"),s.YNc(6,we,7,10,"sidenav-item",4),s.ALo(7,"async"),s.qZA(),s.YNc(8,Ne,1,1,"logo",5)),2&e&&(s.xp6(1),s.Q6J("itemTitle",s.lcZ(2,5,"admin.navigation.user.title")),s.xp6(2),s.Q6J("ngIf",!!t.activeUser&&!t.activeUser.isNew()&&t.isUserPageActive),s.xp6(1),s.Q6J("ngIf",!1===s.lcZ(5,7,t.hasNconnectAccess$)),s.xp6(2),s.Q6J("ngIf",s.lcZ(7,9,t.hasNconnectAccess$)),s.xp6(2),s.Q6J("ngIf",!t.isHiddenIcon))},directives:[W.t,a.O5,ee.r,a.sg,te.B,ne.R],pipes:[Z.X$,a.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;margin-top:1.6rem;overflow:hidden;padding-top:.8rem}.mat-drawer-over[_nghost-%COMP%], .mat-drawer-over   [_nghost-%COMP%]{margin-top:0;padding-top:0}.sidenav[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sidenav__footer[_ngcontent-%COMP%]{display:flex;justify-content:center;max-height:7.5rem;padding:1.6rem}"]}),e})();var Le=n(12522),Ue=n(88002),De=n(39761),Be=n(38294),qe=n(56436),Re=n(77746),$e=n(36461),Fe=n(54395),Ye=n(90625),Je=n(14944),Qe=n(83166),ze=n(52592),je=n(1769);const Ke=["overlay"],He=["searchInput"];function Ge(e,t){if(1&e&&(s.TgZ(0,"span",8),s.TgZ(1,"span",9),s._uU(2),s.qZA(),s.TgZ(3,"span",10),s._uU(4),s.qZA(),s.qZA()),2&e){const e=s.oxw();s.xp6(2),s.hij(" ",e.selectedAccount.name," "),s.xp6(2),s.Oqu(e.selectedAccount.externalIdentifier)}}function Ve(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1),s.ALo(2,"uppercase"),s.ALo(3,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,s.lcZ(3,3,"account_select.all_accounts"))," "))}function Xe(e,t){1&e&&(s.TgZ(0,"div",11),s._UZ(1,"app-svg-icon",12),s.TgZ(2,"span",13),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Oqu(s.lcZ(4,1,"account_select.account_blocked_status")))}function We(e,t){1&e&&s.GkF(0)}const et=function(e){return{account:e}};function tt(e,t){if(1&e&&(s.TgZ(0,"mat-list-option",24),s.YNc(1,We,1,0,"ng-container",25),s.qZA()),2&e){const e=t.$implicit;s.oxw(2);const n=s.MAs(13);s.Q6J("value",e),s.xp6(1),s.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",s.VKq(3,et,e))}}function nt(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"h3",23),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,tt,2,5,"mat-list-option",21),s._UZ(5,"mat-divider"),s.BQk()),2&e){const e=s.oxw(2);s.xp6(2),s.Oqu(s.lcZ(3,2,"account_select.recent_accounts")),s.xp6(2),s.Q6J("ngForOf",e.recentAccounts)}}function it(e,t){1&e&&s.GkF(0)}function ot(e,t){if(1&e&&(s.TgZ(0,"mat-list-option",24),s.YNc(1,it,1,0,"ng-container",25),s.qZA()),2&e){const e=t.$implicit;s.oxw();const n=s.MAs(13);s.Q6J("value",e),s.xp6(1),s.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",s.VKq(3,et,e))}}function at(e,t){1&e&&(s.TgZ(0,"span",30),s._UZ(1,"app-svg-icon",12),s._uU(2),s.ALo(3,"translate"),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,1,"account_select.account_blocked_status")," "))}function st(e,t){if(1&e&&(s.TgZ(0,"span",26),s.TgZ(1,"span",27),s._uU(2),s.qZA(),s.TgZ(3,"span",28),s._uU(4),s.qZA(),s.qZA(),s.YNc(5,at,4,3,"span",29)),2&e){const e=t.account,n=s.oxw(2);s.xp6(1),s.uIk("data-e2e",n.e2e?n.e2e+"__account-selector-option-name":null),s.xp6(1),s.hij(" ",e.name," "),s.xp6(1),s.uIk("data-e2e",n.e2e?n.e2e+"__account-selector-option-id":null),s.xp6(1),s.hij(" ",e.externalIdentifier," "),s.xp6(1),s.Q6J("ngIf",e.status===n.inactiveAccountStatus)}}function rt(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",14),s.TgZ(1,"header"),s._UZ(2,"app-svg-icon",15),s.TgZ(3,"label"),s.TgZ(4,"input",16,17),s.NdJ("keydown",function(t){return s.CHM(e),s.oxw().onKeyDown(t)})("keyup",function(t){return s.CHM(e),s.oxw().search(t)}),s.ALo(6,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(7,"section"),s.TgZ(8,"div",18),s.NdJ("scrolled",function(){return s.CHM(e),s.oxw().loadAccounts()}),s.TgZ(9,"mat-selection-list",19),s.NdJ("selectionChange",function(t){s.CHM(e);const n=s.oxw();return n.onSelectionChange(t),n.isListOpen=!1}),s.YNc(10,nt,6,4,"ng-container",20),s.YNc(11,ot,2,5,"mat-list-option",21),s.YNc(12,st,6,5,"ng-template",null,22,s.W1O),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(4),s.s9C("placeholder",s.lcZ(6,8,"account_select.search_account")),s.uIk("data-e2e",e.e2e?e.e2e+"__account-selector-search--input":null),s.xp6(4),s.Q6J("infiniteScrollDisabled",!e.hasMoreData)("loadingAreaIndicatorActive",e.isLoading)("scrollWindow",!1)("infiniteScrollThrottle",50),s.xp6(2),s.Q6J("ngIf",e.showRecents),s.xp6(1),s.Q6J("ngForOf",e.accounts)}}let ct=(()=>{class e{constructor(t,n){this.accountService=t,this.router=n,this.searchInputValue$=new u.xQ,this.ngUnsubscribe=new u.xQ,this.accounts=[],this.recentAccounts=e.storedRecentAccounts||[],this.isListOpen=!1,this.selectedAccount=null,this.searchInputValue="",this.hasMoreData=!1,this.isLoading=!1,this.page=1,this.pageSize=25,this.inactiveAccountStatus="blocked",this.accountSelect=new s.vpe}ngOnInit(){this.searchInputValue$.pipe((0,De.O)(this.searchInputValue),(0,Fe.b)(400),(0,S.x)(),(0,T.R)(this.ngUnsubscribe)).subscribe(this.initSearch.bind(this)),this.accountService.selectedAccount$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.selectedAccount=e})}ngAfterViewInit(){this.overlay.positionChange.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.searchInput.nativeElement.focus()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initSearch(e){this.searchInputValue=e,this.page=1,this.accounts=[],this.loadAccounts()}search(e){this.searchInputValue$.next(e.target.value)}onSelectionChange(e){const t=e.option.value;this.accountSelect.emit(t),this.selectedAccount=t,this.accountService.selectedAccount=t,this.addToRecents(t),this.router.routerState.snapshot.url.match(/^\/admin\/user/)&&this.router.navigate(["/admin/user"])}onKeyDown(e){e.keyCode===$e.JH&&(e.preventDefault(),this.matListOptions&&this.matListOptions.length&&this.matListOptions.first.focus())}closeList(){this.isListOpen=!1,this.searchInputValue$.next("")}loadAccounts(){this.isLoading?this.cancelRequest():(this.isLoading=!0,this.accountsRequest=this.accountService.getAllAccounts(this.searchInputValue,this.page).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.isLoading=!1,this.page++,this.hasMoreData=e.paginationHasMoreData,this.accounts=[...this.accounts,...e.data]}))}addToRecents(t){this.recentAccounts=[t,...this.recentAccounts].filter((e,t,n)=>n.map(e=>e.accountId).indexOf(e.accountId)===t).slice(0,5),e.storedRecentAccounts=this.recentAccounts}cancelRequest(){this.accountsRequest.unsubscribe(),this.isLoading=!1,this.loadAccounts()}static set storedRecentAccounts(t){k.Q.store(e.RECENT_ACCOUNTS,t)}static get storedRecentAccounts(){return k.Q.getCached(e.RECENT_ACCOUNTS,[])}get showRecents(){return!this.searchInputValue&&!!this.recentAccounts.length}}return e.RECENT_ACCOUNTS="RECENT_ACCOUNTS",e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B),s.Y36(P.F0))},e.\u0275cmp=s.Xpm({type:e,selectors:[["account-select"]],viewQuery:function(e,t){if(1&e&&(s.Gf(Ke,5),s.Gf(He,5),s.Gf(Re.vS,5)),2&e){let e;s.iGM(e=s.CRH())&&(t.overlay=e.first),s.iGM(e=s.CRH())&&(t.searchInput=e.first),s.iGM(e=s.CRH())&&(t.matListOptions=e)}},inputs:{e2e:"e2e"},outputs:{accountSelect:"accountSelect"},decls:9,vars:10,consts:[["cdkOverlayOrigin","","mat-button","","type","button",1,"account-select__trigger",3,"click"],["trigger","cdkOverlayOrigin"],["class","account-select__selected-account",4,"ngIf","ngIfElse"],["notSelectedAccount",""],["fill","white","icon","arrow_dropdown","size","medium"],["class","account-select__status-wrapper",4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayBackdropClass","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","backdropClick","detach"],["overlay","cdkConnectedOverlay"],[1,"account-select__selected-account"],["ellipsisTitle","",1,"external-name"],[1,"external-identifier"],[1,"account-select__status-wrapper"],["icon","inactive",1,"account-select__icon"],[1,"account-select__status"],[1,"account-select-list"],["icon","search","size","small"],["autocomplete","off","matInput","",3,"placeholder","keydown","keyup"],["searchInput",""],["infinite-scroll","","loading-area-indicator","",1,"accounts",3,"infiniteScrollDisabled","loadingAreaIndicatorActive","scrollWindow","infiniteScrollThrottle","scrolled"],[3,"selectionChange"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["accountTemplate",""],["matSubheader",""],[3,"value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"account-select__option--left"],["ellipsisTitle","",1,"account__name"],[1,"account__external-identifier"],["class","account-select__option--right",4,"ngIf"],[1,"account-select__option--right"]],template:function(e,t){if(1&e&&(s.TgZ(0,"button",0,1),s.NdJ("click",function(){return t.isListOpen=!t.isListOpen}),s.YNc(2,Ge,5,2,"span",2),s.YNc(3,Ve,4,5,"ng-template",null,3,s.W1O),s._UZ(5,"app-svg-icon",4),s.qZA(),s.YNc(6,Xe,5,3,"div",5),s.YNc(7,rt,14,10,"ng-template",6,7,s.W1O),s.NdJ("backdropClick",function(){return t.closeList()})("detach",function(){return t.closeList()})),2&e){const e=s.MAs(1),n=s.MAs(4);s.ekj("active",t.isListOpen),s.uIk("data-e2e",t.e2e?t.e2e+"__account-selector--button":null),s.xp6(2),s.Q6J("ngIf",t.selectedAccount)("ngIfElse",n),s.xp6(4),s.Q6J("ngIf",(null==t.selectedAccount?null:t.selectedAccount.status)===t.inactiveAccountStatus),s.xp6(1),s.Q6J("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop")("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayOpen",t.isListOpen)("cdkConnectedOverlayOrigin",e)}},directives:[c.lW,Ye.xu,a.O5,qe.u,Ye.pI,Je.w,Qe.Nt,i.R,ze.O,Re.Ub,a.sg,Re.gs,je.d,Re.vS,a.tP],pipes:[a.gd,Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:row;margin-left:1rem}.account-select__trigger[_ngcontent-%COMP%]{color:#fff;display:inline-block;height:100%}.account-select__trigger[_ngcontent-%COMP%]   .account-select__selected-account[_ngcontent-%COMP%]{display:flex}.account-select__trigger[_ngcontent-%COMP%]   .external-name[_ngcontent-%COMP%]{max-width:16rem}.account-select__trigger[_ngcontent-%COMP%]   .external-identifier[_ngcontent-%COMP%]{opacity:.6;padding-left:1rem}.account-select__trigger[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.account-select__status-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex}.account-select__icon[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .3rem .3rem .8rem;vertical-align:middle}.account-select__status[_ngcontent-%COMP%]{color:#fff}.account-select-list[_ngcontent-%COMP%]{background-color:#fff;border:.1rem solid rgba(0,0,0,.03);border-radius:.2rem .2rem .4rem .4rem;box-shadow:0 .2rem .2rem #0000003d,0 0 .2rem #0000001f;height:80vh;margin-top:.4rem;max-width:60rem;min-width:40rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{align-items:center;background-color:#fff;border-bottom:.1rem solid #e5e5e5;display:flex;height:5.6rem;padding:0 1.6rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#000;flex:1;font-size:1.8rem;padding:0 .8rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{height:100%}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]{height:calc(100% - 5.6rem);overflow-y:auto}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]{padding:0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]:first-child{margin-bottom:-.8rem}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin:1rem 0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     mat-pseudo-checkbox{display:none}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text{display:flex;flex-direction:row;font-size:1.8rem;justify-content:space-between;padding-right:0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account-select__option--left{align-items:center;display:flex;min-width:80%}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account-select__option--right{min-width:20%;text-align:end}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account__external-identifier{color:#0000008a;margin-left:1rem}"]}),e})();var lt=n(98910),dt=n(4008);function ut(e,t){1&e&&(s.TgZ(0,"div",4),s._UZ(1,"search-component",5),s.qZA()),2&e&&(s.xp6(1),s.Q6J("isAdminPortal",!0)("showSearchTooltipAdmin",!0))}let mt=(()=>{class e{constructor(e,t,n){this.router=e,this.searchService=t,this.accountService=n,this.isNavShownToggled=!1,this.ngUnsubscribe=new u.xQ,this.isNavShown=new s.vpe,this.selectedAccount=null,this.isSearchBarShown$=(0,Y.of)(!1)}ngOnInit(){this.accountService.selectedAccount$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.selectedAccount=e,this.setSearchBarVisibility()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}toggleNavShown(){this.isNavShown.emit(!this.isNavShownToggled)}isSearchBarVisible(e){return!!this.selectedAccount&&!e.includes("admin/nconnect-voice")}setSearchBarVisibility(){this.isSearchBarShown$=this.router.events.pipe((0,A.h)(e=>e instanceof P.m2),(0,Ue.U)(e=>this.isSearchBarVisible(e.url)),(0,De.O)(this.isSearchBarVisible(this.router.url)))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(Be.o),s.Y36(C.B))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-header"]],outputs:{isNavShown:"isNavShown"},decls:6,vars:3,consts:[["mat-icon-button","",1,"toggle-sidenav-btn",3,"click"],["fill","header-button","icon","nav","size","small"],["e2e","admin-toolbar-fragment"],["class","admin-header__search","data-e2e","admin-toolbar-fragment",4,"ngIf"],["data-e2e","admin-toolbar-fragment",1,"admin-header__search"],["e2e","admin-toolbar-fragment","placeholder","admin.customersearch.placeholder","searchTooltip","admin.fields.search.tooltip",3,"isAdminPortal","showSearchTooltipAdmin"]],template:function(e,t){1&e&&(s.TgZ(0,"button",0),s.NdJ("click",function(){return t.toggleNavShown()}),s._UZ(1,"app-svg-icon",1),s.qZA(),s._UZ(2,"account-select",2),s.YNc(3,ut,2,2,"div",3),s.ALo(4,"async"),s._UZ(5,"vertical-divider")),2&e&&(s.xp6(3),s.Q6J("ngIf",s.lcZ(4,1,t.isSearchBarShown$)))},directives:[c.lW,qe.u,ct,a.O5,lt.y,dt.g],pipes:[a.Ov],styles:["[_nghost-%COMP%]{align-items:center;display:flex}.admin-header__search[_ngcontent-%COMP%]{flex:1}@media (min-width: 1280px){.toggle-sidenav-btn[_ngcontent-%COMP%]{display:none}}"]}),e})();var pt=n(11538),ht=n(96566),gt=n(92543),ft=n(80181);const bt=["sidenav"];function _t(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"user-settings-drawer",15),s.NdJ("click",function(){return s.CHM(e),s.oxw().toggleUserSettings()})("onClose",function(){return s.CHM(e),s.oxw().toggleUserSettings()}),s.qZA()}2&e&&s.Q6J("adminMode",!0)}let xt=(()=>{class e{constructor(e,t,n,i,o,a){this.tokenService=e,this.adminService=t,this.router=n,this.telephonyOfflineService=i,this.injector=o,this.loginService=a,this.ngUnsubscribe=new u.xQ,this.isEditMode=!1,this.isUserSettingsShown=!1,this.sidenavMode="side",this.injector.get(L),t.emitChange.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.activeUser=e}),o.get(y.f)}toggleUserSettings(){this.isUserSettingsShown=!this.isUserSettingsShown}ngOnInit(){this.isOnline$=this.telephonyOfflineService.isOnline$,this.activeUser=new v,this.tokenService.token$.pipe((0,A.h)(e=>!e),(0,S.x)(),(0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.goToLoginPage()}),this.listenForPermissionChanges()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}ngAfterViewInit(){window.addEventListener("resize",()=>{this.checkSidenav()}),this.checkSidenav()}goToLoginPage(){this.router.navigate(["/auth/login"])}checkSidenav(){window.innerWidth>=1280?(this.sidenavMode="side",this.isSidenavOpen=!0,this.disableSidenavClose=!0):(this.sidenavMode="over",this.isSidenavOpen=!1,this.disableSidenavClose=!1)}switchToUcClient(){k.Q.removeItem(C.q),k.Q.removeItem("AdminToken"),this.loginService.authCredentials.clientAccess?window.close():this.logoutFromCloudya()}toggleNavShown(){this.toggleSidenav()}closeSideNav(e){window.innerWidth<1280&&!e&&this.toggleSidenav()}toggleSidenav(){this.sidenav.toggle()}logoutFromCloudya(){k.Q.clearToken("token"),this.router.navigate(["/auth/logout"])}listenForPermissionChanges(){this.adminService.ownPermissionsChange$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e.admin_login||(e.client_login?this.switchToUcClient():this.router.navigate(["/auth/logout"]))})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(U.B),s.Y36(D.l),s.Y36(P.F0),s.Y36(B.l),s.Y36(s.zs3),s.Y36(E.r))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-admin-main"]],viewQuery:function(e,t){if(1&e&&s.Gf(bt,5),2&e){let e;s.iGM(e=s.CRH())&&(t.sidenav=e.first)}},decls:21,vars:13,consts:[["autoReload",""],[1,"main__content"],[1,"admin__header__background","header__background"],[1,"admin__sidenav"],[3,"disableClose","mode","opened"],["sidenav",""],["data-e2e","user-info-fragment",3,"isAdmin","click"],[3,"itemClicked"],[1,"my-content"],[1,"main__toolbar"],[1,"header-container"],[3,"isNavShown"],[1,"page-content"],[1,"main__footer"],[3,"adminMode","click","onClose",4,"ngIf"],[3,"adminMode","click","onClose"]],template:function(e,t){if(1&e&&(s._UZ(0,"auto-reload",null,0),s.TgZ(2,"main-container"),s.ALo(3,"async"),s.TgZ(4,"div",1),s._UZ(5,"div",2),s.TgZ(6,"mat-sidenav-container",3),s.TgZ(7,"mat-sidenav",4,5),s.TgZ(9,"user-info",6),s.NdJ("click",function(){return t.toggleUserSettings()}),s.qZA(),s.TgZ(10,"admin-sidenav",7),s.NdJ("itemClicked",function(e){return t.closeSideNav(e)}),s.qZA(),s.qZA(),s.TgZ(11,"div",8),s.TgZ(12,"mat-toolbar",9),s.TgZ(13,"div",10),s.TgZ(14,"admin-header",11),s.NdJ("isNavShown",function(){return t.toggleNavShown()}),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"page-content",12),s._UZ(16,"router-outlet"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(17,"div",13),s._UZ(18,"app-footer"),s.qZA(),s.qZA(),s.YNc(19,_t,1,1,"user-settings-drawer",14),s._UZ(20,"overlay-container")),2&e){const e=s.MAs(1);s.xp6(2),s.ekj("has-status",!s.lcZ(3,11,t.isOnline$)||e.updateAvailable),s.xp6(3),s.ekj("is-edit-mode",t.isEditMode),s.xp6(1),s.ekj("is-edit-mode",t.isEditMode),s.xp6(1),s.Q6J("disableClose",t.disableSidenavClose)("mode",t.sidenavMode)("opened",t.isSidenavOpen),s.xp6(2),s.Q6J("isAdmin",!0),s.xp6(10),s.Q6J("ngIf",t.isUserSettingsShown)}},directives:[q.a,R.t,$.TM,$.JX,F.M,Ee,Le.Ye,mt,pt.Y,P.lC,ht.q,a.O5,gt.l,ft.N],pipes:[a.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]   .main__toolbar[_ngcontent-%COMP%]{background:transparent;min-height:6.4rem;padding:0}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]     .flexible-list__item{cursor:pointer}[_nghost-%COMP%]     .flexible-list{list-style:none;margin:0;padding:0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item{align-items:center;display:flex;flex-direction:row;height:5rem;margin-bottom:.1rem;margin-top:.1rem;padding:1.1rem 0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item>app-svg-icon, [_nghost-%COMP%]     .flexible-list>.flexible-list__item .column-container>app-svg-icon{margin-left:1rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item:hover .flexible-list__item__info-button, [_nghost-%COMP%]     .flexible-list>.flexible-list__item.active .flexible-list__item__info-button{display:block}[_nghost-%COMP%]     .flexible-list>.flexible-list__item>.flexible-list__item__initials{border-radius:50%;flex-shrink:0;font-size:1.8rem;height:4rem;line-height:4rem;margin-left:.8rem;margin-right:.8rem;text-align:center;vertical-align:middle;width:4rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content{display:grid;flex:1;flex-direction:column;margin-left:.8rem;margin-right:1.6rem;padding:1.1rem 0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content .flexible-list__item__title{display:inline-block;font-size:1.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content .flexible-list__item__sub-title{color:#666;font-size:1.6rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__info-button{display:none;height:4.8rem;margin-right:.8rem;width:4.8rem}[_nghost-%COMP%]     .flexible-list .horizontal-divider{align-items:center;border-bottom:.1rem solid #e5e5e5;display:flex;height:5rem;padding:1.1rem 0;width:calc(100% - 8rem)}@-webkit-keyframes ringing{0%{opacity:1}49%{opacity:1}50%{opacity:0}to{opacity:0}}@keyframes ringing{0%{opacity:1}49%{opacity:1}50%{opacity:0}to{opacity:0}}[_nghost-%COMP%]     mat-sidenav-container .mat-sidenav-content{bottom:0;display:flex;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:2}[_nghost-%COMP%]     mat-sidenav-container .mat-sidenav-focus-trap{display:flex}[_nghost-%COMP%]     mat-sidenav-container .cdk-focus-trap-content{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .my-content{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper, [_nghost-%COMP%]     .my-content .page-content{display:flex;flex:1;flex-direction:column;overflow:hidden}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*{display:flex;flex:1;min-height:0;min-width:0;overflow-y:auto}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container{display:flex;flex:1;overflow:hidden}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>*, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>*{flex:0 0 auto;overflow-y:auto}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>.left, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>.left{flex:1}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>.right, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>.right{width:32.2rem}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:32rem}@media screen and (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:33.33vw}}@media screen and (max-width: 767px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:25.6rem}}@media screen and (max-width: 895px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left, [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left{margin-left:0;margin-right:0}}@media screen and (min-width: 896px) and (max-width: 179rem){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left, [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left{margin-left:0}}forward-details-modal[_ngcontent-%COMP%], categorized-modal[_ngcontent-%COMP%], subscribe-conference-modal[_ngcontent-%COMP%], delete-all-modal[_ngcontent-%COMP%], admin-session-ended-modal[_ngcontent-%COMP%], admin-switch-modal[_ngcontent-%COMP%], call-context-menu[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0;z-index:2000}.main__footer[_ngcontent-%COMP%]{width:100%}@media (min-width: 1280px){.main__footer[_ngcontent-%COMP%]{width:128rem}}.main__content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{background-color:transparent;margin-left:auto;margin-right:auto;z-index:2}@media (min-width: 1280px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{width:128rem}}@media (min-width: 1024px) and (max-width: 1279px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%]     .mat-sidenav-content, .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]     .mat-sidenav-content{margin-left:auto!important;margin-right:auto!important;width:1024px}}@media (max-width: 1280px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{width:100%}}.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{background-color:transparent;border-right:0;display:flex;flex-direction:column;overflow-x:hidden;width:25.6rem}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{background-color:transparent}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem;margin-left:.4rem;margin-right:.4rem}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.8rem}.main__content[_ngcontent-%COMP%]   .header__back-button--edit-mode[_ngcontent-%COMP%]{align-items:center;display:flex;height:6.4rem}@media (min-width: 1280px){.main__content[_ngcontent-%COMP%]   .toggle-sidenav-btn[_ngcontent-%COMP%]{display:none}.main__content[_ngcontent-%COMP%]   .my-content[_ngcontent-%COMP%]   .header__back-button--edit-mode[_ngcontent-%COMP%]{display:none}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}.ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-input-placeholder-wrapper[_ngcontent-%COMP%], .ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-hint--error[_ngcontent-%COMP%]{color:#b30000}.mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{caret-color:#b30000}.ng-touched.ng-dirty.mat-input-invalid[_ngcontent-%COMP%]   .ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-input-underline[_ngcontent-%COMP%]{background-color:#b30000!important}.header-container[_ngcontent-%COMP%]{width:100%}.admin__header__background[_ngcontent-%COMP%]{height:6.4rem;left:0;min-width:76.8rem;position:absolute;right:0;z-index:1}"]}),e})();var vt=n(99385),kt=n(56507),Ct=n(39485),Tt=n(91841),At=n(35249),St=n(45832);let yt=(()=>{class e{constructor(e,t,n){this.http=e,this.adminAuthService=t,this.snackBarService=n}handleUserCreationError(e){this.snackBarService.openInfo(409===(null==e?void 0:e.status)?"admin.user.user_already_exists":"admin.user.created_error")}getUsers(t,n="",i=0,o=25,a="username"){const s=(0,vt.U8)(n,i,o,a),r=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get(`${this.apiEndpointAdminAccounts}/${t}/users?${s}`,r).pipe((0,Ue.U)(e=>({data:e.body,paginationHasMoreData:+e.headers.get("x-pagination-current-page")<+e.headers.get("x-pagination-page-count")})),(0,Ue.U)(e.mapResponseWithMultipleItems))}getUser(t,n){return this.http.get(`${this.apiEndpointAdminAccounts}/${t}/users/${n}`,this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e.mapResponseWithSingleItem))}createUser(t,n){return this.http.post(`${this.apiEndpointAdminAccounts}/${t}/users`,JSON.stringify(e.mapUser(n)),this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e.mapResponseWithSingleItem))}editUser(t,n,i){return this.http.put(`${this.apiEndpointAdminAccounts}/${t}/users/${n}`,JSON.stringify(e.mapUser(i)),this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e.mapResponseWithSingleItem))}deleteUser(e,t){return this.http.delete(`${this.apiEndpointAdminAccounts}/${e}/users/${t}`,this.adminAuthService.getCredentials())}getPermissions(t,n){return this.http.get(`${this.apiEndpointAdminAccounts}/${t}/users/${n}/permissions`,this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e=>e.map(e=>Object.assign(Object.assign({},e),{parent_account_id:t.split(":")[1]}))),(0,Ue.U)(e.mapPermissions))}editPermissions(e,t,n){return this.http.put(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/permissions`,JSON.stringify(n),this.adminAuthService.getCredentials())}static mapToUser(e){const t=new v;return t.fromJSON(e),t}static mapResponseWithMultipleItems(t){return t&&Object.assign(Object.assign({},t),{data:t.data.map(e.mapToUser)})}static mapResponseWithSingleItem(t){return t&&e.mapToUser(t)}static mapPermissions(e){const t=new kt.P;return t.fromJSON(e),t}static mapUser(e){const t=new v;return t.username=e.username,t.firstname=e.firstname,t.lastname=e.lastname,t.language=e.language,t.extension=e.extension,t.admin=e.admin,t.client=e.client,t}get apiEndpointAdminAccounts(){return`${Ct.N.API_URL}/admin/accounts`}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt.eN),s.LFG(At.Y),s.LFG(St.c))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),Pt=(()=>{class e{constructor(e,t){this.http=e,this.adminAuthService=t}getLicenses(e){return this.http.get(`${this.apiEndpointAdminAccounts}/${e.accountType}:${e.accountId}/products`,this.adminAuthService.getCredentials())}getLicensesUsage(e,t){const n=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get(`${this.apiEndpointAdminAccounts}/${e}/products/${t}`,n)}getUserLicenseState(e,t,n){return this.http.get(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/licences/${n}`,this.adminAuthService.getCredentials())}grantLicenseToUser(e,t,n){return this.http.post(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/licences/${n}`,{},this.adminAuthService.getCredentials())}revokeLicenseFromUser(e,t,n){return this.http.delete(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/licences/${n}`,this.adminAuthService.getCredentials())}get apiEndpointAdminAccounts(){return`${Ct.N.API_URL}/admin/accounts`}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt.eN),s.LFG(At.Y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var It=n(19122),Ot=n(49090),Zt=n(658),Mt=n(13427);let wt=(()=>{class e{constructor(e,t){this.http=e,this.adminAuthService=t,this.createUserSource=new u.xQ,this.createUser$=this.createUserSource.asObservable()}updateCreateUserSource(e){this.createUserSource.next(e)}unallocatedExtensions(t,n=1,i=25,o="",a="extension_number"){const s=(0,vt.U8)(o,n,i,a.toUpperCase()),r=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get(`${this.apiEndpointAdmin}/customer/${t.externalIdentifier}/migration-wizard/unallocated-extensions?${s}`,r).pipe((0,Ue.U)(e=>({data:e.body,paginationHasMoreData:+e.headers.get("x-pagination-current-page")<+e.headers.get("x-pagination-page-count")})),(0,Ue.U)(e.mapResponseWithMultipleItems))}static mapToUser(t){const n=new v;return n.language=e.defaultUserLanguage,n.fromUnallocatedExtension(t),n}static mapResponseWithMultipleItems(t){return t&&Object.assign(Object.assign({},t),{data:t.data.map(e.mapToUser)})}get apiEndpointAdmin(){return`${Ct.N.API_URL}/admin`}}return e.defaultUserLanguage="en",e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt.eN),s.LFG(At.Y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();class Nt extends x.H{setAttributes(e){var t;this.id=e.id,this.resource=e.resource,this.resource_type_name=e.resource_type_name,this.inboundTrunkNumber=e.inboundTrunkNumber,this.inboundPhoneNumbers=e.inboundPhoneNumbers,this.inboundPhoneNumbersFormatted=(null===(t=e.inboundPhoneNumbers)||void 0===t?void 0:t.join(", "))||"-",this.extension=e.extension,this.name=e.name}fromJSON(e){this.setAttributes(e)}}let Et=(()=>{class e{constructor(e,t){this.http=e,this.adminAuthService=t,this.removePhoneExtensionSource=new u.xQ,this.activePhoneExtensionSource=new u.xQ,this.reloadPhoneExtensionSource=new u.xQ,this.removePhoneExtension$=this.removePhoneExtensionSource.asObservable(),this.activePhoneExtension$=this.activePhoneExtensionSource.asObservable(),this.reloadPhoneExtension$=this.reloadPhoneExtensionSource.asObservable()}reloadItems(){this.reloadPhoneExtensionSource.next()}getLinkedPhoneExtensions(t,n){return this.http.get(`${this.apiEndpointAdminAccounts}/${t}/users/${n}/phoneextensions`,this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e.mapResponseWithMultiplePhoneExtensionResourceItems))}deleteLinkedPhoneExtension(e,t,n){return this.http.delete(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/phoneextensions/${n}`,this.adminAuthService.getCredentials())}getUnassignedPhoneExtensions(t,n,i,o){const a=(0,vt.U8)(n,i,o);return this.http.get(`${this.apiEndpointAdminAccounts}/${t}/unassigned-phoneextensions?${a}`,this.adminAuthService.getCredentials()).pipe((0,Ue.U)(e.mapResponseWithMultiplePhoneExtensionItems))}addLinkedPhoneExtensions(e,t,n){return this.http.post(`${this.apiEndpointAdminAccounts}/${e}/users/${t}/phoneextensions`,{value:n},this.adminAuthService.getCredentials())}static mapToPhoneExtensionResource(e){const t=new Nt;return t.fromJSON(e),t}static mapToPhoneExtension(e){return{id:e.ID,discriminator:e.DISCRIMINATOR,displayName:e.DISPLAY_NAME,type:e.TYPE,extensionNumber:e.EXTENSION_NUMBER}}static mapResponseWithMultiplePhoneExtensionResourceItems(t){return t&&(t.data=t.map(e.mapToPhoneExtensionResource)),t}static mapResponseWithMultiplePhoneExtensionItems(t){return t&&(t.data=t.map(e.mapToPhoneExtension)),t}get apiEndpointAdminAccounts(){return`${Ct.N.API_URL}/admin/accounts`}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt.eN),s.LFG(At.Y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var Lt=n(5304);let Ut=(()=>{class e{constructor(e,t,n,i){this.http=e,this.apiAdminService=t,this.accountService=n,this.adminAuthService=i,this.importErrorSource=new u.xQ,this.importError$=this.importErrorSource.asObservable()}uploadUsersViaFile(t){this.getImport(t).pipe((0,Ue.U)(t=>t.map(t=>e.mapImportErrorApiResponse(t)))).subscribe(e=>{this.importErrorSource.next(e)})}exportFile(){return this.http.get(`${Ct.N.API_URL}/admin/accounts/${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}/userimport/export`,this.adminAuthService.getCredentials())}getImport(e){return this.apiAdminService.post(`${Ct.N.API_URL}/admin/accounts/${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}/userimport/import`,{text:e}).pipe((0,Lt.K)(e=>(0,Y.of)(e.error.report)))}static mapImportErrorApiResponse(e){var t;return{username:e.username,report:null===(t=null==e?void 0:e.report)||void 0===t?void 0:t.split("\n"),imported:null==e?void 0:e.imported}}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(Tt.eN),s.LFG(It.i),s.LFG(C.B),s.LFG(At.Y))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Dt=n(42070);let Bt=(()=>{class e{constructor(e){this.dialogRef=e}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.so))},e.\u0275cmp=s.Xpm({type:e,selectors:[["leave-dialog"]],decls:5,vars:4,consts:[[3,"btnSaveCaption","cancelClick","saveClick"]],template:function(e,t){1&e&&(s.TgZ(0,"section"),s.TgZ(1,"p"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA(),s.TgZ(4,"footer-actions",0),s.NdJ("cancelClick",function(){return t.dialogRef.close(!1)})("saveClick",function(){return t.dialogRef.close(!0)}),s.qZA()),2&e&&(s.xp6(2),s.hij(" ",s.lcZ(3,2,"admin.user_edit.leave_dialog.label")," "),s.xp6(2),s.Q6J("btnSaveCaption","done"))},directives:[Dt.c],pipes:[Z.X$],styles:[""]}),e})();var qt=n(28049);let Rt=(()=>{class e{constructor(e){this.dialog=e}canDeactivate(e){return!!e.isFormChanged()||this.dialog.open(Bt).afterClosed().pipe((0,Ue.U)(e=>e),(0,qt.P)())}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(o.uw))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),$t=(()=>{class e{constructor(e,t){this.router=e,this.accountService=t}canActivate(){return!!this.accountService.isKAccountSelected||(this.router.navigate(["/admin/user"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(P.F0),s.LFG(C.B))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})(),Ft=(()=>{class e{constructor(e,t){this.router=e,this.accountService=t}canActivate(){return!!this.accountService.selectedAccount||(this.router.navigate(["/admin/user"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(P.F0),s.LFG(C.B))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})();var Yt=n(3679);let Jt=(()=>{class e{constructor(e,t){this.router=e,this.route=t,this.ngUnsubscribe=new u.xQ,this.route.params.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{})}ngOnInit(){this.initCallForwardingForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}initCallForwardingForm(){this.callForwardingForm=new Yt.cw({})}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(P.gz))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-call-forwarding"]],decls:5,vars:3,consts:[[1,"headline"],[1,"content"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"span"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA(),s._UZ(4,"div",1)),2&e&&(s.xp6(2),s.Oqu(s.lcZ(3,1,"admin.user_edit.call_forwarding.label")))},pipes:[Z.X$],styles:[""]}),e})();var Qt=n(68307);let zt=(()=>{class e{constructor(e,t){this.adminService=e,this.ngUnsubscribe=new u.xQ,t.url.pipe((0,Qt.b)(e=>{e.some(e=>"wizards"===e.path)&&this.adminService.emit(null)}),(0,T.R)(this.ngUnsubscribe)).subscribe()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(D.l),s.Y36(P.gz))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-page-content"]],decls:4,vars:0,consts:[[1,"scrollable-container"],[1,"left","admin-page-content"],[1,"admin-page-content__wrapper"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s._UZ(3,"router-outlet"),s.qZA(),s.qZA(),s.qZA())},directives:[P.lC],styles:[".admin-page-content[_ngcontent-%COMP%]{display:flex;flex:1}.admin-page-content__wrapper[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}"]}),e})();var jt=n(88044),Kt=n(76321),Ht=n(68939);class Gt{static isExtensionFieldValid(){return function(e){return"string"==typeof e.value&&""!==e.value?{isExtensionFieldInvalid:!0}:null}}}var Vt=n(64300),Xt=n(85499),Wt=n(21554),en=n(18882),tn=n(83112),nn=n(44163),on=n(7539);function an(e,t){1&e&&(s.TgZ(0,"mat-hint",14),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function sn(e,t){1&e&&(s.TgZ(0,"mat-hint",14),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function rn(e,t){1&e&&(s.TgZ(0,"mat-hint",14),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.username.error.required")," "))}function cn(e,t){1&e&&(s.TgZ(0,"mat-hint",14),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"common_errors.username.email")," "))}function ln(e,t){1&e&&(s.TgZ(0,"mat-hint",15),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user.already_exists_with_extension")," "))}function dn(e,t){if(1&e&&(s.TgZ(0,"mat-option",16),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",s.lcZ(2,2,e.title)," ")}}function un(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"svg-avatar",28),s.qZA()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("displayName",e.displayName)}}function mn(e,t){1&e&&s._UZ(0,"svg-avatar")}function pn(e,t){if(1&e&&(s.TgZ(0,"mat-option",24),s.YNc(1,un,2,1,"div",25),s.YNc(2,mn,1,0,"ng-template",null,23,s.W1O),s.TgZ(4,"span",26),s._uU(5),s.qZA(),s.TgZ(6,"span",27),s._uU(7),s.qZA(),s.qZA()),2&e){const e=t.$implicit,n=s.MAs(3),i=s.oxw(2);s.Q6J("value",e),s.xp6(1),s.Q6J("ngIf",i.getInitials(e.displayName))("ngIfElse",n),s.xp6(4),s.Oqu(e.displayName),s.xp6(2),s.Oqu(e.number||e.extensionNumber||e.EXTENSION_NUMBER||e.ID)}}function hn(e,t){1&e&&(s.TgZ(0,"mat-option"),s._UZ(1,"app-spinner"),s.qZA())}function gn(e,t){1&e&&s._UZ(0,"svg-avatar")}function fn(e,t){1&e&&(s.TgZ(0,"mat-error"),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.extension.error")," "))}function bn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-form-field",17),s.TgZ(1,"input",18),s.NdJ("focusout",function(){return s.CHM(e),s.oxw().checkExistingUserWithExtension()}),s.ALo(2,"translate"),s.qZA(),s.TgZ(3,"mat-autocomplete",19,20),s.NdJ("listboxScrolled",function(){return s.CHM(e),s.oxw().loadMoreItems()}),s.YNc(5,pn,8,5,"mat-option",21),s.YNc(6,hn,2,0,"mat-option",22),s.qZA(),s.YNc(7,gn,1,0,"ng-template",null,23,s.W1O),s.YNc(9,fn,3,3,"mat-error",22),s.qZA()}if(2&e){const e=s.MAs(4),t=s.oxw();s.xp6(1),s.s9C("placeholder",s.lcZ(2,6,"admin.user.phoneextension.extension")),s.Q6J("matAutocomplete",e),s.xp6(2),s.Q6J("displayWith",t.displayFn),s.xp6(2),s.Q6J("ngForOf",t.extensionItems),s.xp6(1),s.Q6J("ngIf",t.isLoading),s.xp6(3),s.Q6J("ngIf",t.userDataForm.controls.extension.hasError("isExtensionFieldInvalid"))}}function _n(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",32),s.TgZ(1,"mat-checkbox",34),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw(2).user.client=t}),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()}if(2&e){const e=s.oxw(2);s.xp6(1),s.Q6J("ngModel",e.user.client),s.xp6(1),s.hij(" ",s.lcZ(3,2,"admin.user_edit.user_data.permissions.client")," ")}}function xn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"section",29),s.TgZ(1,"div",30),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.YNc(4,_n,4,4,"div",31),s.TgZ(5,"div",32),s.TgZ(6,"mat-checkbox",33),s.NdJ("ngModelChange",function(t){s.CHM(e);const n=s.oxw();return n.isNconnectVoiceAccount||(n.user.admin=t)}),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Oqu(s.lcZ(3,5,"admin.user_edit.user_data.permissions.title")),s.xp6(2),s.Q6J("ngIf",!e.isNconnectVoiceAccount),s.xp6(2),s.Q6J("ngModel",e.isNconnectVoiceAccount||e.user.admin)("disabled",e.isNconnectVoiceAccount),s.xp6(1),s.hij(" ",s.lcZ(8,7,e.adminCheckBoxText)," ")}}function vn(e,t){1&e&&(s.TgZ(0,"mat-error",35),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.permissions.error")," "))}let kn=(()=>{class e{constructor(e,t,n,i,o,a,s,r){this.adminAuthService=e,this.adminService=t,this.userService=n,this.accountService=i,this.phoneExtensionService=o,this.languageService=a,this.dialogRef=s,this.data=r,this.ngUnsubscribe=new u.xQ,this.userHasExtension=!1,this.isPermissionsShown=!1,this.extensionItems=[],this.interfaceLanguages=this.languageService.getAvailableLanguages(),this.interfaceLanguageDefault=this.interfaceLanguages[this.languageService.getCurrentLanguage()],this.page=1,this.perPage=25,this.hasMoreData=!0,this.isLoading=!1,this.searchExtensionValue="",this.uploader=new Kt.bA({url:`${Ct.N.API_URL}/file/upload`,authToken:this.adminAuthService.getBearerAuth(),autoUpload:!0}),this.isNconnectVoiceAccount=!1,this.adminCheckBoxText="admin.user_edit.user_data.permissions.admin",this.initUserDataForm(),this.selectedAccount=this.data.account,this.userDataForm.get("extension").valueChanges.pipe((0,De.O)(""),(0,Fe.b)(250),(0,Qt.b)(e=>{this.extensionItems=[],this.page=1,this.searchExtensionValue=e}),(0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.loadUnassignedPhoneExtensions()}),this.uploader=new Kt.bA({url:`${Ct.N.API_URL}/file/upload`,authToken:this.adminAuthService.getBearerAuth(),autoUpload:!0})}ngOnInit(){this.setUserFormDefaultLanguage(),this.user.client=!0,this.userService.userInfo$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.isNconnectVoiceAccount=e.modules.includes("nconnect_voice"),this.setAdminCheckBoxText()}),this.accountService.isKAccountSelected&&(this.isPermissionsShown=this.accountService.isKAccountSelected)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}save(){this.dialogRef.close(this.userDataForm.value)}cancel(){this.dialogRef.close()}checkExistingUserWithExtension(){const e=this.userDataForm.get("username").value;return""!==e&&(this.accountService.checkUsername(e).subscribe(e=>{this.userHasExtension=200===e.status,this.userHasExtension?(this.userDataForm.get("client").disable(),this.userDataForm.get("client").setValue(!1)):this.userDataForm.get("client").enable()}),this.userHasExtension)}extensionFieldIsEmpty(){return null===this.userDataForm.controls.extension.value||""===this.userDataForm.controls.extension.value}getInitials(e){return(0,vt.Cx)(e)||""}displayFn(e){return e&&e.displayName}loadMoreItems(){this.hasMoreData&&!this.isLoading&&this.loadUnassignedPhoneExtensions()}initUserDataForm(){this.user=new v,this.adminService.emit(this.user),this.userDataForm=new Yt.cw({username:new Yt.NI(this.user.username,Yt.kI.compose([Yt.kI.required,Yt.kI.email])),firstname:new Yt.NI(this.user.firstname,Yt.kI.required),lastname:new Yt.NI(this.user.lastname,Yt.kI.required),language:new Yt.NI(this.user.language,Yt.kI.required),extension:new Yt.NI(this.user.extension,Gt.isExtensionFieldValid()),client:new Yt.NI(this.user.client),admin:new Yt.NI(this.user.admin)})}setUserFormDefaultLanguage(){this.userService.userInfo$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{const t=this.interfaceLanguages.some(t=>t.value===e.user.language);this.user.language=t?e.user.language:this.interfaceLanguageDefault})}loadUnassignedPhoneExtensions(){this.selectedAccount&&(this.isLoading=!0,this.phoneExtensionService.getUnassignedPhoneExtensions(`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`,this.searchExtensionValue,this.page,this.perPage).pipe((0,T.R)(this.ngUnsubscribe),(0,Ht.x)(()=>this.isLoading=!1)).subscribe(e=>{this.page++,this.extensionItems=[...this.extensionItems,...e.data],this.hasMoreData=e.length>=this.perPage}))}setAdminCheckBoxText(){this.isNconnectVoiceAccount&&(this.adminCheckBoxText="admin.user_edit.user_data.permissions.nconnect_voice")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(At.Y),s.Y36(D.l),s.Y36(J.K),s.Y36(C.B),s.Y36(Et),s.Y36(Vt.T),s.Y36(o.so),s.Y36(o.WI))},e.\u0275cmp=s.Xpm({type:e,selectors:[["add-user-modal"]],decls:27,vars:32,consts:[["data-e2e","admin-user-modal-fragment",1,"add-user"],[1,"add-user__modal",3,"title"],[1,"add-user-modal__form",3,"formGroup"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__first-name--input",3,"focus","placeholder"],["class","mat-hint--error",4,"ngIf"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__last-name--input",3,"placeholder"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__username--input",3,"placeholder","focusout"],["class","mat-hint--error","style","color:red;",4,"ngIf"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-user-modal-fragment__language-selector",3,"ngModel","placeholder","ngModelChange"],["data-e2e","admin-user-modal-fragment__language-selector-option",3,"value",4,"ngFor","ngForOf"],["class","extension-autocomplete",4,"ngIf"],["class","add-user__section--permissions",4,"ngIf"],["class","add-user__checkbox-error-message",4,"ngIf"],["e2e","admin-user-modal-fragment",3,"saveDisabled","cancelClick","saveClick"],[1,"mat-hint--error"],[1,"mat-hint--error",2,"color","red"],["data-e2e","admin-user-modal-fragment__language-selector-option",3,"value"],[1,"extension-autocomplete"],["formControlName","extension","matInput","","data-e2e","admin-user-modal-fragment__extension--input",3,"matAutocomplete","placeholder","focusout"],[3,"displayWith","listboxScrolled"],["auto","matAutocomplete"],["class","extension-autocomplete__item",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["showIcon",""],[1,"extension-autocomplete__item",3,"value"],[4,"ngIf","ngIfElse"],["mat-line","","data-e2e","admin-user-modal-fragment__extension-autocomplete-option-name"],["mat-line","","data-e2e","admin-user-modal-fragment__extension-autocomplete-option-extension"],[3,"displayName"],[1,"add-user__section--permissions"],[1,"add-user__section__subtitle"],["class","add-user__section__checkbox",4,"ngIf"],[1,"add-user__section__checkbox"],["color","primary","formControlName","admin","id","user_data__client-admin","data-e2e","admin-user-modal-fragment__permission-administrator-rights-checkbox",3,"ngModel","disabled","ngModelChange"],["color","primary","formControlName","client","id","user_data__client-rights","data-e2e","admin-user-modal-fragment__permission-client-rights-checkbox",3,"ngModel","ngModelChange"],[1,"add-user__checkbox-error-message"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"modal-container",1),s.ALo(2,"translate"),s.TgZ(3,"form",2),s.TgZ(4,"section"),s.TgZ(5,"mat-form-field"),s._UZ(6,"input",3),s.ALo(7,"translate"),s.YNc(8,an,3,3,"mat-hint",4),s.qZA(),s.TgZ(9,"mat-form-field"),s._UZ(10,"input",5),s.ALo(11,"translate"),s.YNc(12,sn,3,3,"mat-hint",4),s.qZA(),s.TgZ(13,"mat-form-field"),s.TgZ(14,"input",6),s.NdJ("focusout",function(){return t.checkExistingUserWithExtension()}),s.ALo(15,"translate"),s.qZA(),s.YNc(16,rn,3,3,"mat-hint",4),s.YNc(17,cn,3,3,"mat-hint",4),s.YNc(18,ln,3,3,"mat-hint",7),s.qZA(),s.TgZ(19,"mat-form-field"),s.TgZ(20,"mat-select",8),s.NdJ("ngModelChange",function(e){return t.user.language=e}),s.ALo(21,"translate"),s.YNc(22,dn,3,4,"mat-option",9),s.qZA(),s.qZA(),s.YNc(23,bn,10,8,"mat-form-field",10),s.qZA(),s.YNc(24,xn,9,9,"section",11),s.YNc(25,vn,3,3,"mat-error",12),s.TgZ(26,"footer-actions",13),s.NdJ("cancelClick",function(){return t.cancel()})("saveClick",function(){return t.save()}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("title",s.lcZ(2,22,"admin.user.add_user")),s.xp6(2),s.Q6J("formGroup",t.userDataForm),s.xp6(1),s.ekj("add-user-modal__section--extension-invalid",t.userDataForm.controls.extension.hasError("isExtensionFieldInvalid")),s.xp6(2),s.Q6J("focus",!0)("placeholder",s.lcZ(7,24,"admin.user_edit.user_data.firstname.label")),s.xp6(2),s.Q6J("ngIf",t.userDataForm.controls.firstname.hasError("required")&&t.userDataForm.controls.firstname.touched),s.xp6(2),s.Q6J("placeholder",s.lcZ(11,26,"admin.user_edit.user_data.lastname.label")),s.xp6(2),s.Q6J("ngIf",t.userDataForm.controls.lastname.hasError("required")&&t.userDataForm.controls.lastname.touched),s.xp6(1),s.ekj("add-user__form-field--has-error",!0===t.userDataForm.controls.username.hasError("email")),s.xp6(1),s.Q6J("placeholder",s.lcZ(15,28,"admin.user_edit.user_data.username.label")),s.xp6(2),s.Q6J("ngIf",t.userDataForm.controls.username.hasError("required")&&t.userDataForm.controls.username.touched),s.xp6(1),s.Q6J("ngIf",!t.userDataForm.controls.username.hasError("required")&&t.userDataForm.controls.username.hasError("email")&&t.userDataForm.controls.username.touched),s.xp6(1),s.Q6J("ngIf",t.userHasExtension&&!t.extensionFieldIsEmpty()&&!t.userDataForm.controls.username.hasError("email")),s.xp6(2),s.Q6J("ngModel",t.user.language)("placeholder",s.lcZ(21,30,"admin.user_edit.user_data.language.label")),s.xp6(2),s.Q6J("ngForOf",t.interfaceLanguages),s.xp6(1),s.Q6J("ngIf",!t.isNconnectVoiceAccount),s.xp6(1),s.Q6J("ngIf",t.isPermissionsShown),s.xp6(1),s.Q6J("ngIf",!t.user.client&&!t.user.admin),s.xp6(1),s.Q6J("saveDisabled",t.userDataForm.invalid||t.userHasExtension&&!t.extensionFieldIsEmpty()))},directives:[I.O,Yt._Y,Yt.JL,Yt.sg,m.KE,Yt.Fj,Qe.Nt,Yt.JJ,Yt.u,Yt.nD,Xt.R,a.O5,l.gD,a.sg,Dt.c,m.bx,r.ey,Wt.ZL,Wt.XC,en.X,r.X2,tn.T,nn.S,m.TO,on.oG],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}  .extension-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .extension-autocomplete__item .mat-option-text{align-items:center;display:flex;position:relative}  .extension-autocomplete__item .mat-option-text .rounded-icon-holder{font-size:2.4rem}  .extension-autocomplete__item .mat-option-text span{font-size:1.8rem;margin-top:-1.8rem}  .extension-autocomplete__item .mat-option-text span:last-child{color:#0000008a;font-size:1.6rem;left:5.7rem;position:absolute;top:2.3rem}.add-user-modal__form[_ngcontent-%COMP%]{padding:.8rem 2.4rem}.add-user__section__subtitle[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1.5rem;margin-top:.5rem}.add-user__section__checkbox[_ngcontent-%COMP%]{margin-top:2rem}.add-user__form-field--has-error[_ngcontent-%COMP%]{height:9.5rem}.add-user__checkbox-error-message[_ngcontent-%COMP%]{font-size:1.4rem;margin:1rem 0 .5rem}.add-user__section--permissions[_ngcontent-%COMP%]{margin-bottom:1rem}.add-user-modal__section--extension-invalid[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e})();var Cn=n(48431),Tn=n(34899),An=n(54073),Sn=n(93739),yn=n(83217),Pn=n(7460),In=n(81836),On=n(57158),Zn=n(99445),Mn=n(76083);function wn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"button",2),s.NdJ("click",function(t){return s.CHM(e),s.oxw().onLoadMore(t)}),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()}2&e&&(s.xp6(2),s.Oqu(s.lcZ(3,1,"search-result.load-more")))}const Nn=["*"];let En=(()=>{class e extends Mn.g{constructor(){super(...arguments),this.showLoadMore=!1,this.showLoading=!1}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=s.n5z(e)))(n||e)}}(),e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-search-group"]],inputs:{title:"title",showLoadMore:"showLoadMore",showLoading:"showLoading"},features:[s.qOj],ngContentSelectors:Nn,decls:4,vars:2,consts:[["loading-area-indicator","",1,"admin-search-group",3,"loadingAreaIndicatorActive"],[4,"ngIf"],["mat-button","",1,"load-more",3,"click"]],template:function(e,t){1&e&&(s.F$t(),s.TgZ(0,"div",0),s.TgZ(1,"section"),s.Hsn(2),s.qZA(),s.YNc(3,wn,4,3,"div",1),s.qZA()),2&e&&(s.Q6J("loadingAreaIndicatorActive",t.showLoading),s.xp6(3),s.Q6J("ngIf",t.showLoadMore))},directives:[ze.O,a.O5,c.lW],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}header[_ngcontent-%COMP%]{border-top:.1rem solid rgba(0,0,0,.3);color:#0000004d;margin:1rem 0 0;padding:.8rem 1.6rem}.load-more[_ngcontent-%COMP%]{margin:.8rem 1.6rem;text-transform:uppercase}"]}),e})();var Ln=n(19773),Un=n(5882);let Dn=(()=>{class e{constructor(e,t,n,i,o,a){this.router=e,this.snackBarService=t,this.userService=n,this.confirmDialogsService=i,this.translate=o,this.accountService=a,this.ngUnsubscribe=new u.xQ,this.items=[],this.sortOrderChange=new s.vpe}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}editUser(e){this.router.navigate([`/admin/user/${e.id}`])}deleteUser(e,t,n){this.translate.get(["admin.user.deleting_user","admin.user.want_delete_user","yes","no"]).pipe((0,Ln.zg)(t=>this.confirmDialogsService.confirm(t["admin.user.deleting_user"],`${t["admin.user.want_delete_user"]} ${e.username}?`,t.no,t.yes)),(0,T.R)(this.ngUnsubscribe)).subscribe(i=>{i&&n&&n(),this.handleDeleteUserDialogResult(i,e,t)})}handleDeleteUserDialogResult(e,t,n){e&&this.accountService.selectedAccount&&(this.snackBarService.open("admin.user.deleting_user"),this.userService.deleteUser(`${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}`,t.id).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.items.splice(n,1),this.snackBarService.openInfo("admin.user.deleted",!0)}))}changeOrder(e){this.order=e.order,this.reverse=e.reverse,this.sortOrderChange.emit((this.reverse?"-":"")+this.order)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(St.c),s.Y36(yt),s.Y36(Un.U),s.Y36(Z.sK),s.Y36(C.B))},e.\u0275dir=s.lG2({type:e,inputs:{items:"items",scrollContainerSelector:"scrollContainerSelector"},outputs:{sortOrderChange:"sortOrderChange"}}),e})();var Bn=n(67798),qn=n(77540);function Rn(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," n/a"),s.qZA())}function $n(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," -"),s.qZA())}function Fn(e,t){1&e&&s._UZ(0,"app-svg-icon",14)}function Yn(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," n/a"),s.qZA())}function Jn(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," -"),s.qZA())}function Qn(e,t){1&e&&s._UZ(0,"app-svg-icon",14)}function zn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list-item",5),s.TgZ(1,"span",6),s._uU(2),s.qZA(),s.TgZ(3,"span",6),s._uU(4),s.qZA(),s.TgZ(5,"span",7),s._uU(6),s.qZA(),s.TgZ(7,"span",7),s.YNc(8,Rn,2,0,"span",8),s.YNc(9,$n,2,0,"span",8),s.YNc(10,Fn,1,0,"app-svg-icon",9),s.qZA(),s.TgZ(11,"span",7),s.YNc(12,Yn,2,0,"span",8),s.YNc(13,Jn,2,0,"span",8),s.YNc(14,Qn,1,0,"app-svg-icon",9),s.qZA(),s.TgZ(15,"span",10),s.TgZ(16,"button",11),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw().editUser(t)}),s._UZ(17,"app-svg-icon",12),s.qZA(),s.TgZ(18,"button",11),s.NdJ("click",function(){const t=s.CHM(e),n=t.$implicit,i=t.index;return s.oxw().deleteUser(n,i)}),s._UZ(19,"app-svg-icon",13),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,n=s.oxw();s.uIk("data-e2e",n.e2e?n.e2e+"__table-row":null),s.xp6(1),s.uIk("data-e2e",n.e2e?n.e2e+"__table-row-username":null)("data-e2e-id",n.e2e?e.id:null),s.xp6(1),s.hij(" ",e.username," "),s.xp6(2),s.Oqu(e.getFullName()),s.xp6(2),s.Oqu(e.extension),s.xp6(2),s.Q6J("ngIf",void 0===e.client),s.xp6(1),s.Q6J("ngIf",!1===e.client),s.xp6(1),s.Q6J("ngIf",!0===e.client),s.xp6(2),s.Q6J("ngIf",void 0===e.admin),s.xp6(1),s.Q6J("ngIf",!1===e.admin),s.xp6(1),s.Q6J("ngIf",!0===e.admin),s.xp6(2),s.uIk("data-e2e",n.e2e?n.e2e+"__table-row-edit--button":null),s.xp6(2),s.uIk("data-e2e",n.e2e?n.e2e+"__table-row-delete--button":null)}}let jn=(()=>{class e extends Dn{constructor(e,t,n,i,o,a){super(e,t,n,i,o,a),this.router=e,this.snackBarService=t,this.userService=n,this.confirmDialogsService=i,this.translate=o,this.accountService=a,this.headerColumnData=[{name:"username",title:"admin.user.username.label",e2e:"admin-user-page__table-header-username"},{name:"firstname",title:"admin.user.name.label",e2e:"admin-user-page__table-header-name"},{name:"extension",title:"admin.user.extension.label",class:"column__small",disabled:!0,e2e:"admin-user-page__table-header-extension"},{name:"hasAccess",title:"admin.user.client.label",class:"column__small",e2e:"admin-user-page__table-header-app"},{name:"hasAdminAccess",title:"admin.user.admin.label",class:"column__small",e2e:"admin-user-page__table-header-admin"}]}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(St.c),s.Y36(yt),s.Y36(Un.U),s.Y36(Z.sK),s.Y36(C.B))},e.\u0275cmp=s.Xpm({type:e,selectors:[["users-table"]],inputs:{e2e:"e2e"},features:[s.qOj],decls:5,vars:2,consts:[[1,"flex-table","users-table__header--adjust"],[1,"secondary-header","sticky-header"],[1,"users-table",3,"data","orderChange"],[1,"column","column--fix"],["itemHoverbox","",4,"ngFor","ngForOf"],["itemHoverbox",""],[1,"column"],[1,"column","column__small"],[4,"ngIf"],["fill","green-button","icon","done","size","small",4,"ngIf"],[1,"column","item-secondary-content"],["mat-icon-button","","type","button",3,"click"],["fill","button-color","icon","edit","size","small"],["fill","button-color","icon","delete","size","small"],["fill","green-button","icon","done","size","small"]],template:function(e,t){1&e&&(s.TgZ(0,"mat-list",0),s.TgZ(1,"mat-list-item",1),s.TgZ(2,"sortable-list-header",2),s.NdJ("orderChange",function(e){return t.changeOrder(e)}),s.qZA(),s._UZ(3,"span",3),s.qZA(),s.YNc(4,zn,20,14,"mat-list-item",4),s.qZA()),2&e&&(s.xp6(2),s.Q6J("data",t.headerColumnData),s.xp6(2),s.Q6J("ngForOf",t.items))},directives:[Re.i$,Re.Tg,Bn.c,a.sg,qn.h,a.O5,c.lW,qe.u],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}[_nghost-%COMP%]     .mat-list-base .mat-list-item.sticky-header{top:0!important}.users-table__header--adjust[_ngcontent-%COMP%]{display:block;margin-top:6.4rem}"]}),e})();function Kn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"admin-search-group",1),s.NdJ("loadMore",function(){return s.CHM(e),s.oxw().onLoadMore()}),s._UZ(1,"users-table",2),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("showLoadMore",e.hasMoreData&&!e.isLoading)("showLoading",e.isLoading),s.xp6(1),s.Q6J("items",e.items)}}let Hn=(()=>{class e extends yn.g{constructor(e,t,n,i,o,a){super(e,t,o,a),this.clickToDialService=e,this.sipService=t,this.adminUserService=n,this.accountService=i,this.logger=o,this.callTrackerService=a,this.ngUnsubscribe=new u.xQ,this.type=jt.V.USER,this.items=[]}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}mapData(e){return e}load(){var e;const t=this.accountService.selectedAccount;t&&(null===(e=this.usersRequest)||void 0===e||e.unsubscribe(),this.usersRequest=this.adminUserService.getUsers(`${t.accountType}:${t.accountId}`,this.searchString,this.page,this.getPerPage()).pipe((0,Cn.K)(e=>this.isLoading=e),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.appendItems(e.data),this.updateHasMoreData(e.data.length),this.loaded.emit(e.data.length),this.page++},()=>{this.loaded.emit(0)}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Pn.q),s.Y36(In.y),s.Y36(yt),s.Y36(C.B),s.Y36(On.Kf),s.Y36(Zn.k))},e.\u0275cmp=s.Xpm({type:e,selectors:[["user-group"]],features:[s.qOj],decls:1,vars:1,consts:[[3,"showLoadMore","showLoading","loadMore",4,"ngIf"],[3,"showLoadMore","showLoading","loadMore"],[3,"items"]],template:function(e,t){1&e&&s.YNc(0,Kn,2,3,"admin-search-group",0),2&e&&s.Q6J("ngIf",t.items.length)},directives:[a.O5,En,jn],encapsulation:2}),e})();const Gn=["searchGroup"];function Vn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",4),s.TgZ(1,"form"),s.TgZ(2,"input",5),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().selectedTypeModel=t}),s.qZA(),s.TgZ(3,"label",6),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.TgZ(6,"input",7),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().selectedTypeModel=t}),s.qZA(),s.TgZ(7,"label",8),s._uU(8," User "),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Q6J("ngModel",e.selectedTypeModel)("value",e.SEARCH_TYPES.ALL),s.xp6(2),s.Oqu(s.lcZ(5,5,"search-result.all.title")),s.xp6(2),s.Q6J("ngModel",e.selectedTypeModel)("value",e.SEARCH_TYPES.USER)}}function Xn(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"user-group",9,10),s.NdJ("loaded",function(t){return s.CHM(e),s.oxw().loaded(t)})("loadedMore",function(t){return s.CHM(e),s.oxw().onLoadMore(t)}),s.ALo(2,"async"),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("loadMore",s.lcZ(2,3,e.selectedType$)===e.SEARCH_TYPES.USER)("scrollContainerSelector",e.elementRef)("search",e.searchString)}}let Wn=(()=>{class e extends An.x{constructor(e,t,n){super(t,n),this.elementRef=e,this.searchService=t,this.cdref=n,this.ngUnsubscribe=new u.xQ,this.SEARCH_TYPES=jt.V,this.searchFilterEnabled=!1,this.selectedTypeModel=0,this.selectedType$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.selectedTypeModel=e})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}reset(e=!1){super.reset(e)}ngAfterViewInit(){this.searchFilterEnabled=this.searchGroups.length>1}static getCallObject(e){switch(e.type){case Sn.i.USER:return{name:e.DISPLAY_NAME,number:e.FORMAT_PLAIN||e.EXTENSION_NUMBER};default:return null}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.SBq),s.Y36(Be.o),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-search-results"]],viewQuery:function(e,t){if(1&e&&s.Gf(Gn,5),2&e){let e;s.iGM(e=s.CRH())&&(t.searchGroups=e)}},features:[s.qOj],decls:7,vars:9,consts:[["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["class","type sticky-header",4,"ngIf"],[1,"item"],[3,"loadMore","scrollContainerSelector","search","loaded","loadedMore",4,"ngIf"],[1,"type","sticky-header"],["id","search_type_all","name","type","type","radio",3,"ngModel","value","ngModelChange"],["for","search_type_all"],["id","search_type_extension","name","type","type","radio",3,"ngModel","value","ngModelChange"],["for","search_type_extension"],[3,"loadMore","scrollContainerSelector","search","loaded","loadedMore"],["searchGroup",""]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.ALo(1,"async"),s.YNc(2,Vn,9,7,"div",1),s.TgZ(3,"div",2),s.YNc(4,Xn,3,5,"user-group",3),s.ALo(5,"async"),s.ALo(6,"async"),s.qZA(),s.qZA()),2&e&&(s.Q6J("loadingAreaIndicatorActive",s.lcZ(1,3,t.selectedType$)===t.SEARCH_TYPES.ALL&&0!==t.isLoadingCount),s.xp6(2),s.Q6J("ngIf",t.searchFilterEnabled),s.xp6(2),s.Q6J("ngIf",s.lcZ(5,5,t.selectedType$)===t.SEARCH_TYPES.ALL||s.lcZ(6,7,t.selectedType$)===t.SEARCH_TYPES.USER))},directives:[ze.O,a.O5,Yt._Y,Yt.JL,Yt.F,Yt._,Yt.Fj,Yt.JJ,Yt.On,Hn],pipes:[a.Ov,Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.type[_ngcontent-%COMP%]{padding:1rem 1.6rem}.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:-.1rem;z-index:1}form[_ngcontent-%COMP%]{display:inline-block}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#0003;border:0 solid transparent;border-radius:.5rem;color:#000;cursor:pointer;display:inline-block;font-size:1.6rem;margin:.4rem;padding:.6rem 1.6rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#ff5900;color:#fff}"]}),e})();function ei(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," n/a"),s.qZA())}function ti(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," -"),s.qZA())}function ni(e,t){1&e&&s._UZ(0,"app-svg-icon",19)}function ii(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," n/a"),s.qZA())}function oi(e,t){1&e&&(s.TgZ(0,"span"),s._uU(1," -"),s.qZA())}function ai(e,t){1&e&&s._UZ(0,"app-svg-icon",19)}function si(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list-item",10),s.TgZ(1,"span",11),s._uU(2),s.qZA(),s.TgZ(3,"span",11),s._uU(4),s.qZA(),s.TgZ(5,"span",12),s._uU(6),s.qZA(),s.TgZ(7,"span",12),s.YNc(8,ei,2,0,"span",13),s.YNc(9,ti,2,0,"span",13),s.YNc(10,ni,1,0,"app-svg-icon",14),s.qZA(),s.TgZ(11,"span",12),s.YNc(12,ii,2,0,"span",13),s.YNc(13,oi,2,0,"span",13),s.YNc(14,ai,1,0,"app-svg-icon",14),s.qZA(),s.TgZ(15,"span",15),s.TgZ(16,"button",16),s.NdJ("click",function(){const t=s.CHM(e).$implicit,n=s.oxw().$implicit;return s.oxw().editAccountUser(n,t)}),s._UZ(17,"app-svg-icon",17),s.qZA(),s.TgZ(18,"button",16),s.NdJ("click",function(){const t=s.CHM(e),n=t.$implicit,i=t.index,o=s.oxw().$implicit;return s.oxw().deleteAccountUser(o,n,i)}),s._UZ(19,"app-svg-icon",18),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.xp6(2),s.Oqu(e.username),s.xp6(2),s.Oqu(e.getFullName()),s.xp6(2),s.Oqu(e.extension),s.xp6(2),s.Q6J("ngIf",void 0===e.client),s.xp6(1),s.Q6J("ngIf",!1===e.client),s.xp6(1),s.Q6J("ngIf",!0===e.client),s.xp6(2),s.Q6J("ngIf",void 0===e.admin),s.xp6(1),s.Q6J("ngIf",!1===e.admin),s.xp6(1),s.Q6J("ngIf",!0===e.admin)}}function ri(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"button",20),s.NdJ("click",function(){s.CHM(e);const t=s.oxw().$implicit;return s.oxw().viewAccountUsers(t)}),s._uU(1),s.ALo(2,"translate"),s.qZA()}2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"search-result.load-more")," "))}function ci(e,t){if(1&e&&(s.TgZ(0,"section",4),s.TgZ(1,"h2",5),s.TgZ(2,"span",6),s._uU(3),s.qZA(),s.TgZ(4,"span",7),s._uU(5),s.qZA(),s.qZA(),s.YNc(6,si,20,9,"mat-list-item",8),s.ALo(7,"orderBy"),s.YNc(8,ri,3,3,"button",9),s.qZA()),2&e){const e=t.$implicit,n=s.oxw();s.xp6(3),s.Oqu(e.name),s.xp6(2),s.Oqu(e.externalIdentifier),s.xp6(1),s.Q6J("ngForOf",s.gM2(7,4,e.users,n.order,n.reverse,!0)),s.xp6(2),s.Q6J("ngIf",null==e.users?null:e.users.length)}}let li=(()=>{class e extends Dn{constructor(e,t,n,i,o,a){super(e,t,n,i,o,a),this.router=e,this.snackBarService=t,this.userService=n,this.confirmDialogsService=i,this.translate=o,this.accountService=a,this.headerColumnData=[{name:"username",title:"admin.user.username.label"},{name:"firstname",title:"admin.user.name.label"},{name:"extension",title:"admin.user.extension.label",class:"column__small"},{name:"client",title:"admin.user.client.label",class:"column__small"},{name:"admin",title:"admin.user.admin.label",class:"column__small"}]}viewAccountUsers(e){this.accountService.selectedAccount=e}editAccountUser(e,t){this.accountService.selectedAccount=e,super.editUser(t)}deleteAccountUser(e,t,n){super.deleteUser(t,n,()=>this.accountService.selectedAccount=e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(St.c),s.Y36(yt),s.Y36(Un.U),s.Y36(Z.sK),s.Y36(C.B))},e.\u0275cmp=s.Xpm({type:e,selectors:[["accounts-table"]],features:[s.qOj],decls:4,vars:2,consts:[[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],["class","account",4,"ngFor","ngForOf"],[1,"account"],[1,"account-title"],[1,"account__name"],[1,"account__external-identifier"],["itemHoverbox","",4,"ngFor","ngForOf"],["class","button-more","mat-button","",3,"click",4,"ngIf"],["itemHoverbox",""],[1,"column"],[1,"column","column__small"],[4,"ngIf"],["fill","green-button","icon","done","size","small",4,"ngIf"],[1,"column","item-secondary-content"],["mat-icon-button","","type","button",3,"click"],["icon","edit","size","small"],["icon","delete","size","small"],["fill","green-button","icon","done","size","small"],["mat-button","",1,"button-more",3,"click"]],template:function(e,t){1&e&&(s.TgZ(0,"mat-list",0),s.TgZ(1,"mat-list-item",1),s.TgZ(2,"sortable-list-header",2),s.NdJ("orderChange",function(e){return t.changeOrder(e)}),s.qZA(),s.qZA(),s.YNc(3,ci,9,9,"section",3),s.qZA()),2&e&&(s.xp6(2),s.Q6J("data",t.headerColumnData),s.xp6(1),s.Q6J("ngForOf",t.items))},directives:[Re.i$,Re.Tg,Bn.c,a.sg,a.O5,qn.h,c.lW,qe.u],pipes:[b.T,Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;border-top:.1rem solid rgba(0,0,0,.3);font-size:1.5rem;margin:-.1rem 0 0;padding:3rem 2.6rem 1rem}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__name[_ngcontent-%COMP%], .account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__external-identifier[_ngcontent-%COMP%]{color:#333}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__external-identifier[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}.account[_ngcontent-%COMP%]   .button-more[_ngcontent-%COMP%]{margin:.8rem 1.6rem;text-transform:uppercase}"]}),e})();function di(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"span"),s.TgZ(1,"button",5),s.NdJ("click",function(){return s.CHM(e),s.oxw().addNewUser()}),s._UZ(2,"app-svg-icon",6),s.qZA(),s.qZA()}}function ui(e,t){if(1&e&&s._UZ(0,"admin-search-results",7),2&e){const e=s.oxw();s.Q6J("searchString",e.filters.string)("selectedType",e.searchType)}}function mi(e,t){if(1&e&&s._UZ(0,"accounts-table",10),2&e){const e=s.oxw(2);s.Q6J("items",e.accountItems)}}function pi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"users-table",11),s.NdJ("sortOrderChange",function(t){return s.CHM(e),s.oxw(2).onSortOrderChange(t)}),s.qZA()}if(2&e){const e=s.oxw(2);s.Q6J("items",e.userItems)}}function hi(e,t){if(1&e&&(s.TgZ(0,"div"),s.YNc(1,mi,1,1,"accounts-table",8),s.YNc(2,pi,1,1,"users-table",9),s.qZA()),2&e){const e=s.oxw();s.xp6(1),s.Q6J("ngIf",!e.selectedAccount),s.xp6(1),s.Q6J("ngIf",e.selectedAccount)}}let gi=(()=>{class e{constructor(e,t,n,i,o,a,s,r){this.router=e,this.accountService=t,this.adminService=n,this.adminUserService=i,this.phoneExtensionService=o,this.snackBarService=a,this.dialog=s,this.searchService=r,this.pageSize=25,this.sortColumn="username",this.usersPerAccount=5,this.ngUnsubscribe=new u.xQ,this.debounceTime=300,this.accountItems=[],this.filters={string:""},this.hasMoreData=!1,this.isLoadingAccounts=!1,this.isLoadingUsers=!1,this.isLoadingValue=!1,this.isLoadMore=!0,this.isSaving=!1,this.isSearching=!1,this.order="username",this.page=1,this.pageInitValue=1,this.reverse=!1,this.search="",this.searchType=jt.V.USER,this.selectedAccount=null,this.userItems=[]}ngOnInit(){this.listenforSearchChanges(),this.reset(),this.accountService.selectedAccount$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.page=this.pageInitValue,this.selectedAccount=e,e?this.loadUser():this.loadAccounts()})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadUser(){!this.selectedAccount||this.isLoadingUsers||this.isSearching||this.adminUserService.getUsers(`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`,this.filters.string,this.page,this.pageSize,this.sortColumn).pipe((0,Cn.K)(e=>this.isLoadingUsers=e),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.appendItems(e.data),this.hasMoreData=e.paginationHasMoreData,this.page++},e=>this.handleLoadingError(e))}loadAccounts(){this.selectedAccount||(this.isLoadingAccounts=!0,this.accountService.getAllAccounts(this.filters.string,this.page,this.pageSize).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{const t=e.data;this.page++,this.isLoadingAccounts=!1,this.hasMoreData=e.paginationHasMoreData,null==t||t.forEach((e,n)=>{const i=`${e.accountType}:${e.accountId}`;this.isLoadingAccounts=!0,this.adminUserService.getUsers(i,"",this.pageInitValue,this.usersPerAccount).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{t[n].users=e.data,this.isLoadingAccounts=!1},e=>this.handleLoadingError(e))}),t&&(this.accountItems=[...this.accountItems,...t])},e=>this.handleLoadingError(e)))}searchUser(e){this.filters.string=e,this.isSearching=!!e}addNewUser(){this.dialog.open(kn,{maxHeight:"100vh",width:"35rem",data:{account:this.selectedAccount}}).afterClosed().pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e&&this.onSaveUser(e)})}onSaveUser(e){this.selectedAccount&&(this.permissions={},e.admin&&(this.permissions.admin_login=!0),e.client&&(this.permissions.client_login=!0),this.userExtension=e.extension,this.adminUserService.createUser(`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`,e).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.handleSuccess(e)},e=>{this.handleError(e)}))}onLazyLoading(){this.selectedAccount?this.loadUser():this.loadAccounts()}onSortOrderChange(e){this.sortColumn=e,this.page=this.pageInitValue,this.loadUser()}listenforSearchChanges(){this.searchService.searchItem$.pipe((0,Fe.b)(this.debounceTime),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.searchUser(e.searchString||""),this.clearPageSettings(),this.selectedAccount?this.loadUser():this.loadAccounts()})}clearPageSettings(){this.page=1,this.userItems=[]}appendItems(e){!e||(this.isLoadMore&&this.page===this.pageInitValue?this.userItems=e:Array.prototype.push.apply(this.userItems,e))}handleSuccess(e){var t;if(!this.selectedAccount)return;const n=`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`;(this.permissions.admin_login||this.permissions.client_login)&&this.adminUserService.editPermissions(n,null==e?void 0:e.id,this.permissions).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(),this.userExtension&&this.phoneExtensionService.addLinkedPhoneExtensions(n,e.id,null===(t=this.userExtension)||void 0===t?void 0:t.id).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(),this.isSaving=!1,this.snackBarService.openInfo("admin.user.created",!0),this.router.navigate([`/admin/user/${e.id}`])}handleError(e){this.isSaving=!1,this.adminUserService.handleUserCreationError(e)}reset(){this.page=this.pageInitValue,this.adminService.emit(null)}handleLoadingError(e){this.isLoading=!1,this.snackBarService.openInfo(e.message)}get isLoading(){return this.isLoadingUsers||this.isLoadingAccounts}set isLoading(e){this.isLoadingValue=e}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(C.B),s.Y36(D.l),s.Y36(yt),s.Y36(Et),s.Y36(St.c),s.Y36(o.uw),s.Y36(Be.o))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-user-list"]],decls:6,vars:8,consts:[[1,"admin-user-list"],["translationKey","admin.user.label",1,"admin-user-list__header",3,"sticky"],[4,"ngIf"],["infinite-scroll","","loading-area-indicator","","data-e2e","admin-user-page",3,"infiniteScrollDisabled","infiniteScrollThrottle","loadingAreaIndicatorActive","scrollWindow","scrolled"],["class","left contacts-list-container",3,"searchString","selectedType",4,"ngIf"],["mat-icon-button","","type","button","data-e2e","admin-user-page__add--button",3,"click"],["icon","add","size","small"],[1,"left","contacts-list-container",3,"searchString","selectedType"],[3,"items",4,"ngIf"],["e2e","admin-user-page",3,"items","sortOrderChange",4,"ngIf"],[3,"items"],["e2e","admin-user-page",3,"items","sortOrderChange"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"headline",1),s.YNc(2,di,3,0,"span",2),s.qZA(),s.TgZ(3,"div",3),s.NdJ("scrolled",function(){return t.onLazyLoading()}),s.YNc(4,ui,1,2,"admin-search-results",4),s.YNc(5,hi,3,2,"div",2),s.qZA(),s.qZA()),2&e&&(s.xp6(1),s.Q6J("sticky",!0),s.xp6(1),s.Q6J("ngIf",t.selectedAccount),s.xp6(1),s.Q6J("infiniteScrollDisabled",!t.isLoadMore||!t.hasMoreData||t.isLoading||t.isSearching)("infiniteScrollThrottle",50)("loadingAreaIndicatorActive",t.isLoading&&!t.isSearching)("scrollWindow",!1),s.xp6(1),s.Q6J("ngIf",t.isSearching),s.xp6(1),s.Q6J("ngIf",!t.isSearching))},directives:[Tn.a,a.O5,i.R,ze.O,c.lW,qe.u,Wn,li,jn],styles:[".admin-user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;margin:0!important;position:relative}.admin-user-list[_ngcontent-%COMP%]   .admin-user-list__header[_ngcontent-%COMP%]{box-sizing:content-box;position:absolute;width:100%}"]}),e})();var fi=n(32789),bi=n(43190),_i=n(22887),xi=n(78023);function vi(e,t){if(1&e&&(s.TgZ(0,"td",13),s.TgZ(1,"span",14),s._uU(2),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",e.username," ")}}function ki(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"td",15),s.TgZ(1,"app-button",16),s.NdJ("appButtonClick",function(){const t=s.CHM(e).$implicit;return s.oxw().onRevoke(t)}),s.qZA(),s.qZA()}}function Ci(e,t){1&e&&s._UZ(0,"tr",17)}function Ti(e,t){1&e&&s._UZ(0,"app-spinner",18)}function Ai(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"app-button",19),s.NdJ("appButtonClick",function(){return s.CHM(e),s.oxw().closeDialog()}),s.qZA()}}let Si=(()=>{class e{constructor(e,t,n,i,o,a,s,r){this.accountService=e,this.apiAdminService=t,this.dialog=n,this.dialogRef=i,this.snackBarService=o,this.translateService=a,this.whiteLabelService=s,this.ngUnsubscribe=new u.xQ,this.licenseUsers=[],this.displayedColumns=["username","action"],this.licenseBaseUrl="",this.isLoading=!1,this.productCodeTranslationKeyParams={meetingPerUserWhiteLabelName:this.whiteLabelService.data.meetingPerUser},this.license=r}ngOnInit(){this.accountService.selectedAccount$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e&&this.init(e)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}init(e){this.isLoading=!0,this.licenseBaseUrl=`${Ct.N.API_URL}/admin/accounts/${e.accountType}:${e.accountId}`,this.apiAdminService.get(`${this.licenseBaseUrl}/products/${this.license.product_code}?userInfo=1`).pipe((0,Ht.x)(()=>{this.isLoading=!1}),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{(null==e?void 0:e.users)&&(this.licenseUsers=e.users)})}getTableData(){return new fi.by(this.licenseUsers)}onRevoke(e){this.initConfirmationDialog(e).afterClosed().pipe((0,T.R)(this.ngUnsubscribe)).subscribe(t=>{t&&this.revokeLicense(e)})}initConfirmationDialog(e){const t=this.dialog.open(_i.$,{autoFocus:!1});return t.componentInstance.ok="admin.license.dialog.confirm",t.componentInstance.cancel="admin.license.dialog.cancel",this.translateService.get("admin.license.dialog.revoke").pipe((0,T.R)(this.ngUnsubscribe)).subscribe(n=>{t.componentInstance.message=`${n} ${e.username}?`}),t}revokeLicense(e){this.isLoading=!0,this.apiAdminService.delete(`${this.licenseBaseUrl}/users/${e.id}/licences/${this.license.product_code}`).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(t=>{this.isLoading=!1,this.updateTableData(e),t&&"ok"===t.status&&(this.updateTableData(e),this.snackBarService.openInfo("admin.license.dialog.success"))},()=>{this.isLoading=!1,this.snackBarService.openErrorInfo("admin.license.dialog.error")})}updateTableData(e){this.removeUserFromTableData(e),this.updateUsedLicenses()}removeUserFromTableData(e){const t=this.licenseUsers.findIndex(t=>t===e);this.licenseUsers.splice(t,1)}updateUsedLicenses(){this.license.used=this.licenseUsers.length}closeDialog(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B),s.Y36(It.i),s.Y36(o.uw),s.Y36(o.so),s.Y36(St.c),s.Y36(Z.sK),s.Y36(Q.D),s.Y36(o.WI))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-license-dialog"]],decls:19,vars:18,consts:[["data-e2e","license-dialog-modal-fragment__title",1,"license-dialog__headline",3,"translationKey","productCodeTranslationKeyParams"],["data-e2e","license-dialog-modal-fragment__total-licenses",1,"headline__license-info"],["data-e2e","license-dialog-modal-fragment__used-licenses",1,"headline__license-info"],["data-e2e","license-dialog-modal-fragment__free-licenses",1,"headline__license-info"],[1,"license-dialog__users"],["mat-table","",3,"dataSource"],["matColumnDef","username"],["class","ellipsis","mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","license-dialog__spinner",4,"ngIf"],["class","license-dialog__close-btn","type","raised-button","buttonTextTranslationKey","Done","color","primary","data-e2e","license-dialog-modal-fragment__done--button",3,"appButtonClick",4,"ngIf"],["mat-cell","",1,"ellipsis"],["data-e2e","license-dialog-modal-fragment__user"],["mat-cell",""],["buttonTextTranslationKey","admin.license.users.revoke","type","stroked-button","data-e2e","license-dialog-modal-fragment__revoke--button",3,"appButtonClick"],["mat-row",""],[1,"license-dialog__spinner"],["type","raised-button","buttonTextTranslationKey","Done","color","primary","data-e2e","license-dialog-modal-fragment__done--button",1,"license-dialog__close-btn",3,"appButtonClick"]],template:function(e,t){1&e&&(s.TgZ(0,"headline",0),s.TgZ(1,"span",1),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"span",2),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.TgZ(7,"span",3),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.qZA(),s.TgZ(10,"div",4),s.TgZ(11,"table",5),s.ynx(12,6),s.YNc(13,vi,3,1,"td",7),s.BQk(),s.ynx(14,8),s.YNc(15,ki,2,0,"td",9),s.BQk(),s.YNc(16,Ci,1,0,"tr",10),s.qZA(),s.YNc(17,Ti,1,0,"app-spinner",11),s.qZA(),s.YNc(18,Ai,1,0,"app-button",12)),2&e&&(s.Q6J("translationKey",t.license.product_code)("productCodeTranslationKeyParams",t.productCodeTranslationKeyParams),s.xp6(2),s.AsE(" ",s.lcZ(3,12,"admin.license.list.total"),": ",t.license.booked," "),s.xp6(3),s.AsE(" ",s.lcZ(6,14,"admin.license.list.used"),": ",t.license.used," "),s.xp6(3),s.AsE(" ",s.lcZ(9,16,"admin.license.users.free"),": ",t.license.booked-t.license.used," "),s.xp6(3),s.Q6J("dataSource",t.getTableData()),s.xp6(5),s.Q6J("matRowDefColumns",t.displayedColumns),s.xp6(1),s.Q6J("ngIf",t.isLoading),s.xp6(1),s.Q6J("ngIf",!t.isLoading))},directives:[Tn.a,fi.BZ,fi.w1,fi.Dz,fi.nj,a.O5,fi.ev,xi.V,fi.Gk,nn.S],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;max-height:calc(100vh - 4.8rem)}.license-dialog__headline[_ngcontent-%COMP%]{background:#e5e5e5;font-weight:bold;height:inherit;padding:1.2rem 1rem;text-transform:capitalize}.headline__license-info[_ngcontent-%COMP%]:nth-child(n+2){border-right:.2rem solid #989898;color:#989898;padding:0 .8rem}.headline__license-info[_ngcontent-%COMP%]:last-child{border:0}.license-dialog__users[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:scroll}.license-dialog__spinner[_ngcontent-%COMP%]{margin:2rem 0}.mat-table[_ngcontent-%COMP%]{border-top:.1rem solid #ededed;width:100%}.mat-row[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid #ededed;display:flex;flex-wrap:wrap;justify-content:space-between}.mat-cell[_ngcontent-%COMP%]{border:0}.mat-cell[_ngcontent-%COMP%]:last-child{padding-right:.5rem;text-align:right}.mat-column-name[_ngcontent-%COMP%]{flex:1}.license-dialog__close-btn[_ngcontent-%COMP%]{align-self:flex-end;margin:1rem 1rem 0 0}"]}),e})();var yi=n(86363);function Pi(e,t){1&e&&(s.TgZ(0,"th",12),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.license.list.product")," "))}function Ii(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"td",13),s.TgZ(1,"span",14),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw().openLicenseDialog(t)}),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,n=s.oxw();s.xp6(2),s.hij(" ",s.xi3(3,1,e.product_code,n.productCodeTranslationKeyParams)," ")}}function Oi(e,t){1&e&&(s.TgZ(0,"th",12),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.license.list.total")," "))}function Zi(e,t){if(1&e&&(s.TgZ(0,"td",13),s.TgZ(1,"span",15),s._uU(2),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",e.booked," ")}}function Mi(e,t){1&e&&(s.TgZ(0,"th",12),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.license.list.used")," "))}function wi(e,t){if(1&e&&(s.TgZ(0,"td",13),s.TgZ(1,"span",16),s._uU(2),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",e.used," ")}}function Ni(e,t){1&e&&(s.TgZ(0,"th",12),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.license.list.available")," "))}function Ei(e,t){if(1&e&&(s.TgZ(0,"td",13),s.TgZ(1,"span",17),s._uU(2),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",(null==e?null:e.booked)-(null==e?null:e.used)," ")}}function Li(e,t){1&e&&s._UZ(0,"tr",18)}function Ui(e,t){1&e&&s._UZ(0,"tr",19)}function Di(e,t){1&e&&s._UZ(0,"app-spinner",20)}function Bi(e,t){1&e&&(s.TgZ(0,"p",22),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.license.none_booked")," "))}function qi(e,t){if(1&e&&s.YNc(0,Bi,3,3,"p",21),2&e){const e=s.oxw();s.Q6J("ngIf",!(null!=e.licenseTableData&&null!=e.licenseTableData.data&&e.licenseTableData.data.length))}}let Ri=(()=>{class e{constructor(e,t,n,i){this.accountService=e,this.dialog=t,this.licenseService=n,this.whiteLabelService=i,this.ngUnsubscribe=new u.xQ,this.displayedColumns=["name","total","used","available"],this.isLoading=!1,this.productCodeTranslationKeyParams={meetingPerUserWhiteLabelName:this.whiteLabelService.data.meetingPerUser}}ngOnInit(){this.initTableData()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}openLicenseDialog(e){this.dialog.open(Si,{data:e,width:"75rem"})}initTableData(){this.accountService.selectedAccount$.pipe((0,Qt.b)(()=>{this.isLoading=!0}),(0,bi.w)(e=>(0,yi.s)(()=>!!e,this.licenseService.getLicenses(e))),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{const t=this.getAvailableLicenses(e);this.licenseTableData=new fi.by(t),this.isLoading=!1})}getAvailableLicenses(e){return e.filter(e=>0!==e.booked)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B),s.Y36(o.uw),s.Y36(Pt),s.Y36(Q.D))},e.\u0275cmp=s.Xpm({type:e,selectors:[["license"]],decls:20,vars:6,consts:[["translationKey","admin.license.title","data-e2e","admin-license-page",1,"license__headline"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","used"],["matColumnDef","available"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","license__spinner",4,"ngIf","ngIfElse"],["noBookedLicenses",""],["mat-header-cell",""],["mat-cell",""],["data-e2e","admin-license-page__name",3,"click"],["data-e2e","admin-license-page__total-licenses"],["data-e2e","admin-license-page__used-licenses"],["data-e2e","admin-license-page__available-licenses"],["mat-header-row",""],["mat-row",""],[1,"license__spinner"],["class","license__info",4,"ngIf"],[1,"license__info"]],template:function(e,t){if(1&e&&(s._UZ(0,"headline",0),s.TgZ(1,"table",1),s.ynx(2,2),s.YNc(3,Pi,3,3,"th",3),s.YNc(4,Ii,4,4,"td",4),s.BQk(),s.ynx(5,5),s.YNc(6,Oi,3,3,"th",3),s.YNc(7,Zi,3,1,"td",4),s.BQk(),s.ynx(8,6),s._uU(9,"> "),s.YNc(10,Mi,3,3,"th",3),s.YNc(11,wi,3,1,"td",4),s.BQk(),s.ynx(12,7),s.YNc(13,Ni,3,3,"th",3),s.YNc(14,Ei,3,1,"td",4),s.BQk(),s.YNc(15,Li,1,0,"tr",8),s.YNc(16,Ui,1,0,"tr",9),s.qZA(),s.YNc(17,Di,1,0,"app-spinner",10),s.YNc(18,qi,1,1,"ng-template",null,11,s.W1O)),2&e){const e=s.MAs(19);s.xp6(1),s.Q6J("dataSource",t.licenseTableData),s.xp6(14),s.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),s.xp6(1),s.Q6J("matRowDefColumns",t.displayedColumns),s.xp6(1),s.Q6J("ngIf",t.isLoading)("ngIfElse",e)}},directives:[Tn.a,fi.BZ,fi.w1,fi.fO,fi.Dz,fi.as,fi.nj,a.O5,fi.ge,fi.ev,fi.XQ,fi.Gk,nn.S],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column!important;font-size:1.8rem;margin-top:1.2rem;overflow-y:auto}.license__headline[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:101}.mat-table[_ngcontent-%COMP%]{text-transform:capitalize}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{color:#b5b5b5;width:15%}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-child{width:55%}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{text-align:right}.mat-cell[_ngcontent-%COMP%]:first-child, .mat-header-cell[_ngcontent-%COMP%]:first-child{text-align:left}.mat-column-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:-.1rem;z-index:1}.license__spinner[_ngcontent-%COMP%]{margin-top:4rem}.license__info[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:2.4rem;justify-content:center;margin-top:4rem;width:100%}"]}),e})();var $i=n(9112);function Fi(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"common_errors.username.email")," "))}function Yi(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function Ji(e,t){1&e&&(s.TgZ(0,"mat-hint",21),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function Qi(e,t){if(1&e&&(s.TgZ(0,"mat-option",22),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",s.lcZ(2,2,e.title)," ")}}function zi(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list-item",5),s.TgZ(1,"mat-form-field",6),s._UZ(2,"input",7),s.qZA(),s.TgZ(3,"mat-form-field",8),s._UZ(4,"input",9),s.YNc(5,Fi,3,3,"mat-hint",10),s.qZA(),s.TgZ(6,"mat-form-field",8),s._UZ(7,"input",11),s.YNc(8,Yi,3,3,"mat-hint",10),s.qZA(),s.TgZ(9,"mat-form-field",8),s._UZ(10,"input",12),s.YNc(11,Ji,3,3,"mat-hint",10),s.qZA(),s.TgZ(12,"mat-form-field",8),s.TgZ(13,"mat-select",13),s.YNc(14,Qi,3,4,"mat-option",14),s.qZA(),s.qZA(),s.TgZ(15,"div",15),s.TgZ(16,"mat-checkbox",16),s.NdJ("change",function(){const t=s.CHM(e).$implicit;return s.oxw().onCheckboxChange(t)}),s.qZA(),s.qZA(),s.TgZ(17,"div",15),s.TgZ(18,"mat-checkbox",17),s.NdJ("change",function(){const t=s.CHM(e).$implicit;return s.oxw().onCheckboxChange(t)}),s.qZA(),s.qZA(),s.TgZ(19,"div",18),s.TgZ(20,"button",19),s.NdJ("click",function(){const t=s.CHM(e),n=t.$implicit,i=t.index;return s.oxw().createExtension(n,i)}),s._UZ(21,"app-svg-icon",20),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,n=t.index,i=s.oxw();s.Q6J("formGroupName",n),s.xp6(5),s.Q6J("ngIf",i.hasErrorEmail(e.get("username"))),s.xp6(3),s.Q6J("ngIf",i.hasErrorRequired(e.get("lastname"))),s.xp6(3),s.Q6J("ngIf",i.hasErrorRequired(e.get("firstname"))),s.xp6(3),s.Q6J("ngForOf",i.interfaceLanguages),s.xp6(6),s.Q6J("disabled",!e.valid)}}let ji=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.migrationService=t,this.languageService=n,this.changeDetectorRef=i,this.ngUnsubscribe=new u.xQ,this.unallocatedExtensions=[],this.create=new s.vpe,this.sortOrderChange=new s.vpe,this.order="extension",this.reverse=!1,this.headerColumnData=[{name:"extension_number",title:"admin.extensions_form.extension.label",class:"column--extension",e2e:"admin-wizards-migration-wizard-page__extension-header"},{name:"email",title:"admin.extensions_form.username.label",class:"column--form",e2e:"admin-wizards-migration-wizard-page__username-header"},{name:"display_name",title:"admin.extensions_form.lastname.label",class:"column--form",e2e:"admin-wizards-migration-wizard-page__last-name-header"},{name:"firstname",title:"admin.extensions_form.firstname.label",class:"column--form",disabled:!0},{name:"language",title:"admin.extensions_form.language.label",disabled:!0},{name:"client",title:"admin.extensions_form.client.label",class:"column--checkbox",disabled:!0},{name:"admin",title:"admin.extensions_form.admin.label",class:"column--checkbox",disabled:!0},{name:"",title:"",class:"column--button",disabled:!0}],this.interfaceLanguages=this.languageService.getAvailableLanguages()}ngOnChanges(){this.rebuildForm()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}rebuildForm(){this.extensionsForm=this.fb.group({extensions:this.fb.array([])}),this.setExtensions(this.unallocatedExtensions)}setExtensions(e){if(null===e)return;const t=e.map(e=>this.extensionFormGroup(e)),n=this.fb.array(t);this.extensionsForm.setControl("extensions",n)}createExtension(e,t){this.create.emit(e.value),this.subscription=this.migrationService.createUser$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e&&(this.extensions.removeAt(t),this.changeDetectorRef.detectChanges()),this.subscription.unsubscribe()})}changeOrder(e){this.order=e.order,this.reverse=e.reverse,this.sortOrderChange.emit((this.reverse?"-":"")+this.order)}trackByExtension(e,t){return t.get("extension").value}hasErrorRequired(e){return!1}hasErrorEmail(e){return!1}onCheckboxChange(e){const t=e.get("client"),n=t.value,i=e.get("admin").value;t.setValidators(n||i?null:[Yt.kI.requiredTrue]),t.updateValueAndValidity()}extensionFormGroup(e){return this.fb.group({extension:[{value:e.extension,disabled:!0},[Yt.kI.required]],username:[e.username,[Yt.kI.required,Yt.kI.email]],lastname:[e.lastname,[Yt.kI.required]],firstname:[e.firstname,[Yt.kI.required]],language:[e.language,[Yt.kI.required]],id:[e.id,[Yt.kI.required]],client:!0,admin:[e.admin]})}get extensions(){return this.extensionsForm.get("extensions")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Yt.qu),s.Y36(wt),s.Y36(Vt.T),s.Y36(s.sBO))},e.\u0275cmp=s.Xpm({type:e,selectors:[["extensions-form"]],inputs:{unallocatedExtensions:"unallocatedExtensions"},outputs:{create:"create",sortOrderChange:"sortOrderChange"},features:[s.TTD],decls:6,vars:4,consts:[[1,"list-header","sticky-header"],[3,"data","orderChange"],[3,"formGroup"],["formArrayName","extensions"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],[1,"column","column--extension"],["formControlName","extension","matInput","","type","text","data-e2e","admin-wizards-migration-wizard-page__extension-entry--input"],[1,"column"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__first-name-entry--input"],["class","mat-hint--error",4,"ngIf"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__username-entry--input"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__last-name-entry--input"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-wizards-migration-wizard-page__language-entry-selector"],["data-e2e","admin-wizards-migration-wizard-page__language-entry-selector-option",3,"value",4,"ngFor","ngForOf"],[1,"column","column--checkbox"],["color","primary","formControlName","client","data-e2e","admin-wizards-migration-wizard-page__app-permission-entry-checkbox",3,"change"],["color","primary","formControlName","admin","data-e2e","admin-wizards-migration-wizard-page__admin-permission-entry-checkbox",3,"change"],[1,"column","column--button"],["color","primary","mat-raised-button","","data-e2e","admin-wizards-migration-wizard-page__add-entry--button",1,"create-extension",3,"disabled","click"],["fill","white","icon","contact_add","size","small"],[1,"mat-hint--error"],["data-e2e","admin-wizards-migration-wizard-page__language-entry-selector-option",3,"value"]],template:function(e,t){1&e&&(s.TgZ(0,"mat-list"),s.TgZ(1,"mat-list-item",0),s.TgZ(2,"sortable-list-header",1),s.NdJ("orderChange",function(e){return t.changeOrder(e)}),s.qZA(),s.qZA(),s.TgZ(3,"form",2),s.TgZ(4,"div",3),s.YNc(5,zi,22,6,"mat-list-item",4),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("data",t.headerColumnData),s.xp6(1),s.Q6J("formGroup",t.extensionsForm),s.xp6(2),s.Q6J("ngForOf",t.extensions.controls)("ngForTrackBy",t.trackByExtension))},directives:[Re.i$,Re.Tg,Bn.c,Yt._Y,Yt.JL,Yt.sg,Yt.CE,a.sg,Yt.x0,m.KE,Yt.Fj,Qe.Nt,Yt.JJ,Yt.u,Yt.nD,a.O5,l.gD,on.oG,c.lW,qe.u,m.bx,r.ey],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]     .mat-form-field-infix{width:auto}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}mat-list[_ngcontent-%COMP%]{padding:0}.mat-list-item-content[_ngcontent-%COMP%]{flex:1}.column[_ngcontent-%COMP%]{flex:1 0 10rem;padding:0 1rem}.column--extension[_ngcontent-%COMP%]{flex:0 0 10rem;margin:0 1rem 0 0;padding-left:0}.column--checkbox[_ngcontent-%COMP%]{flex:0 0 7rem;text-align:center}@media screen and (min-width: 1024px){.column--checkbox[_ngcontent-%COMP%]{margin:0 1rem}}.column--button[_ngcontent-%COMP%]{flex:0 0 6rem}@media screen and (min-width: 1024px){.column--button[_ngcontent-%COMP%]{margin:0 0 0 1rem}}.create-extension[_ngcontent-%COMP%]{height:3.8rem;min-width:auto}"],changeDetection:0}),e})(),Ki=(()=>{class e{constructor(e,t,n,i,o,a,s){this.adminUserService=e,this.migrationService=t,this.accountService=n,this.snackBarService=i,this.phoneExtensionService=o,this.userService=a,this.translateService=s,this.ngUnsubscribe=new u.xQ,this.page=1,this.pageInitValue=1,this.pageSize=25,this.sortColumn="extension_number",this.extensions=[],this.isLoading=!1,this.hasMoreData=!0,this.selectedAccount=null}ngOnInit(){this.selectedAccount=this.accountService.selectedAccount,(0,$i.aj)([this.userService.userInfo$,this.accountService.selectedAccount$]).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(([e,t])=>{this.extensions=[],this.page=this.pageInitValue,this.selectedAccount=t,e&&e.user.language&&(wt.defaultUserLanguage=e.user.language),t&&this.getExtensions(t)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getExtensions(e){e||(e=this.accountService.selectedAccount),e&&!this.isLoading&&(this.page===this.pageInitValue&&(this.extensions=[]),this.isLoading=!0,this.migrationService.unallocatedExtensions(e,this.page,this.pageSize,"",this.sortColumn).pipe((0,Ht.x)(()=>this.isLoading=!1),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.extensions=[...this.extensions,...e.data],this.hasMoreData=e.paginationHasMoreData,this.page++},e=>{const t=e.status;if(200!==t){const e=504===t?this.translateService.instant("migration_wizard.server_is_not_responding"):this.translateService.instant("migration_wizard.activity_was_not_successful",{status:t});this.snackBarService.openInfo(e)}}))}onLazyLoading(){this.getExtensions(this.selectedAccount)}onSortOrderChange(e){this.sortColumn=e,this.page=this.pageInitValue,this.getExtensions(this.selectedAccount)}createExtension(e){this.selectedAccount?(this.permissions={},e.admin&&(this.permissions.admin_login=!0),e.client&&(this.permissions.client_login=!0),this.userExtensionId=null==e?void 0:e.id,this.adminUserService.createUser(`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`,e).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.snackBarService.open("admin.user.saving"),this.handleSuccess(e)},e=>{this.handleError(e)})):this.handleError()}handleSuccess(e){if(!this.selectedAccount)return;const t=`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`;this.adminUserService.editPermissions(t,e.id,this.permissions).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(),this.phoneExtensionService.addLinkedPhoneExtensions(t,e.id,this.userExtensionId).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(),this.snackBarService.openInfo("admin.user.created"),this.migrationService.updateCreateUserSource(!0),this.extensions=this.extensions.filter(e=>e.id!==this.userExtensionId)}handleError(e){this.adminUserService.handleUserCreationError(e),this.migrationService.updateCreateUserSource(!1)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(yt),s.Y36(wt),s.Y36(C.B),s.Y36(St.c),s.Y36(Et),s.Y36(J.K),s.Y36(Z.sK))},e.\u0275cmp=s.Xpm({type:e,selectors:[["migration-wizard"]],decls:2,vars:5,consts:[["infinite-scroll","","loading-area-indicator","","data-e2e","admin-wizards-migration-wizard-page",1,"migration-wizard-component",3,"infiniteScrollDisabled","loadingAreaIndicatorActive","scrollWindow","infiniteScrollThrottle","scrolled"],[3,"unallocatedExtensions","create","sortOrderChange"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.NdJ("scrolled",function(){return t.onLazyLoading()}),s.TgZ(1,"extensions-form",1),s.NdJ("create",function(e){return t.createExtension(e)})("sortOrderChange",function(e){return t.onSortOrderChange(e)}),s.qZA(),s.qZA()),2&e&&(s.Q6J("infiniteScrollDisabled",!t.hasMoreData||t.isLoading)("loadingAreaIndicatorActive",t.isLoading)("scrollWindow",!1)("infiniteScrollThrottle",50),s.xp6(1),s.Q6J("unallocatedExtensions",t.extensions))},directives:[i.R,ze.O,ji],styles:[".migration-wizard-component[_ngcontent-%COMP%]{margin:0!important;overflow-y:auto;width:100%}@media screen and (max-width: 1023px){.migration-wizard-component[_ngcontent-%COMP%]{width:100vw}}"]}),e})();var Hi=n(87636),Gi=n(35758);let Vi=(()=>{class e{constructor(e){this.dialogRef=e}cancel(){this.dialogRef.close(!1)}accept(){this.dialogRef.close(!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(o.so))},e.\u0275cmp=s.Xpm({type:e,selectors:[["permissions-change-dialog"]],decls:5,vars:4,consts:[[3,"btnSaveCaption","cancelClick","saveClick"]],template:function(e,t){1&e&&(s.TgZ(0,"section"),s.TgZ(1,"p"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA(),s.TgZ(4,"footer-actions",0),s.NdJ("cancelClick",function(){return t.cancel()})("saveClick",function(){return t.accept()}),s.qZA()),2&e&&(s.xp6(2),s.Oqu(s.lcZ(3,2,"permissions_change_dialog.message")),s.xp6(2),s.Q6J("btnSaveCaption","done"))},directives:[Dt.c],pipes:[Z.X$],styles:[""]}),e})();var Xi=(()=>{return(e=Xi||(Xi={})).CrmConnect="crmConnect",e.CrmConnectUnite="crmConnect.unite",e.MeetingPerUser="meetingPerUser",e.Mobility="mobility",Xi;var e})(),Wi=n(59594),eo=n(4929),to=n(75319),no=n(59193),io=n(55197),oo=n(75604);class ao{constructor(e,t,n){this.project=e,this.concurrent=t,this.scheduler=n}call(e,t){return t.subscribe(new so(e,this.project,this.concurrent,this.scheduler))}}class so extends io.L{constructor(e,t,n,i){super(e),this.project=t,this.concurrent=n,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,n<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(e){const{subscriber:t,result:n,value:i,index:o}=e;t.subscribeToProjection(n,i,o)}_next(e){const t=this.destination;if(t.closed)return void this._complete();const n=this.index++;if(this.active<this.concurrent){t.next(e);try{const{project:t}=this,i=t(e,n);this.scheduler?this.destination.add(this.scheduler.schedule(so.dispatch,0,{subscriber:this,result:i,value:e,index:n})):this.subscribeToProjection(i,e,n)}catch(i){t.error(i)}}else this.buffer.push(e)}subscribeToProjection(e,t,n){this.active++,this.destination.add((0,oo.D)(this,e,t,n))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(e,t,n,i,o){this._next(t)}notifyComplete(e){const t=this.buffer;this.destination.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}var ro=n(42145),co=n(548),lo=n(95242),uo=n(34022);function mo(e,t){if(1&e&&(s.TgZ(0,"span",7),s._uU(1),s.qZA()),2&e){const e=t.ngIf;s.xp6(1),s.Oqu(e)}}function po(e,t){1&e&&(s.TgZ(0,"span",3),s._uU(1,"\u203a "),s.qZA())}function ho(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",1),s.NdJ("click",function(){const t=s.CHM(e).$implicit;return s.oxw().onBreadcrumbClick(t)}),s.TgZ(1,"span",2),s._uU(2),s.qZA(),s.YNc(3,mo,2,1,"span",5),s.YNc(4,po,2,0,"span",6),s.qZA()}if(2&e){const e=t.$implicit,n=t.last;s.xp6(2),s.Oqu(e.name),s.xp6(1),s.Q6J("ngIf",e.externalIdentifier),s.xp6(1),s.Q6J("ngIf",!n)}}let go=(()=>{class e{constructor(e){this.accountService=e,this.changeParent=new s.vpe}ngOnChanges(e){const t=e.account.currentValue;this.breadcrumbs$=this.accountService.getParentAccount(`${t.accountType}:${t.accountId}`).pipe(function(e,t=Number.POSITIVE_INFINITY,n){return t=(t||0)<1?Number.POSITIVE_INFINITY:t,i=>i.lift(new ao(e,t,n))}(e=>e?this.accountService.getParentAccount(`${e.accountType}:${e.accountId}`):no.E),function(e,t){return arguments.length>=2?function(n){return(0,uo.z)((0,ro.R)(e,t),(0,co.h)(1),(0,lo.d)(t))(n)}:function(t){return(0,uo.z)((0,ro.R)((t,n,i)=>e(t,n,i+1)),(0,co.h)(1))(t)}}((e,t)=>t?[t,...e]:e,[]),(0,Ue.U)(e=>this.account.isKAccount?e:[...e,this.account]))}onBreadcrumbClick(e){this.changeParent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B))},e.\u0275cmp=s.Xpm({type:e,selectors:[["account-breadcrumbs"]],inputs:{account:"account"},outputs:{changeParent:"changeParent"},features:[s.TTD],decls:9,vars:6,consts:[[1,"account-breadcrumbs"],[1,"breadcrumb",3,"click"],[1,"name"],[1,"arrow"],["class","breadcrumb",3,"click",4,"ngFor","ngForOf"],["class","id",4,"ngIf"],["class","arrow",4,"ngIf"],[1,"id"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.NdJ("click",function(){return t.onBreadcrumbClick(null)}),s.TgZ(2,"span",2),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"span",3),s._uU(6,"\u203a"),s.qZA(),s.qZA(),s.YNc(7,ho,5,3,"div",4),s.ALo(8,"async"),s.qZA()),2&e&&(s.xp6(3),s.Oqu(s.lcZ(4,2,"search-result.all.title")),s.xp6(4),s.Q6J("ngForOf",s.lcZ(8,4,t.breadcrumbs$)))},directives:[a.sg,a.O5],pipes:[Z.X$,a.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.account-breadcrumbs[_ngcontent-%COMP%]{align-items:baseline;display:flex}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{color:#333;cursor:pointer;font-size:1.9rem}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{padding:0 1rem}"]}),e})();function fo(e,t){1&e&&(s.TgZ(0,"hoverbox"),s._uU(1,"show the inheritance here UCCLIENT-2753"),s.qZA())}function bo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list-item",5),s.TgZ(1,"span",6),s._uU(2),s.qZA(),s.TgZ(3,"span",7),s.NdJ("click",function(){const t=s.CHM(e).$implicit,n=s.oxw();return t.hasChildren&&n.showAccountChildren(t)}),s._uU(4),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.YNc(7,fo,2,0,"hoverbox",8),s.qZA(),s.TgZ(8,"span",9),s.TgZ(9,"mat-checkbox",10),s.NdJ("ngModelChange",function(t){const n=s.CHM(e).$implicit;return s.oxw().updatePermission(n,t)})("ngModelChange",function(t){return s.CHM(e).$implicit.permissions.admin_login=t}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit,n=s.oxw();s.ekj("changed",n.isAccountChanged(e)),s.xp6(2),s.Oqu(e.getAccountType()),s.xp6(1),s.ekj("has-children",e.hasChildren),s.xp6(1),s.hij(" ",e.name," "),s.xp6(2),s.Oqu(e.externalIdentifier),s.xp6(1),s.Q6J("ngIf",!1),s.xp6(2),s.Q6J("ngModel",e.permissions.admin_login)("disabled",e.permissions.admin_login_inherited)}}let _o=(()=>{class e{constructor(e,t,n){this.router=e,this.snackBar=t,this.translate=n,this.order="name",this.reverse=!1,this.changedAccounts=[],this.headerColumnData=[{name:"accountType",class:"column__xs",icon:"order_solid"},{name:"name",title:"admin.accounts.account_name",class:"column__large",isInitialOrder:!0},{name:"admin_login",class:"column__xs",icon:"contact"}],this.accounts=[],this.changePermission=new s.vpe,this.changeParent=new s.vpe}updatePermission(e,t){e.permissions.admin_login=t,this.changePermission.emit(e),this.toggleChangedAccount(e)}changeOrder(e){this.order=e.order,this.reverse=e.reverse}toggleChangedAccount(e){this.changedAccounts=this.changedAccounts.includes(e.accountId)?this.changedAccounts.filter(t=>t!==e.accountId):[e.accountId,...this.changedAccounts]}isAccountChanged(e){return this.changedAccounts.includes(e.accountId)}showAccountChildren(e){this.changeParent.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(St.c),s.Y36(Z.sK))},e.\u0275cmp=s.Xpm({type:e,selectors:[["account-table"]],inputs:{accounts:"accounts",scrollContainerSelector:"scrollContainerSelector"},outputs:{changePermission:"changePermission",changeParent:"changeParent"},decls:6,vars:7,consts:[[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],[1,"accounts"],["class","account-table__list-item",3,"changed",4,"ngFor","ngForOf"],[1,"account-table__list-item"],[1,"column","column__xs","account__type"],["appHoverbox","",1,"column","column__large","account__name",3,"click"],[4,"ngIf"],[1,"column","column__xs","account__admin-role"],["color","primary",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(s.TgZ(0,"mat-list",0),s.TgZ(1,"mat-list-item",1),s.TgZ(2,"sortable-list-header",2),s.NdJ("orderChange",function(e){return t.changeOrder(e)}),s.qZA(),s.qZA(),s.TgZ(3,"section",3),s.YNc(4,bo,10,10,"mat-list-item",4),s.ALo(5,"orderBy"),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("data",t.headerColumnData),s.xp6(2),s.Q6J("ngForOf",s.gM2(5,2,t.accounts,t.order,t.reverse,!0)))},directives:[Re.i$,Re.Tg,Bn.c,a.sg,ee.r,a.O5,on.oG,Yt.JJ,Yt.On,te.B],pipes:[b.T],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]{height:calc(100% - 11.2rem)}.account-table__list-item.changed[_ngcontent-%COMP%]{background-color:#fffbe3}.account__admin-role[_ngcontent-%COMP%]{overflow:visible!important}[_nghost-%COMP%]   .account__name[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type[_ngcontent-%COMP%]{color:#333}[_nghost-%COMP%]   .account__name.has-children[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type.has-children[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .account__name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}"]}),e})();function xo(e,t){1&e&&(s.TgZ(0,"span",10),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"admin.user_edit.permissions.customer_right_administration.title")))}function vo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"account-breadcrumbs",11),s.NdJ("changeParent",function(t){return s.CHM(e),s.oxw().loadChildrenAccounts(t)}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("account",e.selectedAccount)}}function ko(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"account-table",12),s.NdJ("changeParent",function(t){return s.CHM(e),s.oxw().loadChildrenAccounts(t)})("changePermission",function(t){return s.CHM(e),s.oxw().onChangePermission(t)}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("accounts",e.accounts)}}let Co=(()=>{class e{constructor(e,t,n){this.accountService=e,this.adminUserService=t,this.snackBarService=n,this.accountsSubscription=new to.w,this.searchInputValue$=new u.xQ,this.ngUnsubscribe=new u.xQ,this.toggleFn=new s.vpe,this.isLoading=!1,this.hasMoreData=!1,this.isLoadMore=!0,this.page=1,this.pageInitValue=1,this.searchInputValue="",this.accounts=[],this.nameFilter=""}handle(e){e.stopPropagation(),this.close()}ngOnInit(){this.searchInputValue$.pipe((0,De.O)(this.searchInputValue),(0,Fe.b)(400),(0,S.x)(),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.searchInputValue=e,this.loadAccounts(!0)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}close(){this.toggleFn.emit()}onChangePermission(e){this.adminUserService.editPermissions(`${e.accountType}:${e.accountId}`,this.userId,{admin_login:e.permissions.admin_login}).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.snackBarService.openInfo("admin.user_edit.permissions.customer_right_administration.permission.saved")},()=>{this.snackBarService.openInfo("admin.user_edit.permissions.customer_right_administration.permission.error")})}onLazyLoading(){this.loadAccounts()}onSearch(e=""){this.searchInputValue$.next(e)}loadChildrenAccounts(e){this.searchInputValue="",this.nameFilter="",this.selectedAccount=e,this.loadAccounts(!0)}loadAccounts(e=!1){let t;this.selectedAccount&&(t=`${this.selectedAccount.accountType}:${this.selectedAccount.accountId}`),e&&(this.page=this.pageInitValue,this.accounts=[]),this.accountsSubscription.unsubscribe(),this.isLoading=!0,this.accountsSubscription=this.accountService.getAllAccounts(this.searchInputValue,this.page,25,t).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{const t=e.data;this.isLoading=!1,this.page++,this.hasMoreData=e.paginationHasMoreData,t.forEach((e,n)=>{this.isLoading=!0;const i=`${e.accountType}:${e.accountId}`;this.adminUserService.getPermissions(i,this.userId).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{t[n].permissions=e,this.isLoading=!1}),this.accountService.getAllAccounts("",1,1,i).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{t[n].hasChildren=!!e.data.length})}),this.accounts=[...this.accounts,...t],this.searchInputValue&&1===this.accounts.length&&(this.selectedAccount=this.accounts[0])})}get onlyFoundAccount(){return 1===this.accounts.length?this.accounts[0]:null}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B),s.Y36(yt),s.Y36(St.c))},e.\u0275cmp=s.Xpm({type:e,selectors:[["customer-right-administration-modal"]],hostBindings:function(e,t){1&e&&s.NdJ("keydown.escape",function(e){return t.handle(e)},!1,s.evT)},inputs:{userId:"userId"},outputs:{toggleFn:"toggleFn"},decls:13,vars:12,consts:[[1,"account-customers-modal",3,"click"],[1,"account-customers-modal__edit",3,"click"],["class","account-customers-modal__title",4,"ngIf"],[3,"account","changeParent",4,"ngIf"],["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["infinite-scroll","",3,"infiniteScrollDisabled","infiniteScrollThrottle","scrollWindow","scrolled"],[1,"secondary-header"],["icon","search","size","small"],["autocomplete","off",3,"ngModel","focus","placeholder","keyup","ngModelChange"],[3,"accounts","changeParent","changePermission",4,"ngIf"],[1,"account-customers-modal__title"],[3,"account","changeParent"],[3,"accounts","changeParent","changePermission"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return t.close()}),s.TgZ(1,"div",1),s.NdJ("click",function(e){return e.stopPropagation()}),s.TgZ(2,"header"),s.YNc(3,xo,3,3,"span",2),s.YNc(4,vo,1,1,"account-breadcrumbs",3),s.qZA(),s.TgZ(5,"section",4),s.TgZ(6,"div",5),s.NdJ("scrolled",function(){return t.onLazyLoading()}),s.TgZ(7,"div",6),s._UZ(8,"app-svg-icon",7),s.TgZ(9,"label"),s.TgZ(10,"input",8),s.NdJ("keyup",function(e){return t.onSearch(e.target.value)})("ngModelChange",function(e){return t.nameFilter=e}),s.ALo(11,"translate"),s.qZA(),s.qZA(),s.qZA(),s.YNc(12,ko,1,1,"account-table",9),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(3),s.Q6J("ngIf",!t.selectedAccount),s.xp6(1),s.Q6J("ngIf",t.selectedAccount),s.xp6(1),s.Q6J("loadingAreaIndicatorActive",t.isLoading),s.xp6(1),s.Q6J("infiniteScrollDisabled",!t.isLoadMore||!t.hasMoreData||t.isLoading)("infiniteScrollThrottle",50)("scrollWindow",!1),s.xp6(4),s.s9C("placeholder",s.lcZ(11,10,"admin.user_edit.permissions.customer_right_administration.search.placeholder")),s.Q6J("ngModel",t.nameFilter)("focus",!0),s.xp6(2),s.Q6J("ngIf",t.accounts))},directives:[a.O5,ze.O,i.R,qe.u,Yt.Fj,Yt.JJ,Yt.On,Xt.R,go,_o],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}  .customer-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .customer-autocomplete__item .mat-option-text{display:flex}  .customer-autocomplete__item .mat-option-text span{font-size:1.8rem}.account-customers-modal[_ngcontent-%COMP%]{background-color:#0000004d;bottom:0;display:flex;left:0;position:absolute;right:0;top:0;z-index:5}.account-customers-modal[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:flex-end;padding:.8rem}.account-customers-modal[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.8rem;text-transform:uppercase}@media (min-width: 767px){.account-customers-modal[_ngcontent-%COMP%]{align-items:center;justify-content:center}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]{flex:initial;height:80vh;width:96rem}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{background-color:#e5e5e5;color:#000}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:.1rem solid #ccc}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}}.account-customers-modal__edit[_ngcontent-%COMP%]{background-color:#fff;border-radius:.2rem .2rem .4rem .4rem;left:8.5rem;margin-left:auto;margin-right:auto;overflow:hidden;right:0;top:30%;width:72rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .account-customers-modal__subtitle[_ngcontent-%COMP%]{padding:1rem 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .account-customers-modal__edit__row[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid #e5e5e5;display:flex;height:8.7rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;background-color:#e5e5e5;color:#000;display:flex;flex-direction:row;height:5.6rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .account-customers-modal__title[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]{align-items:center;color:#fff;display:flex;height:5.6rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#000;flex:1;font-size:1.8rem;padding:0 .8rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{height:calc(100% - 5.6rem);position:relative}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;overflow:auto}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.account-customers-modal__edit[_ngcontent-%COMP%]   .customer-autocomplete[_ngcontent-%COMP%]{display:block;margin:0 auto;width:100%}"]}),e})();function To(e,t){1&e&&(s.ynx(0),s._uU(1),s.ALo(2,"translate"),s.BQk()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.permissions.included")," "))}const Ao=function(e,t){return{licensesNum:e,licensesTotal:t}};function So(e,t){if(1&e&&(s.TgZ(0,"div",17),s.TgZ(1,"span"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&e){const e=s.oxw(2);s.xp6(2),s.hij(" ",s.xi3(3,1,"admin.user_edit.permissions.free_licenses",s.WLB(4,Ao,e.unusedLicenses.mobility,e.totalLicenses.mobility))," ")}}function yo(e,t){1&e&&(s.TgZ(0,"mat-grid-tile",9),s._UZ(1,"mat-checkbox",18),s.qZA())}function Po(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"mat-grid-tile",8),s.TgZ(2,"span"),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"div",17),s.TgZ(6,"span"),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"mat-grid-tile",9),s._UZ(10,"mat-checkbox",19),s.qZA(),s.BQk()),2&e){const e=s.oxw(2);s.xp6(3),s.hij(" ",s.lcZ(4,2,"admin.user_edit.permissions.crm_connect.label")," "),s.xp6(4),s.hij(" ",s.xi3(8,4,"admin.user_edit.permissions.free_licenses",s.WLB(7,Ao,e.unusedLicenses.crmConnect,e.totalLicenses.crmConnect))," ")}}const Io=function(e){return{meetingPerUserWhiteLabelName:e}};function Oo(e,t){if(1&e&&(s.ynx(0),s.TgZ(1,"mat-grid-tile",8),s.TgZ(2,"span",20),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"div",17),s.TgZ(6,"span",21),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"mat-grid-tile",9),s._UZ(10,"mat-checkbox",22),s.qZA(),s.BQk()),2&e){const e=s.oxw(2);s.xp6(3),s.hij(" ",s.xi3(4,2,"admin.user_edit.permissions.meeting_per_user.label",s.VKq(8,Io,e.meetingPerUserWhiteLabelName))," "),s.xp6(4),s.hij(" ",s.xi3(8,5,"admin.user_edit.permissions.free_licenses",s.WLB(10,Ao,e.unusedLicenses.meetingPerUser,e.totalLicenses.meetingPerUser))," ")}}function Zo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-grid-tile",23),s.TgZ(1,"app-button",24),s.NdJ("appButtonClick",function(){return s.CHM(e),s.oxw(2).customerRightAdministration()}),s.qZA(),s.qZA()}}function Mo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"form",4),s.NdJ("ngSubmit",function(){s.CHM(e);const t=s.oxw();return t.permissionsForm.valid&&t.confirmPermissionsChange()}),s.TgZ(1,"section"),s.TgZ(2,"div",5),s._uU(3),s.ALo(4,"translate"),s.qZA(),s.TgZ(5,"div",6),s.TgZ(6,"mat-grid-list",7),s.ynx(7),s.TgZ(8,"mat-grid-tile",8),s._uU(9),s.ALo(10,"translate"),s.qZA(),s.TgZ(11,"mat-grid-tile",9),s._UZ(12,"mat-checkbox",10),s.qZA(),s.BQk(),s.ynx(13),s.TgZ(14,"mat-grid-tile",8),s.TgZ(15,"span"),s._uU(16),s.ALo(17,"translate"),s.YNc(18,To,3,3,"ng-container",11),s.qZA(),s.YNc(19,So,4,7,"div",12),s.qZA(),s.YNc(20,yo,2,0,"mat-grid-tile",13),s.BQk(),s.YNc(21,Po,11,10,"ng-container",11),s.YNc(22,Oo,11,13,"ng-container",11),s.qZA(),s.qZA(),s.qZA(),s.TgZ(23,"section"),s.TgZ(24,"div",5),s._uU(25),s.ALo(26,"translate"),s.qZA(),s.TgZ(27,"div",6),s.TgZ(28,"mat-grid-list",7),s.ynx(29),s.TgZ(30,"mat-grid-tile",8),s._uU(31),s.ALo(32,"translate"),s.qZA(),s.TgZ(33,"mat-grid-tile",9),s._UZ(34,"mat-checkbox",14),s.qZA(),s.BQk(),s.YNc(35,Zo,2,0,"mat-grid-tile",15),s.qZA(),s.qZA(),s.qZA(),s.TgZ(36,"footer-actions",16),s.NdJ("cancelClick",function(){return s.CHM(e),s.oxw().cancel()})("saveClick",function(){return s.CHM(e),s.oxw().saveUserPermissions()}),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.permissionsForm),s.xp6(3),s.Oqu(s.lcZ(4,13,"admin.user_edit.permissions.client")),s.xp6(6),s.hij(" ",s.lcZ(10,15,"admin.user_edit.permissions.allow_client_login")," "),s.xp6(7),s.hij(" ",s.lcZ(17,17,"admin.user_edit.permissions.mobile_pack.label")," "),s.xp6(2),s.Q6J("ngIf",e.isBusinessPremiumContract),s.xp6(1),s.Q6J("ngIf",!e.isBusinessPremiumContract),s.xp6(1),s.Q6J("ngIf",!e.isBusinessPremiumContract),s.xp6(1),s.Q6J("ngIf",e.totalLicenses.crmConnect),s.xp6(1),s.Q6J("ngIf",e.totalLicenses.meetingPerUser),s.xp6(3),s.Oqu(s.lcZ(26,19,"admin.user_edit.permissions.administration")),s.xp6(6),s.hij(" ",s.lcZ(32,21,"admin.user_edit.permissions.admin_portal_access.label")," "),s.xp6(4),s.Q6J("ngIf",e.hasMoreThanOneAccount),s.xp6(1),s.Q6J("saveDisabled",!e.permissionsForm.valid||!e.permissionsForm.dirty)}}function wo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"customer-right-administration-modal",25),s.NdJ("toggleFn",function(){return s.CHM(e),s.oxw().toggleCustomerRightAdministration()}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("userId",e.userId)}}let No=(()=>{class e{constructor(e,t,n,i,o,a,s,r,c,l,d,m){this.router=e,this.adminUserService=t,this.userService=n,this.adminService=i,this.licenseService=o,this.route=a,this.snackBarService=s,this.overlayService=r,this.translate=c,this.dialog=l,this.accountService=d,this.whiteLabelService=m,this.ngUnsubscribe=new u.xQ,this.permissionsForm=new Yt.cw({client_login:new Yt.NI,client_mobile_pack_contract_type_mini_mouse:new Yt.NI,crmConnect:new Yt.NI,meetingPerUser:new Yt.NI,admin_login:new Yt.NI}),this.permissions=new kt.P,this.originalPermissions=new kt.P,this.unusedLicenses=this.generateLicenseObj(),this.totalLicenses=this.generateLicenseObj(),this.userCrmConnectLicenseState=!1,this.meetingPerUserLicenseState=!1,this.isBusinessPremiumContract=!0,this.crmConnectUniteLicense=Xi.CrmConnectUnite,this.meetingPerUserWhiteLabelName=this.whiteLabelService.data.meetingPerUser,this.isSaving=!1,this.isLoading=!0,this.showCustomerRightAdministration=!1,this.isOwnPermissions=!1,this.selectedAccountId=""}ngOnInit(){this.accountService.selectedAccount&&(this.selectedAccountId=`${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}`),this.route.params.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.isLoading=!1,e.id&&(this.userId=e.id,this.loadUserLicenseState(this.crmConnectUniteLicense),this.loadUserLicenseState(Xi.MeetingPerUser),this.loadPermissions(),this.loadActiveUser())})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}saveUserPermissions(){if(!this.selectedAccountId)return;this.snackBarService.open("admin.user_edit.permissions.saving"),this.isSaving=!0;const e=new kt.P;e.fromForm(this.permissionsForm.getRawValue());const t=e.getDiff(this.originalPermissions);this.adminUserService.editPermissions(this.selectedAccountId,this.userId,t).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}confirmPermissionsChange(){this.isRemovingOwnAdminPermissions&&this.dialog.open(Vi).afterClosed().pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e&&this.saveUserPermissions()})}cancel(){this.router.navigate(["/admin/user"])}customerRightAdministration(){this.toggleCustomerRightAdministration()}toggleCustomerRightAdministration(){this.showCustomerRightAdministration=!this.showCustomerRightAdministration,this.showCustomerRightAdministration?this.overlayService.push(this.$templatePortals.last):(this.overlayService.pop(),this.loadPermissions())}closeMenus(){this.overlayService.pop()}generateLicenseObj(){return{mobility:0,crmConnect:0,meetingPerUser:0}}saveUserLicense(e){let t,n,i,o="";switch(e){case Xi.MeetingPerUser:o=Xi.MeetingPerUser,i={meetingPerUserWhiteLabelName:this.meetingPerUserWhiteLabelName},t="admin.user_edit.permissions.meeting_per_user.granted",n="admin.user_edit.permissions.meeting_per_user.revoked";break;case Xi.CrmConnect:o=this.crmConnectUniteLicense,t="admin.user_edit.permissions.crm_connect.granted",n="admin.user_edit.permissions.crm_connect.revoked"}this.permissionsForm.get(e).value?this.licenseService.grantLicenseToUser(this.selectedAccountId,this.userId,o).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.handelUserLicenseChangeResponse(o,t,i)}):this.licenseService.revokeLicenseFromUser(this.selectedAccountId,this.userId,o).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.handelUserLicenseChangeResponse(o,n,i)})}handelUserLicenseChangeResponse(e,t,n){this.snackBarService.openInfo(t,!0,"",{},n),this.loadUserLicenseState(e),this.loadPermissions()}initPermissionsForm(){this.permissionsForm=new Yt.cw({client_login:new Yt.NI(this.permissions.client_login),client_mobile_pack_contract_type_mini_mouse:new Yt.NI({value:this.permissions.client_mobile_pack_contract_type_mini_mouse,disabled:this.isMobilityOptionCheckboxDisabled()}),crmConnect:new Yt.NI({value:this.userCrmConnectLicenseState,disabled:!this.userCrmConnectLicenseState&&0===this.unusedLicenses.crmConnect}),meetingPerUser:new Yt.NI({value:this.meetingPerUserLicenseState,disabled:!this.meetingPerUserLicenseState&&0===this.unusedLicenses.meetingPerUser}),admin_login:new Yt.NI(this.permissions.admin_login)})}calculateUnusedLicenses(e,t){this.permissionsForm.get("client_login").value?e?this.unusedLicenses[t]-=1:this.unusedLicenses[t]+=1:e||(this.unusedLicenses[t]+=1)}listenForClientLoginRightsChanges(){const e=this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse"),t=this.permissionsForm.get("crmConnect"),n=this.permissionsForm.get("meetingPerUser");this.permissionsForm.get("client_login").valueChanges.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(i=>{this.handleLicensesOptionCheckboxState(i,e,Xi.Mobility),this.handleLicensesOptionCheckboxState(i,t,Xi.CrmConnect),this.handleLicensesOptionCheckboxState(i,n,Xi.MeetingPerUser)})}handleLicensesOptionCheckboxState(e,t,n){e&&0!==this.unusedLicenses[n]?t.enable({emitEvent:!1}):(t.value&&t.reset(!1),t.disable({emitEvent:!1}))}listenForMobilityOptionCheckboxChanges(){this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse").valueChanges.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.calculateUnusedLicenses(e,Xi.Mobility)})}listenForCrmOptionCheckboxChanges(){this.permissionsForm.get("crmConnect").valueChanges.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.calculateUnusedLicenses(e,Xi.CrmConnect)})}listenForMeetingPerUserCheckboxChanges(){this.permissionsForm.get("meetingPerUser").valueChanges.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.calculateUnusedLicenses(e,Xi.MeetingPerUser)})}isMobilityOptionCheckboxDisabled(){return this.isBusinessPremiumContract||0===this.unusedLicenses.mobility&&!this.permissions.client_mobile_pack_contract_type_mini_mouse||!this.permissions.client_login}loadPermissions(){!this.selectedAccountId||(this.isLoading=!0,(0,$i.aj)([this.adminUserService.getPermissions(this.selectedAccountId,this.userId),this.licenseService.getLicensesUsage(this.selectedAccountId,Xi.Mobility),this.licenseService.getLicensesUsage(this.selectedAccountId,this.crmConnectUniteLicense),this.licenseService.getLicensesUsage(this.selectedAccountId,Xi.MeetingPerUser)]).pipe((0,T.R)(this.ngUnsubscribe),(0,Ht.x)(()=>this.isLoading=!1)).subscribe(([e,t,n,i])=>{this.isLoading=!1,this.permissions=e,this.originalPermissions=e,t.body&&(this.setContractType(t),this.initLicenseAmount(t,Xi.Mobility)),n.body&&this.initLicenseAmount(n,Xi.CrmConnect),i.body&&this.initLicenseAmount(i,Xi.MeetingPerUser),this.initPermissionsForm(),this.isBusinessPremiumContract||(this.listenForClientLoginRightsChanges(),this.listenForMobilityOptionCheckboxChanges()),this.listenForCrmOptionCheckboxChanges(),this.listenForMeetingPerUserCheckboxChanges()}))}loadUserLicenseState(e){this.licenseService.getUserLicenseState(this.selectedAccountId,this.userId,e).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{e===Xi.MeetingPerUser?this.meetingPerUserLicenseState=!0:e===Xi.CrmConnectUnite&&(this.userCrmConnectLicenseState=!0)},()=>{e===Xi.MeetingPerUser?this.meetingPerUserLicenseState=!1:e===Xi.CrmConnectUnite&&(this.userCrmConnectLicenseState=!1)})}loadActiveUser(){(0,Gi.D)([this.adminUserService.getUser(this.selectedAccountId,this.userId),this.userService.userInfo$.pipe((0,qt.P)())]).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(([e,t])=>{var n;this.adminService.emit(e),(null==e?void 0:e.username)===(null===(n=null==t?void 0:t.user)||void 0===n?void 0:n.username)&&(this.isOwnPermissions=!0)})}setContractType(e){switch(e.status){case 200:this.isBusinessPremiumContract=!1;break;case 204:this.isBusinessPremiumContract=!0}}initLicenseAmount(e,t){this.totalLicenses[t]=e.body.total,this.unusedLicenses[t]=e.body.unused}handleSuccess(){this.isSaving=!1,this.originalPermissions.client_mobile_pack_contract_type_mini_mouse=this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse").value,this.originalPermissions.admin_login=this.permissionsForm.get("admin_login").value;let e=!1;this.permissionsForm.get("meetingPerUser").value!==this.meetingPerUserLicenseState&&(e=!0,this.saveUserLicense("meetingPerUser")),this.permissionsForm.get("crmConnect").value!==this.userCrmConnectLicenseState&&(e=!0,this.saveUserLicense("crmConnect")),e||(this.snackBarService.openInfo("admin.user_edit.permissions.saved",!0),this.loadPermissions()),this.isRemovingOwnAdminPermissions&&(this.adminService.ownPermissionsChange=this.permissionsForm.value)}handleError(){this.isSaving=!1,this.snackBarService.openErrorInfo("Error occurred")}get isRemovingOwnAdminPermissions(){return!this.permissionsForm.value.admin_login&&this.isOwnPermissions}get hasMoreThanOneAccount(){return!this.accountService.isOnlyAccount}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(yt),s.Y36(J.K),s.Y36(D.l),s.Y36(Pt),s.Y36(P.gz),s.Y36(St.c),s.Y36(Wi.c),s.Y36(Z.sK),s.Y36(o.uw),s.Y36(C.B),s.Y36(Q.D))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-permissions"]],viewQuery:function(e,t){if(1&e&&s.Gf(Hi.ig,5),2&e){let e;s.iGM(e=s.CRH())&&(t.$templatePortals=e)}},decls:4,vars:2,consts:[["loading-area-indicator","","data-e2e","admin-user-permissions-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.permissions.label"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[3,"userId","toggleFn",4,"cdk-portal"],["novalidate","",3,"formGroup","ngSubmit"],[1,"subline"],[1,"container"],["cols","12","rowHeight","6rem"],["colspan","10",1,"input-label"],["colspan","2"],["color","primary","formControlName","client_login","data-e2e","admin-user-permissions-page__allow-app-login-checkbox"],[4,"ngIf"],["class","input-label__secondary",4,"ngIf"],["colspan","2",4,"ngIf"],["color","primary","formControlName","admin_login","data-e2e","admin-user-permissions-page__system-configuration-access-checkbox"],["class","input-label","colspan","12",4,"ngIf"],["e2e","admin-user-permissions-page",3,"saveDisabled","cancelClick","saveClick"],[1,"input-label__secondary"],["color","primary","formControlName","client_mobile_pack_contract_type_mini_mouse","data-e2e","admin-user-permissions-page__mobility-option-checkbox"],["color","primary","formControlName","crmConnect"],["data-e2e","admin-user-permissions-page__meeting-per-user-label"],["data-e2e","admin-user-permissions-page__meeting-per-user-licenses"],["color","primary","formControlName","meetingPerUser","data-e2e","admin-user-permissions-page__meeting-per-user-checkbox"],["colspan","12",1,"input-label"],["color","primary","buttonTextTranslationKey","admin.user_edit.permissions.customer_right_administration.title","type","stroked-button",3,"appButtonClick"],[3,"userId","toggleFn"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"headline",1),s.YNc(2,Mo,37,23,"form",2),s.YNc(3,wo,1,1,"customer-right-administration-modal",3),s.qZA()),2&e&&(s.Q6J("loadingAreaIndicatorActive",t.isLoading),s.xp6(2),s.Q6J("ngIf",!t.isLoading))},directives:[ze.O,Tn.a,a.O5,Hi.bH,Yt._Y,Yt.JL,Yt.sg,eo.Il,eo.DX,on.oG,Yt.JJ,Yt.u,Dt.c,xi.V,Co],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}section[_ngcontent-%COMP%]{border-top:.1rem solid #e5e5e5;padding-bottom:2.4rem}section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:1.2rem 2rem;width:36rem}section[_ngcontent-%COMP%]   .subline[_ngcontent-%COMP%]{color:#666;font-size:1.8rem;padding:1.2rem 2rem 0}section[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:1.8rem}section[_ngcontent-%COMP%]   .input-label__secondary[_ngcontent-%COMP%]{font-size:1.8rem}section[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]     .mat-grid-tile-content{align-items:flex-start;flex-direction:column}section[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{overflow:visible}"]}),e})();var Eo=n(1046),Lo=n(4885);function Uo(e,t){if(1&e&&(s.TgZ(0,"div"),s._UZ(1,"svg-avatar",16),s.qZA()),2&e){const e=s.oxw().$implicit;s.xp6(1),s.Q6J("displayName",e.DISPLAY_NAME)}}function Do(e,t){if(1&e&&(s.TgZ(0,"mat-option",13),s.YNc(1,Uo,2,1,"div",14),s.TgZ(2,"span",15),s._uU(3),s.qZA(),s.TgZ(4,"span",15),s._uU(5),s.qZA(),s.qZA()),2&e){const e=t.$implicit,n=s.oxw(),i=s.MAs(17);s.Q6J("value",e),s.xp6(1),s.Q6J("ngIf",n.getInitials(e.DISPLAY_NAME))("ngIfElse",i),s.xp6(2),s.Oqu(e.name||e.displayName||e.DISPLAY_NAME),s.xp6(2),s.Oqu(e.number||e.extensionNumber||e.EXTENSION_NUMBER||e.ID)}}function Bo(e,t){1&e&&(s.TgZ(0,"mat-option"),s._UZ(1,"mat-progress-spinner",17),s.qZA())}function qo(e,t){1&e&&s._UZ(0,"svg-avatar")}let Ro=(()=>{class e{constructor(){this.ngUnsubscribe=new u.xQ,this.extensionItems=[],this.isLoading=!1,this.toggleFn=new s.vpe,this.saveExtension=new s.vpe,this.onScrollToBottom=new s.vpe,this.onExtensionInput=new s.vpe,this.createForm(),this.phonenumberForm.get("extension").valueChanges.pipe((0,De.O)(""),(0,Fe.b)(250),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.onExtensionInput.next(e)})}handle(e){e.stopPropagation(),this.close()}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}getInitials(e){return(0,vt.Cx)(e)||""}displayFn(e){return e&&e.DISPLAY_NAME}save(){this.saveExtension.emit(this.phonenumberForm.controls.extension.value)}close(){this.toggleFn.emit()}createForm(){this.phonenumberForm=new Yt.cw({extension:new Yt.NI(this.extension,Yt.kI.compose([Yt.kI.required,Eo.C.autocompleteIsItemSelected()]))})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["phonenumbers-form"]],hostBindings:function(e,t){1&e&&s.NdJ("keydown.escape",function(e){return t.handle(e)},!1,s.evT)},inputs:{extensionItems:"extensionItems",isLoading:"isLoading"},outputs:{toggleFn:"toggleFn",saveExtension:"saveExtension",onScrollToBottom:"onScrollToBottom",onExtensionInput:"onExtensionInput"},decls:19,vars:12,consts:[[1,"phonenumbers-form"],[1,"phonenumbers-form__edit"],["mat-icon-button","","type","button",3,"click"],["icon","arrow_left","size","medium"],["novalidate","",3,"formGroup","ngSubmit"],[1,"extension-autocomplete"],["formControlName","extension","matInput","",3,"matAutocomplete","placeholder"],[3,"displayWith","listboxScrolled"],["auto","matAutocomplete"],["class","extension-autocomplete__item",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["showIcon",""],[3,"saveDisabled","cancelClick","saveClick"],[1,"extension-autocomplete__item",3,"value"],[4,"ngIf","ngIfElse"],["mat-line",""],[3,"displayName"],["mode","indeterminate"]],template:function(e,t){if(1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"header"),s.TgZ(3,"button",2),s.NdJ("click",function(){return t.close()}),s._UZ(4,"app-svg-icon",3),s.qZA(),s.TgZ(5,"span"),s._uU(6),s.ALo(7,"translate"),s.qZA(),s.qZA(),s.TgZ(8,"form",4),s.NdJ("ngSubmit",function(){return t.phonenumberForm.valid&&t.save()}),s.TgZ(9,"mat-form-field",5),s._UZ(10,"input",6),s.ALo(11,"translate"),s.TgZ(12,"mat-autocomplete",7,8),s.NdJ("listboxScrolled",function(){return t.onScrollToBottom.emit()}),s.YNc(14,Do,6,5,"mat-option",9),s.YNc(15,Bo,2,0,"mat-option",10),s.qZA(),s.YNc(16,qo,1,0,"ng-template",null,11,s.W1O),s.qZA(),s.TgZ(18,"footer-actions",12),s.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.save()}),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&e){const e=s.MAs(13);s.xp6(6),s.Oqu(s.lcZ(7,8,"admin.navigation.user.phonenumber.title")),s.xp6(2),s.Q6J("formGroup",t.phonenumberForm),s.xp6(2),s.s9C("placeholder",s.lcZ(11,10,"admin.user.phoneextension.add_extension")),s.Q6J("matAutocomplete",e),s.xp6(2),s.Q6J("displayWith",t.displayFn),s.xp6(2),s.Q6J("ngForOf",t.extensionItems),s.xp6(1),s.Q6J("ngIf",t.isLoading),s.xp6(3),s.Q6J("saveDisabled",!t.phonenumberForm.valid)}},directives:[c.lW,qe.u,Yt._Y,Yt.JL,Yt.sg,m.KE,Yt.Fj,Qe.Nt,Wt.ZL,Yt.JJ,Yt.u,Wt.XC,en.X,a.sg,a.O5,Dt.c,r.ey,r.X2,tn.T,Lo.Ou],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}form[_ngcontent-%COMP%]{padding:.8rem 2.4rem}  .extension-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .extension-autocomplete__item .mat-option-text{align-items:center;display:flex;position:relative}  .extension-autocomplete__item .mat-option-text .rounded-icon-holder{font-size:2.4rem}  .extension-autocomplete__item .mat-option-text span{font-size:1.8rem;margin-top:-1.8rem}  .extension-autocomplete__item .mat-option-text span:last-child{color:#0000008a;font-size:1.6rem;left:5.7rem;position:absolute;top:2.3rem}.phonenumbers-form[_ngcontent-%COMP%]{background-color:#0000004d;bottom:0;left:0;position:absolute;right:0;top:0;z-index:5}.phonenumbers-form__edit[_ngcontent-%COMP%]{background-color:#fff;left:8.5rem;margin-left:auto;margin-right:auto;position:absolute;right:0;top:30%;width:72rem}.phonenumbers-form__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;background-color:#e5e5e5;color:#000;display:flex;flex-direction:row;height:5.6rem;padding:0 2.4rem}.phonenumbers-form__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.phonenumbers-form__edit[_ngcontent-%COMP%]   .extension-autocomplete[_ngcontent-%COMP%]{width:100%}"]}),e})();function $o(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"span"),s.TgZ(1,"button",5),s.NdJ("click",function(){return s.CHM(e),s.oxw().addLinkedExtension()}),s._UZ(2,"app-svg-icon",6),s.qZA(),s.qZA()}}function Fo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list-item"),s.TgZ(1,"span",12),s._uU(2),s.qZA(),s.TgZ(3,"span",13),s._uU(4),s.qZA(),s.TgZ(5,"span",14),s.TgZ(6,"button",5),s.NdJ("click",function(){const t=s.CHM(e),n=t.$implicit,i=t.index;return s.oxw(2).toggleRemoveExtensionDialog(n,i)}),s._UZ(7,"app-svg-icon",15),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",e.extension," "),s.xp6(2),s.hij(" ",e.inboundPhoneNumbersFormatted," ")}}function Yo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"mat-list",7),s.TgZ(1,"mat-list-item",8),s.TgZ(2,"sortable-list-header",9),s.NdJ("orderChange",function(t){return s.CHM(e),s.oxw().changeOrder(t)}),s.qZA(),s._UZ(3,"span",10),s.qZA(),s.YNc(4,Fo,8,2,"mat-list-item",11),s.ALo(5,"orderBy"),s.qZA()}if(2&e){const e=s.oxw();s.xp6(2),s.Q6J("data",e.headerColumnData),s.xp6(2),s.Q6J("ngForOf",s.gM2(5,2,e.extensionResourceItems,e.order,e.reverse,!0))}}function Jo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"phonenumbers-form",16),s.NdJ("onExtensionInput",function(t){return s.CHM(e),s.oxw().onExtensionInput(t)})("onScrollToBottom",function(){return s.CHM(e),s.oxw().onScrollToBottom()})("saveExtension",function(t){return s.CHM(e),s.oxw().onRequest(t)})("toggleFn",function(){return s.CHM(e),s.oxw().toggleAddEntry()}),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("extensionItems",e.extensionItems)("isLoading",e.isLoadingUnAssignedExtensions)}}let Qo=(()=>{class e{constructor(e,t,n,i,o,a,s,r,c){this.accountService=e,this.adminService=t,this.adminUserService=n,this.confirmDialogsService=i,this.overlayContainerService=o,this.phoneExtensionService=a,this.route=s,this.snackBarService=r,this.translateService=c,this.page=1,this.perPage=25,this.hasMoreData=!0,this.searchExtensionValue="",this.ngUnsubscribe=new u.xQ,this.extensionResourceItems=[],this.isLoading=!1,this.isLoadingUnAssignedExtensions=!1,this.search="",this.filter={},this.isAddEntryShown=!1,this.extensionItems=[],this.selectedAccountId="",this.headerColumnData=[{name:"extension",title:"admin.user.phoneextension.extension",e2e:"admin-user-phonenumber-page__extension-header"},{name:"inboundTrunkNumber",title:"admin.user.phoneextension.inboundTrunkNumber",e2e:"admin-user-phonenumber-page__inbound-trunk-number-header"}]}ngOnInit(){this.accountService.selectedAccount&&(this.selectedAccountId=`${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}`),this.adminService.emitChange.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e?(this.activeUser=e,this.loadExtensions()):this.route.params.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{e.id&&this.loadUser(e.id)})})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}loadExtensions(){this.extensionResourceItems=[],this.isLoading=!0,this.phoneExtensionService.getLinkedPhoneExtensions(this.selectedAccountId,this.activeUser.id).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.extensionResourceItems=e.data,this.cleanupPhoneExtensions(),this.isLoading=!1})}loadUnAssignedPhoneExtensions(){this.isLoadingUnAssignedExtensions=!0,this.phoneExtensionService.getUnassignedPhoneExtensions(this.selectedAccountId,this.searchExtensionValue,this.page,this.perPage).pipe((0,Ht.x)(()=>{this.isLoadingUnAssignedExtensions=!1}),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.page++,this.extensionItems=[...this.extensionItems,...e],this.hasMoreData=e.length>=this.perPage,this.cleanupPhoneExtensions()})}onScrollToBottom(){this.hasMoreData&&!this.isLoadingUnAssignedExtensions&&this.loadUnAssignedPhoneExtensions()}onExtensionInput(e){this.searchExtensionValue=e,this.extensionItems=[],this.page=1,this.loadUnAssignedPhoneExtensions()}cleanupPhoneExtensions(){this.extensionItems.length>0&&this.extensionResourceItems.length>0&&this.extensionResourceItems.forEach(e=>{this.extensionItems.forEach(t=>{t.ID===e.resource&&this.extensionItems.splice(this.extensionItems.indexOf(t),1)})})}addLinkedExtension(){this.toggleAddEntry()}toggleAddEntry(){this.isAddEntryShown=!this.isAddEntryShown,this.isAddEntryShown?this.overlayContainerService.push(this.$templatePortal):this.overlayContainerService.pop()}toggleRemoveExtensionDialog(e,t){this.extensionResource=e,this.translateService.get("admin.user.phoneextension.confirm_extension_removal").pipe((0,Ln.zg)(t=>this.confirmDialogsService.confirm("Remove Extension",`${t} ${e.extension}?`,"No","Yes")),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>this.handleRemoveExtensionDialogResult(e,t))}canAddExtension(){return 0===this.extensionResourceItems.length}onRequest(e){this.snackBarService.openInfo("admin.user.phoneextension.adding_extension",!0),this.toggleAddEntry(),this.phoneExtensionService.addLinkedPhoneExtensions(this.selectedAccountId,this.activeUser.id,e.ID).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>this.handleSuccess(),()=>this.snackBarService.openInfo("admin.user.phoneextension.adding_extension_failed",!0))}changeOrder(e){this.order=e.order,this.reverse=e.reverse}handleSuccess(){this.loadExtensions(),this.snackBarService.openInfo("admin.user.phoneextension.extension_added",!0)}loadUser(e){this.isLoading=!0,this.adminUserService.getUser(this.selectedAccountId,e).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.isLoading=!1,this.activeUser=e,this.adminService.emit(this.activeUser),this.loadExtensions()})}handleRemoveExtensionDialogResult(e,t){e&&(this.snackBarService.openInfo("admin.user.phoneextension.removing_extension",!0),this.phoneExtensionService.deleteLinkedPhoneExtension(this.selectedAccountId,this.activeUser.id,this.extensionResource.id).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.extensionResourceItems.splice(t,1),this.snackBarService.openInfo("admin.user.phoneextension.extension_removed",!0),this.loadUnAssignedPhoneExtensions()},()=>{this.snackBarService.openErrorInfo("admin.user.phoneextension.removing_extension_error")}))}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(C.B),s.Y36(D.l),s.Y36(yt),s.Y36(Un.U),s.Y36(Wi.c),s.Y36(Et),s.Y36(P.gz),s.Y36(St.c),s.Y36(Z.sK))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-phonenumbers"]],viewQuery:function(e,t){if(1&e&&s.Gf(Hi.ig,5),2&e){let e;s.iGM(e=s.CRH())&&(t.$templatePortal=e.first)}},decls:5,vars:3,consts:[["loading-area-indicator","","data-e2e","admin-user-phonenumber-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.phonenumbers.label"],[4,"ngIf"],["class","flex-table",4,"ngIf"],[3,"extensionItems","isLoading","onExtensionInput","onScrollToBottom","saveExtension","toggleFn",4,"cdk-portal"],["mat-icon-button","","type","button",3,"click"],["icon","add","size","small"],[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],[1,"column"],[4,"ngFor","ngForOf"],["data-e2e","admin-user-phonenumber-page__extension-entry",1,"column"],["data-e2e","admin-user-phonenumber-page__inbound-trunk-number-entry",1,"column","column__large"],[1,"column","item-secondary-content"],["fill","button-color","icon","delete","size","small"],[3,"extensionItems","isLoading","onExtensionInput","onScrollToBottom","saveExtension","toggleFn"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"headline",1),s.YNc(2,$o,3,0,"span",2),s.qZA(),s.YNc(3,Yo,6,7,"mat-list",3),s.YNc(4,Jo,1,2,"phonenumbers-form",4),s.qZA()),2&e&&(s.Q6J("loadingAreaIndicatorActive",t.isLoading),s.xp6(2),s.Q6J("ngIf",!t.isLoading&&t.canAddExtension()),s.xp6(1),s.Q6J("ngIf",!t.isLoading))},directives:[ze.O,Tn.a,a.O5,Hi.bH,c.lW,qe.u,Re.i$,Re.Tg,Bn.c,a.sg,Ro],pipes:[b.T],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}"]}),e})();function zo(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(const n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]&&("object"!=typeof e[n]||!zo(e[n],t[n])))return!1}for(const n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}var jo=n(52538);function Ko(e,t){1&e&&(s.TgZ(0,"mat-hint",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function Ho(e,t){1&e&&(s.TgZ(0,"mat-hint",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function Go(e,t){1&e&&(s.TgZ(0,"mat-hint",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"admin.user_edit.user_data.username.error.required")," "))}function Vo(e,t){1&e&&(s.TgZ(0,"mat-hint",20),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"common_errors.username.email")," "))}function Xo(e,t){if(1&e&&(s.TgZ(0,"mat-option",21),s._uU(1),s.ALo(2,"translate"),s.qZA()),2&e){const e=t.$implicit;s.Q6J("value",e.value),s.xp6(1),s.hij(" ",s.lcZ(2,2,e.title)," ")}}function Wo(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"form",3),s.NdJ("ngSubmit",function(){return s.CHM(e),s.oxw().userDataForm.valid}),s.TgZ(1,"div",4),s.TgZ(2,"div",5),s.TgZ(3,"div",6),s.TgZ(4,"div",7),s.TgZ(5,"mat-form-field",8),s.TgZ(6,"label"),s._UZ(7,"input",9),s.ALo(8,"translate"),s.qZA(),s.YNc(9,Ko,3,3,"mat-hint",10),s.qZA(),s.qZA(),s.TgZ(10,"div",11),s.TgZ(11,"mat-form-field",8),s.TgZ(12,"label"),s._UZ(13,"input",12),s.ALo(14,"translate"),s.qZA(),s.YNc(15,Ho,3,3,"mat-hint",10),s.qZA(),s.qZA(),s.qZA(),s.TgZ(16,"div",6),s.TgZ(17,"div",7),s.TgZ(18,"mat-form-field",8),s.TgZ(19,"label"),s._UZ(20,"input",13),s.ALo(21,"translate"),s.qZA(),s.YNc(22,Go,3,3,"mat-hint",10),s.YNc(23,Vo,3,3,"mat-hint",10),s.qZA(),s.qZA(),s.TgZ(24,"div",11),s.TgZ(25,"mat-form-field",8),s.TgZ(26,"mat-select",14),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().user.language=t}),s.ALo(27,"translate"),s.YNc(28,Xo,3,4,"mat-option",15),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(29,"svg-avatar",16),s.qZA(),s.TgZ(30,"div",17),s.TgZ(31,"app-button",18),s.NdJ("appButtonClick",function(){s.CHM(e);const t=s.oxw();return t.restorePassword(t.user.username)}),s.qZA(),s.TgZ(32,"footer-actions",19),s.NdJ("cancelClick",function(){return s.CHM(e),s.oxw().cancel()})("saveClick",function(){return s.CHM(e),s.oxw().saveUserData()}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.Q6J("formGroup",e.userDataForm),s.xp6(7),s.Q6J("placeholder",s.lcZ(8,14,"admin.user_edit.user_data.firstname.label")),s.xp6(2),s.Q6J("ngIf",e.userDataForm.controls.firstname.hasError("required")&&e.userDataForm.controls.firstname.touched),s.xp6(4),s.Q6J("placeholder",s.lcZ(14,16,"admin.user_edit.user_data.lastname.label")),s.xp6(2),s.Q6J("ngIf",e.userDataForm.controls.lastname.hasError("required")&&e.userDataForm.controls.lastname.touched),s.xp6(5),s.Q6J("placeholder",s.lcZ(21,18,"admin.user_edit.user_data.username.label"))("readonly",!e.isUsernameOwner),s.xp6(2),s.Q6J("ngIf",e.userDataForm.controls.username.hasError("required")&&e.userDataForm.controls.username.touched),s.xp6(1),s.Q6J("ngIf",e.userDataForm.controls.username.hasError("email")&&e.userDataForm.controls.username.touched),s.xp6(3),s.Q6J("ngModel",e.user.language)("placeholder",s.lcZ(27,20,"admin.user_edit.user_data.language.label")),s.xp6(2),s.Q6J("ngForOf",e.interfaceLanguages),s.xp6(3),s.Q6J("disabled",!e.user.username),s.xp6(1),s.Q6J("saveDisabled",!e.userDataForm.valid||!e.userDataForm.dirty)}}let ea=(()=>{class e{constructor(e,t,n,i,o,a,s,r,c){this.router=e,this.adminUserService=t,this.adminService=n,this.route=i,this.snackBarService=o,this.accountService=a,this.userService=s,this.languageService=r,this.apiLoginService=c,this.ngUnsubscribe=new u.xQ,this.isSaving=!1,this.isLoading=!1,this.isSubmitted=!1,this.isSubmittedFinished=!1,this.interfaceLanguages=this.languageService.getAvailableLanguages(),this.selectedAccountId="",this.isUsernameOwner=!1,this.routeConfig={search:!1},this.adminService.routerConfig=this.routeConfig}ngOnInit(){this.accountService.selectedAccount&&(this.selectedAccountId=`${this.accountService.selectedAccount.accountType}:${this.accountService.selectedAccount.accountId}`),this.route.params.pipe((0,Cn.K)(e=>this.isLoading=e),(0,T.R)(this.ngUnsubscribe)).subscribe(e=>{if(!e.id)return this.isLoading=!1,this.user=new v,void this.initUserDataForm();this.loadUser(e.id)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}saveUserData(){this.snackBarService.open("admin.user_edit.user_data.saving"),this.isSaving=!0,this.adminUserService.editUser(this.selectedAccountId,this.user.id,this.userDataForm.value).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}cancel(){this.router.navigate(["/admin/user"])}restorePassword(e){const t={username:e};this.isSubmitted=!0,this.apiLoginService.forgotPassword(t).pipe((0,T.R)(this.ngUnsubscribe)).subscribe(()=>{this.isSubmittedFinished=!0,this.isSubmitted=!1,this.snackBarService.openInfo("forgot-password.sent_email")},()=>{this.isSubmittedFinished=!0,this.isSubmitted=!1,this.snackBarService.openErrorInfo("Error occurred")})}isFormChanged(){return!this.userDataForm||zo(this.formCopyValue,this.userDataForm.value)}loadUser(e){(0,$i.aj)([this.adminUserService.getUser(this.selectedAccountId,e),this.userService.userInfo$]).pipe((0,qt.P)(),(0,Cn.K)(e=>this.isLoading=e),(0,T.R)(this.ngUnsubscribe)).subscribe(([t,n])=>{var i;this.isUsernameOwner=e===(null===(i=null==n?void 0:n.user)||void 0===i?void 0:i.id),this.user=t,this.initUserDataForm()})}initUserDataForm(){this.adminService.emit(this.user),this.userDataForm=new Yt.cw({username:new Yt.NI(this.user.username,Yt.kI.compose([Yt.kI.required,Yt.kI.email])),firstname:new Yt.NI(this.user.firstname,Yt.kI.required),lastname:new Yt.NI(this.user.lastname,Yt.kI.required),language:new Yt.NI(this.user.language,Yt.kI.required)}),this.formCopyValue=this.userDataForm.value}handleSuccess(e){var t;this.formCopyValue=this.userDataForm.value,this.isSaving=!1,this.adminService.emit(e),this.snackBarService.openInfo("admin.user_edit.user_data.saved",!0),null===(t=this.userDataForm)||void 0===t||t.reset(this.formCopyValue)}handleError(){this.isSaving=!1,this.snackBarService.openErrorInfo("Error occurred")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(P.F0),s.Y36(yt),s.Y36(D.l),s.Y36(P.gz),s.Y36(St.c),s.Y36(C.B),s.Y36(J.K),s.Y36(Vt.T),s.Y36(jo.H))},e.\u0275cmp=s.Xpm({type:e,selectors:[["admin-user-data"]],decls:3,vars:2,consts:[["loading-area-indicator","","data-e2e","admin-user-user-data-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.user_data.label"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"page-container"],[1,"user-data-container"],[1,"row-container"],[1,"name-row"],[1,"user-data__property"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__first-name--input",3,"placeholder"],["class","mat-hint--error",4,"ngIf"],[1,"language-row"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__last-name--input",3,"placeholder"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__username--input",3,"placeholder","readonly"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-user-user-data-page__language-selector",3,"ngModel","placeholder","ngModelChange"],["data-e2e","admin-user-user-data-page__language-selector-option",3,"value",4,"ngFor","ngForOf"],["wrapperSize","xx-large"],[1,"user-data__edit__actions"],["color","primary","buttonTextTranslationKey","admin.user_edit.restore-password","textColor","password-button--color","type","basic-button","e2e","admin-user-user-data-page__restore-password",1,"restore-password",3,"disabled","appButtonClick"],["e2e","admin-user-user-data-page",3,"saveDisabled","cancelClick","saveClick"],[1,"mat-hint--error"],["data-e2e","admin-user-user-data-page__language-selector-option",3,"value"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s._UZ(1,"headline",1),s.YNc(2,Wo,33,22,"form",2),s.qZA()),2&e&&(s.Q6J("loadingAreaIndicatorActive",t.isLoading),s.xp6(2),s.Q6J("ngIf",!t.isLoading))},directives:[ze.O,Tn.a,a.O5,Yt._Y,Yt.JL,Yt.sg,m.KE,Yt.Fj,Qe.Nt,Yt.JJ,Yt.u,Yt.nD,l.gD,a.sg,tn.T,xi.V,Dt.c,m.bx,r.ey],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.user-data__property[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.user-data-container[_ngcontent-%COMP%]{flex:3 0;flex-direction:column}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:1rem}.row-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.name-row[_ngcontent-%COMP%]{flex:1 3 10rem}.language-row[_ngcontent-%COMP%]{flex:1 0}.user-data__edit__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.restore-password[_ngcontent-%COMP%]{margin:.8rem 0}"]}),e})();var ta=n(83840),na=n(49457);let ia=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["export-import-help"]],decls:43,vars:42,consts:[["data-e2e","admin-wizards-export-import-fragment__instructions-modal","e2e","admin-wizards-export-import-fragment__instructions-modal",3,"title"],[1,"admin-wizards-export-import-fragment__instructions-modal"],["data-e2e","admin-wizards-export-import-fragment__instructions-first-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-second-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point"],["type","a"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-extension"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-username"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-lastname"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-firstname"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-language"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-app"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-admin"],["data-e2e","admin-wizards-export-import-fragment__instructions-fourth-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-fifth-point"]],template:function(e,t){1&e&&(s.TgZ(0,"modal-container",0),s.ALo(1,"translate"),s.TgZ(2,"div",1),s.TgZ(3,"ol"),s.TgZ(4,"li",2),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.TgZ(7,"li",3),s._uU(8),s.ALo(9,"translate"),s.qZA(),s.TgZ(10,"li",4),s._uU(11),s.ALo(12,"translate"),s.TgZ(13,"ul",5),s.TgZ(14,"li",6),s._uU(15),s.ALo(16,"translate"),s.qZA(),s.TgZ(17,"li",7),s._uU(18),s.ALo(19,"translate"),s.qZA(),s.TgZ(20,"li",8),s._uU(21),s.ALo(22,"translate"),s.qZA(),s.TgZ(23,"li",9),s._uU(24),s.ALo(25,"translate"),s.qZA(),s.TgZ(26,"li",10),s._uU(27),s.ALo(28,"translate"),s.qZA(),s.TgZ(29,"li",11),s._uU(30),s.ALo(31,"translate"),s.qZA(),s.TgZ(32,"li",12),s._uU(33),s.ALo(34,"translate"),s.qZA(),s.qZA(),s._uU(35),s.ALo(36,"translate"),s.qZA(),s.TgZ(37,"li",13),s._uU(38),s.ALo(39,"translate"),s.qZA(),s.qZA(),s.TgZ(40,"span",14),s._uU(41),s.ALo(42,"translate"),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.Q6J("title",s.lcZ(1,14,"admin.bulk_import.instruction.title")),s.xp6(5),s.hij(" ",s.lcZ(6,16,"admin.bulk_import.instruction.first_point")," "),s.xp6(3),s.hij(" ",s.lcZ(9,18,"admin.bulk_import.instruction.second_point")," "),s.xp6(3),s.hij(" ",s.lcZ(12,20,"admin.bulk_import.instruction.third_point.title")," "),s.xp6(4),s.hij(" ",s.lcZ(16,22,"admin.bulk_import.instruction.third_point.extension")," "),s.xp6(3),s.hij(" ",s.lcZ(19,24,"admin.bulk_import.instruction.third_point.username")," "),s.xp6(3),s.hij(" ",s.lcZ(22,26,"admin.bulk_import.instruction.third_point.lastname")," "),s.xp6(3),s.hij(" ",s.lcZ(25,28,"admin.bulk_import.instruction.third_point.firstname")," "),s.xp6(3),s.hij(" ",s.lcZ(28,30,"admin.bulk_import.instruction.third_point.language")," "),s.xp6(3),s.hij(" ",s.lcZ(31,32,"admin.bulk_import.instruction.third_point.app")," "),s.xp6(3),s.hij(" ",s.lcZ(34,34,"admin.bulk_import.instruction.third_point.admin")," "),s.xp6(2),s.hij(" ",s.lcZ(36,36,"admin.bulk_import.instruction.third_point.info")," "),s.xp6(3),s.hij(" ",s.lcZ(39,38,"admin.bulk_import.instruction.fourth_point")," "),s.xp6(3),s.hij(" ",s.lcZ(42,40,"admin.bulk_import.instruction.fifth_point")," "))},directives:[I.O],pipes:[Z.X$],styles:[".export-import-help__modal[_ngcontent-%COMP%]{padding:.5rem}"]}),e})();var oa=n(208);const aa=function(e){return{"file-over":e}};let sa=(()=>{class e{constructor(e){this.exportImportService=e,this.hasBaseDropZoneOver=!1}handleFileInput(e){const t=new FileReader;t.readAsText(e.target.files[0]),t.onloadend=()=>{this.exportImportService.uploadUsersViaFile(t.result.toString()),e.target.value=""}}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Ut))},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-button-import"]],decls:7,vars:8,consts:[[1,"app-button-import__container"],["id","file","multiple","","type","file","data-e2e","admin-wizards-export-import-page__csv-import-button",1,"app-button-import__input",3,"change"],["for","file",1,"app-button-import__label",3,"ngClass"],["icon","upload_file","size","medium",1,"app-button-import__app-svg-icon"],[1,"app-button-import__text"]],template:function(e,t){1&e&&(s.TgZ(0,"div",0),s.TgZ(1,"input",1),s.NdJ("change",function(e){return t.handleFileInput(e)}),s.qZA(),s.TgZ(2,"label",2),s._UZ(3,"app-svg-icon",3),s.TgZ(4,"span",4),s._uU(5),s.ALo(6,"translate"),s.qZA(),s.qZA(),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngClass",s.VKq(6,aa,t.hasBaseDropZoneOver)),s.xp6(1),s.ekj("file-over",t.hasBaseDropZoneOver),s.xp6(2),s.hij(" ",s.lcZ(6,4,"admin.bulk_import.buttons.import")," "))},directives:[a.mk,qe.u],pipes:[Z.X$],styles:["[_nghost-%COMP%]{padding:1rem}.app-button-import__container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;height:5rem;overflow:hidden;padding:1rem;position:relative}.app-button-import__label[_ngcontent-%COMP%]{display:flex;flex-direction:row}.app-button-import__text[_ngcontent-%COMP%]{padding-top:1.6rem;width:100%}.app-button-import__input[_ngcontent-%COMP%]{cursor:pointer;height:100%;opacity:0;position:absolute;right:0;top:0;z-index:99}.app-button-import__app-svg-icon[_ngcontent-%COMP%]{padding:.8rem 1rem 0 1.8rem}"]}),e})();function ra(e,t){if(1&e&&(s.TgZ(0,"span"),s._uU(1),s.qZA()),2&e){const e=t.$implicit;s.xp6(1),s.hij(" ",e," ")}}function ca(e,t){if(1&e&&(s.TgZ(0,"div",9),s.TgZ(1,"span",14),s._uU(2),s.qZA(),s.TgZ(3,"div",15),s.YNc(4,ra,2,1,"span",16),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",null==e?null:e.username," "),s.xp6(2),s.Q6J("ngForOf",e.report)}}function la(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div",7),s.TgZ(1,"div",8),s.TgZ(2,"div",9),s.TgZ(3,"span",10),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.TgZ(6,"span",10),s._uU(7),s.ALo(8,"translate"),s.qZA(),s.qZA(),s.YNc(9,ca,5,2,"div",11),s.qZA(),s.TgZ(10,"div",12),s.TgZ(11,"app-button",13),s.NdJ("appButtonClick",function(){s.CHM(e);const t=s.oxw();return t.download(t.importUserErrorSaveAs)}),s.qZA(),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(4),s.hij(" ",s.lcZ(5,3,"username")," "),s.xp6(3),s.hij(" ",s.lcZ(8,5,"report")," "),s.xp6(2),s.Q6J("ngForOf",e.importErrorResponse)}}function da(e,t){if(1&e&&(s.TgZ(0,"div",9),s.TgZ(1,"span"),s._uU(2),s.qZA(),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.TgZ(7,"span"),s._uU(8),s.qZA(),s.qZA()),2&e){const e=t.$implicit;s.xp6(2),s.hij(" ",null==e?null:e.extension," "),s.xp6(2),s.hij(" ",null==e?null:e.username," "),s.xp6(2),s.hij(" ",null==e?null:e.lastname," "),s.xp6(2),s.hij(" ",null==e?null:e.language," ")}}function ua(e,t){if(1&e){const e=s.EpF();s.TgZ(0,"div"),s.TgZ(1,"app-button",17),s.NdJ("appButtonClick",function(){s.CHM(e);const t=s.oxw();return t.download(t.exportUserSaveAs)}),s.qZA(),s.TgZ(2,"div",9),s.TgZ(3,"span"),s._uU(4),s.qZA(),s.TgZ(5,"span"),s._uU(6),s.qZA(),s.TgZ(7,"span"),s._uU(8),s.qZA(),s.TgZ(9,"span"),s._uU(10),s.qZA(),s.TgZ(11,"span"),s._uU(12),s.qZA(),s.TgZ(13,"span"),s._uU(14),s.qZA(),s.TgZ(15,"span"),s._uU(16),s.qZA(),s.qZA(),s.TgZ(17,"div",8),s.YNc(18,da,9,4,"div",11),s.qZA(),s.qZA()}if(2&e){const e=s.oxw();s.xp6(4),s.hij(" ","extension"," "),s.xp6(2),s.hij(" ","username"," "),s.xp6(2),s.hij(" ","lastname"," "),s.xp6(2),s.hij(" ","firstname"," "),s.xp6(2),s.hij(" ","language"," "),s.xp6(2),s.hij(" ","app"," "),s.xp6(2),s.hij(" ","admin"," "),s.xp6(2),s.Q6J("ngForOf",e.unassignedUser)}}const ma=P.Bz.forChild([{path:"",component:xt,canActivateChild:[ta.O],children:[{path:"",redirectTo:"user",pathMatch:"full"},{path:"user",component:zt,children:[{path:"",component:gi,pathMatch:"full",data:{title:"title.user"}},{path:"user-data",canActivate:[Ft],component:ea,data:{title:"title.user_data"}},{path:":id",canActivate:[Ft],component:ea,data:{title:"title.user_data"}},{path:":id/user-data",canActivate:[Ft],canDeactivate:[Rt],component:ea,data:{title:"title.user_data"}},{path:":id/phonenumber",canActivate:[Ft,$t],component:Qo,data:{title:"title.user_phone_number"}},{path:":id/call-forwarding",canActivate:[Ft],component:Jt},{path:":id/permissions",canActivate:[Ft,$t],component:No,data:{title:"title.user_permissions"}}]},{path:"wizards",component:zt,canActivate:[$t],children:[{path:"",redirectTo:"migration-wizard",pathMatch:"full"},{path:"migration-wizard",component:Ki,data:{title:"title.migration_wizard"}},{path:"export-import",component:(()=>{class e{constructor(e,t,n,i){this.exportImportService=e,this.snackBarService=t,this.translateService=n,this.dialog=i,this.ngUnsubscribe=new u.xQ,this.unassignedUser=[],this.exportImportService.importError$.pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{this.setImportErrorResponse(e)})}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}download(e){const t=new Blob([e],{type:"text/plain;charset=utf-8"});(0,na.saveAs)(t,Date.now()+".csv")}exportFile(){this.exportImportService.exportFile().pipe((0,T.R)(this.ngUnsubscribe)).subscribe(e=>{0!==e.length?(this.importErrorResponse=[],this.exportUserSaveAs="",this.unassignedUser=e,this.exportUserSaveAs=this.exportUserSaveAs.concat("extension,username,lastname,firstname,language,app,admin"),this.exportUserSaveAs=this.exportUserSaveAs.concat("\r\n"),this.unassignedUser.forEach((e,t)=>{this.exportUserSaveAs=this.exportUserSaveAs.concat(`${e.extension.trim()},,,,,${e.app},${e.admin}`),t<this.unassignedUser.length-1?this.exportUserSaveAs=this.exportUserSaveAs.concat("\r\n"):this.download(this.exportUserSaveAs)})):this.snackBarService.openInfo("admin.bulk_import.no_unassigned_user")})}openDetails(){this.dialog.open(ia,{autoFocus:!1})}setImportErrorResponse(e){this.importUserErrorSaveAs="",this.unassignedUser=[],this.setSnackbar(e),this.saveAs()}saveAs(){this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat("userName                        Report"),this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat("\r\n"),this.importErrorResponse.forEach(e=>{var t;this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat(`${null===(t=null==e?void 0:e.username)||void 0===t?void 0:t.trim()}   ${e.report}`),this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat("\r\n")})}setSnackbar(e){if(this.importErrorResponse=e,e.length&&e[0].imported)return this.snackBarService.openInfo(`${e[0].imported}${this.translateService.instant("admin.navigation.wizards.import.success")}`),void(this.importErrorResponse=[]);e.length>0&&this.snackBarService.openErrorInfo("admin.navigation.wizards.import.invalid")}}return e.\u0275fac=function(t){return new(t||e)(s.Y36(Ut),s.Y36(St.c),s.Y36(Z.sK),s.Y36(o.uw))},e.\u0275cmp=s.Xpm({type:e,selectors:[["export-import"]],decls:8,vars:2,consts:[["translationKey","title.import"],[1,"export-import__items"],["class","export-import__container",4,"ngIf"],[4,"ngIf"],[1,"export-import__buttons"],["icon","info","text","admin.bulk_import.buttons.instruction","data-e2e","admin-wizards-export-import-page__information_button",3,"click"],["icon","download","text","admin.bulk_import.buttons.export","data-e2e","admin-wizards-export-import-page__csv-export-button",3,"click"],[1,"export-import__container"],[1,"export-import__border"],[1,"export-import__item"],[1,"export-import__text"],["class","export-import__item",4,"ngFor","ngForOf"],[1,"export-import__save"],["color","primary","buttonTextTranslationKey","Save As","type","basic-button","data-e2e","admin-wizards-export-import-page__report-save-button",3,"appButtonClick"],["data-e2e","admin-wizards-export-import-page__report-username",1,"export-import__username"],["data-e2e","admin-wizards-export-import-page__report-content",1,"export-import__report"],[4,"ngFor","ngForOf"],["color","primary","buttonTextTranslationKey","save","type","basic-button",3,"appButtonClick"]],template:function(e,t){1&e&&(s._UZ(0,"headline",0),s.TgZ(1,"div",1),s.YNc(2,la,12,7,"div",2),s.YNc(3,ua,19,8,"div",3),s.qZA(),s.TgZ(4,"div",4),s.TgZ(5,"app-rectangle-button",5),s.NdJ("click",function(){return t.openDetails()}),s.qZA(),s.TgZ(6,"app-rectangle-button",6),s.NdJ("click",function(){return t.exportFile()}),s.qZA(),s._UZ(7,"app-button-import"),s.qZA()),2&e&&(s.xp6(2),s.Q6J("ngIf",(null==t.importErrorResponse?null:t.importErrorResponse.length)>0),s.xp6(1),s.Q6J("ngIf",!1))},directives:[Tn.a,a.O5,oa.H,sa,a.sg,xi.V],pipes:[Z.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}*[_ngcontent-%COMP%]{box-sizing:border-box}.export-import__items[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:3rem;width:calc(100% - 6rem)}.export-import__border[_ngcontent-%COMP%]{border:.1rem solid #e5e5e5;height:60rem;overflow:scroll;width:60rem}.export-import__item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;display:flex;flex-wrap:nowrap}.export-import__text[_ngcontent-%COMP%]{padding:1rem;text-align:center}.export-import__buttons[_ngcontent-%COMP%], .export-import__report[_ngcontent-%COMP%], .export-import__container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.export-import__report[_ngcontent-%COMP%]{flex-grow:5}.export-import__username[_ngcontent-%COMP%]{flex-grow:1}.export-import__save[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e})(),data:{title:"title.import"}}]},{path:"license",component:Ri,canActivate:[$t],data:{title:"title.license"}},{path:"nconnect-voice",loadChildren:()=>n.e(48501).then(n.bind(n,48501)).then(e=>e.NconnectVoiceModule)},{path:"**",redirectTo:"user",pathMatch:"full"}]},{path:"**",pathMatch:"full",redirectTo:""}]);var pa=n(48637),ha=n(76916);let ga=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e,bootstrap:[xt]}),e.\u0275inj=s.cJS({providers:[C.B,D.l,yt,Pt,It.i,L,{provide:Ot.s,useClass:Ot.s,deps:[J.K,Zt.L,Mt.v]},Rt,Ut,$t,wt,Et,Ft,pa.A2,ha.d],imports:[[ma,i.X,o.Is,b.l,_.m,f.JX,g]]}),e})()}}]);