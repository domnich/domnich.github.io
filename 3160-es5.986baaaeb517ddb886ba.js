!function(){"use strict";function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,a,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(c){s=!0,a=c}finally{try{r||null==n.return||n.return()}finally{if(s)throw a}}return o}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var a=n(e,t);if(a){var o=Object.getOwnPropertyDescriptor(a,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}}).apply(this,arguments)}function n(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkcloudya=self.webpackChunkcloudya||[]).push([[3160],{11494:function(e,t,n){n.d(t,{YE:function(){return y},nU:function(){return I},JX:function(){return O}});var i=n(37716),a=n(19238),o=n(39490),s=n(36461),l=n(72458),u=n(79765),d=n(66682),f=n(17238),h=n(38583),g=["mat-sort-header",""];function b(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"div",3),i.NdJ("@arrowPosition.start",function(){return i.CHM(n),i.oxw()._disableViewStateAnimation=!0})("@arrowPosition.done",function(){return i.CHM(n),i.oxw()._disableViewStateAnimation=!1}),i._UZ(1,"div",4),i.TgZ(2,"div",5),i._UZ(3,"div",6),i._UZ(4,"div",7),i._UZ(5,"div",8),i.qZA(),i.qZA()}if(2&e){var a=i.oxw();i.Q6J("@arrowOpacity",a._getArrowViewState())("@arrowPosition",a._getArrowViewState())("@allowChildren",a._getArrowDirectionState()),i.xp6(2),i.Q6J("@indicator",a._getArrowDirectionState()),i.xp6(1),i.Q6J("@leftPointer",a._getArrowDirectionState()),i.xp6(1),i.Q6J("@rightPointer",a._getArrowDirectionState())}}var v,_=["*"],k=new i.OlP("MAT_SORT_DEFAULT_OPTIONS"),x=(0,l.dB)((0,l.Id)(function(){return m(function e(){p(this,e)})}())),y=((v=function(e){r(n,e);var t=c(n);function n(e){var a;return p(this,n),(a=t.call(this))._defaultOptions=e,a.sortables=new Map,a._stateChanges=new u.xQ,a.start="asc",a._direction="",a.sortChange=new i.vpe,a}return m(n,[{key:"direction",get:function(){return this._direction},set:function(e){this._direction=e}},{key:"disableClear",get:function(){return this._disableClear},set:function(e){this._disableClear=(0,o.Ig)(e)}},{key:"register",value:function(e){this.sortables.set(e.id,e)}},{key:"deregister",value:function(e){this.sortables.delete(e.id)}},{key:"sort",value:function(e){this.active!=e.id?(this.active=e.id,this.direction=e.start?e.start:this.start):this.direction=this.getNextSortDirection(e),this.sortChange.emit({active:this.active,direction:this.direction})}},{key:"getNextSortDirection",value:function(e){var t,n,i;if(!e)return"";var a=null!==(n=null!==(t=null==e?void 0:e.disableClear)&&void 0!==t?t:this.disableClear)&&void 0!==n?n:!!(null===(i=this._defaultOptions)||void 0===i?void 0:i.disableClear),o=function(e,t){var n=["asc","desc"];return"desc"==e&&n.reverse(),t||n.push(""),n}(e.start||this.start,a),r=o.indexOf(this.direction)+1;return r>=o.length&&(r=0),o[r]}},{key:"ngOnInit",value:function(){this._markInitialized()}},{key:"ngOnChanges",value:function(){this._stateChanges.next()}},{key:"ngOnDestroy",value:function(){this._stateChanges.complete()}}]),n}(x)).\u0275fac=function(e){return new(e||v)(i.Y36(k,8))},v.\u0275dir=i.lG2({type:v,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[i.qOj,i.TTD]}),v),C=l.mZ.ENTERING+" "+l.yN.STANDARD_CURVE,T={indicator:(0,f.X$)("indicator",[(0,f.SB)("active-asc, asc",(0,f.oB)({transform:"translateY(0px)"})),(0,f.SB)("active-desc, desc",(0,f.oB)({transform:"translateY(10px)"})),(0,f.eR)("active-asc <=> active-desc",(0,f.jt)(C))]),leftPointer:(0,f.X$)("leftPointer",[(0,f.SB)("active-asc, asc",(0,f.oB)({transform:"rotate(-45deg)"})),(0,f.SB)("active-desc, desc",(0,f.oB)({transform:"rotate(45deg)"})),(0,f.eR)("active-asc <=> active-desc",(0,f.jt)(C))]),rightPointer:(0,f.X$)("rightPointer",[(0,f.SB)("active-asc, asc",(0,f.oB)({transform:"rotate(45deg)"})),(0,f.SB)("active-desc, desc",(0,f.oB)({transform:"rotate(-45deg)"})),(0,f.eR)("active-asc <=> active-desc",(0,f.jt)(C))]),arrowOpacity:(0,f.X$)("arrowOpacity",[(0,f.SB)("desc-to-active, asc-to-active, active",(0,f.oB)({opacity:1})),(0,f.SB)("desc-to-hint, asc-to-hint, hint",(0,f.oB)({opacity:.54})),(0,f.SB)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,f.oB)({opacity:0})),(0,f.eR)("* => asc, * => desc, * => active, * => hint, * => void",(0,f.jt)("0ms")),(0,f.eR)("* <=> *",(0,f.jt)(C))]),arrowPosition:(0,f.X$)("arrowPosition",[(0,f.eR)("* => desc-to-hint, * => desc-to-active",(0,f.jt)(C,(0,f.F4)([(0,f.oB)({transform:"translateY(-25%)"}),(0,f.oB)({transform:"translateY(0)"})]))),(0,f.eR)("* => hint-to-desc, * => active-to-desc",(0,f.jt)(C,(0,f.F4)([(0,f.oB)({transform:"translateY(0)"}),(0,f.oB)({transform:"translateY(25%)"})]))),(0,f.eR)("* => asc-to-hint, * => asc-to-active",(0,f.jt)(C,(0,f.F4)([(0,f.oB)({transform:"translateY(25%)"}),(0,f.oB)({transform:"translateY(0)"})]))),(0,f.eR)("* => hint-to-asc, * => active-to-asc",(0,f.jt)(C,(0,f.F4)([(0,f.oB)({transform:"translateY(0)"}),(0,f.oB)({transform:"translateY(-25%)"})]))),(0,f.SB)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,f.oB)({transform:"translateY(0)"})),(0,f.SB)("hint-to-desc, active-to-desc, desc",(0,f.oB)({transform:"translateY(-25%)"})),(0,f.SB)("hint-to-asc, active-to-asc, asc",(0,f.oB)({transform:"translateY(25%)"}))]),allowChildren:(0,f.X$)("allowChildren",[(0,f.eR)("* <=> *",[(0,f.IO)("@*",(0,f.pV)(),{optional:!0})])])},A=function(){var e=m(function e(){p(this,e),this.changes=new u.xQ});return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e}(),S={provide:A,deps:[[new i.FiY,new i.tp0,A]],useFactory:function(e){return e||new A}},P=(0,l.Id)(function(){return m(function e(){p(this,e)})}()),I=function(){var e=function(e){r(n,e);var t=c(n);function n(e,i,a,o,r,s,c){var l;return p(this,n),(l=t.call(this))._intl=e,l._changeDetectorRef=i,l._sort=a,l._columnDef=o,l._focusMonitor=r,l._elementRef=s,l._ariaDescriber=c,l._showIndicatorHint=!1,l._viewState={},l._arrowDirection="",l._disableViewStateAnimation=!1,l.arrowPosition="after",l._sortActionDescription="Sort",l._handleStateChanges(),l}return m(n,[{key:"sortActionDescription",get:function(){return this._sortActionDescription},set:function(e){this._updateSortActionDescription(e)}},{key:"disableClear",get:function(){return this._disableClear},set:function(e){this._disableClear=(0,o.Ig)(e)}},{key:"ngOnInit",value:function(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector('[role="button"]'),this._updateSortActionDescription(this._sortActionDescription)}},{key:"ngAfterViewInit",value:function(){var e=this;this._focusMonitor.monitor(this._elementRef,!0).subscribe(function(t){var n=!!t;n!==e._showIndicatorHint&&(e._setIndicatorHintVisible(n),e._changeDetectorRef.markForCheck())})}},{key:"ngOnDestroy",value:function(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}},{key:"_setIndicatorHintVisible",value:function(e){this._isDisabled()&&e||(this._showIndicatorHint=e,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}},{key:"_setAnimationTransitionState",value:function(e){this._viewState=e||{},this._disableViewStateAnimation&&(this._viewState={toState:e.toState})}},{key:"_toggleOnInteraction",value:function(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}},{key:"_handleClick",value:function(){this._isDisabled()||this._sort.sort(this)}},{key:"_handleKeydown",value:function(e){!this._isDisabled()&&(e.keyCode===s.L_||e.keyCode===s.K5)&&(e.preventDefault(),this._toggleOnInteraction())}},{key:"_isSorted",value:function(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}},{key:"_getArrowDirectionState",value:function(){return"".concat(this._isSorted()?"active-":"").concat(this._arrowDirection)}},{key:"_getArrowViewState",value:function(){var e=this._viewState.fromState;return(e?"".concat(e,"-to-"):"")+this._viewState.toState}},{key:"_updateArrowDirection",value:function(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}},{key:"_isDisabled",value:function(){return this._sort.disabled||this.disabled}},{key:"_getAriaSortAttribute",value:function(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}},{key:"_renderArrow",value:function(){return!this._isDisabled()||this._isSorted()}},{key:"_updateSortActionDescription",value:function(e){var t,n;this._sortButton&&(null===(t=this._ariaDescriber)||void 0===t||t.removeDescription(this._sortButton,this._sortActionDescription),null===(n=this._ariaDescriber)||void 0===n||n.describe(this._sortButton,e)),this._sortActionDescription=e}},{key:"_handleStateChanges",value:function(){var e=this;this._rerenderSubscription=(0,d.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(function(){e._isSorted()&&(e._updateArrowDirection(),("hint"===e._viewState.toState||"active"===e._viewState.toState)&&(e._disableViewStateAnimation=!0),e._setAnimationTransitionState({fromState:e._arrowDirection,toState:"active"}),e._showIndicatorHint=!1),!e._isSorted()&&e._viewState&&"active"===e._viewState.toState&&(e._disableViewStateAnimation=!1,e._setAnimationTransitionState({fromState:"active",toState:e._arrowDirection})),e._changeDetectorRef.markForCheck()})}}]),n}(P);return e.\u0275fac=function(t){return new(t||e)(i.Y36(A),i.Y36(i.sBO),i.Y36(y,8),i.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),i.Y36(a.tE),i.Y36(i.SBq),i.Y36(a.$s,8))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t._handleClick()})("keydown",function(e){return t._handleKeydown(e)})("mouseenter",function(){return t._setIndicatorHintVisible(!0)})("mouseleave",function(){return t._setIndicatorHintVisible(!1)}),2&e&&(i.uIk("aria-sort",t._getAriaSortAttribute()),i.ekj("mat-sort-header-disabled",t._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",sortActionDescription:"sortActionDescription",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[i.qOj],attrs:g,ngContentSelectors:_,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(e,t){1&e&&(i.F$t(),i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.Hsn(2),i.qZA(),i.YNc(3,b,6,6,"div",2),i.qZA()),2&e&&(i.ekj("mat-sort-header-sorted",t._isSorted())("mat-sort-header-position-before","before"==t.arrowPosition),i.uIk("tabindex",t._isDisabled()?null:0),i.xp6(3),i.Q6J("ngIf",t._renderArrow()))},directives:[h.O5],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[T.indicator,T.leftPointer,T.rightPointer,T.arrowOpacity,T.arrowPosition,T.allowChildren]},changeDetection:0}),e}(),O=function(){var e=m(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[S],imports:[[h.ez,l.BQ]]}),e}()},88738:function(e,t,n){n.d(t,{H:function(){return B}});var a=n(22238),o=n(3679),r=n(90980),s=n(79765),c=n(46782),l=n(37716),u=n(45832),d=n(29790),f=n(90500),h=n(88589),g=n(22893),b=n(74162),v=n(97597),_=n(38583),k=n(82613),x=n(98295),y=n(83166),C=n(42070),T=n(67441),A=n(18882),S=n(72458);function P(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"mat-option",20),l.NdJ("onSelectionChange",function(){var e=l.CHM(n).$implicit;return l.oxw(2).setNumberblock(e)}),l._uU(1),l.ALo(2,"nconnectPhoneNumber"),l.qZA()}if(2&e){var i=t.$implicit;l.Q6J("value",i.NUMBERROUTING_ID),l.xp6(1),l.hij(" ",l.lcZ(2,2,i)," ")}}function I(e,t){if(1&e&&(l.TgZ(0,"mat-hint",21),l._uU(1),l.qZA()),2&e){l.oxw();var n=l.MAs(13),i=l.oxw();l.xp6(1),l.AsE(" ",n.value.length,"/",i.maxExtensionLength," ")}}var O=function(e){return{maxLength:e}};function Z(e,t){if(1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e){var n=l.oxw(2);l.xp6(1),l.hij(" ",l.xi3(2,1,n.translationPrefix+".form.field.extension.error.phoneNumberTooLong",l.VKq(4,O,n.maxExtensionLength))," ")}}function M(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"div",14),l.TgZ(1,"mat-form-field",8),l.TgZ(2,"mat-label"),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"mat-select",15),l.NdJ("listboxScrolled",function(){return l.CHM(n),l.oxw().loadNumberblockEntries()}),l.ALo(6,"translate"),l.YNc(7,P,3,4,"mat-option",16),l.qZA(),l.qZA(),l.TgZ(8,"mat-form-field",17),l.TgZ(9,"mat-label"),l._uU(10),l.ALo(11,"translate"),l.qZA(),l._UZ(12,"input",18,19),l.YNc(14,I,2,2,"mat-hint",11),l.YNc(15,Z,3,6,"mat-error",12),l.qZA(),l.qZA()}if(2&e){var i=l.oxw();l.xp6(3),l.Oqu(l.lcZ(4,6,i.translationPrefix+".form.field.numberblock.label")),l.xp6(2),l.Q6J("placeholder",l.lcZ(6,8,i.translationPrefix+".form.field.numberblock.placeholder")),l.xp6(2),l.Q6J("ngForOf",i.mappedNumberblocks),l.xp6(3),l.Oqu(l.lcZ(11,10,i.translationPrefix+".form.field.extension.label")),l.xp6(4),l.Q6J("ngIf",i.maxExtensionLength),l.xp6(1),l.Q6J("ngIf",null==i.extension.errors?null:i.extension.errors.phoneNumberTooLong)}}function w(e,t){if(1&e&&(l.TgZ(0,"mat-form-field",8),l.TgZ(1,"mat-label"),l._uU(2),l.ALo(3,"translate"),l.qZA(),l._UZ(4,"input",22),l.qZA()),2&e){var n=l.oxw();l.xp6(2),l.Oqu(l.lcZ(3,1,n.translationPrefix+".form.field.non_editable_prefix.label"))}}function N(e,t){if(1&e&&(l.TgZ(0,"mat-hint",21),l._uU(1),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.AsE(" ",n.backupNumber.value.length,"/",n.maxPhoneNumberLength," ")}}function E(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"admin.nconnect.common_form.error.field_required")," "))}function L(e,t){if(1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e){var n=l.oxw();l.xp6(1),l.hij(" ",l.xi3(2,1,"admin.nconnect.common_form.error.phoneNumberTooLong",l.VKq(4,O,n.maxPhoneNumberLength))," ")}}function U(e,t){1&e&&(l.TgZ(0,"mat-error"),l._uU(1),l.ALo(2,"translate"),l.qZA()),2&e&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}var D,B=((D=function(){function e(t,n,i,a,o,r,c){p(this,e),this.snackBarService=t,this.dialogRef=n,this.translateService=i,this.nconnectModalService=a,this.nconnectPhoneNumberPipe=o,this.numberblockDataService=r,this.data=c,this.currentNumberblockSelectionPage=1,this.canLoadMoreNumberblockEntries=!0,this.ngUnsubscribe=new s.xQ,this.isEditModal=!1,this.maxPhoneNumberLength=20,this.mappedNumberblocks=[],this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.initNumberblockSelectionField()}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm(),this.isEditModal&&(this.addStartingPlusCharacterToBackupNumber(),this.numberblock.setValidators(null))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"cancelClick",value:function(e){this.dialogRef.close(e)}},{key:"onSubmit",value:function(e){this.cancelClick(e)}},{key:"setNumberblock",value:function(e){this.numberblock.setValue(this.nconnectPhoneNumberPipe.transform(e,null,!0)),this.setExtensionValidatorLength()}},{key:"setExtensionValidatorLength",value:function(){this.maxExtensionLength=this.maxPhoneNumberLength-this.numberblock.value.toString().length,this.extension.setValidators([r.b.maxPhoneNumberLength(this.maxExtensionLength),o.kI.pattern(/^[0-9]*$/)]),this.extension.updateValueAndValidity()}},{key:"loadNumberblockEntries",value:function(){var e=this;this.canLoadMoreNumberblockEntries&&this.numberblockDataService.getMappedNumberblocks("",this.currentNumberblockSelectionPage).pipe((0,c.R)(this.ngUnsubscribe)).subscribe(function(t){t.meta.currentPage<=t.meta.pageCount?(e.mappedNumberblocks=[].concat(i(e.mappedNumberblocks),i(t.data)),e.currentNumberblockSelectionPage++):e.canLoadMoreNumberblockEntries=!1})}},{key:"addStartingPlusCharacterToBackupNumber",value:function(){var e=this.backupNumber.value.toString();this.backupNumber.setValue(e.replace(/^00/g,"+")),e.includes("+")||this.backupNumber.setValue("+".concat(e))}},{key:"initNumberblockSelectionField",value:function(){var e=this.data.allMappedNumberblocks;e?(this.mappedNumberblocks=e,this.currentNumberblockSelectionPage++):this.loadNumberblockEntries()}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}},{key:"initModal",value:function(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}},{key:"createFormControls",value:function(){this.name=new o.NI(this.data.name||""),this.numberblock=new o.NI("",o.kI.required),this.extension=new o.NI("",[r.b.maxPhoneNumberLength(this.maxExtensionLength),o.kI.pattern(/^[0-9]*$/)]),this.isPrefixBased=new o.NI(this.data.isPrefixBased||0,o.kI.required),this.backupNumber=new o.NI(this.data.backupNumber||"",[o.kI.required,r.b.international_e123(),r.b.maxPhoneNumberLength(this.maxPhoneNumberLength)]),this.numberRoutingId=new o.NI(this.data.numberRoutingId),this.nonEditablePrefix=new o.NI({value:this.data.prefix,disabled:!0})}},{key:"createForm",value:function(){this.formGroup=new o.cw({name:this.name,numberblock:this.numberblock,extension:this.extension,isPrefixBased:this.isPrefixBased,backupNumber:this.backupNumber,numberRoutingId:this.numberRoutingId,nonEditablePrefix:this.nonEditablePrefix})}}]),e}()).\u0275fac=function(e){return new(e||D)(l.Y36(u.c),l.Y36(a.so),l.Y36(d.sK),l.Y36(f.K),l.Y36(h.E),l.Y36(g.C),l.Y36(a.WI))},D.\u0275cmp=l.Xpm({type:D,selectors:[["backup-number-modal"]],decls:25,vars:26,consts:[["data-e2e","admin-backup-number-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-backup-number-modal-fragment__name--input",3,"formControl"],["class","backup-number-modal__block-selection",4,"ngIf","ngIfElse"],["showNonEditablePrefix",""],["formControlName","isPrefixBased",1,"backup-number-modal__routing-type"],["radioGroup","matRadioGroup"],["data-e2e","admin-backup-number-modal-fragment__routing-type--radio-phone",1,"backup-number-modal__routing-type__radio-button",3,"value"],["data-e2e","admin-backup-number-modal-fragment__routing-type--radio-prefix",1,"backup-number-modal__routing-type__radio-button",3,"value"],["appearance","fill"],["formControlName","backupNumber","matInput","","type","phone","data-e2e","admin-backup-number-modal-fragment__backup-number--input",3,"placeholder"],["backupNumberField",""],["align","end",4,"ngIf"],[4,"ngIf"],["e2e","admin-backup-number-modal-fragment",1,"backup-number-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],[1,"backup-number-modal__block-selection"],["formControlName","numberRoutingId","data-e2e","admin-backup-number-modal-fragment__number-block",3,"placeholder","listboxScrolled"],["data-e2e","admin-backup-number-modal-fragment__number-block-option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","fill",1,"backup-number-modal__block-selection__extension"],["autocomplete","off","formControlName","extension","matInput","","data-e2e","admin-backup-number-modal-fragment__extension--input"],["extensionField",""],["data-e2e","admin-backup-number-modal-fragment__number-block-option",3,"value","onSelectionChange"],["align","end"],["formControlName","nonEditablePrefix","matInput","","disabled","","data-e2e","admin-backup-number-modal-fragment__prefix--input"]],template:function(e,t){if(1&e&&(l.TgZ(0,"nconnect-voice-modal",0),l.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),l._UZ(1,"name-input-field",1),l.YNc(2,M,16,12,"div",2),l.YNc(3,w,5,3,"ng-template",null,3,l.W1O),l.TgZ(5,"mat-radio-group",4,5),l.TgZ(7,"mat-radio-button",6),l._uU(8),l.ALo(9,"translate"),l.qZA(),l.TgZ(10,"mat-radio-button",7),l._uU(11),l.ALo(12,"translate"),l.qZA(),l.qZA(),l.TgZ(13,"mat-form-field",8),l.TgZ(14,"mat-label"),l._uU(15),l.ALo(16,"translate"),l.qZA(),l._UZ(17,"input",9,10),l.ALo(19,"translate"),l.YNc(20,N,2,2,"mat-hint",11),l.YNc(21,E,3,3,"mat-error",12),l.YNc(22,L,3,6,"mat-error",12),l.YNc(23,U,3,3,"mat-error",12),l.qZA(),l.TgZ(24,"footer-actions",13),l.NdJ("cancelClick",function(){return t.cancelClick()}),l.qZA(),l.qZA()),2&e){var n=l.MAs(4);l.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),l.xp6(1),l.Q6J("formControl",t.name),l.xp6(1),l.Q6J("ngIf",!t.isEditModal)("ngIfElse",n),l.xp6(5),l.Q6J("value",0),l.xp6(1),l.hij(" ",l.lcZ(9,18,t.translationPrefix+".routing_type.phone")," "),l.xp6(2),l.Q6J("value",1),l.xp6(1),l.hij(" ",l.lcZ(12,20,t.translationPrefix+".routing_type.prefix")," "),l.xp6(4),l.Oqu(l.lcZ(16,22,t.translationPrefix+".form.field.backup_number.label")),l.xp6(2),l.Q6J("placeholder",l.lcZ(19,24,t.translationPrefix+".form.field.backup_number.placeholder")),l.xp6(3),l.Q6J("ngIf",t.maxPhoneNumberLength),l.xp6(1),l.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.required),l.xp6(1),l.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.phoneNumberTooLong),l.xp6(1),l.Q6J("ngIf",null==t.backupNumber.errors?null:t.backupNumber.errors.invalidPhoneNumber),l.xp6(1),l.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid)}},directives:[b.F,o.JL,o.sg,v.Y,o.JJ,o.oH,_.O5,k.VQ,o.u,k.U0,x.KE,x.hX,o.Fj,y.Nt,C.c,T.gD,A.X,_.sg,S.ey,x.bx,x.TO],pipes:[d.X$,h.E],styles:[".backup-number-modal__block-selection[_ngcontent-%COMP%]{display:flex}.backup-number-modal__block-selection__extension[_ngcontent-%COMP%]{margin-left:2rem;max-width:10rem}.backup-number-modal__routing-type[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:2rem}.backup-number-modal__routing-type__radio-button[_ngcontent-%COMP%]{font-weight:bold}.backup-number-modal__routing-type__radio-button[_ngcontent-%COMP%]:first-of-type{margin-right:2rem}.backup-number-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),D)},15017:function(e,t,n){n.d(t,{_:function(){return P}});var i=n(79765),a=n(45435),o=n(46782),r=n(88002),s=n(88738),c=n(37716),l=n(8307),u=n(22238),d=n(76710),f=n(19885),h=n(38538),g=n(83282),b=n(48843),v=n(22893),_=n(134),k=n(81756),x=n(79764),y=n(29790),C=n(38583),T=["customTypeTemplate"];function A(e,t){if(1&e&&(c._uU(0),c.ALo(1,"translate"),c.ALo(2,"translate")),2&e){var n=t.element,i=c.oxw();c.hij(" ",n.BACKUPNUMBER_IS_PREFIX?c.lcZ(1,1,i.translationPrefix+".routing_type.prefix"):c.lcZ(2,3,i.translationPrefix+".routing_type.phone")," ")}}var S,P=((S=function(){function e(t,n,a,o,r,s,c,l,u){p(this,e),this.router=t,this.dialog=n,this.backupNumberDataService=a,this.dataTableLazyLoadingService=o,this.dataTableService=r,this.dataTableMessageService=s,this.nconnectAccountSelectionService=c,this.numberblockDataService=l,this.nconnectShortcutsService=u,this.ngUnsubscribe=new i.xQ,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.numberblockSelectionLoaded=!1,this.componentTranslationKey="backup_number",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data")}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(){e.backupNumberData$=e.getInitialTableData(),e.getAllMappedNumberblocks()}),this.listenForNconnectShortcutEvents()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.backupNumberDataService.getBackupNumbers("",this.dataTableLazyLoadingService.currentPage))}},{key:"deleteBackupNumber",value:function(e){this.dataTableService.deleteTableItem(this.backupNumberDataService.deleteBackupNumber(e),e.ID,this.componentTranslationKey)}},{key:"editBackupNumber",value:function(e){var t=this;this.openBackupNumberModal(e).pipe((0,a.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(n){t.dataTableService.editTableItem(t.backupNumberDataService.updateBackupNumber(e,n),t.componentTranslationKey)})}},{key:"createBackupNumber",value:function(){var e=this;this.openBackupNumberModal().pipe((0,a.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(t){e.dataTableService.createTableItem(e.backupNumberDataService.createBackupNumber(t),e.componentTranslationKey)})}},{key:"getAllMappedNumberblocks",value:function(){var e=this;this.numberblockDataService.getMappedNumberblocks().pipe((0,r.U)(function(e){return e.data}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(t){e.allMappedNumberblocks=t,e.numberblockSelectionLoaded=!0})}},{key:"openBackupNumberModal",value:function(e){return this.dialog.open(s.H,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",name:null==e?void 0:e.NAME,backupNumberId:null==e?void 0:e.ID,prefix:null==e?void 0:e.PREFIX,backupNumber:null==e?void 0:e.BACKUPNUMBER,isPrefixBased:null==e?void 0:e.BACKUPNUMBER_IS_PREFIX,numberRoutingId:null==e?void 0:e.NUMBERROUTING_ID,allMappedNumberblocks:this.allMappedNumberblocks,component:this.componentTranslationKey}}}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.backupNumberDataService.getBackupNumbers())}},{key:"listenForNconnectShortcutEvents",value:function(){var e=this;this.nconnectShortcutsService.addButtonClicked$.pipe((0,a.h)(function(t){return t===e.componentTranslationKey}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(){e.createBackupNumber(),e.nconnectShortcutsService.resetNconnectComponent()})}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME"},{title:"".concat(this.translationPrefix,".table.column.prefix"),columnNameId:"PREFIX"},{title:"".concat(this.translationPrefix,".table.column.backup_number"),columnNameId:"BACKUPNUMBER"},{title:"".concat(this.translationPrefix,".table.column.type"),columnNameId:"BACKUPNUMBER_IS_PREFIX",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||S)(c.Y36(l.F0),c.Y36(u.uw),c.Y36(d.o),c.Y36(f.Y),c.Y36(h.n),c.Y36(g.D),c.Y36(b.c),c.Y36(v.C),c.Y36(_.f))},S.\u0275cmp=c.Xpm({type:S,selectors:[["backup-number"]],viewQuery:function(e,t){var n;1&e&&c.Gf(T,7),2&e&&c.iGM(n=c.CRH())&&(t.customTypeTemplate=n.first)},decls:7,vars:11,consts:[[3,"title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customTypeTemplate",""]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createBackupNumber()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deleteBackupNumber(e)})("editButtonClicked",function(e){return t.editBackupNumber(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,A,3,5,"ng-template",null,2,c.W1O),c.qZA()),2&e&&(c.Q6J("title",c.lcZ(1,5,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,7,t.backupNumberData$))("isLazyLoadingPossible",c.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[k.Z,x.Q],pipes:[y.X$,C.Ov],encapsulation:2}),S)},92393:function(e,t,n){n.d(t,{F:function(){return A}});var i=n(3679),a=n(22238),o=n(90980),r=n(37716),s=n(45832),c=n(37130),l=n(90500),u=n(74162),d=n(97597),f=n(38583),h=n(42070),g=n(82613),b=n(98295),v=n(83166),_=n(29790);function k(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"mat-radio-group",5),r.NdJ("change",function(e){return r.CHM(n),r.oxw().changeInboundBlacklistBlockType(e)}),r.TgZ(1,"mat-radio-button",6),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.TgZ(4,"mat-radio-button",7),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.qZA()}if(2&e){var i=r.oxw();r.xp6(1),r.Q6J("checked","prefix"===i.inboundBlacklistBlockType),r.xp6(1),r.hij(" ",r.lcZ(3,4,i.translationPrefix+".form.field.prefix.label")," "),r.xp6(2),r.Q6J("checked","anonymous"===i.inboundBlacklistBlockType),r.xp6(1),r.hij(" ",r.lcZ(6,6,i.translationPrefix+".form.field.prefix.anonymous")," ")}}function x(e,t){if(1&e&&(r.TgZ(0,"mat-hint"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e){var n=r.oxw(2);r.xp6(1),r.hij(" ",r.lcZ(2,1,n.translationPrefix+".form.field.prefix.hint")," ")}}function y(e,t){1&e&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"translate"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}function C(e,t){if(1&e&&(r.TgZ(0,"mat-form-field",8),r.TgZ(1,"mat-label"),r._uU(2),r.ALo(3,"translate"),r.qZA(),r._UZ(4,"input",9),r.YNc(5,x,3,3,"mat-hint",10),r.YNc(6,y,3,3,"mat-error",10),r.qZA()),2&e){var n=r.oxw();r.xp6(2),r.hij(" ",r.lcZ(3,3,n.translationPrefix+".form.field.prefix.label")," "),r.xp6(3),r.Q6J("ngIf",!n.isEditModal),r.xp6(1),r.Q6J("ngIf",null==n.prefix.errors?null:n.prefix.errors.isInvalidPrefix)}}var T,A=((T=function(){function e(t,n,i,a,o,r){p(this,e),this.snackBarService=t,this.blacklistProfileEntryDataService=n,this.dialogRef=i,this.data=a,this.formBuilder=o,this.nconnectModalService=r,this.isEditModal=!1,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.blacklistDirection="OUT",this.inboundBlacklistBlockType="prefix",this.hasAnonymousBlacklistEntry$=this.blacklistProfileEntryDataService.hasBlacklistProfileAnonymousEntry$}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm(),this.blacklistDirection=this.data.blacklistDirection}},{key:"onSubmit",value:function(e){this.cancelClick(e)}},{key:"cancelClick",value:function(e){this.dialogRef.close(e)}},{key:"changeInboundBlacklistBlockType",value:function(e){this.inboundBlacklistBlockType=e.value,"anonymous"===this.inboundBlacklistBlockType?(this.prefix.clearValidators(),this.prefix.markAsDirty(),this.prefix.setValue("anonymous")):this.restorePrefixFieldValidation()}},{key:"restorePrefixFieldValidation",value:function(){this.prefix.reset(),this.prefix.setValidators(this.getPrefixValidators()),this.prefix.updateValueAndValidity()}},{key:"getPrefixValidators",value:function(){return[i.kI.required,o.b.isInternationalPrefix(),o.b.maxPhoneNumberLength(20)]}},{key:"initModal",value:function(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle(this.data.component,this.isEditModal)}},{key:"createFormControls",value:function(){this.name=new i.NI(this.data.NAME||""),this.prefix=new i.NI({value:this.data.PREFIX||"",disabled:this.isEditModal&&"anonymous"===this.data.PREFIX},this.getPrefixValidators())}},{key:"createForm",value:function(){this.formGroup=new i.cw({NAME:this.name,PREFIX:this.prefix})}}]),e}()).\u0275fac=function(e){return new(e||T)(r.Y36(s.c),r.Y36(c.E),r.Y36(a.so),r.Y36(a.WI),r.Y36(i.qu),r.Y36(l.K))},T.\u0275cmp=r.Xpm({type:T,selectors:[["blacklist-entry-modal"]],decls:6,vars:10,consts:[["data-e2e","admin-blacklist-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-blacklist-modal-fragment__name--input",3,"formControl"],["class","blacklist-entry-modal__type-selection",3,"change",4,"ngIf"],["appearance","fill",4,"ngIf"],["btnType","raised-button-submit","e2e","admin-blacklist-modal-fragment",1,"blacklist-entry-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],[1,"blacklist-entry-modal__type-selection",3,"change"],["value","prefix","data-e2e","admin-blacklist-modal-fragment__prefix-radio--button",1,"blacklist-entry-modal__radio-button--prefix",3,"checked"],["value","anonymous","data-e2e","admin-blacklist-modal-fragment__anonymous-radio--button",3,"checked"],["appearance","fill"],["autocomplete","off","formControlName","PREFIX","matInput","","data-e2e","admin-blacklist-modal-fragment__prefix--input"],[4,"ngIf"]],template:function(e,t){1&e&&(r.TgZ(0,"nconnect-voice-modal",0),r.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),r._UZ(1,"name-input-field",1),r.YNc(2,k,7,8,"mat-radio-group",2),r.ALo(3,"async"),r.YNc(4,C,7,5,"mat-form-field",3),r.TgZ(5,"footer-actions",4),r.NdJ("cancelClick",function(){return t.cancelClick()}),r.qZA(),r.qZA()),2&e&&(r.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),r.xp6(1),r.Q6J("formControl",t.name),r.xp6(1),r.Q6J("ngIf","IN"===t.blacklistDirection&&!r.lcZ(3,8,t.hasAnonymousBlacklistEntry$)),r.xp6(2),r.Q6J("ngIf","prefix"===t.inboundBlacklistBlockType),r.xp6(1),r.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[u.F,i.JL,i.sg,d.Y,i.JJ,i.oH,f.O5,h.c,g.VQ,g.U0,b.KE,b.hX,i.Fj,v.Nt,i.u,b.bx,b.TO],pipes:[f.Ov,_.X$],styles:[".blacklist-entry-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}.blacklist-entry-modal__type-selection[_ngcontent-%COMP%]{margin:1rem 0}.blacklist-entry-modal__radio-button--prefix[_ngcontent-%COMP%]{margin-right:1rem}"]}),T)},26731:function(e,t,n){n.d(t,{L:function(){return b}});var i,a=n(3679),o=n(22238),r=n(37716),s=n(45832),c=n(90500),l=n(74162),u=n(97597),d=n(82613),f=n(98295),h=n(42070),g=n(29790),b=((i=function(){function e(t,n,i,a,o){p(this,e),this.snackBarService=t,this.dialogRef=n,this.data=i,this.formBuilder=a,this.nconnectModalService=o,this.isEditModal=!1,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey)}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm()}},{key:"onSubmit",value:function(e){this.cancelClick(e)}},{key:"cancelClick",value:function(e){this.dialogRef.close(e)}},{key:"initModal",value:function(){this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle(this.data.component,this.isEditModal)}},{key:"createFormControls",value:function(){this.name=new a.NI(this.data.NAME||""),this.direction=new a.NI({value:this.data.DIRECTION||"IN",disabled:this.isEditModal},a.kI.required)}},{key:"createForm",value:function(){this.formGroup=new a.cw({NAME:this.name,DIRECTION:this.direction})}}]),e}()).\u0275fac=function(e){return new(e||i)(r.Y36(s.c),r.Y36(o.so),r.Y36(o.WI),r.Y36(a.qu),r.Y36(c.K))},i.\u0275cmp=r.Xpm({type:i,selectors:[["blacklist-modal"]],decls:14,vars:15,consts:[["data-e2e","admin-blacklist-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-blacklist-modal-fragment__name--input",3,"formControl"],["formControlName","DIRECTION",1,"blacklist-profile-modal__direction"],["radioGroup","matRadioGroup"],[1,"blacklist-profile-modal__direction__label"],["data-e2e","admin-blacklist-modal-fragment__inbound-direction-radio--button","value","IN",1,"blacklist-profile-modal__direction__button"],["data-e2e","admin-blacklist-modal-fragment__outbound-direction-radio--button","value","OUT",1,"blacklist-profile-modal__direction__button"],["btnType","raised-button-submit","e2e","admin-blacklist-modal-fragment",1,"blacklist-profile-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"]],template:function(e,t){1&e&&(r.TgZ(0,"nconnect-voice-modal",0),r.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),r._UZ(1,"name-input-field",1),r.TgZ(2,"mat-radio-group",2,3),r.TgZ(4,"mat-label",4),r._uU(5),r.ALo(6,"translate"),r.qZA(),r.TgZ(7,"mat-radio-button",5),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"mat-radio-button",6),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.qZA(),r.TgZ(13,"footer-actions",7),r.NdJ("cancelClick",function(){return t.cancelClick()}),r.qZA(),r.qZA()),2&e&&(r.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),r.xp6(1),r.Q6J("formControl",t.name),r.xp6(4),r.hij(" ",r.lcZ(6,9,t.translationPrefix+".form.field.direction.label")," "),r.xp6(3),r.hij(" ",r.lcZ(9,11,t.translationPrefix+".form.field.direction.option.inbound")," "),r.xp6(3),r.hij(" ",r.lcZ(12,13,t.translationPrefix+".form.field.direction.option.outbound")," "),r.xp6(2),r.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[l.F,a.JL,a.sg,u.Y,a.JJ,a.oH,d.VQ,a.u,f.hX,d.U0,h.c],pipes:[g.X$],styles:[".blacklist-profile-modal__direction[_ngcontent-%COMP%]{display:flex;flex-direction:column}.blacklist-profile-modal__direction__label[_ngcontent-%COMP%]{margin-bottom:1rem}.blacklist-profile-modal__direction__button[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:.5rem}.blacklist-profile-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),i)},71621:function(e,t,n){n.d(t,{y:function(){return I}});var i,a=n(45435),o=n(43190),r=n(46782),s=n(79765),c=n(25917),l=n(92393),u=n(37716),d=n(22238),f=n(8307),h=n(47444),g=n(5882),b=n(37842),v=n(37130),_=n(45832),k=n(38538),x=n(83282),y=n(19885),C=n(48843),T=n(81756),A=n(79764),S=n(38583),P=["customCellTemplate"],I=((i=function(){function e(t,n,i,a,o,r,l,u,d,m,f,h){p(this,e),this.dialog=t,this.route=n,this.router=i,this.nconnectItemProviderService=a,this.confirmDialogsService=o,this.blacklistProfileDataService=r,this.blacklistProfileEntryDataService=l,this.snackBarService=u,this.dataTableService=d,this.dataTableMessageService=m,this.dataTableLazyLoadingService=f,this.nconnectAccountSelectionService=h,this.ngUnsubscribe=new s.xQ,this.isCustomBlacklistProfile=!1,this.blacklistDirection="OUT",this.componentTranslationKey="blacklist_profile_entry",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle$=(0,c.of)("".concat(this.translationPrefix,".title")),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(function(e){return!!e}),(0,o.w)(function(){return e.route.params}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){!t.id||(e.selectedBlacklistProfileId=Number(t.id),e.setBlacklistProfileEntryView(e.selectedBlacklistProfileId),e.blacklistProfileEntryData$=e.getInitialTableData(e.selectedBlacklistProfileId))}),this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$,this.tableConfig=this.getTableConfig(),this.blacklistProfileEntryDataService.blacklistProfileEntryDataError$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(function(){return e.router.navigate(["../"],{relativeTo:e.route})})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.blacklistProfileEntryDataService.getBlacklistProfileEntries(this.selectedBlacklistProfileId,"",this.dataTableLazyLoadingService.currentPage))}},{key:"deleteBlacklistProfileEntry",value:function(e){this.dataTableService.deleteTableItem(this.blacklistProfileEntryDataService.deleteBlacklistProfileEntry(e),e.ID,this.componentTranslationKey)}},{key:"editBlacklistProfileEntry",value:function(e){var t=this;this.openBlacklistProfileEntryModal(e).pipe((0,a.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(n){t.dataTableService.editTableItem(t.blacklistProfileEntryDataService.updateBlacklistProfileEntry(e,n),t.componentTranslationKey)})}},{key:"createBlacklistProfileEntry",value:function(){var e=this;this.openBlacklistProfileEntryModal().pipe((0,a.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.dataTableService.createTableItem(e.blacklistProfileEntryDataService.createBlacklistProfileEntry(t,e.selectedBlacklistProfileId),e.componentTranslationKey)})}},{key:"getInitialTableData",value:function(e){return this.dataTableService.getInitialTableData(this.blacklistProfileEntryDataService.getBlacklistProfileEntries(e))}},{key:"setBlacklistProfileEntryView",value:function(e){var t=this;this.nconnectItemProviderService.nconnectItemNameAvailableFromNavigation?this.nconnectItemProviderService.nconnectItem$.pipe((0,r.R)(this.ngUnsubscribe)).subscribe(function(e){t.setBlacklistProfileState(e)}):this.blacklistProfileDataService.getBlacklistProfile(e).pipe((0,r.R)(this.ngUnsubscribe)).subscribe(function(e){t.nconnectItemProviderService.setNconnectItemName(e),t.setBlacklistProfileState(e)})}},{key:"setBlacklistProfileState",value:function(e){this.blacklistDirection=e.DIRECTION,this.isCustomBlacklistProfile=!!e.CUSTOMER_ID}},{key:"openBlacklistProfileEntryModal",value:function(e){return this.dialog.open(l.F,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",NAME:null==e?void 0:e.NAME,PREFIX:null==e?void 0:e.PREFIX,component:this.componentTranslationKey,blacklistDirection:this.blacklistDirection}}}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME"},{title:"".concat(this.translationPrefix,".table.column.prefix"),columnNameId:"PREFIX"},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||i)(u.Y36(d.uw),u.Y36(f.gz),u.Y36(f.F0),u.Y36(h.U),u.Y36(g.U),u.Y36(b.U),u.Y36(v.E),u.Y36(_.c),u.Y36(k.n),u.Y36(x.D),u.Y36(y.Y),u.Y36(C.c))},i.\u0275cmp=u.Xpm({type:i,selectors:[["blacklist-item"]],viewQuery:function(e,t){var n;1&e&&u.Gf(P,7),2&e&&u.iGM(n=u.CRH())&&(t.customCellTemplate=n.first)},decls:5,vars:14,consts:[[3,"showActionButton","title","addButtonClicked"],[3,"dataTableSourceInput","hideAllDeleteButtons","hideAllEditButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"]],template:function(e,t){1&e&&(u.TgZ(0,"admin-list-header",0),u.NdJ("addButtonClicked",function(){return t.createBlacklistProfileEntry()}),u.ALo(1,"async"),u.qZA(),u.TgZ(2,"data-table",1),u.NdJ("deleteButtonClicked",function(e){return t.deleteBlacklistProfileEntry(e)})("editButtonClicked",function(e){return t.editBlacklistProfileEntry(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),u.ALo(3,"async"),u.ALo(4,"async"),u.qZA()),2&e&&(u.Q6J("showActionButton",t.isCustomBlacklistProfile)("title",u.lcZ(1,8,t.pageTitle$)),u.xp6(2),u.Q6J("dataTableSourceInput",u.lcZ(3,10,t.blacklistProfileEntryData$))("hideAllDeleteButtons",!t.isCustomBlacklistProfile)("hideAllEditButtons",!t.isCustomBlacklistProfile)("isLazyLoadingPossible",u.lcZ(4,12,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[T.Z,A.Q],pipes:[S.Ov],encapsulation:2}),i)},39539:function(e,t,n){n.d(t,{e:function(){return j}});var i=n(26731),a=n(45435),o=n(46782),r=n(68307),s=n(43190),c=n(88002),l=n(79765),u=n(37716),d=n(47444),f=n(8307),h=n(22238),g=n(5882),b=n(37842),v=n(38538),_=n(45832),k=n(83282),x=n(19885),y=n(48843),C=n(134),T=n(81756),A=n(79764),S=n(38583),P=n(42735),I=n(3679),O=n(78023),Z=n(29790),M=n(15761),w=n(16891),N=["customNameTemplate"],E=["customTypeTemplate"],L=["customButtonTemplate"],U=["customEntryAmountTemplate"],D=["customBlacklistDirectionTemplate"];function B(e,t){if(1&e&&(u.ynx(0),u.TgZ(1,"div",9),u._uU(2),u.qZA(),u.BQk()),2&e){var n=u.oxw().element;u.xp6(2),u.hij(" ",n.NAME," ")}}function q(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"inline-edit",10),u.NdJ("inputChanged",function(e){u.CHM(n);var t=u.oxw().element;return u.oxw().updateBlacklistProfileName(t,e)})("ngModelChange",function(e){return u.CHM(n),u.oxw().element.NAME=e}),u.qZA()}if(2&e){var i=u.oxw().element;u.Q6J("ngModel",i.NAME)}}function R(e,t){if(1&e&&(u.YNc(0,B,3,1,"ng-container",7),u.YNc(1,q,1,1,"ng-template",null,8,u.W1O)),2&e){var n=t.element,i=u.MAs(2);u.Q6J("ngIf",!n.CUSTOMER_ID)("ngIfElse",i)}}function F(e,t){1&e&&(u._uU(0),u.ALo(1,"blacklistDirection")),2&e&&u.hij(" ",u.lcZ(1,1,t.element.DIRECTION)," ")}function Y(e,t){if(1&e&&(u.ynx(0),u._uU(1),u.BQk()),2&e){var n=t.element;u.xp6(1),u.hij(" ",+n.entryAmount||"-"," ")}}function J(e,t){1&e&&(u._uU(0),u.ALo(1,"tableItemType")),2&e&&u.hij(" ",u.lcZ(1,1,t.element.CUSTOMER_ID)," ")}function Q(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"app-button",13),u.NdJ("appButtonClick",function(){u.CHM(n);var e=u.oxw().element,t=u.oxw();return e.isUsed?"":t.deleteBlacklistProfile(e)}),u.qZA()}if(2&e){var i=u.oxw().element,a=u.oxw();u.Q6J("iconFill",i.isUsed?"grey-color":"button-color")("hoverTextTranslationKey",i.isUsed?a.translationPrefix+".table.hoverbox_hint.delete_disabled_for_custom_blacklist":"")("isHoverboxVisible",i.isUsed)}}function z(e,t){if(1&e){var n=u.EpF();u.YNc(0,Q,1,3,"app-button",11),u.TgZ(1,"app-button",12),u.NdJ("appButtonClick",function(){var e=u.CHM(n).element;return u.oxw().goToBlacklistProfileEntryPage(e)}),u.qZA()}2&e&&u.Q6J("ngIf",t.element.CUSTOMER_ID)}var $,j=(($=function(){function e(t,n,i,a,o,r,s,c,u,d,m,f){p(this,e),this.nconnectItemProviderService=t,this.route=n,this.router=i,this.dialog=a,this.confirmDialogsService=o,this.blacklistProfileDataService=r,this.dataTableService=s,this.snackBarService=c,this.dataTableMessageService=u,this.dataTableLazyLoadingService=d,this.nconnectAccountSelectionService=m,this.nconnectShortcutsService=f,this.ngUnsubscribe=new l.xQ,this.componentTranslationKey="blacklist_profile",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(){e.blacklistProfileData$=e.getInitialTableData()}),this.listenForNconnectShortcutEvents()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.blacklistProfileDataService.getBlacklistProfiles("",this.dataTableLazyLoadingService.currentPage))}},{key:"goToBlacklistProfileEntryPage",value:function(e){this.nconnectItemProviderService.setNconnectItem(e),this.router.navigate(["../".concat(e.ID)],{relativeTo:this.route})}},{key:"deleteBlacklistProfile",value:function(e){this.dataTableService.deleteTableItem(this.blacklistProfileDataService.deleteBlacklistProfile(e.ID),e.ID,this.componentTranslationKey)}},{key:"updateBlacklistProfileName",value:function(e,t){var n=this;if(e.NAME!==t){var i=e;i.NAME=t,this.snackBarService.open("admin.nconnect.snackbar_action.name_update.init"),this.blacklistProfileDataService.updateBlacklistProfile(i).pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(){n.snackBarService.openInfo("admin.nconnect.snackbar_action.name_update.success",!0)},function(e){n.snackBarService.openInfo("admin.nconnect.snackbar_action.name_update.error: ".concat(e),!0)})}}},{key:"createBlacklistProfile",value:function(){var e=this,t="create";this.openBlacklistProfileModal().pipe((0,a.h)(function(e){return!!e}),(0,r.b)(function(){e.dataTableMessageService.showDataTableSnackbar(t,"init",e.componentTranslationKey)}),(0,s.w)(function(t){return e.blacklistProfileDataService.createBlacklistProfile(t)}),(0,c.U)(function(e){return e.data[0]}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(n){n&&(e.goToBlacklistProfileEntryPage(n),e.dataTableMessageService.showDataTableSnackbar(t,"success",e.componentTranslationKey))},function(n){e.dataTableMessageService.showDataTableSnackbar(t,"error",e.componentTranslationKey,n)})}},{key:"openBlacklistProfileModal",value:function(){return this.dialog.open(i.L,this.getDialogData()).afterClosed()}},{key:"getDialogData",value:function(){return{data:{type:"create",component:this.componentTranslationKey}}}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.blacklistProfileDataService.getBlacklistProfiles())}},{key:"listenForNconnectShortcutEvents",value:function(){var e=this;this.nconnectShortcutsService.addButtonClicked$.pipe((0,a.h)(function(t){return t===e.componentTranslationKey}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(){e.createBlacklistProfile(),e.nconnectShortcutsService.resetNconnectComponent()})}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME",highlighted:!0,customCellTemplate:this.customNameTemplate,columnSize:"large"},{title:"".concat(this.translationPrefix,".table.column.direction"),columnNameId:"DIRECTION",customCellTemplate:this.customBlacklistDirectionTemplate},{title:"".concat(this.translationPrefix,".table.column.entries"),columnNameId:"entryAmount",customCellTemplate:this.customEntryAmountTemplate},{title:"".concat(this.translationPrefix,".table.column.type"),columnNameId:"IS_DEFAULT",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons",customButtonTemplate:this.customButtonTemplate}]}}]),e}()).\u0275fac=function(e){return new(e||$)(u.Y36(d.U),u.Y36(f.gz),u.Y36(f.F0),u.Y36(h.uw),u.Y36(g.U),u.Y36(b.U),u.Y36(v.n),u.Y36(_.c),u.Y36(k.D),u.Y36(x.Y),u.Y36(y.c),u.Y36(C.f))},$.\u0275cmp=u.Xpm({type:$,selectors:[["blacklist"]],viewQuery:function(e,t){var n;1&e&&(u.Gf(N,7),u.Gf(E,7),u.Gf(L,7),u.Gf(U,7),u.Gf(D,7)),2&e&&(u.iGM(n=u.CRH())&&(t.customNameTemplate=n.first),u.iGM(n=u.CRH())&&(t.customTypeTemplate=n.first),u.iGM(n=u.CRH())&&(t.customButtonTemplate=n.first),u.iGM(n=u.CRH())&&(t.customEntryAmountTemplate=n.first),u.iGM(n=u.CRH())&&(t.customBlacklistDirectionTemplate=n.first))},decls:15,vars:11,consts:[[3,"title","addButtonClicked"],["activeSortColumn","IS_DEFAULT",3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","endOfListReached"],["customNameTemplate",""],["customBlacklistDirectionTemplate",""],["customEntryAmountTemplate",""],["customTypeTemplate",""],["customButtonTemplate",""],[4,"ngIf","ngIfElse"],["itemCanBeEdited",""],[1,"blacklist-profile-table__name"],["e2e","admin-nconnect-voice-blacklist-profile-page",3,"ngModel","inputChanged","ngModelChange"],["iconName","delete","data-e2e","admin-nconnect-voice-blacklist-profile-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick",4,"ngIf"],["iconName","bfl_view","data-e2e","admin-nconnect-voice-blacklist-profile-page__blf--button",3,"appButtonClick"],["iconName","delete","data-e2e","admin-nconnect-voice-blacklist-profile-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick"]],template:function(e,t){1&e&&(u.TgZ(0,"admin-list-header",0),u.NdJ("addButtonClicked",function(){return t.createBlacklistProfile()}),u.ALo(1,"translate"),u.qZA(),u.TgZ(2,"data-table",1),u.NdJ("endOfListReached",function(){return t.loadMoreTableEntries()}),u.ALo(3,"async"),u.ALo(4,"async"),u.YNc(5,R,3,2,"ng-template",null,2,u.W1O),u.YNc(7,F,2,3,"ng-template",null,3,u.W1O),u.YNc(9,Y,2,1,"ng-template",null,4,u.W1O),u.YNc(11,J,2,3,"ng-template",null,5,u.W1O),u.YNc(13,z,2,1,"ng-template",null,6,u.W1O),u.qZA()),2&e&&(u.Q6J("title",u.lcZ(1,5,t.pageTitle)),u.xp6(2),u.Q6J("dataTableSourceInput",u.lcZ(3,7,t.blacklistProfileData$))("isLazyLoadingPossible",u.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[T.Z,A.Q,S.O5,P.a,I.JJ,I.On,O.V],pipes:[Z.X$,S.Ov,M.b,w.B],styles:[".blacklist-profile-table__name[_ngcontent-%COMP%]{cursor:default}"]}),$)},97597:function(e,t,n){n.d(t,{Y:function(){return f}});var i=n(37716),a=n(3679),o=n(98295),r=n(83166),s=n(38583),c=n(29790);function l(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"admin.nconnect.common_form.field.name.error.required")," "))}function u(e,t){1&e&&(i.TgZ(0,"mat-error"),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e&&(i.xp6(1),i.hij(" ",i.lcZ(2,1,"admin.nconnect.common_form.field.name.error.too_long")," "))}var d,f=((d=function(){function e(){p(this,e),this.maxNameLength=45}return m(e,[{key:"ngOnInit",value:function(){this.setNameInputValidators()}},{key:"writeValue",value:function(e){}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouch=e}},{key:"setNameInputValidators",value:function(){this.formControl.setValidators([a.kI.required,a.kI.maxLength(this.maxNameLength),a.kI.pattern(/[^\s].*/)]),this.formControl.updateValueAndValidity()}}]),e}()).\u0275fac=function(e){return new(e||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["name-input-field"]],inputs:{formControl:"formControl",maxNameLength:"maxNameLength"},features:[i._Bn([{provide:a.JU,useExisting:(0,i.Gpc)(function(){return d}),multi:!0}])],decls:10,vars:8,consts:[["appearance","fill",1,"name-input"],["autocomplete","off","matInput","",3,"formControl"],["nameField",""],["align","end"],[4,"ngIf"]],template:function(e,t){if(1&e&&(i.TgZ(0,"mat-form-field",0),i.TgZ(1,"mat-label"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"input",1,2),i.TgZ(6,"mat-hint",3),i._uU(7),i.qZA(),i.YNc(8,l,3,3,"mat-error",4),i.YNc(9,u,3,3,"mat-error",4),i.qZA()),2&e){var n=i.MAs(5);i.xp6(2),i.Oqu(i.lcZ(3,6,"admin.nconnect.common_form.field.name.label")),i.xp6(2),i.Q6J("formControl",t.formControl),i.xp6(3),i.AsE(" ",n.value.length," / ",t.maxNameLength," "),i.xp6(1),i.Q6J("ngIf",null==t.formControl?null:t.formControl.hasError("required")),i.xp6(1),i.Q6J("ngIf",null==t.formControl?null:t.formControl.hasError("maxlength"))}},directives:[o.KE,o.hX,r.Nt,a.Fj,a.JJ,a.oH,o.bx,s.O5,o.TO],pipes:[c.X$],styles:[".name-input[_ngcontent-%COMP%]{width:100%}"]}),d)},18869:function(e,t,n){n.d(t,{z:function(){return o}});var i,a=n(37716),o=((i=m(function e(){p(this,e)})).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["nconnect-conference"]],decls:2,vars:0,template:function(e,t){1&e&&(a.TgZ(0,"p"),a._uU(1,"nconnect-conference works!"),a.qZA())},styles:[""]}),i)},88283:function(e,t,n){n.d(t,{S:function(){return f}});var i=n(37716),a=n(134),o=n(8307),r=n(56436),s=n(38583),c=n(78023),l=n(29790);function u(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"app-button",4),i.NdJ("appButtonClick",function(){i.CHM(n);var e=i.oxw();return e.addButtonClick(e.component)}),i.qZA()}}var d,f=((d=function(){function e(t){p(this,e),this.nconnectShortcutsService=t,this.cardIcon="attention",this.hideAddButton=!1}return m(e,[{key:"addButtonClick",value:function(e){this.nconnectShortcutsService.emitAddButtonClicked(e)}}]),e}()).\u0275fac=function(e){return new(e||d)(i.Y36(a.f))},d.\u0275cmp=i.Xpm({type:d,selectors:[["nconnect-shortcuts-card"]],inputs:{cardLink:"cardLink",cardIcon:"cardIcon",cardTitleKey:"cardTitleKey",hideAddButton:"hideAddButton",component:"component"},decls:6,vars:7,consts:[[1,"nconnect-shortcuts-card",3,"routerLink"],["fill","button-color","size","large",1,"nconnect-shortcuts-card__icon",3,"icon"],[1,"nconnect-shortcuts-card__title"],["class","nconnect-shortcuts-card__add-button","iconName","add","data-e2e","admin-nconnect-voice-shortcuts-page__add--button",3,"appButtonClick",4,"ngIf"],["iconName","add","data-e2e","admin-nconnect-voice-shortcuts-page__add--button",1,"nconnect-shortcuts-card__add-button",3,"appButtonClick"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._UZ(1,"app-svg-icon",1),i.TgZ(2,"div",2),i._uU(3),i.ALo(4,"translate"),i.qZA(),i.YNc(5,u,1,0,"app-button",3),i.qZA()),2&e&&(i.Q6J("routerLink",t.cardLink),i.xp6(1),i.Q6J("icon",t.cardIcon),i.xp6(1),i.uIk("data-e2e","admin-nconnect-voice-shortcuts-page__"+t.cardTitleKey),i.xp6(1),i.hij(" ",i.lcZ(4,5,t.cardTitleKey)," "),i.xp6(2),i.Q6J("ngIf",!t.hideAddButton))},directives:[o.rH,r.u,s.O5,c.V],pipes:[l.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{align-items:center;cursor:pointer;display:inline-flex;flex-basis:32%;height:15rem;justify-content:center;margin-bottom:2rem;outline:none;overflow:hidden;position:relative}.nconnect-shortcuts-card[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;height:inherit;outline:none;width:100%}.nconnect-shortcuts-card__content[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column}.nconnect-shortcuts-card__icon[_ngcontent-%COMP%]{margin:2rem 0 1rem}.nconnect-shortcuts-card__add-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.nconnect-shortcuts-card__title[_ngcontent-%COMP%]{background:#fff;border-radius:.3rem;border-style:solid;border-width:.1rem;padding:1rem 2rem;text-transform:uppercase}"]}),d)},40389:function(e,t,n){n.d(t,{h:function(){return f}});var i=n(79765),a=n(46782),o=n(37716),r=n(29790),s=n(50256),c=n(38583),l=function(e){return{trunkset:e}};function u(e,t){if(1&e&&(o.TgZ(0,"div",1),o.TgZ(1,"h4",2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.TgZ(6,"p",3),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.qZA()),2&e){var n=t.$implicit;o.xp6(3),o.Oqu(n.NAME),o.xp6(1),o.hij(" ",o.lcZ(5,3,"admin.nconnect.shortcuts.info.fraud.title")," "),o.xp6(3),o.hij(" ",o.xi3(8,5,"admin.nconnect.shortcuts.info.fraud.message",o.VKq(8,l,n.NAME))," ")}}function d(e,t){if(1&e&&(o.TgZ(0,"div",1),o.TgZ(1,"h4",2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.TgZ(6,"p",3),o._uU(7),o.ALo(8,"translate"),o.qZA(),o.qZA()),2&e){var n=t.$implicit;o.xp6(3),o.Oqu(n.NAME),o.xp6(1),o.hij(" ",o.lcZ(5,3,"admin.nconnect.shortcuts.info.spending_management.title")," "),o.xp6(3),o.hij(" ",o.xi3(8,5,"admin.nconnect.shortcuts.info.spending_management.message",o.VKq(8,l,n.NAME))," ")}}var f=function(){var e=function(){function e(t,n){p(this,e),this.translateService=t,this.trunksetDataService=n,this.ngUnsubscribe=new i.xQ}return m(e,[{key:"ngOnInit",value:function(){this.trunksetsWithFraudIssues$=this.trunksetDataService.trunksetsWithFraudIssues$.pipe((0,a.R)(this.ngUnsubscribe)),this.trunksetsWithSpendingManagementIssues$=this.trunksetDataService.trunksetsWithSpendingManagementIssues$.pipe((0,a.R)(this.ngUnsubscribe))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(r.sK),o.Y36(s.R))},e.\u0275cmp=o.Xpm({type:e,selectors:[["nconnect-shortcuts-info"]],decls:4,vars:6,consts:[["class","nconnect-shortcuts-info",4,"ngFor","ngForOf"],[1,"nconnect-shortcuts-info"],[1,"nconnect-shortcuts-info__title"],[1,"nconnect-shortcuts-info__message"]],template:function(e,t){1&e&&(o.YNc(0,u,9,10,"div",0),o.ALo(1,"async"),o.YNc(2,d,9,10,"div",0),o.ALo(3,"async")),2&e&&(o.Q6J("ngForOf",o.lcZ(1,2,t.trunksetsWithFraudIssues$)),o.xp6(2),o.Q6J("ngForOf",o.lcZ(3,4,t.trunksetsWithSpendingManagementIssues$)))},directives:[c.sg],pipes:[c.Ov,r.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.nconnect-shortcuts-info[_ngcontent-%COMP%]{background:#b30000;color:#fff;margin:1rem 2rem;outline:none;overflow:hidden;padding:1.5rem}.nconnect-shortcuts-info__title[_ngcontent-%COMP%]{margin:0}.nconnect-shortcuts-info__message[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),e}()},26985:function(e,t,n){n.d(t,{S:function(){return f}});var i=n(37716),a=n(50256),o=n(81756),r=n(40389),s=n(88283),c=n(38583),l=n(29790);function u(e,t){1&e&&i._UZ(0,"nconnect-shortcuts-card",10)}var d,f=((d=m(function e(t){p(this,e),this.trunksetDataService=t,this.pageTitle="admin.nconnect.title",this.firstTrunksetId$=this.trunksetDataService.firstTrunksetId$})).\u0275fac=function(e){return new(e||d)(i.Y36(a.R))},d.\u0275cmp=i.Xpm({type:d,selectors:[["nconnect-shortcuts"]],decls:13,vars:11,consts:[[1,"nconnect-shortcuts__title",3,"showActionButton","title"],[1,"nconnect-shortcuts__card-section"],["cardIcon","company","cardLink","../trunkset","cardTitleKey","admin.nconnect.trunkset.title","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-trunkset",3,"hideAddButton"],["cardIcon","banned","cardLink","../blacklist","cardTitleKey","admin.nconnect.blacklist_profile.title","component","blacklist_profile","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-blacklist"],["cardIcon","easy_handling","cardTitleKey","admin.nconnect.pbx_endpoint.title","component","pbx_endpoint","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-pbx-endpoint",3,"cardLink","hideAddButton"],["cardIcon","document","cardLink","../pbx-endpoint-template","cardTitleKey","admin.nconnect.pbx_endpoint_template.title","component","pbx_endpoint_template","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-pbx-endpoint-template"],["cardIcon","world","cardLink","../number-routing","cardTitleKey","admin.nconnect.number_routing.title","component","number_routing","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-number-routing"],["cardIcon","nav","cardLink","../numberblock","cardTitleKey","admin.nconnect.numberblock.title","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-number-block",3,"hideAddButton"],["cardIcon","extension","cardLink","../backupnumbers","cardTitleKey","admin.nconnect.backup_number.title","component","backup_number","data-e2e","admin-nconnect-voice-shortcuts-page__shortcuts-card-backup-numbers"],["cardIcon","conference_call_solid","cardLink","../services","cardTitleKey","admin.navigation.nconnect.services.conferences","component","nconnect_conference",4,"ngIf"],["cardIcon","conference_call_solid","cardLink","../services","cardTitleKey","admin.navigation.nconnect.services.conferences","component","nconnect_conference"]],template:function(e,t){1&e&&(i._UZ(0,"admin-list-header",0),i.ALo(1,"translate"),i._UZ(2,"nconnect-shortcuts-info"),i.TgZ(3,"div",1),i._UZ(4,"nconnect-shortcuts-card",2),i._UZ(5,"nconnect-shortcuts-card",3),i._UZ(6,"nconnect-shortcuts-card",4),i.ALo(7,"async"),i._UZ(8,"nconnect-shortcuts-card",5),i._UZ(9,"nconnect-shortcuts-card",6),i._UZ(10,"nconnect-shortcuts-card",7),i._UZ(11,"nconnect-shortcuts-card",8),i.YNc(12,u,1,0,"nconnect-shortcuts-card",9),i.qZA()),2&e&&(i.Q6J("showActionButton",!1)("title",i.lcZ(1,7,t.pageTitle)),i.xp6(4),i.Q6J("hideAddButton",!0),i.xp6(2),i.Q6J("cardLink","../pbx-endpoint/"+i.lcZ(7,9,t.firstTrunksetId$))("hideAddButton",!0),i.xp6(4),i.Q6J("hideAddButton",!0),i.xp6(2),i.Q6J("ngIf",!1))},directives:[o.Z,r.h,s.S,c.O5],pipes:[l.X$,c.Ov],styles:[".nconnect-shortcuts__card-section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:2rem}.nconnect-shortcuts__title[_ngcontent-%COMP%]{z-index:2}"]}),d)},74162:function(e,t,n){n.d(t,{F:function(){return c}});var i,a=n(37716),o=n(89973),r=n(3679),s=["*"],c=((i=m(function e(){p(this,e)})).\u0275fac=function(e){return new(e||i)},i.\u0275cmp=a.Xpm({type:i,selectors:[["nconnect-voice-modal"]],inputs:{formGroup:"formGroup",modalTitle:"modalTitle"},ngContentSelectors:s,decls:3,vars:2,consts:[[3,"title"],[1,"nconnect-voice-modal__form",3,"formGroup"]],template:function(e,t){1&e&&(a.F$t(),a.TgZ(0,"modal-container",0),a.TgZ(1,"form",1),a.Hsn(2),a.qZA(),a.qZA()),2&e&&(a.Q6J("title",t.modalTitle),a.xp6(1),a.Q6J("formGroup",t.formGroup))},directives:[o.O,r._Y,r.JL,r.sg],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;max-height:100vh;max-width:40rem;min-width:32rem}.nconnect-voice-modal__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:.8rem 2.4rem}"]}),i)},18393:function(e,t,n){n.d(t,{w:function(){return M}});var i=n(22238),a=n(3679),o=n(88002),r=n(46782),s=n(79765),c=n(37716),l=n(45832),u=n(90500),d=n(89521),f=n(50256),h=n(22893),g=n(74162),b=n(97597),v=n(98295),_=n(67441),k=n(38583),x=n(42070),y=n(72458),C=n(77746),T=n(29790),A=n(88589);function S(e,t){if(1&e&&(c.TgZ(0,"mat-option",9),c._uU(1),c.qZA()),2&e){var n=t.$implicit;c.Q6J("value",n.ID),c.xp6(1),c.hij(" ",n.NAME," ")}}function P(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"mat-option",10),c.NdJ("onSelectionChange",function(){var e=c.CHM(n).$implicit;return c.oxw().getNumberBlockEntries(e.TRUNK_ID)}),c._uU(1),c.ALo(2,"nconnectPhoneNumber"),c.qZA()}if(2&e){var i=t.$implicit;c.Q6J("value",i.TRUNK_ID),c.xp6(1),c.hij(" ",c.xi3(2,2,i,"blockRangeShown")," ")}}function I(e,t){if(1&e&&(c.TgZ(0,"mat-list-option",15),c._uU(1),c.ALo(2,"nconnectPhoneNumber"),c.qZA()),2&e){var n=t.$implicit,i=c.oxw(2);c.Q6J("disabled",null!==n.NUMBERROUTING_ID&&+n.NUMBERROUTING_ID!==i.numberRoutingDialogData.numberRoutingId)("selected",+n.NUMBERROUTING_ID===i.numberRoutingDialogData.numberRoutingId)("value",n.INBOUND_TRUNK_NUMBER_ID),c.xp6(1),c.hij(" ",c.lcZ(2,4,n)," ")}}function O(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"mat-option",11),c.NdJ("click",function(){return c.CHM(n),c.oxw().selectAvailableEntries()}),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"mat-selection-list",12,13),c.NdJ("selectionChange",function(){return c.CHM(n),c.oxw().setSelectionState()}),c.YNc(6,I,3,6,"mat-list-option",14),c.qZA(),c.TgZ(7,"p"),c._uU(8),c.ALo(9,"translate"),c.qZA(),c.BQk()}if(2&e){var i=c.MAs(5),a=c.oxw();c.xp6(2),c.hij(" ",c.lcZ(3,5,a.translationPrefix+".modal.select_all")," "),c.xp6(4),c.Q6J("ngForOf",a.allNumberblockEntries),c.xp6(2),c.lnq(" ",c.lcZ(9,7,a.translationPrefix+".modal.entry_amount"),": ",null==i.selectedOptions.selected?null:i.selectedOptions.selected.length,"/",null==i.options?null:i.options.length," ")}}var Z,M=((Z=function(){function e(t,n,i,a,o,r,c,l){p(this,e),this.snackBarService=t,this.dialogRef=n,this.nconnectModalService=i,this.numberblockEntryDataService=a,this.trunksetDataService=o,this.numberblockDataService=r,this.numberRoutingDialogData=c,this.cdref=l,this.ngUnsubscribe=new s.xQ,this.isEditModal=!1,this.componentTranslationKey="number_routing",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.userHasSelectedNumberblock=!1,this.trunksets$=this.trunksetDataService.trunksets$,c.allNumberblocks?this.allNumberblocks=c.allNumberblocks:this.getAllNumberBlocks()}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setSelectionState",value:function(){this.userHasSelectedNumberblock=!0}},{key:"getNumberBlockEntries",value:function(e){var t=this;this.numberblockEntryDataService.getNumberblockEntries(e,"",1,100).pipe((0,o.U)(function(e){return e.data}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(e){t.allNumberblockEntries=e,t.cdref.detectChanges()})}},{key:"onSubmit",value:function(e){this.cancelClick(e)}},{key:"cancelClick",value:function(e){this.dialogRef.close(e)}},{key:"selectAvailableEntries",value:function(){var e=this,t=[];this.allNumberblockEntries.forEach(function(n){(!n.NUMBERROUTING_ID||+n.NUMBERROUTING_ID===e.numberRoutingDialogData.numberRoutingId)&&t.push(n.INBOUND_TRUNK_NUMBER_ID)}),this.numberblockIds.setValue(t),this.setSelectionState()}},{key:"getAllNumberBlocks",value:function(){var e=this;this.numberblockDataService.getNumberblocks().pipe((0,o.U)(function(e){return e.data}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.allNumberblocks=t})}},{key:"initModal",value:function(){this.isEditModal="edit"===this.numberRoutingDialogData.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}},{key:"createFormControls",value:function(){this.numberRoutingId=new a.NI(this.numberRoutingDialogData.numberRoutingId||""),this.name=new a.NI(this.numberRoutingDialogData.name||"",a.kI.required),this.numberblockIds=new a.NI(this.numberRoutingDialogData.numberblockIds||[],a.kI.required),this.trunksetId=new a.NI({value:this.numberRoutingDialogData.trunksetId||"",disabled:this.isEditModal},a.kI.required),this.trunkId=new a.NI({value:this.numberRoutingDialogData.trunkId||"",disabled:this.isEditModal},a.kI.required)}},{key:"createForm",value:function(){this.formGroup=new a.cw({name:this.name,trunksetId:this.trunksetId,trunkId:this.trunkId,numberblockIds:this.numberblockIds,numberRoutingId:this.numberRoutingId})}}]),e}()).\u0275fac=function(e){return new(e||Z)(c.Y36(l.c),c.Y36(i.so),c.Y36(u.K),c.Y36(d.b),c.Y36(f.R),c.Y36(h.C),c.Y36(i.WI),c.Y36(c.sBO))},Z.\u0275cmp=c.Xpm({type:Z,selectors:[["number-routing-modal"]],decls:17,vars:19,consts:[["data-e2e","admin-number-routing-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["maxNameLength","64","data-e2e","admin-number-routing-modal-fragment__name--input",3,"formControl"],["appearance","fill"],["formControlName","trunksetId","data-e2e","admin-number-routing-modal-fragment__available-trunkset",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-trunkset--option",3,"value",4,"ngFor","ngForOf"],["formControlName","trunkId","data-e2e","admin-number-routing-modal-fragment__available-number-block",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-number-block--option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],[4,"ngIf"],["btnType","raised-button-submit","e2e","admin-number-routing-modal-fragment",1,"number-routing-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],["data-e2e","admin-number-routing-modal-fragment__available-trunkset--option",3,"value"],["data-e2e","admin-number-routing-modal-fragment__available-number-block--option",3,"value","onSelectionChange"],[3,"click"],["formControlName","numberblockIds","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries",1,"number-routing-modal__prefix-selection",3,"selectionChange"],["numberBlockList",""],["checkboxPosition","before","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries--option",3,"disabled","selected","value",4,"ngFor","ngForOf"],["checkboxPosition","before","data-e2e","admin-number-routing-modal-fragment__available-number-block-entries--option",3,"disabled","selected","value"]],template:function(e,t){1&e&&(c.TgZ(0,"nconnect-voice-modal",0),c.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.getRawValue())}),c._UZ(1,"name-input-field",1),c.TgZ(2,"mat-form-field",2),c.TgZ(3,"mat-label"),c._uU(4),c.ALo(5,"translate"),c.qZA(),c.TgZ(6,"mat-select",3),c.YNc(7,S,2,2,"mat-option",4),c.ALo(8,"async"),c.qZA(),c.qZA(),c.TgZ(9,"mat-form-field",2),c.TgZ(10,"mat-label"),c._uU(11),c.ALo(12,"translate"),c.qZA(),c.TgZ(13,"mat-select",5),c.YNc(14,P,3,5,"mat-option",6),c.qZA(),c.qZA(),c.YNc(15,O,10,9,"ng-container",7),c.TgZ(16,"footer-actions",8),c.NdJ("cancelClick",function(){return t.cancelClick()}),c.qZA(),c.qZA()),2&e&&(c.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),c.xp6(1),c.Q6J("formControl",t.name),c.xp6(3),c.Oqu(c.lcZ(5,13,t.translationPrefix+".form.field.trunksets.label")),c.xp6(2),c.Q6J("value",t.numberRoutingDialogData.trunksetId),c.xp6(1),c.Q6J("ngForOf",c.lcZ(8,15,t.trunksets$)),c.xp6(4),c.Oqu(c.lcZ(12,17,t.translationPrefix+".form.field.numberblock.label")),c.xp6(2),c.Q6J("value",t.numberRoutingDialogData.trunkId),c.xp6(1),c.Q6J("ngForOf",t.allNumberblocks),c.xp6(1),c.Q6J("ngIf",t.allNumberblockEntries),c.xp6(1),c.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.userHasSelectedNumberblock&&!t.name.dirty))},directives:[g.F,a.JL,a.sg,b.Y,a.JJ,a.oH,v.KE,v.hX,_.gD,a.u,k.sg,k.O5,x.c,y.ey,C.Ub,C.vS],pipes:[T.X$,k.Ov,A.E],styles:[".number-routing-modal__prefix-selection[_ngcontent-%COMP%]{border-bottom:.1rem solid #d3d3d3;border-top:.1rem solid #d3d3d3;max-height:20rem;overflow-y:auto;padding:.5rem 0}.number-routing-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),Z)},48469:function(e,t,n){n.d(t,{C:function(){return Z}});var i=n(18393),a=n(79765),o=n(45435),r=n(46782),s=n(88002),c=n(37716),l=n(8307),u=n(22238),d=n(5882),f=n(38538),h=n(45832),g=n(83282),b=n(19885),v=n(17512),_=n(50256),k=n(22893),x=n(48843),y=n(134),C=n(81756),T=n(79764),A=n(29790),S=n(38583),P=["customPrefixAmountTemplate"];function I(e,t){if(1&e&&(c.TgZ(0,"div",3),c._uU(1),c.qZA()),2&e){var n=t.element;c.xp6(1),c.hij(" ",n.numberblockIds.length||"-"," ")}}var O,Z=((O=function(){function e(t,n,i,o,r,s,c,l,u,d,m,f){p(this,e),this.router=t,this.dialog=n,this.confirmDialogsService=i,this.dataTableService=o,this.snackBarService=r,this.dataTableMessageService=s,this.dataTableLazyLoadingService=c,this.numberRoutingDataService=l,this.trunksetDataService=u,this.numberblockDataService=d,this.nconnectAccountSelectionService=m,this.nconnectShortcutsService=f,this.ngUnsubscribe=new a.xQ,this.componentTranslationKey="number_routing",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.numberblockSelectionLoaded=!1}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.numberRoutingData$=e.getInitialTableData(),e.getAllNumberBlocks()}),this.listenForNconnectShortcutEvents()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberRoutingDataService.getNumberRoutings("",this.dataTableLazyLoadingService.currentPage))}},{key:"deleteNumberRouting",value:function(e){this.dataTableService.deleteTableItem(this.numberRoutingDataService.deleteNumberRouting(e.TRUNKSET_ID,e.ID),e.ID,this.componentTranslationKey)}},{key:"editNumberRouting",value:function(e){var t=this;this.openNumberRoutingModal(e).pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(e){t.dataTableService.editTableItem(t.numberRoutingDataService.updateNumberRouting(e),t.componentTranslationKey)})}},{key:"createNumberRouting",value:function(){var e=this;this.openNumberRoutingModal().pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.dataTableService.createTableItem(e.numberRoutingDataService.createNumberRouting(t),e.componentTranslationKey)})}},{key:"getAllNumberBlocks",value:function(){var e=this;this.numberblockDataService.getNumberblocks().pipe((0,s.U)(function(e){return e.data}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.allNumberblocks=t,e.numberblockSelectionLoaded=!0})}},{key:"openNumberRoutingModal",value:function(e){return this.dialog.open(i.w,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",allNumberblocks:this.allNumberblocks,numberRoutingId:null==e?void 0:e.ID,name:null==e?void 0:e.NAME,trunkId:null==e?void 0:e.TRUNK_ID,trunksetId:null==e?void 0:e.TRUNKSET_ID,numberblockIds:null==e?void 0:e.numberblockIds,component:this.componentTranslationKey}}}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.numberRoutingDataService.getNumberRoutings())}},{key:"listenForNconnectShortcutEvents",value:function(){var e=this;this.nconnectShortcutsService.addButtonClicked$.pipe((0,o.h)(function(t){return t===e.componentTranslationKey}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.createNumberRouting(),e.nconnectShortcutsService.resetNconnectComponent()})}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME"},{title:"".concat(this.translationPrefix,".table.column.numberblock"),columnNameId:"FORMAT_DISPLAY"},{title:"".concat(this.translationPrefix,".table.column.prefix_amount"),columnNameId:"numberblockIds",sortingDisabled:!0,customCellTemplate:this.customPrefixAmountTemplate},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||O)(c.Y36(l.F0),c.Y36(u.uw),c.Y36(d.U),c.Y36(f.n),c.Y36(h.c),c.Y36(g.D),c.Y36(b.Y),c.Y36(v.v),c.Y36(_.R),c.Y36(k.C),c.Y36(x.c),c.Y36(y.f))},O.\u0275cmp=c.Xpm({type:O,selectors:[["number-routing"]],viewQuery:function(e,t){var n;1&e&&c.Gf(P,7),2&e&&c.iGM(n=c.CRH())&&(t.customPrefixAmountTemplate=n.first)},decls:7,vars:12,consts:[[3,"isAdminHeaderButtonDisabled","title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customPrefixAmountTemplate",""],[1,"number-routing__prefix-amount"]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createNumberRouting()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deleteNumberRouting(e)})("editButtonClicked",function(e){return t.editNumberRouting(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,I,2,1,"ng-template",null,2,c.W1O),c.qZA()),2&e&&(c.Q6J("isAdminHeaderButtonDisabled",!t.numberblockSelectionLoaded)("title",c.lcZ(1,6,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,8,t.numberRoutingData$))("isLazyLoadingPossible",c.lcZ(4,10,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[C.Z,T.Q],pipes:[A.X$,S.Ov],encapsulation:2}),O)},28019:function(e,t,n){n.d(t,{b:function(){return L}});var i=n(22238),a=n(3679),o=n(87519),r=n(54395),s=n(88002),c=n(45435),l=n(43190),u=n(46782),d=n(90980),f=n(79765),h=n(37716),g=n(90500),b=n(89521),v=n(88589),_=n(74162),k=n(98295),x=n(67441),y=n(38583),C=n(83166),T=n(42070),A=n(72458),S=n(29790);function P(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-option",9),h.NdJ("onSelectionChange",function(){var e=h.CHM(n).$implicit,t=h.oxw();return t.setTrunkId(+e.TRUNK_ID),t.validatePrefixLength(e)}),h._uU(1),h.ALo(2,"nconnectPhoneNumber"),h.qZA()}if(2&e){var i=t.$implicit;h.Q6J("value",+i.INBOUND_TRUNK_NUMBER_ID),h.xp6(1),h.hij(" ",h.lcZ(2,2,i)," ")}}function I(e,t){if(1&e&&(h.TgZ(0,"mat-hint"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.hij(" ",h.lcZ(2,1,n.translationPrefix+".form.field.prefix.error.range")," ")}}function O(e,t){if(1&e&&(h.TgZ(0,"mat-error"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.hij(" ",h.lcZ(2,1,n.translationPrefix+".form.field.prefix.error.not_selectable")," ")}}function Z(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.nconnect.common_form.error.field_required")," "))}function M(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.nconnect.common_form.error.invalidPhoneNumber")," "))}var w=function(e){return{maxLength:e}};function N(e,t){if(1&e&&(h.TgZ(0,"mat-error"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.hij(" ",h.xi3(2,1,"admin.nconnect.common_form.error.numberTooLong",h.VKq(4,w,n.maxPrefixInputLength))," ")}}var E,L=((E=function(){function e(t,n,i,a,o){p(this,e),this.dialogRef=t,this.nconnectModalService=n,this.numberblockEntryDataService=i,this.nconnectPhoneNumberPipe=a,this.data=o,this.ngUnsubscribe=new f.xQ,this.isEditModal=!1,this.maxPhoneNumberLength=20,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.isNumblockExceeded=!1}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm(),this.listenForFormGroupChanges()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"onSubmit",value:function(e){this.closeDialog(e)}},{key:"setTrunkId",value:function(e){this.selectedTrunkId=e}},{key:"validatePrefixLength",value:function(e){var t;this.selectedPhoneNumberLength=this.nconnectPhoneNumberPipe.transform(e,null,!0).length,this.maxPrefixInputLength=this.maxPhoneNumberLength-this.selectedPhoneNumberLength,null===(t=this.formGroup.controls)||void 0===t||t.prefix.setValidators([a.kI.required,a.kI.pattern(/^[0-9]*$/),d.b.maxPhoneNumberLength(this.maxPrefixInputLength)])}},{key:"initModal",value:function(){this.isEditModal="edit"===this.data.type,this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal),this.modalTitle=this.getModalTitle(),this.numberblockEntries=this.data.numberblockEntries.filter(function(e){return!+e.IS_CUSTOM})}},{key:"listenForFormGroupChanges",value:function(){var e=this;this.formGroup.valueChanges.pipe((0,o.x)(function(t,n){return e.distinctUntilFormGroupChanged(t,n)}),(0,r.b)(300),(0,s.U)(function(){return e.formGroup.getRawValue()}),(0,c.h)(function(t){return e.filterPrefixFormDataValues(t)}),(0,l.w)(function(t){return e.numberblockEntryDataService.checkPrefixValidity(e.selectedTrunkId,t)}),(0,u.R)(this.ngUnsubscribe)).subscribe(function(t){e.setErrorWhenPrefixAlreadyUsed(!t.data[0].isPrefixFree),e.isNumblockExceeded=t.data[0].isNumblockExceeded})}},{key:"distinctUntilFormGroupChanged",value:function(e,t){return e.prefix===t.prefix&&e.parentInboundTrunkNumberId===t.parentInboundTrunkNumberId}},{key:"filterPrefixFormDataValues",value:function(e){return!!e.prefix&&!!e.parentInboundTrunkNumberId&&!!e.prefix.toString().match(/^[0-9]*$/i)}},{key:"setErrorWhenPrefixAlreadyUsed",value:function(e){e?(this.prefix.setErrors({isPrefixAlreadyUsed:!0}),this.prefix.markAsTouched()):this.prefix.setErrors(null),this.prefix.updateValueAndValidity()}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle("numberblock",this.isEditModal)}},{key:"createFormControls",value:function(){var e,t;this.parentInboundTrunkNumberId=new a.NI({value:Number(null===(e=this.data.numberblockEntry)||void 0===e?void 0:e.PARENT_INBOUND_TRUNK_NUMBER_ID)||this.selectedTrunkId,disabled:this.isEditModal},a.kI.required),this.prefix=new a.NI(null===(t=this.data.numberblockEntry)||void 0===t?void 0:t.customPrefix,[a.kI.required,a.kI.pattern(/^[0-9]*$/),d.b.maxPhoneNumberLength(this.maxPrefixInputLength)])}},{key:"createForm",value:function(){this.formGroup=new a.cw({parentInboundTrunkNumberId:this.parentInboundTrunkNumberId,prefix:this.prefix})}}]),e}()).\u0275fac=function(e){return new(e||E)(h.Y36(i.so),h.Y36(g.K),h.Y36(b.b),h.Y36(v.E),h.Y36(i.WI))},E.\u0275cmp=h.Xpm({type:E,selectors:[["numberblock-entry-modal"]],decls:16,vars:14,consts:[["data-e2e","admin-number-block-entry-modal-fragment",1,"numberblock-entry-modal",3,"formGroup","modalTitle","ngSubmit"],[1,"numberblock-entry-modal__prefix"],["appearance","fill"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number","formControlName","parentInboundTrunkNumberId"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number--option",3,"value","onSelectionChange",4,"ngFor","ngForOf"],["appearance","fill",1,"numberblock-entry-modal__prefix__number"],["autocomplete","off","data-e2e","admin-number-block-entry-modal-fragment__prefix--input","formControlName","prefix","matInput","","min","0","type","text"],[4,"ngIf"],["e2e","admin-number-block-entry-modal-fragment",1,"numberblock-entry-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"],["data-e2e","admin-number-block-entry-modal-fragment__inbound-trunk-number--option",3,"value","onSelectionChange"]],template:function(e,t){1&e&&(h.TgZ(0,"nconnect-voice-modal",0),h.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),h.TgZ(1,"div",1),h.TgZ(2,"mat-form-field",2),h.TgZ(3,"mat-label"),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"mat-select",3),h.YNc(7,P,3,4,"mat-option",4),h.qZA(),h.qZA(),h.TgZ(8,"mat-form-field",5),h._UZ(9,"input",6),h.YNc(10,I,3,3,"mat-hint",7),h.YNc(11,O,3,3,"mat-error",7),h.YNc(12,Z,3,3,"mat-error",7),h.YNc(13,M,3,3,"mat-error",7),h.YNc(14,N,3,6,"mat-error",7),h.qZA(),h.qZA(),h.TgZ(15,"footer-actions",8),h.NdJ("cancelClick",function(){return t.closeDialog()}),h.qZA(),h.qZA()),2&e&&(h.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),h.xp6(4),h.hij(" ",h.lcZ(5,12,t.translationPrefix+".form.field.parentInboundTrunkNumber.label")," "),h.xp6(3),h.Q6J("ngForOf",t.numberblockEntries),h.xp6(3),h.Q6J("ngIf",t.isNumblockExceeded),h.xp6(1),h.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.isPrefixAlreadyUsed),h.xp6(1),h.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.required),h.xp6(1),h.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.invalidPhoneNumber),h.xp6(1),h.Q6J("ngIf",null==t.prefix.errors?null:t.prefix.errors.phoneNumberTooLong),h.xp6(1),h.Q6J("btnCancelCaption",t.buttonCaptionCancel)("btnSaveCaption",t.buttonCaptionSubmit)("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty))},directives:[_.F,a.JL,a.sg,k.KE,k.hX,x.gD,a.JJ,a.u,y.sg,a.Fj,C.Nt,y.O5,T.c,A.ey,k.bx,k.TO],pipes:[S.X$,v.E],styles:[".numberblock-entry-modal[_ngcontent-%COMP%]{max-width:50rem}.numberblock-entry-modal__prefix[_ngcontent-%COMP%]{display:flex}.numberblock-entry-modal__prefix__number[_ngcontent-%COMP%]{margin-left:1.5rem;max-width:20rem}.numberblock-entry-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),E)},28313:function(e,t,n){n.d(t,{x:function(){return U}});var i=n(45435),a=n(43190),o=n(46782),r=n(68307),s=n(79765),c=n(28019),l=n(37716),u=n(8307),d=n(22238),f=n(5882),h=n(22893),g=n(89521),b=n(47444),v=n(38538),_=n(83282),k=n(19885),x=n(48843),y=n(81756),C=n(79764),T=n(38583),A=n(55821),S=n(56436),P=n(63743),I=n(88589),O=n(29790),Z=["customPrefixTemplate"],M=["customBlockLengthTemplate"];function w(e,t){1&e&&(l._uU(0),l.ALo(1,"nconnectPhoneNumber")),2&e&&l.hij(" ",l.lcZ(1,1,t.element)," ")}function N(e,t){if(1&e&&(l.TgZ(0,"div",5),l._UZ(1,"app-svg-icon",6),l.TgZ(2,"span",7),l._uU(3),l.ALo(4,"translate"),l.qZA(),l.TgZ(5,"hoverbox",8),l._uU(6),l.ALo(7,"translate"),l.qZA(),l.qZA()),2&e){var n=l.oxw(2);l.xp6(3),l.hij(" ",l.lcZ(4,3,n.translationPrefix+".block_length_exceeded")," "),l.xp6(2),l.Q6J("showAlways",!0),l.xp6(1),l.hij(" ",l.lcZ(7,5,n.translationPrefix+".block_length_exceeded_hover-info")," ")}}function E(e,t){1&e&&l.YNc(0,N,8,7,"div",4),2&e&&l.Q6J("ngIf",+t.element.IS_NUMBLOCK_EXCEEDED)}var L,U=((L=function(){function e(t,n,i,a,o,r,c,l,u,d,m){p(this,e),this.route=t,this.router=n,this.dialog=i,this.confirmDialogsService=a,this.numberblockDataService=o,this.numberblockEntryDataService=r,this.nconnectItemProviderService=c,this.dataTableService=l,this.dataTableMessageService=u,this.dataTableLazyLoadingService=d,this.nconnectAccountSelectionService=m,this.ngUnsubscribe=new s.xQ,this.componentTranslationKey="numberblock_entry",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$,this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,i.h)(function(e){return!!e}),(0,a.w)(function(){return e.route.params}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(t){!t.id||(e.selectedNumberblockId=Number(t.id),e.numberblockEntryData$=e.getInitialTableData(e.selectedNumberblockId))}),this.tableConfig=this.getTableConfig(),this.numberblockEntryDataService.numberblockEntryDataError$.pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(){return e.router.navigate(["../"],{relativeTo:e.route})})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberblockEntryDataService.getNumberblockEntries(this.selectedNumberblockId,"",this.dataTableLazyLoadingService.currentPage))}},{key:"createNumberblockEntry",value:function(){var e=this;this.openNumberblockModal().pipe((0,i.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(t){e.dataTableService.createTableItem(e.numberblockEntryDataService.createNumberblockEntry(e.selectedNumberblockId,t),e.componentTranslationKey)})}},{key:"editNumberblockEntry",value:function(e){var t=this;this.openNumberblockModal(e).pipe((0,i.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(n){t.dataTableService.editTableItem(t.numberblockEntryDataService.updateNumberblockEntry(e,n),t.componentTranslationKey)})}},{key:"deleteNumberblockEntry",value:function(e){this.dataTableService.deleteTableItem(this.numberblockEntryDataService.deleteNumberblockEntry(e),e.INBOUND_TRUNK_NUMBER_ID,this.componentTranslationKey)}},{key:"getInitialTableData",value:function(e){var t=this;return this.dataTableService.getInitialTableData(this.numberblockEntryDataService.getNumberblockEntries(e).pipe((0,r.b)(function(e){var n=e.data[0];t.numberblockEntries=e.data,t.setNumberblockRange(n),t.nconnectItemProviderService.nconnectItemNameAvailableFromNavigation||t.nconnectItemProviderService.setNconnectItemName(n)})))}},{key:"setNumberblockRange",value:function(e){this.numberblockStart=e.NUMBERBLOCK_START,this.numberblockEnd=e.NUMBERBLOCK_END}},{key:"openNumberblockModal",value:function(e){return this.dialog.open(c.b,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",numberblockEntry:e,numberblockEntries:this.numberblockEntries,numberblockStart:this.numberblockStart,numberblockEnd:this.numberblockEnd,component:this.componentTranslationKey}}}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.prefix"),columnNameId:"PILOT",customCellTemplate:this.customPrefixTemplate},{columnNameId:"IS_NUMBLOCK_EXCEEDED",customCellTemplate:this.customBlockLengthWarningTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||L)(l.Y36(u.gz),l.Y36(u.F0),l.Y36(d.uw),l.Y36(f.U),l.Y36(h.C),l.Y36(g.b),l.Y36(b.U),l.Y36(v.n),l.Y36(_.D),l.Y36(k.Y),l.Y36(x.c))},L.\u0275cmp=l.Xpm({type:L,selectors:[["numberblock-entry"]],viewQuery:function(e,t){var n;1&e&&(l.Gf(Z,7),l.Gf(M,7)),2&e&&(l.iGM(n=l.CRH())&&(t.customPrefixTemplate=n.first),l.iGM(n=l.CRH())&&(t.customBlockLengthWarningTemplate=n.first))},decls:9,vars:11,consts:[[3,"title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customPrefixTemplate",""],["customBlockLengthTemplate",""],["class","numberblock-detail__exceeded-info","data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info","appHoverbox","",4,"ngIf"],["data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info","appHoverbox","",1,"numberblock-detail__exceeded-info"],["fill","","icon","attention","size","medium",1,"attention-icon"],[1,"numberblock-detail__block-length-check"],["data-e2e","admin-nconnect-voice-number-block-item-page__exceeded-info-hoverbox",3,"showAlways"]],template:function(e,t){1&e&&(l.TgZ(0,"admin-list-header",0),l.NdJ("addButtonClicked",function(){return t.createNumberblockEntry()}),l.ALo(1,"async"),l.qZA(),l.TgZ(2,"data-table",1),l.NdJ("deleteButtonClicked",function(e){return t.deleteNumberblockEntry(e)})("editButtonClicked",function(e){return t.editNumberblockEntry(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),l.ALo(3,"async"),l.ALo(4,"async"),l.YNc(5,w,2,3,"ng-template",null,2,l.W1O),l.YNc(7,E,1,1,"ng-template",null,3,l.W1O),l.qZA()),2&e&&(l.Q6J("title",l.lcZ(1,5,t.pageTitle$)),l.xp6(2),l.Q6J("dataTableSourceInput",l.lcZ(3,7,t.numberblockEntryData$))("isLazyLoadingPossible",l.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[y.Z,C.Q,T.O5,A.r,S.u,P.B],pipes:[T.Ov,I.E,O.X$],styles:[".numberblock-detail__block-length-check[_ngcontent-%COMP%]{color:#f90;font-weight:bold}.attention-icon[_ngcontent-%COMP%]{fill:#f90}.numberblock-detail__exceeded-info[_ngcontent-%COMP%]{align-items:center;display:flex}"]}),L)},15809:function(e,t,n){n.d(t,{X:function(){return O}});var i=n(79765),a=n(45435),o=n(46782),r=n(37716),s=n(8307),c=n(22893),l=n(47444),u=n(19885),d=n(38538),f=n(48843),h=n(81756),g=n(79764),b=n(38583),v=n(29790),_=n(88589),k=["customPrefixTemplate"],x=["customNumberblockTemplate"],y=["customPrefixAmountTemplate"];function C(e,t){1&e&&(r._uU(0),r.ALo(1,"nconnectPhoneNumber")),2&e&&r.hij(" ",r.lcZ(1,1,t.element)," ")}function T(e,t){if(1&e&&r._uU(0),2&e){var n=t.element;r.AsE(" (",n.NUMBERBLOCK_START,"-",n.NUMBERBLOCK_END,") ")}}function A(e,t){if(1&e&&(r.ynx(0),r._uU(1),r.BQk()),2&e){var n=r.oxw().element;r.xp6(1),r.hij(" ",n.numberOfPrefixes," ")}}function S(e,t){if(1&e&&(r.TgZ(0,"div",7),r._uU(1),r.qZA()),2&e){var n=r.oxw().element;r.xp6(1),r.hij(" ",n.numberOfPrefixes," ")}}function P(e,t){if(1&e&&(r.YNc(0,A,2,1,"ng-container",5),r.YNc(1,S,2,1,"ng-template",null,6,r.W1O)),2&e){var n=t.element,i=r.MAs(2);r.Q6J("ngIf",n.numberOfPrefixes<=1)("ngIfElse",i)}}var I,O=((I=function(){function e(t,n,a,o,r,s,c){p(this,e),this.router=t,this.route=n,this.numberblockDataService=a,this.nconnectItemProviderService=o,this.dataTableLazyLoadingService=r,this.dataTableService=s,this.nconnectAccountSelectionService=c,this.ngUnsubscribe=new i.xQ,this.componentTranslationKey="numberblock",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,a.h)(function(e){return!!e}),(0,o.R)(this.ngUnsubscribe)).subscribe(function(){e.numberblockData$=e.getInitialTableData()})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.numberblockDataService.getNumberblocks("",this.dataTableLazyLoadingService.currentPage))}},{key:"openTableEntries",value:function(e){this.nconnectItemProviderService.setNconnectItemName(e),this.router.navigate(["../".concat(e.TRUNK_ID)],{relativeTo:this.route})}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.numberblockDataService.getNumberblocks())}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.prefix"),columnNameId:"prefix",customCellTemplate:this.customPrefixTemplate,sortingDisabled:!0},{title:"".concat(this.translationPrefix,".table.column.numberblock"),columnNameId:"numberblock",customCellTemplate:this.customNumberblockTemplate,sortingDisabled:!0},{title:"".concat(this.translationPrefix,".table.column.prefix_amount"),columnNameId:"numberOfPrefixes",customCellTemplate:this.customPrefixAmountTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||I)(r.Y36(s.F0),r.Y36(s.gz),r.Y36(c.C),r.Y36(l.U),r.Y36(u.Y),r.Y36(d.n),r.Y36(f.c))},I.\u0275cmp=r.Xpm({type:I,selectors:[["numberblock"]],viewQuery:function(e,t){var n;1&e&&(r.Gf(k,7),r.Gf(x,7),r.Gf(y,7)),2&e&&(r.iGM(n=r.CRH())&&(t.customPrefixTemplate=n.first),r.iGM(n=r.CRH())&&(t.customNumberblockTemplate=n.first),r.iGM(n=r.CRH())&&(t.customPrefixAmountTemplate=n.first))},decls:11,vars:13,consts:[[3,"showActionButton","title"],["customEditButton","bfl_view",3,"dataTableSourceInput","hideAllDeleteButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","editButtonClicked","endOfListReached"],["customPrefixTemplate",""],["customNumberblockTemplate",""],["customPrefixAmountTemplate",""],[4,"ngIf","ngIfElse"],["showPrefixEntriesInHoverBox",""],[1,"numberblock-list__prefix-amount"]],template:function(e,t){1&e&&(r._UZ(0,"admin-list-header",0),r.ALo(1,"translate"),r.TgZ(2,"data-table",1),r.NdJ("editButtonClicked",function(e){return t.openTableEntries(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),r.ALo(3,"async"),r.ALo(4,"async"),r.YNc(5,C,2,3,"ng-template",null,2,r.W1O),r.YNc(7,T,1,2,"ng-template",null,3,r.W1O),r.YNc(9,P,3,2,"ng-template",null,4,r.W1O),r.qZA()),2&e&&(r.Q6J("showActionButton",!1)("title",r.lcZ(1,7,t.pageTitle)),r.xp6(2),r.Q6J("dataTableSourceInput",r.lcZ(3,9,t.numberblockData$))("hideAllDeleteButtons",!0)("isLazyLoadingPossible",r.lcZ(4,11,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[h.Z,g.Q,b.O5],pipes:[v.X$,b.Ov,_.E],encapsulation:2}),I)},23111:function(e,t,n){n.d(t,{H:function(){return y}});var i=n(22238),a=n(3679),o=n(37716),r=n(45832),s=n(90500),c=n(74162),l=n(38583),u=n(98295),d=n(67441),f=n(72458),h=n(82613),g=n(97597),b=n(42070),v=n(29790);function _(e,t){if(1&e&&o._UZ(0,"name-input-field",19),2&e){var n=o.oxw();o.Q6J("formControl",n.name)}}function k(e,t){if(1&e){var n=o.EpF();o.TgZ(0,"footer-actions",20),o.NdJ("cancelClick",function(){return o.CHM(n),o.oxw().closeDialog()}),o.qZA()}if(2&e){var i=o.oxw();o.Q6J("btnCancelCaption",i.buttonCaptionCancel)("btnSaveCaption",i.buttonCaptionSubmit)("saveDisabled",!i.formGroup.valid||!i.formGroup.dirty)}}var x,y=((x=function(){function e(t,n,i,a){p(this,e),this.snackBarService=t,this.dialogRef=n,this.data=i,this.nconnectModalService=a,this.isGlobalPbxEndpointTemplate=!1,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.isEditModal=!1}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm(),this.isGlobalPbxEndpointTemplate&&this.formGroup.disable()}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"onSubmit",value:function(e){this.closeDialog(e)}},{key:"initModal",value:function(){this.isGlobalPbxEndpointTemplate=null===this.data.customerId,this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionCancel=this.nconnectModalService.getButtonCaption("cancel"),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal)}},{key:"getModalTitle",value:function(){return this.isGlobalPbxEndpointTemplate?this.data.name:this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}},{key:"createFormControls",value:function(){this.name=new a.NI(this.data.name||""),this.clipStyle=new a.NI(this.data.clipStyle||"AUTO",a.kI.required),this.numberFormat=new a.NI(this.data.numberFormat||"E164",a.kI.required),this.authStyle=new a.NI({value:this.data.authStyle||"REGISTRATION",disabled:this.isEditModal},a.kI.required),this.inboundRuriFormat=new a.NI(this.data.inboundRuriFormat||"KNUM",a.kI.required)}},{key:"createForm",value:function(){this.formGroup=new a.cw({name:this.name,clipStyle:this.clipStyle,numberFormat:this.numberFormat,authStyle:this.authStyle,inboundRuriFormat:this.inboundRuriFormat})}}]),e}()).\u0275fac=function(e){return new(e||x)(o.Y36(r.c),o.Y36(i.so),o.Y36(i.WI),o.Y36(s.K))},x.\u0275cmp=o.Xpm({type:x,selectors:[["pbx-endpoint-template-modal"]],decls:47,vars:39,consts:[["data-e2e","admin-pbx-endpoint-template-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-pbx-endpoint-template-modal-fragment__name--input",3,"formControl",4,"ngIf"],["appearance","fill"],["formControlName","numberFormat","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format--dropdown"],["value","E164","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-e164--option"],["value","NATIONAL","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-national--option"],["value","LOCAL","data-e2e","admin-pbx-endpoint-template-modal-fragment__number-format-local--option"],[1,"pbx-endpoint-template-modal__auth-title"],["formControlName","authStyle",1,"pbx-endpoint-template-modal__auth-methods"],["value","REGISTRATION","data-e2e","admin-pbx-endpoint-template-modal-fragment__auth-registration--radio",1,"pbx-endpoint-template-modal__auth-method"],["value","IP","data-e2e","admin-pbx-endpoint-template-modal-fragment__auth-ip--radio",1,"pbx-endpoint-template-modal__auth-method"],["appearance","fill",1,"pbx-endpoint-template-modal__clip"],["formControlName","clipStyle","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style--dropdown"],["value","AUTO","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style-auto--option"],["value","FROMNAME","data-e2e","admin-pbx-endpoint-template-modal-fragment__clip-style-from-name--option"],["formControlName","inboundRuriFormat","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-formats--dropdown"],["value","KNUM","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-format-knum--option"],["value","E164","data-e2e","admin-pbx-endpoint-template-modal-fragment__inbound-ruri-format-e164--option"],["class","pbx-endpoint-template-modal__footer-actions","e2e","admin-pbx-endpoint-template-modal-fragment",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick",4,"ngIf"],["data-e2e","admin-pbx-endpoint-template-modal-fragment__name--input",3,"formControl"],["e2e","admin-pbx-endpoint-template-modal-fragment",1,"pbx-endpoint-template-modal__footer-actions",3,"btnCancelCaption","btnSaveCaption","saveDisabled","cancelClick"]],template:function(e,t){1&e&&(o.TgZ(0,"nconnect-voice-modal",0),o.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),o.YNc(1,_,1,1,"name-input-field",1),o.TgZ(2,"mat-form-field",2),o.TgZ(3,"mat-label"),o._uU(4),o.ALo(5,"translate"),o.qZA(),o.TgZ(6,"mat-select",3),o.TgZ(7,"mat-option",4),o._uU(8),o.ALo(9,"translate"),o.qZA(),o.TgZ(10,"mat-option",5),o._uU(11),o.ALo(12,"translate"),o.qZA(),o.TgZ(13,"mat-option",6),o._uU(14),o.ALo(15,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"p",7),o._uU(17),o.ALo(18,"translate"),o.qZA(),o.TgZ(19,"mat-radio-group",8),o.TgZ(20,"mat-radio-button",9),o._uU(21),o.ALo(22,"translate"),o.qZA(),o.TgZ(23,"mat-radio-button",10),o._uU(24),o.ALo(25,"translate"),o.qZA(),o.qZA(),o.TgZ(26,"mat-form-field",11),o.TgZ(27,"mat-label"),o._uU(28),o.ALo(29,"translate"),o.qZA(),o.TgZ(30,"mat-select",12),o.TgZ(31,"mat-option",13),o._uU(32),o.ALo(33,"translate"),o.qZA(),o.TgZ(34,"mat-option",14),o._uU(35),o.ALo(36,"translate"),o.qZA(),o.qZA(),o.qZA(),o.TgZ(37,"mat-form-field",2),o.TgZ(38,"mat-label"),o._uU(39),o.ALo(40,"translate"),o.qZA(),o.TgZ(41,"mat-select",15),o.TgZ(42,"mat-option",16),o._uU(43),o.qZA(),o.TgZ(44,"mat-option",17),o._uU(45),o.qZA(),o.qZA(),o.qZA(),o.YNc(46,k,1,3,"footer-actions",18),o.qZA()),2&e&&(o.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),o.xp6(1),o.Q6J("ngIf",!t.isGlobalPbxEndpointTemplate),o.xp6(3),o.Oqu(o.lcZ(5,17,t.translationPrefix+".form.field.number_format.label")),o.xp6(4),o.hij(" ",o.lcZ(9,19,t.translationPrefix+".form.field.number_format.option.international")," "),o.xp6(3),o.hij(" ",o.lcZ(12,21,t.translationPrefix+".form.field.number_format.option.national")," "),o.xp6(3),o.hij(" ",o.lcZ(15,23,t.translationPrefix+".form.field.number_format.option.local")," "),o.xp6(3),o.hij(" ",o.lcZ(18,25,t.translationPrefix+".form.field.authentication.label"),": "),o.xp6(4),o.hij("",o.lcZ(22,27,t.translationPrefix+".form.field.authentication.option.register")," "),o.xp6(3),o.hij("",o.lcZ(25,29,t.translationPrefix+".form.field.authentication.option.ip")," "),o.xp6(4),o.Oqu(o.lcZ(29,31,t.translationPrefix+".form.field.clip_style.label")),o.xp6(4),o.hij(" ",o.lcZ(33,33,t.translationPrefix+".form.field.clip_style.option.from_id")," "),o.xp6(3),o.hij(" ",o.lcZ(36,35,t.translationPrefix+".form.field.clip_style.option.from_name")," "),o.xp6(4),o.Oqu(o.lcZ(40,37,t.translationPrefix+".form.field.inbound_ruri_format.label")),o.xp6(4),o.hij(" ","KNUM"," "),o.xp6(2),o.hij(" ","E164"," "),o.xp6(1),o.Q6J("ngIf",!t.isGlobalPbxEndpointTemplate))},directives:[c.F,a.JL,a.sg,l.O5,u.KE,u.hX,d.gD,a.JJ,a.u,f.ey,h.VQ,h.U0,g.Y,a.oH,b.c],pipes:[v.X$],styles:[".pbx-endpoint-template-modal__auth-title[_ngcontent-%COMP%]{margin:1rem 0}.pbx-endpoint-template-modal__auth-methods[_ngcontent-%COMP%]{margin:0 0 1.5rem}.pbx-endpoint-template-modal__auth-method[_ngcontent-%COMP%]:first-of-type{margin-right:2.5rem}.pbx-endpoint-template-modal__clip[_ngcontent-%COMP%]{margin-top:1.5rem}.pbx-endpoint-template-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),x)},84451:function(e,t,n){n.d(t,{m:function(){return L}});var i=n(79765),a=n(43190),o=n(45435),r=n(46782),s=n(23111),c=n(37716),l=n(8307),u=n(22238),d=n(50112),f=n(5882),h=n(38538),g=n(19885),b=n(48843),v=n(89447),_=n(50256),k=n(47444),x=n(134),y=n(81756),C=n(79764),T=n(38583),A=n(78023),S=n(29790),P=n(16891),I=["customTypeTemplate"],O=["customButtonTemplate"];function Z(e,t){1&e&&(c._uU(0),c.ALo(1,"tableItemType")),2&e&&c.hij(" ",c.lcZ(1,1,t.element.CUSTOMER_ID)," ")}function M(e,t){if(1&e){var n=c.EpF();c.ynx(0),c.TgZ(1,"app-button",7),c.NdJ("appButtonClick",function(){c.CHM(n);var e=c.oxw().element,t=c.oxw();return e.isUsed?"":t.deletePbxEndpointTemplate(e)}),c.qZA(),c.TgZ(2,"app-button",8),c.NdJ("appButtonClick",function(){c.CHM(n);var e=c.oxw().element;return c.oxw().editPbxEndpointTemplate(e)}),c.qZA(),c.BQk()}if(2&e){var i=c.oxw().element,a=c.oxw();c.xp6(1),c.Q6J("iconFill",i.isUsed?"grey-color":"button-color")("hoverTextTranslationKey",i.isUsed?a.translationPrefix+".table.hoverbox_hint.delete_disabled_for_custom_template":"")("isHoverboxVisible",i.isUsed)}}function w(e,t){if(1&e){var n=c.EpF();c.TgZ(0,"app-button",9),c.NdJ("appButtonClick",function(){c.CHM(n);var e=c.oxw().element;return c.oxw().viewPbxEndpointTemplate(e)}),c.qZA()}}function N(e,t){if(1&e&&(c.YNc(0,M,3,3,"ng-container",5),c.YNc(1,w,1,0,"ng-template",null,6,c.W1O)),2&e){var n=t.element,i=c.MAs(2);c.Q6J("ngIf",n.CUSTOMER_ID)("ngIfElse",i)}}var E,L=((E=function(){function e(t,n,a,o,r,s,c,l,u,d,m,f){p(this,e),this.router=t,this.route=n,this.dialog=a,this.pbxEndpointTemplateDataService=o,this.confirmDialogsService=r,this.dataTableService=s,this.dataTableLazyLoadingService=c,this.nconnectAccountSelectionService=l,this.accountService=u,this.trunksetDataService=d,this.nconnectItemProviderService=m,this.nconnectShortcutsService=f,this.ngUnsubscribe=new i.xQ,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.componentTranslationKey="pbx_endpoint_template",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data")}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.accountService.selectedAccountModules$.pipe((0,a.w)(function(){return e.trunksetDataService.trunksets$}),(0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){(null==t?void 0:t.length)?e.nconnectItemProviderService.setNconnectItemName(t[0]):e.router.navigate(["../"],{relativeTo:e.route})}),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.pbxEndpointTemplateData$=e.getInitialTableData()}),this.listenForNconnectShortcutEvents()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.pbxEndpointTemplateDataService.getPbxEndpointTemplates("",this.dataTableLazyLoadingService.currentPage))}},{key:"deletePbxEndpointTemplate",value:function(e){this.dataTableService.deleteTableItem(this.pbxEndpointTemplateDataService.deletePbxEndpointTemplate(e.ID),e.ID,this.componentTranslationKey)}},{key:"editPbxEndpointTemplate",value:function(e){var t=this;this.openPbxEndpointTemplateModal(e).pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(n){t.dataTableService.editTableItem(t.pbxEndpointTemplateDataService.updatePbxEndpointTemplate(e.ID,n),t.componentTranslationKey)})}},{key:"viewPbxEndpointTemplate",value:function(e){this.openPbxEndpointTemplateModal(e)}},{key:"createPbxEndpointTemplate",value:function(){var e=this;this.openPbxEndpointTemplateModal().pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.dataTableService.createTableItem(e.pbxEndpointTemplateDataService.createPbxEndpointTemplate(t),e.componentTranslationKey)})}},{key:"openPbxEndpointTemplateModal",value:function(e){return this.dialog.open(s.H,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",pbxEndpointTemplateId:null==e?void 0:e.ID,name:null==e?void 0:e.NAME,customerId:null==e?void 0:e.CUSTOMER_ID,clipStyle:null==e?void 0:e.CLIP_STYLE,numberFormat:null==e?void 0:e.NUMBER_FORMAT,authStyle:null==e?void 0:e.AUTH_STYLE,inboundRuriFormat:null==e?void 0:e.INBOUND_RURI_FORMAT,component:this.componentTranslationKey}}}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.pbxEndpointTemplateDataService.getPbxEndpointTemplates())}},{key:"listenForNconnectShortcutEvents",value:function(){var e=this;this.nconnectShortcutsService.addButtonClicked$.pipe((0,o.h)(function(t){return t===e.componentTranslationKey}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.createPbxEndpointTemplate(),e.nconnectShortcutsService.resetNconnectComponent()})}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME"},{title:"".concat(this.translationPrefix,".table.column.type"),columnNameId:"CUSTOMER_ID",customCellTemplate:this.customTypeTemplate},{columnNameId:"buttons",customButtonTemplate:this.customButtonTemplate}]}}]),e}()).\u0275fac=function(e){return new(e||E)(c.Y36(l.F0),c.Y36(l.gz),c.Y36(u.uw),c.Y36(d.p),c.Y36(f.U),c.Y36(h.n),c.Y36(g.Y),c.Y36(b.c),c.Y36(v.B),c.Y36(_.R),c.Y36(k.U),c.Y36(x.f))},E.\u0275cmp=c.Xpm({type:E,selectors:[["pbx-endpoint-template"]],viewQuery:function(e,t){var n;1&e&&(c.Gf(I,7),c.Gf(O,7)),2&e&&(c.iGM(n=c.CRH())&&(t.customTypeTemplate=n.first),c.iGM(n=c.CRH())&&(t.customButtonTemplate=n.first))},decls:9,vars:11,consts:[[3,"title","addButtonClicked"],["activeSortColumn","CUSTOMER_ID","activeSortColumnSortDirection","desc",3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__customer-type"],["customTypeTemplate",""],["customButtonTemplate",""],[4,"ngIf","ngIfElse"],["showDefaultButtons",""],["iconName","delete","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__delete--button",3,"iconFill","hoverTextTranslationKey","isHoverboxVisible","appButtonClick"],["iconName","edit","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__edit--button",3,"appButtonClick"],["iconName","info","data-e2e","admin-nconnect-voice-pbx-endpoint-template-page__info--button",3,"appButtonClick"]],template:function(e,t){1&e&&(c.TgZ(0,"admin-list-header",0),c.NdJ("addButtonClicked",function(){return t.createPbxEndpointTemplate()}),c.ALo(1,"translate"),c.qZA(),c.TgZ(2,"data-table",1),c.NdJ("deleteButtonClicked",function(e){return t.deletePbxEndpointTemplate(e)})("editButtonClicked",function(e){return t.editPbxEndpointTemplate(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),c.ALo(3,"async"),c.ALo(4,"async"),c.YNc(5,Z,2,3,"ng-template",2,3,c.W1O),c.YNc(7,N,3,2,"ng-template",null,4,c.W1O),c.qZA()),2&e&&(c.Q6J("title",c.lcZ(1,5,t.pageTitle)),c.xp6(2),c.Q6J("dataTableSourceInput",c.lcZ(3,7,t.pbxEndpointTemplateData$))("isLazyLoadingPossible",c.lcZ(4,9,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[y.Z,C.Q,T.O5,A.V],pipes:[S.X$,T.Ov,P.B],encapsulation:2}),E)},15697:function(e,n,i){i.d(n,{X:function(){return te}});var a=i(79764),o=i(46782),s=i(37716),l=i(69553),d=i(19885),f=i(32789),h=i(65860),g=i(11494),b=i(38583),v=i(14944),_=i(78023),k=i(44163),x=i(38052),y=i(67961),C=i(29790),T=i(37833);function A(e,t){if(1&e&&(s.TgZ(0,"mat-header-cell",13),s.ALo(1,"dataTableColumnSize"),s.TgZ(2,"div",14),s.ALo(3,"dataTableColumnHighlighted"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(2).$implicit;s.Q6J("className",s.lcZ(1,4,n))("disabled",n.sortingDisabled),s.xp6(2),s.Q6J("ngClass",s.lcZ(3,6,n)),s.xp6(2),s.hij(" ",s.lcZ(5,8,n.title)," ")}}function S(e,t){}var P=function(e,t,n,i){return{element:e,column:t,index:n,last:i}};function I(e,t){if(1&e&&(s.TgZ(0,"mat-cell",15),s.ALo(1,"dataTableColumnSize"),s.TgZ(2,"div",14),s.ALo(3,"dataTableColumnHighlighted"),s.YNc(4,S,0,0,"ng-template",16),s.qZA(),s.qZA()),2&e){var n=t.$implicit,i=t.index,a=t.last,o=s.oxw(2).$implicit;s.Q6J("className",s.lcZ(1,4,o)),s.xp6(2),s.Q6J("ngClass",s.lcZ(3,6,o)),s.xp6(2),s.Q6J("ngTemplateOutletContext",s.l5B(8,P,n,o,i,a))("ngTemplateOutlet",o.customCellTemplate)}}function O(e,t){1&e&&(s.ynx(0),s.YNc(1,A,6,10,"mat-header-cell",11),s.YNc(2,I,5,13,"mat-cell",12),s.BQk())}function Z(e,t){if(1&e&&(s.TgZ(0,"mat-header-cell",13),s.ALo(1,"dataTableColumnSize"),s.TgZ(2,"div",14),s.ALo(3,"dataTableColumnHighlighted"),s._uU(4),s.ALo(5,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(3).$implicit;s.Q6J("className",s.lcZ(1,4,n))("disabled",n.sortingDisabled),s.xp6(2),s.Q6J("ngClass",s.lcZ(3,6,n)),s.xp6(2),s.hij(" ",s.lcZ(5,8,n.title)," ")}}function M(e,t){if(1&e&&(s.TgZ(0,"mat-cell",15),s.ALo(1,"dataTableColumnSize"),s.TgZ(2,"div",14),s.ALo(3,"dataTableColumnHighlighted"),s._uU(4),s.qZA(),s.qZA()),2&e){var n=t.$implicit,i=s.oxw(3).$implicit;s.Q6J("className",s.lcZ(1,3,i)),s.xp6(2),s.Q6J("ngClass",s.lcZ(3,5,i)),s.xp6(2),s.hij(" ",n[i.columnNameId]," ")}}function w(e,t){1&e&&(s.ynx(0),s.YNc(1,Z,6,10,"mat-header-cell",11),s.YNc(2,M,5,7,"mat-cell",12),s.BQk())}function N(e,t){if(1&e&&s.YNc(0,w,3,0,"ng-container",8),2&e){var n=s.oxw().$implicit,i=s.MAs(5);s.Q6J("ngIf","buttons"!==n.columnNameId)("ngIfElse",i)}}function E(e,t){1&e&&s._UZ(0,"mat-header-cell")}function L(e,t){}function U(e,t){if(1&e&&(s.ynx(0),s.YNc(1,L,0,0,"ng-template",16),s.BQk()),2&e){var n=s.oxw(2),i=n.$implicit,a=n.index,o=n.last,r=s.oxw(2).$implicit;s.xp6(1),s.Q6J("ngTemplateOutletContext",s.l5B(2,P,i,r,a,o))("ngTemplateOutlet",r.customButtonTemplate)}}function D(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-button",24),s.NdJ("appButtonClick",function(){s.CHM(n);var e=s.oxw(3).$implicit;return s.oxw(3).deleteButtonClick(e)}),s.qZA()}}function B(e,t){if(1&e){var n=s.EpF();s.TgZ(0,"app-button",25),s.NdJ("appButtonClick",function(){s.CHM(n);var e=s.oxw(3).$implicit;return s.oxw(3).editButtonClick(e)}),s.qZA()}if(2&e){var i=s.oxw(6);s.Q6J("iconName",i.customEditButton)}}function q(e,t){if(1&e&&(s.YNc(0,D,1,0,"app-button",22),s.YNc(1,B,1,1,"app-button",23)),2&e){var n=s.oxw(5);s.Q6J("ngIf",!n.hideAllDeleteButtons),s.xp6(1),s.Q6J("ngIf",!n.hideAllEditButtons)}}function R(e,t){if(1&e&&(s.TgZ(0,"div",20),s.YNc(1,U,2,7,"ng-container",8),s.YNc(2,q,2,2,"ng-template",null,21,s.W1O),s.qZA()),2&e){var n=s.MAs(3),i=s.oxw(3).$implicit;s.xp6(1),s.Q6J("ngIf",i.customButtonTemplate)("ngIfElse",n)}}function F(e,t){if(1&e&&(s.TgZ(0,"mat-cell"),s.YNc(1,R,4,2,"div",19),s.ALo(2,"isEditableDataTableItem"),s.qZA()),2&e){var n=t.$implicit;s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,n))}}function Y(e,t){1&e&&(s.YNc(0,E,1,0,"mat-header-cell",17),s.YNc(1,F,3,3,"mat-cell",18))}function J(e,t){if(1&e&&(s.ynx(0,7),s.YNc(1,O,3,0,"ng-container",8),s.YNc(2,N,1,2,"ng-template",null,9,s.W1O),s.YNc(4,Y,2,0,"ng-template",null,10,s.W1O),s.BQk()),2&e){var n=t.$implicit,i=s.MAs(3);s.Q6J("matColumnDef",n.columnNameId),s.xp6(1),s.Q6J("ngIf",n.customCellTemplate)("ngIfElse",i)}}function Q(e,t){1&e&&s._UZ(0,"mat-header-row",26)}var z=function(e){return{disabled:e}};function $(e,t){1&e&&(s._UZ(0,"mat-row",27),s.ALo(1,"isEditableDataTableItem")),2&e&&s.Q6J("ngClass",s.VKq(3,z,!s.lcZ(1,1,t.$implicit)))}function j(e,t){1&e&&s._UZ(0,"app-spinner",28)}function K(e,t){if(1&e&&(s.TgZ(0,"div",31),s.TgZ(1,"span"),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.qZA()),2&e){var n=s.oxw(3);s.xp6(2),s.Oqu(s.lcZ(3,1,n.noDataEntriesText))}}function H(e,t){1&e&&s.GkF(0)}function G(e,t){if(1&e&&(s.ynx(0),s.YNc(1,K,4,3,"div",29),s.YNc(2,H,1,0,"ng-container",30),s.BQk()),2&e){var n=s.oxw(2);s.xp6(1),s.Q6J("ngIf",!n.noDataEntriesAvailableTemplate),s.xp6(1),s.Q6J("ngTemplateOutlet",n.noDataEntriesAvailableTemplate)}}function V(e,t){if(1&e&&s.YNc(0,G,3,2,"ng-container",6),2&e){var n=s.oxw();s.Q6J("ngIf",0===n.dataTableSourceMatTable.data.length)}}function X(e,t){1&e&&s._UZ(0,"app-spinner",33)}function W(e,t){if(1&e&&(s.ynx(0),s.YNc(1,X,1,0,"app-spinner",32),s.ALo(2,"async"),s.BQk()),2&e){var n=s.oxw();s.xp6(1),s.Q6J("ngIf",s.lcZ(2,1,n.isLazyLoadingInProgress$))}}var ee,te=((ee=function(e){r(i,e);var n=c(i);function i(e,t){var a;return p(this,i),(a=n.call(this,e,t)).pbxEndpointDataTableService=e,a.dataTableLazyLoadingService=t,a}return m(i,[{key:"ngOnInit",value:function(){var e=this;this.initColumnData(this.tableConfig),this.listenForTableActionChanges(),this.pbxEndpointDataTableService.moveTableItem$.pipe((0,o.R)(this.ngUnsubscribe)).subscribe(function(t){e.movePbxEndpointPosition(t),e.setTableSourceAndSort()})}},{key:"ngOnChanges",value:function(e){e.isLazyLoadingPossible&&(this.isLazyLoadingPossible=e.isLazyLoadingPossible.currentValue),e.dataTableSourceInput&&(null===e.dataTableSourceInput.currentValue&&(this.dataTableSourceMatTable=null),e.dataTableSourceInput.currentValue&&this.setTableSourceAndSort())}},{key:"ngOnDestroy",value:function(){t(u(i.prototype),"ngOnDestroy",this).call(this)}},{key:"movePbxEndpointPosition",value:function(e){var t,n=this.getAdjustedPbxEndpoint(e.pbxEndpoints[0]),i=this.getAdjustedPbxEndpoint(e.pbxEndpoints[1]),a="UP"===e.moveOption?e.index-1:e.index+1;this.dataTableSourceInput[e.index]=n,this.dataTableSourceInput[a]=i,t=[this.dataTableSourceInput[a],this.dataTableSourceInput[e.index]],this.dataTableSourceInput[e.index]=t[0],this.dataTableSourceInput[a]=t[1]}},{key:"getAdjustedPbxEndpoint",value:function(e){var t=this.dataTableSourceInput.find(function(t){return t.ID===e.ID});return t.PRIORITY=e.PRIORITY,t}}]),i}(a.Q)).\u0275fac=function(e){return new(e||ee)(s.Y36(l.E),s.Y36(d.Y))},ee.\u0275cmp=s.Xpm({type:ee,selectors:[["pbx-endpoint-data-table"]],features:[s.qOj,s.TTD],decls:9,vars:10,consts:[["infiniteScroller","","matSort","","data-e2e","data-table-fragment",3,"dataSource","matSortActive","matSortDirection","endOfListReached"],[3,"matColumnDef",4,"ngFor","ngForOf"],["data-e2e","data-table-fragment__header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","data-table__row","data-e2e","data-table-fragment__row",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","data-table__app-spinner",4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[3,"matColumnDef"],[4,"ngIf","ngIfElse"],["showDefaultTemplate",""],["showButtons",""],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled",4,"matHeaderCellDef"],["data-e2e","data-table-fragment__cell",3,"className",4,"matCellDef"],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled"],["ellipsisTitle","",3,"ngClass"],["data-e2e","data-table-fragment__cell",3,"className"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","data-table__buttons",4,"ngIf"],[1,"data-table__buttons"],["showDefaultActionButtons",""],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick",4,"ngIf"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick",4,"ngIf"],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick"],["data-e2e","data-table-fragment__header-row"],["data-e2e","data-table-fragment__row",1,"data-table__row",3,"ngClass"],[1,"data-table__app-spinner"],["class","data-table__no-data",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"data-table__no-data"],["class","data-table__load-more-spinner",4,"ngIf"],[1,"data-table__load-more-spinner"]],template:function(e,t){if(1&e&&(s.TgZ(0,"mat-table",0),s.NdJ("endOfListReached",function(){return t.onEndOfListReached()}),s.YNc(1,J,6,3,"ng-container",1),s.YNc(2,Q,1,0,"mat-header-row",2),s.ynx(3),s.YNc(4,$,2,5,"mat-row",3),s.BQk(),s.qZA(),s.YNc(5,j,1,0,"app-spinner",4),s.YNc(6,V,1,1,"ng-template",null,5,s.W1O),s.YNc(8,W,3,3,"ng-container",6)),2&e){var n=s.MAs(7);s.Q6J("dataSource",t.dataTableSourceMatTable)("matSortActive",t.activeSortColumn)("matSortDirection",t.activeSortColumnSortDirection),s.xp6(1),s.Q6J("ngForOf",t.displayedColumns),s.xp6(1),s.Q6J("matHeaderRowDef",t.columnNameIds)("matHeaderRowDefSticky",!0),s.xp6(2),s.Q6J("matRowDefColumns",t.columnNameIds),s.xp6(1),s.Q6J("ngIf",!t.dataTableSourceMatTable)("ngIfElse",n),s.xp6(3),s.Q6J("ngIf",t.dataTableSourceMatTable&&t.isLazyLoadingPossible)}},directives:[f.BZ,h.A,g.YE,b.sg,f.as,f.nj,b.O5,f.w1,f.fO,f.Dz,f.ge,g.nU,v.w,b.mk,f.ev,b.tP,_.V,f.XQ,f.Gk,k.S],pipes:[x.w,y.Y,C.X$,T.C,b.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;position:relative}.data-table__content--highlighted[_ngcontent-%COMP%]{width:100%}.data-table__buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}mat-cell[_ngcontent-%COMP%]{font-size:1.8rem}.mat-column-buttons[_ngcontent-%COMP%]{flex:0;opacity:0;position:absolute;right:0;transition:opacity 50ms;z-index:1}.cell-size--small[_ngcontent-%COMP%]{flex:0 0 5%!important}.cell-size--medium[_ngcontent-%COMP%]{flex:0 0 15%!important}.cell-size--large[_ngcontent-%COMP%]{flex:0 0 30%!important}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{max-width:40rem;padding:0 2.4rem}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{padding:0 .8rem}mat-row[_ngcontent-%COMP%]{height:5.6rem;position:relative}mat-row[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:1}.data-table__row.disabled[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{color:#b2b2b2}.data-table__row.disabled[_ngcontent-%COMP%]:hover{background-color:inherit}.data-table__row.disabled[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:0}.data-table__no-data[_ngcontent-%COMP%]{font-size:2.4rem;left:0;position:absolute;right:0;text-align:center;top:10rem}.data-table__app-spinner[_ngcontent-%COMP%]{position:absolute;top:10rem}.data-table__load-more-spinner[_ngcontent-%COMP%]{background:linear-gradient(#ffffff80,#fff);bottom:0;min-height:4rem;position:absolute;right:.5rem;z-index:1}"]}),ee)},40532:function(e,t,n){n.d(t,{D:function(){return ee}});var i=n(22238),a=n(3679),o=n(39761),r=n(88002),s=n(46782),c=n(68307),l=n(71289),u=n(79765),d=n(25917),f=n(37716),h=n(45832),g=n(5882),b=n(90500),v=n(29790),_=n(69553),k=n(83282),x=n(84594),y=n(6869),C=n(74162),T=n(97597),A=n(38583),S=n(42070),P=n(98295),I=n(83166),O=n(21554),Z=n(68140),M=n(72458),w=n(55821),N=n(63743),E=n(56436),L=n(67441),U=n(44163),D=n(3425),B=n(92996),q=n(14320);function R(e,t){if(1&e&&(f.TgZ(0,"hoverbox"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){var n=f.oxw(3);f.xp6(1),f.hij(" ",f.lcZ(2,1,n.msTeamsHoverboxHint)," ")}}function F(e,t){if(1&e&&(f.TgZ(0,"mat-option",13),f._uU(1),f.ALo(2,"pbxAuthMethod"),f.YNc(3,R,3,3,"hoverbox",3),f.qZA()),2&e){var n=t.$implicit,i=f.oxw(2);f.Q6J("value",n)("disabled","MSTEAMS"===n.AUTH_STYLE&&!i.isMsTeamsTemplateSelectable),f.xp6(1),f.AsE(" ",n.NAME," ",f.lcZ(2,5,n.AUTH_STYLE)," "),f.xp6(2),f.Q6J("ngIf","MSTEAMS"===n.AUTH_STYLE&&!i.isMsTeamsTemplateSelectable)}}function Y(e,t){if(1&e&&(f.TgZ(0,"mat-hint",14),f._UZ(1,"app-svg-icon",15),f._uU(2),f.ALo(3,"translate"),f.qZA()),2&e){var n=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,1,n.translationPrefix+".form.field.pbx_endpoint_template.hint")," ")}}function J(e,t){if(1&e){var n=f.EpF();f.TgZ(0,"mat-form-field",7),f.TgZ(1,"mat-label"),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.TgZ(4,"input",8),f.NdJ("userInputInProgress",function(e){return f.CHM(n),f.oxw().setUserInputState(e)}),f.qZA(),f.TgZ(5,"mat-autocomplete",9,10),f.NdJ("optionSelected",function(e){return f.CHM(n),f.oxw().onTemplateSelection(e)}),f.YNc(7,F,4,7,"mat-option",11),f.ALo(8,"async"),f.qZA(),f.YNc(9,Y,4,3,"mat-hint",12),f.qZA()}if(2&e){var i=f.MAs(6),a=f.oxw();f.ekj("pbx-endpoint-modal__template-selection","REGISTRATION"===a.authStyle),f.xp6(2),f.Oqu(f.lcZ(3,7,a.translationPrefix+".form.field.pbx_endpoint_template.label")),f.xp6(2),f.Q6J("matAutocomplete",i),f.xp6(1),f.Q6J("displayWith",a.displayTemplateName),f.xp6(2),f.Q6J("ngForOf",f.lcZ(8,9,a.filteredPbxEndpointTemplates$)),f.xp6(2),f.Q6J("ngIf","REGISTRATION"===a.authStyle)}}function Q(e,t){if(1&e&&(f.TgZ(0,"mat-option",18),f._uU(1),f.qZA()),2&e){var n=t.$implicit;f.Q6J("value",n)("disabled",n.isUsed),f.xp6(1),f.hij(" ",n.DOMAIN," ")}}function z(e,t){if(1&e&&(f.ynx(0),f.TgZ(1,"mat-form-field",7),f.TgZ(2,"mat-label"),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"mat-select",16),f.YNc(6,Q,2,3,"mat-option",17),f.ALo(7,"async"),f.qZA(),f.qZA(),f.BQk()),2&e){var n=f.oxw();f.xp6(3),f.hij(" ",f.lcZ(4,2,n.translationPrefix+".form.field.ms_teams.select_box_label")," "),f.xp6(3),f.Q6J("ngForOf",f.lcZ(7,4,n.msTeamsDomains$))}}function $(e,t){if(1&e&&(f.TgZ(0,"mat-hint",26),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){var n=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,n.translationPrefix+".form.field.protocol.info.always_srtp")," ")}}function j(e,t){if(1&e&&(f.TgZ(0,"mat-error"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){var n=f.oxw(2);f.xp6(1),f.Oqu(f.lcZ(2,1,n.translationPrefix+".form.field.ip_adress.error.bad_format"))}}function K(e,t){if(1&e&&(f.TgZ(0,"mat-error"),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&e){var n=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,n.translationPrefix+".form.field.port.error.range")," ")}}function H(e,t){if(1&e&&(f.ynx(0),f.TgZ(1,"mat-form-field",7),f.TgZ(2,"mat-label"),f._uU(3),f.ALo(4,"translate"),f.qZA(),f.TgZ(5,"mat-select",19,20),f.TgZ(7,"mat-option",21),f._uU(8,"TCP"),f.qZA(),f.TgZ(9,"mat-option",22),f._uU(10,"UDP"),f.qZA(),f.TgZ(11,"mat-option",23),f._uU(12,"TLS"),f.qZA(),f.qZA(),f.YNc(13,$,3,3,"mat-hint",24),f.qZA(),f.TgZ(14,"mat-form-field",7),f.TgZ(15,"mat-label"),f._uU(16),f.ALo(17,"translate"),f.qZA(),f._UZ(18,"input",25),f.TgZ(19,"mat-hint",26),f._uU(20),f.ALo(21,"translate"),f.qZA(),f.YNc(22,j,3,3,"mat-error",3),f.qZA(),f.TgZ(23,"mat-form-field",7),f.TgZ(24,"mat-label"),f._uU(25),f.ALo(26,"translate"),f.qZA(),f._UZ(27,"input",27),f.YNc(28,K,3,3,"mat-error",3),f.qZA(),f.BQk()),2&e){var n=f.MAs(6),i=f.oxw();f.xp6(3),f.Oqu(f.lcZ(4,7,i.translationPrefix+".form.field.protocol.label")),f.xp6(10),f.Q6J("ngIf","tls"===n.value||"tls"===(null==i.data.pbxEndpoint?null:i.data.pbxEndpoint.PROTOCOL)),f.xp6(3),f.Oqu(f.lcZ(17,9,i.translationPrefix+".form.field.ip_adress.label")),f.xp6(4),f.Oqu(f.lcZ(21,11,i.translationPrefix+".form.field.ip_adress.hint")),f.xp6(2),f.Q6J("ngIf",i.host.errors),f.xp6(3),f.Oqu(f.lcZ(26,13,i.translationPrefix+".form.field.port.label")),f.xp6(3),f.Q6J("ngIf",i.port.errors)}}function G(e,t){1&e&&f._UZ(0,"app-spinner")}function V(e,t){if(1&e&&f._UZ(0,"pbx-endpoint-sms-info",28),2&e){var n=f.oxw();f.Q6J("isSendingSms",n.isSendingSms)("smsSendFail",n.smsSendFail)("smsSendSuccess",n.smsSendSuccess)("username",n.username)}}function X(e,t){if(1&e&&f._UZ(0,"pbx-endpoint-reset-section",29),2&e){var n=f.oxw();f.Q6J("authStyle",n.authStyle)("pbxEndpoint",n.data.pbxEndpoint)}}var W,ee=((W=function(){function e(t,n,i,a,o,r,s,c,l,m){p(this,e),this.snackBarService=t,this.dialogRef=n,this.data=i,this.confirmDialogsService=a,this.nconnectModalService=o,this.translateService=r,this.pbxEndpointDataTableService=s,this.dataTableMessageService=c,this.pbxEndpointDataService=l,this.msTeamsService=m,this.ngUnsubscribe=new u.xQ,this.isEditModal=!1,this.creatingPBXEndpointInProgress=!1,this.pbxEndpointSuccessfullyCreated=!1,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.isUserInputInProgress=!1,this.smsSendSuccess=!1,this.smsSendFail=!1,this.isSendingSms=!1,this.isMsTeamsTemplateSelectable=!1,this.msTeamsHoverboxHint="",this.msTeamsDomains$=this.msTeamsService.msTeamsDomains$,this.filteredPbxEndpointTemplates$=(0,d.of)(i.pbxEndpointTemplates),this.selectedTrunksetId=i.selectedTrunksetId}return m(e,[{key:"ngOnInit",value:function(){var e,t;this.isEditModal="edit"===this.data.type,this.modalTitle=this.getModalTitle(),this.buttonCaptionSubmit=this.nconnectModalService.getButtonCaption("save",this.isEditModal),this.setMsTeamsContent(),this.createFormControls(),this.createForm(),this.filteredPbxEndpointTemplates$=this.listenForTemplateChanges(),this.isEditModal&&(this.setSelectedTemplate(null===(e=this.data.pbxEndpoint)||void 0===e?void 0:e.PBXENDPOINT_TEMPLATE_ID),this.username=null===(t=this.data.pbxEndpoint)||void 0===t?void 0:t.USERNAME)}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"cancelClick",value:function(e){this.dialogRef.close(e)}},{key:"onSubmit",value:function(e){this.isEditModal?this.cancelClick(e):this.pbxEndpointSuccessfullyCreated?this.doTaskAfterPbxEndpointHasBeenCreated():this.createPbxEndpoint(e)}},{key:"onTemplateSelection",value:function(e){var t=e.option.value;this.setUserInputState(!1),this.setSelectedTemplate(t.ID),this.setMsTeamsDomainFormInitValue(t)}},{key:"displayTemplateName",value:function(e){return null==e?void 0:e.NAME}},{key:"setUserInputState",value:function(e){this.isUserInputInProgress=e}},{key:"setAuthStyleValidators",value:function(e){this.authStyle=e.AUTH_STYLE,"IP"===this.authStyle?(this.setValidatorsForProtocolField(),this.setValidatorsForHostField(),this.setValidatorsForPortField()):this.clearValidators(),this.updateValidators()}},{key:"setMsTeamsDomainFormInitValue",value:function(e){var t;"MSTEAMS"===e.AUTH_STYLE?this.msTeamsDomain.setValue((null===(t=this.availableMsTeamsDomains)||void 0===t?void 0:t.length)&&this.availableMsTeamsDomains[0]):this.msTeamsDomain.reset()}},{key:"setHoverboxTextForMsTeamsTemplate",value:function(){var e,t="";this.data.amountPbxEndpoints>0?t="pbx_endpoint_already_exists":0===this.data.msTeamsDomains.length?t="no_linkable_domains_available":(null===(e=this.availableMsTeamsDomains)||void 0===e?void 0:e.length)||(t="no_unused_domains_available"),this.msTeamsHoverboxHint="".concat(this.translationPrefix,".form.field.ms_teams.").concat(t)}},{key:"setSelectedTemplate",value:function(e){this.selectedTemplate=this.data.pbxEndpointTemplates.find(function(t){return t.ID===e}),this.setAuthStyleValidators(this.selectedTemplate)}},{key:"listenForTemplateChanges",value:function(){var e=this;return this.pbxEndpointTemplate.valueChanges.pipe((0,o.O)(""),(0,r.U)(function(t){return e.getTemplateName(t,e.data.pbxEndpointTemplates)}),(0,r.U)(function(t){return e.filterTemplates(t,e.data.pbxEndpointTemplates)}),(0,s.R)(this.ngUnsubscribe))}},{key:"getTemplateName",value:function(e,t){if("string"==typeof e)return e;var n=t.find(function(t){return t.ID===e.ID});return(null==n?void 0:n.NAME)||"-"}},{key:"filterTemplates",value:function(e,t){return t.filter(function(t){return t.NAME.toLowerCase().includes(e.toLowerCase())})}},{key:"doTaskAfterPbxEndpointHasBeenCreated",value:function(){this.smsSendSuccess||this.sendSms(this.createdPbxEndpoint),this.cancelClick()}},{key:"createPbxEndpoint",value:function(e){var t=this,n="create";this.setCreatingPbxProgressState(!0),this.dataTableMessageService.showDataTableSnackbar(n,"init",this.componentTranslationKey),("IP"===this.authStyle||"MSTEAMS"===this.authStyle)&&this.cancelClick(),this.pbxEndpointDataService.createPbxEndpoint(this.selectedTrunksetId,e).subscribe(function(e){"success"===e.appStatusCode&&("REGISTRATION"===t.authStyle&&t.setModalForPbxEndpointWithRegistrationAuthStyle(e.data[0]),t.pbxEndpointSuccessfullyCreated=!0,t.pbxEndpointDataTableService.addTableItem(e.data[0]),t.dataTableMessageService.showDataTableSnackbar(n,"success",t.componentTranslationKey)),t.setCreatingPbxProgressState(!1)})}},{key:"setCreatingPbxProgressState",value:function(e){this.creatingPBXEndpointInProgress=e}},{key:"setModalForPbxEndpointWithRegistrationAuthStyle",value:function(e){this.createdPbxEndpoint=e,this.username=this.createdPbxEndpoint.USERNAME,this.modalTitle=this.createdPbxEndpoint.NAME,this.buttonCaptionSubmit="".concat(this.translationPrefix,".button.send"),this.formGroup.disable()}},{key:"updateValidators",value:function(){this.protocol.updateValueAndValidity(),this.host.updateValueAndValidity(),this.port.updateValueAndValidity()}},{key:"clearValidators",value:function(){this.protocol.clearValidators(),this.host.clearValidators(),this.port.clearValidators()}},{key:"setValidatorsForPortField",value:function(){this.port.setValidators(a.kI.compose([a.kI.required,a.kI.min(1),a.kI.max(65535),a.kI.pattern(/^[0-9]*$/)]))}},{key:"setValidatorsForProtocolField",value:function(){this.protocol.setValidators(a.kI.required)}},{key:"setValidatorsForHostField",value:function(){this.host.setValidators(a.kI.compose([a.kI.required,a.kI.pattern(e.IP_ADRESS_PATTERN)]))}},{key:"getModalTitle",value:function(){return this.nconnectModalService.getModalTitle(this.componentTranslationKey,this.isEditModal)}},{key:"sendSms",value:function(e){var t=this;this.pbxEndpointDataService.setPassword(e).pipe((0,c.b)(function(){t.isSendingSms=!0}),(0,l.g)(2e3),(0,s.R)(this.ngUnsubscribe)).subscribe(function(e){t.handleSmsApiResponse("success"===e.appStatusCode)})}},{key:"handleSmsApiResponse",value:function(e){this.setSmsStates(e),this.showSmsSnackbar(e)}},{key:"setSmsStates",value:function(e){this.smsSendSuccess=e,this.smsSendFail=!e,this.isSendingSms=!1,e&&(this.buttonCaptionSubmit="".concat(this.translationPrefix,".button.ok"))}},{key:"showSmsSnackbar",value:function(e){this.snackBarService.openInfo("".concat(this.translationPrefix,".sms_info.").concat(e?"sending_sms_success":"sending_sms_failed"))}},{key:"setMsTeamsContent",value:function(){var e;this.availableMsTeamsDomains=this.data.msTeamsDomains.filter(function(e){return!e.isUsed}),this.isMsTeamsTemplateSelectable=this.data.msTeamsDomains.length>0&&0===this.data.amountPbxEndpoints&&!!(null===(e=this.availableMsTeamsDomains)||void 0===e?void 0:e.length),this.isMsTeamsTemplateSelectable||this.setHoverboxTextForMsTeamsTemplate()}},{key:"createFormControls",value:function(){var e=this.data.pbxEndpoint,t=this.data.msTeamsDomains.find(function(t){return Number(null==t?void 0:t.PBXENDPOINT_ID)===(null==e?void 0:e.ID)});this.name=new a.NI((null==e?void 0:e.NAME)||""),this.pbxEndpointTemplate=new a.NI((null==e?void 0:e.PBXENDPOINT_TEMPLATE_ID)||"",a.kI.required),this.protocol=new a.NI((null==e?void 0:e.PROTOCOL)||""),this.host=new a.NI((null==e?void 0:e.HOST)||""),this.port=new a.NI((null==e?void 0:e.PORT)||""),this.msTeamsDomain=new a.NI({value:t,disabled:this.isEditModal})}},{key:"createForm",value:function(){this.formGroup=new a.cw({name:this.name,pbxEndpointTemplate:this.pbxEndpointTemplate,protocol:this.protocol,host:this.host,port:this.port,msTeamsDomain:this.msTeamsDomain})}}]),e}()).IP_ADRESS_PATTERN=/^(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))$/,W.\u0275fac=function(e){return new(e||W)(f.Y36(h.c),f.Y36(i.so),f.Y36(i.WI),f.Y36(g.U),f.Y36(b.K),f.Y36(v.sK),f.Y36(_.E),f.Y36(k.D),f.Y36(x.W),f.Y36(y.C))},W.\u0275cmp=f.Xpm({type:W,selectors:[["pbx-endpoint-modal"]],decls:9,vars:12,consts:[["data-e2e","admin-pbx-endpoint-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-pbx-endpoint-modal-fragment__name--input",3,"formControl"],["appearance","fill",3,"pbx-endpoint-modal__template-selection",4,"ngIf"],[4,"ngIf"],[3,"isSendingSms","smsSendFail","smsSendSuccess","username",4,"ngIf"],[3,"authStyle","pbxEndpoint",4,"ngIf"],["e2e","admin-pbx-endpoint-modal-fragment",1,"pbx-endpoint-modal__footer-actions",3,"btnSaveCaption","cancelButtonIsHidden","saveDisabled","cancelClick"],["appearance","fill"],["formControlName","pbxEndpointTemplate","matInput","","tabEnterAutocomplete","","data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--input",3,"matAutocomplete","userInputInProgress"],[3,"displayWith","optionSelected"],["auto1","matAutocomplete"],["data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--option","appHoverbox","",3,"value","disabled",4,"ngFor","ngForOf"],["class","pbx-endpoint-modal__mat-hint",4,"ngIf"],["data-e2e","admin-pbx-endpoint-modal-fragment__pbx-endpoint-template--option","appHoverbox","",3,"value","disabled"],[1,"pbx-endpoint-modal__mat-hint"],["fill","missed-color","icon","attention",1,"pbx-endpoint-modal__attention-icon"],["formControlName","msTeamsDomain"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["formControlName","protocol","data-e2e","admin-pbx-endpoint-modal-fragment__protocol"],["protocol",""],["value","tcp","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-tcp"],["value","udp","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-udp"],["value","tls","data-e2e","admin-pbx-endpoint-modal-fragment__protocol-tls"],["align","end",4,"ngIf"],["formControlName","host","matInput","","placeholder","XXX.XXX.XXX","data-e2e","admin-pbx-endpoint-modal-fragment__host--input"],["align","end"],["formControlName","port","matInput","","placeholder","XXXX","data-e2e","admin-pbx-endpoint-modal-fragment__port--input"],[3,"isSendingSms","smsSendFail","smsSendSuccess","username"],[3,"authStyle","pbxEndpoint"]],template:function(e,t){1&e&&(f.TgZ(0,"nconnect-voice-modal",0),f.NdJ("ngSubmit",function(){return t.onSubmit(t.formGroup.value)}),f._UZ(1,"name-input-field",1),f.YNc(2,J,10,11,"mat-form-field",2),f.YNc(3,z,8,6,"ng-container",3),f.YNc(4,H,29,15,"ng-container",3),f.YNc(5,G,1,0,"app-spinner",3),f.YNc(6,V,1,4,"pbx-endpoint-sms-info",4),f.YNc(7,X,1,2,"pbx-endpoint-reset-section",5),f.TgZ(8,"footer-actions",6),f.NdJ("cancelClick",function(){return t.cancelClick()}),f.qZA(),f.qZA()),2&e&&(f.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),f.xp6(1),f.Q6J("formControl",t.name),f.xp6(1),f.Q6J("ngIf",!t.isEditModal),f.xp6(1),f.Q6J("ngIf","MSTEAMS"===t.authStyle),f.xp6(1),f.Q6J("ngIf","IP"===t.authStyle),f.xp6(1),f.Q6J("ngIf",t.creatingPBXEndpointInProgress&&"REGISTRATION"===t.authStyle),f.xp6(1),f.Q6J("ngIf",t.pbxEndpointSuccessfullyCreated||t.isEditModal&&"REGISTRATION"===t.authStyle),f.xp6(1),f.Q6J("ngIf",t.isEditModal),f.xp6(1),f.Q6J("btnSaveCaption",t.buttonCaptionSubmit)("cancelButtonIsHidden",t.smsSendSuccess)("saveDisabled",!t.formGroup.valid&&!t.formGroup.disabled||!t.formGroup.dirty||t.creatingPBXEndpointInProgress||t.isSendingSms||t.isUserInputInProgress))},directives:[C.F,a.JL,a.sg,T.Y,a.JJ,a.oH,A.O5,S.c,P.KE,P.hX,a.Fj,I.Nt,O.ZL,a.u,Z.o,O.XC,A.sg,M.ey,w.r,N.B,P.bx,E.u,L.gD,P.TO,U.S,D.A,B.W],pipes:[v.X$,A.Ov,q.M],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-modal__template-selection[_ngcontent-%COMP%]{margin-bottom:1.5rem}.pbx-endpoint-modal__mat-hint[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint-modal__attention-icon[_ngcontent-%COMP%]{margin-right:.5rem;max-width:3rem}.pbx-endpoint-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),W)},92996:function(e,t,n){n.d(t,{W:function(){return g}});var i=n(79765),a=n(46782),o=n(71289),r=n(37716),s=n(29790),c=n(5882),l=n(84594),u=n(45832),d=n(38583);function f(e,t){if(1&e){var n=r.EpF();r.TgZ(0,"a",1),r.NdJ("click",function(){return r.CHM(n),r.oxw().resetPassword()}),r._uU(1),r.ALo(2,"translate"),r.qZA()}if(2&e){var i=r.oxw();r.xp6(1),r.hij(" ",r.lcZ(2,1,i.translationPrefix+".button.reset_password")," ")}}var h,g=((h=function(){function e(t,n,a,o){p(this,e),this.translateService=t,this.confirmDialogsService=n,this.pbxEndpointDataService=a,this.snackBarService=o,this.ngUnsubscribe=new i.xQ,this.componentTranslationKey="pbx_endpoint",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey)}return m(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"resetUserAgent",value:function(){var e=this;this.confirmDialogsService.doTaskAfterConfirmation(this.pbxEndpointDataService.resetUserAgent(this.pbxEndpoint),"",this.translateService.instant("".concat(this.translationPrefix,".confirm_dialog.reset_useragent"))).pipe((0,a.R)(this.ngUnsubscribe)).subscribe(function(t){"success"===t.appStatusCode?e.snackBarService.openInfo("".concat(e.translationPrefix,".button.reset_useragent_success")):e.snackBarService.openErrorInfo("".concat(e.translationPrefix,".button.reset_useragent_fail"))},function(t){e.snackBarService.openErrorInfo("".concat(e.translationPrefix,".button.reset_useragent_fail"))})}},{key:"resetPassword",value:function(){var e=this;this.confirmDialogsService.doTaskAfterConfirmation(this.pbxEndpointDataService.setPassword(this.pbxEndpoint),"",this.translateService.instant("".concat(this.translationPrefix,".confirm_dialog.reset_password"))).pipe((0,o.g)(1e3),(0,a.R)(this.ngUnsubscribe)).subscribe(function(t){"success"===t.appStatusCode?e.snackBarService.openInfo("".concat(e.translationPrefix,".sms_info.sending_sms_again_success")):e.snackBarService.openErrorInfo("".concat(e.translationPrefix,".sms_info.sending_sms_failed"))},function(t){e.snackBarService.openErrorInfo("".concat(e.translationPrefix,".sms_info.sending_sms_failed"))})}}]),e}()).\u0275fac=function(e){return new(e||h)(r.Y36(s.sK),r.Y36(c.U),r.Y36(l.W),r.Y36(u.c))},h.\u0275cmp=r.Xpm({type:h,selectors:[["pbx-endpoint-reset-section"]],inputs:{pbxEndpoint:"pbxEndpoint",authStyle:"authStyle"},decls:5,vars:4,consts:[[1,"pbx-endpoint-reset-section"],[1,"pbx-endpoint-reset-section__reset-link",3,"click"],["class","pbx-endpoint-reset-section__reset-link",3,"click",4,"ngIf"]],template:function(e,t){1&e&&(r.TgZ(0,"section",0),r.TgZ(1,"a",1),r.NdJ("click",function(){return t.resetUserAgent()}),r._uU(2),r.ALo(3,"translate"),r.qZA(),r.YNc(4,f,3,3,"a",2),r.qZA()),2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,2,t.translationPrefix+".button.reset_useragent")," "),r.xp6(2),r.Q6J("ngIf","REGISTRATION"===t.authStyle))},directives:[d.O5],pipes:[s.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-reset-section[_ngcontent-%COMP%]{align-items:flex-end;display:flex;flex-direction:column;margin:1rem 0}.pbx-endpoint-reset-section__reset-link[_ngcontent-%COMP%]{color:#000;cursor:pointer;font-size:1.8rem;font-weight:bold;margin-bottom:1rem;text-decoration:none}.pbx-endpoint-reset-section__reset-link[_ngcontent-%COMP%]:focus{color:#003d55}"]}),h)},3425:function(e,t,n){n.d(t,{A:function(){return f}});var i=n(37716),a=n(38583),o=n(44163),r=n(29790);function s(e,t){if(1&e&&(i.TgZ(0,"p",7),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){var n=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,n.translationPrefix+".sms_info.info")," ")}}function c(e,t){if(1&e&&(i.TgZ(0,"div",8),i.TgZ(1,"span"),i._uU(2),i.ALo(3,"translate"),i.qZA(),i._UZ(4,"app-spinner",9),i.qZA()),2&e){var n=i.oxw();i.xp6(2),i.hij(" ",i.lcZ(3,1,n.translationPrefix+".sms_info.sending_sms")," ")}}function l(e,t){if(1&e&&(i.TgZ(0,"p",10),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){var n=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,n.translationPrefix+".sms_info.sending_sms_success")," ")}}function u(e,t){if(1&e&&(i.TgZ(0,"p",11),i._uU(1),i.ALo(2,"translate"),i.qZA()),2&e){var n=i.oxw();i.xp6(1),i.hij(" ",i.lcZ(2,1,n.translationPrefix+".sms_info.sending_sms_failed")," ")}}var d,f=((d=m(function e(){p(this,e),this.componentTranslationKey="pbx_endpoint",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey)})).\u0275fac=function(e){return new(e||d)},d.\u0275cmp=i.Xpm({type:d,selectors:[["pbx-endpoint-sms-info"]],inputs:{username:"username",isSendingSms:"isSendingSms",smsSendSuccess:"smsSendSuccess",smsSendFail:"smsSendFail"},decls:10,vars:8,consts:[[1,"pbx-endpoint-sms-info"],[1,"pbx-endpoint-sms-info__title"],[1,"pbx-endpoint-sms-info__credentials"],["class","pbx-endpoint-sms-info__text",4,"ngIf"],["class","pbx-endpoint-sms-info__send-info",4,"ngIf"],["class","pbx-endpoint-sms-info__text pbx-endpoint-sms-info__text--success",4,"ngIf"],["class","pbx-endpoint-sms-info__text pbx-endpoint-sms-info__text--failed",4,"ngIf"],[1,"pbx-endpoint-sms-info__text"],[1,"pbx-endpoint-sms-info__send-info"],[1,"pbx-endpoint-sms-info__spinner"],[1,"pbx-endpoint-sms-info__text","pbx-endpoint-sms-info__text--success"],[1,"pbx-endpoint-sms-info__text","pbx-endpoint-sms-info__text--failed"]],template:function(e,t){1&e&&(i.TgZ(0,"section",0),i.TgZ(1,"h6",1),i._uU(2),i.ALo(3,"translate"),i.qZA(),i.TgZ(4,"p",2),i._uU(5),i.qZA(),i.YNc(6,s,3,3,"p",3),i.YNc(7,c,5,3,"div",4),i.YNc(8,l,3,3,"p",5),i.YNc(9,u,3,3,"p",6),i.qZA()),2&e&&(i.xp6(2),i.Oqu(i.lcZ(3,6,t.translationPrefix+".sms_info.sip_username")),i.xp6(3),i.Oqu(t.username),i.xp6(1),i.Q6J("ngIf",!t.isSendingSms&&!t.smsSendSuccess&&!t.smsSendFail),i.xp6(1),i.Q6J("ngIf",t.isSendingSms),i.xp6(1),i.Q6J("ngIf",t.smsSendSuccess),i.xp6(1),i.Q6J("ngIf",t.smsSendFail))},directives:[a.O5,o.S],pipes:[r.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.pbx-endpoint-sms-info[_ngcontent-%COMP%]{padding:1rem 0}.pbx-endpoint-sms-info__title[_ngcontent-%COMP%]{margin:1rem 0 0}.pbx-endpoint-sms-info__credentials[_ngcontent-%COMP%]{font-weight:bold;margin:.5rem 0 3rem}.pbx-endpoint-sms-info__text[_ngcontent-%COMP%]{font-weight:bold;margin:0}.pbx-endpoint-sms-info__text--success[_ngcontent-%COMP%]{color:#00b300}.pbx-endpoint-sms-info__text--failed[_ngcontent-%COMP%]{color:#b31a3e}.pbx-endpoint-sms-info__send-info[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;font-weight:bold;justify-content:center}.pbx-endpoint-sms-info__spinner[_ngcontent-%COMP%]{margin-top:1rem}"]}),d)},39977:function(e,t,n){n.d(t,{D:function(){return Q}});var i=n(40532),o=n(26215),r=n(79765),s=n(25917),c=n(45435),l=n(43190),u=n(46782),d=n(68307),f=n(88002),h=n(19773),g=n(37716),b=n(8307),v=n(22238),_=n(5882),k=n(29790),x=n(84594),y=n(91856),C=n(69553),T=n(19885),A=n(47444),S=n(50256),P=n(48843),I=n(50112),O=n(45832),Z=n(89447),M=n(6869),w=n(57158),N=["customPbxTemplate"],E=["customNameTemplate"],L=["customStateTemplate"],U=["customPriorityTemplate"];function D(e,t){if(1&e&&(g.TgZ(0,"span",10),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",g.lcZ(2,1,n.translationPrefix+".table.primary_label")," ")}}function B(e,t){if(1&e&&(g.TgZ(0,"div",7),g.TgZ(1,"span",8),g._uU(2),g.qZA(),g.YNc(3,D,3,3,"span",9),g.qZA()),2&e){var n=t.element,i=g.oxw();g.xp6(2),g.Oqu(n.NAME),g.xp6(1),g.Q6J("ngIf",n.ID===(null==i.primaryPbxEndpoint?null:i.primaryPbxEndpoint.ID))}}function q(e,t){1&e&&g._uU(0),2&e&&g.hij(" ",t.element.PBXENDPOINT_TEMPLATE_NAME," ")}function R(e,t){if(1&e&&(g.TgZ(0,"hoverbox"),g._uU(1),g.ALo(2,"translate"),g.qZA()),2&e){var n=g.oxw(2);g.xp6(1),g.hij(" ",g.lcZ(2,1,n.translationPrefix+".table.hoverbox_hint")," ")}}function F(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"mat-slide-toggle",11),g.NdJ("change",function(e){var t=g.CHM(n),i=t.element,a=t.index;return g.oxw().toggleActiveState(e,i,a)}),g.YNc(1,R,3,3,"hoverbox",12),g.ALo(2,"async"),g.qZA()}if(2&e){var i=t.element,a=t.index,o=g.oxw();g.Q6J("checked",1===i.IS_ACTIVE)("disabled",o.isToggleStateChangeInProgress&&o.firstDisabledIndex===a),g.xp6(1),g.Q6J("ngIf",g.lcZ(2,3,o.showActivationHoverBox$)&&!i.IS_ACTIVE)}}function Y(e,t){if(1&e){var n=g.EpF();g.TgZ(0,"div",13),g.TgZ(1,"app-button",14),g.NdJ("appButtonClick",function(){var e=g.CHM(n),t=e.element,i=e.index;return g.oxw().movePbxEndpoint(t,i,"UP")}),g.qZA(),g.TgZ(2,"app-button",15),g.NdJ("appButtonClick",function(){var e=g.CHM(n),t=e.element,i=e.index;return g.oxw().movePbxEndpoint(t,i,"DOWN")}),g.qZA(),g.qZA()}if(2&e){var i=t.index,a=t.last,o=g.oxw();g.xp6(1),g.Q6J("disabled",0===i||o.isPositionChangeInProgress&&(o.firstDisabledIndex===i||o.secondDisabledIndex===i)),g.xp6(1),g.Q6J("disabled",a||o.isPositionChangeInProgress&&(o.firstDisabledIndex===i||o.secondDisabledIndex===i))}}var J,Q=((J=function(){function e(t,n,i,a,c,l,u,d,m,f,h,g,b,v,_,k,x){p(this,e),this.router=t,this.dialog=n,this.confirmDialogsService=i,this.translateService=a,this.pbxEndpointDataService=c,this.route=l,this.routerEventService=u,this.pbxEndpointDataTableService=d,this.dataTableLazyLoadingService=m,this.nconnectItemProviderService=f,this.trunksetDataService=h,this.nconnectAccountSelectionService=g,this.pbxEndpointTemplateDataService=b,this.snackBarService=v,this.accountService=_,this.msTeamsService=k,this.logger=x,this.isOnlyOneActivePbxEndpointAllowed=!0,this.showActivationHoverBoxSource=new o.X(!1),this.ngUnsubscribe=new r.xQ,this.pbxEndpointTemplatesLoaded=!1,this.pbxEndpointWithMsTeamsExists$=this.msTeamsService.pbxEndpointWithMsTeamsExists$,this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$,this.componentTranslationKey="pbx_endpoint",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle$=(0,s.of)("".concat(this.translationPrefix,".title")),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isToggleStateChangeInProgress=!1,this.isPositionChangeInProgress=!1,this.showActivationHoverBox$=this.showActivationHoverBoxSource.asObservable()}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.setPageTitle(),this.listenForAccountSelection(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.h)(function(e){return!!e}),(0,l.w)(function(){return e.route.params}),(0,l.w)(function(t){return e.getTrunksetByPassedId(Number(t.id))}),(0,c.h)(function(t){return e.filterOutInvalidValues(t)}),(0,u.R)(this.ngUnsubscribe)).subscribe(function(t){var n;e.pbxEndpointData$=e.getInitialTableData((null===(n=t)||void 0===n?void 0:n.ID)||t).pipe((0,d.b)(function(t){e.pbxEndpoints=t;var n=!!e.pbxEndpoints.find(function(e){return e.IS_ACTIVE});e.setHoverBoxVisibility(n),e.setPrimaryPbxEndpoint()}),(0,u.R)(e.ngUnsubscribe)),"number"!=typeof t&&(e.setNconnectItemName(t),e.setPermissionForMaxAmountOfActivePbxEndpoints(t)),e.setMsTeamsDomains(),e.getPbxEndpointTemplates()}),this.tableConfig=this.getTableConfig(),this.listenForPbxEndpointDeletions(),this.listenForMsTeamsEndpointEvents()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"deletePbxEndpoint",value:function(e){this.pbxEndpointDataTableService.deleteTableItem(this.pbxEndpointDataService.deletePbxEndpoint(e.TRUNKSET_ID,e.ID),e.ID,this.componentTranslationKey)}},{key:"editPbxEndpoint",value:function(e){var t=this;this.openPbxEndpointModal(e).afterClosed().pipe((0,c.h)(function(e){return!!e}),(0,u.R)(this.ngUnsubscribe)).subscribe(function(n){t.pbxEndpointDataTableService.editTableItem(t.pbxEndpointDataService.updatePbxEndpoint(e,n),t.componentTranslationKey)})}},{key:"initToggleActionsWhenIsActive",value:function(e,t,n){var i=this;this.createConfirmDialog().pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(a){a?i.deactivatePbxEndpoint(e,t,n):i.setSlideToggleAsActive(t,e)})}},{key:"initToggleActionsWhenIsDeactivated",value:function(e,t,n){this.setPbxEndpointState(e,t,n,!0)}},{key:"toggleActiveState",value:function(e,t,n){t.IS_ACTIVE?this.initToggleActionsWhenIsActive(e,t,n):this.initToggleActionsWhenIsDeactivated(e,t,n)}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.pbxEndpointDataService.getPbxEndpointsOfTrunkset(this.selectedTrunksetId,"",this.dataTableLazyLoadingService.currentPage))}},{key:"movePbxEndpoint",value:function(e,t,n){var i=this;this.initMovingOfPbxEndpoint(e,t,n),this.pbxEndpointDataService.setPriority(e,n).pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(e){"success"===e.appStatusCode&&(i.pbxEndpointDataTableService.moveTableItem(e.data,t,n),i.showMovePbxEndpointSuccessMessage(n)),i.setPositionChangeProgressState(!1),i.setPrimaryPbxEndpoint()},function(e){i.snackBarService.openErrorInfo("".concat(i.translationPrefix,".snackbar.priority_change_fail")),i.setPositionChangeProgressState(!1)})}},{key:"openPbxEndpointModal",value:function(e){return this.dialog.open(i.D,this.getDialogData(e))}},{key:"filterOutInvalidValues",value:function(e){var t=e;return null!=t&&(isNaN(t)?!!Object.keys(e).length:!!t)}},{key:"setNconnectItemName",value:function(e){this.nconnectItemProviderService.setNconnectItemName(e)}},{key:"setHoverBoxVisibility",value:function(e){this.showActivationHoverBoxSource.next(e&&this.isOnlyOneActivePbxEndpointAllowed)}},{key:"listenForAccountSelection",value:function(){var e=this;this.accountService.selectedAccountModules$.pipe((0,l.w)(function(){return e.trunksetDataService.trunksets$}),(0,c.h)(function(e){return!!e}),(0,u.R)(this.ngUnsubscribe)).subscribe(function(t){if(null==t?void 0:t.length){var n=t[0];e.setNconnectItemName(n),e.router.navigate(["../".concat(n.ID)],{relativeTo:e.route})}else e.redirectToShortcutsPage()})}},{key:"setPermissionForMaxAmountOfActivePbxEndpoints",value:function(e){this.isOnlyOneActivePbxEndpointAllowed="off"===e.STRATEGY}},{key:"getPbxEndpointTemplates",value:function(){var e=this;this.pbxEndpointTemplateDataService.getPbxEndpointTemplates("",1,50).pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(t){e.pbxEndpointTemplates=t.data,e.pbxEndpointTemplatesLoaded=!0})}},{key:"listenForPbxEndpointDeletions",value:function(){var e=this;this.pbxEndpointDataService.reloadPbxEndpointsAfterDelete$.pipe((0,l.w)(function(){return e.pbxEndpointDataService.getPbxEndpointsOfTrunkset(e.selectedTrunksetId)}),(0,u.R)(this.ngUnsubscribe)).subscribe(function(t){e.pbxEndpointData$=(0,s.of)(t.data),e.pbxEndpoints=t.data,e.setPrimaryPbxEndpoint(),e.setMsTeamsDomains()})}},{key:"listenForMsTeamsEndpointEvents",value:function(){var e=this;this.msTeamsService.reloadMsTeams$.pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(){return e.setMsTeamsDomains()})}},{key:"setToggleActionProgressState",value:function(e){this.isToggleStateChangeInProgress=e}},{key:"deactivatePbxEndpoint",value:function(e,t,n){this.setPbxEndpointState(e,t,n,!1)}},{key:"setSlideToggleAsInactive",value:function(e,t){this.setToggleSourceState(e,t,0,!1)}},{key:"setSlideToggleAsActive",value:function(e,t){this.setToggleSourceState(e,t,1,!0)}},{key:"setToggleSourceState",value:function(e,t,n,i){e.IS_ACTIVE=n,t.source.checked=i}},{key:"initToggleAction",value:function(e,t,n){this.setToggleActionProgressState(e),this.currentlyEditedPbxEndpointId=t,this.firstDisabledIndex=n}},{key:"setPbxEndpointState",value:function(e,t,n,i){var a=this;this.initToggleAction(!0,t.ID,n),this.pbxEndpointDataService.setActiveState(t,i).pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(n){a.setHoverBoxVisibility(!!n.data[0].NUMBER_OF_ACTIVE_PBX_ENDPOINTS),i?(a.isOnlyOneActivePbxEndpointAllowed&&a.switchOffAllOtherPbxEndpoints(t,n.data[0].PBX_ENDPOINTS),a.setSlideToggleAsActive(t,e)):a.setSlideToggleAsInactive(t,e),a.showStateChangeSuccessMessage(i),a.setToggleActionProgressState(!1),a.setPrimaryPbxEndpoint()},function(n){a.handleErrorWhenStateChangeFailed(e,t,i)})}},{key:"switchOffAllOtherPbxEndpoints",value:function(e,t){if(t.length>1){this.pbxEndpoints.filter(function(t){return t.ID!==e.ID});var n,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}(this.pbxEndpoints);try{for(i.s();!(n=i.n()).done;)n.value.IS_ACTIVE=0}catch(o){i.e(o)}finally{i.f()}}}},{key:"showStateChangeSuccessMessage",value:function(e){this.snackBarService.openInfo("".concat(this.translationPrefix,".snackbar.").concat(e?"activate_endpoint_success":"deactivate_endpoint_success"))}},{key:"handleErrorWhenStateChangeFailed",value:function(e,t,n){this.snackBarService.openErrorInfo("".concat(this.translationPrefix,".snackbar.").concat(n?"activate_endpoint_fail":"deactivate_endpoint_fail")),this.setSlideToggleAsInactive(t,e),this.setToggleActionProgressState(!1)}},{key:"showMovePbxEndpointSuccessMessage",value:function(e){this.snackBarService.openInfo("".concat(this.translationPrefix,".snackbar.").concat("UP"===e?"priority_up_success":"priority_down_success"))}},{key:"setPositionChangeProgressState",value:function(e){this.isPositionChangeInProgress=e}},{key:"initMovingOfPbxEndpoint",value:function(e,t,n){this.setPositionChangeProgressState(!0),this.currentlyEditedPbxEndpointId=e.ID,this.disableAffectedIndices(t,n)}},{key:"disableAffectedIndices",value:function(e,t){this.firstDisabledIndex=e,this.secondDisabledIndex="UP"===t?e-1:e+1}},{key:"getDialogData",value:function(e){return{data:{type:e?"edit":"create",pbxEndpoint:e,selectedTrunksetId:this.selectedTrunksetId,pbxEndpointTemplates:this.pbxEndpointTemplates,component:this.componentTranslationKey,msTeamsDomains:this.msTeamsDomains,amountPbxEndpoints:this.pbxEndpoints.length}}}},{key:"setPrimaryPbxEndpoint",value:function(){this.primaryPbxEndpoint=this.pbxEndpoints.find(function(e){return e.IS_ACTIVE})}},{key:"getTrunksetByPassedId",value:function(e){var t=this;return!isNaN(e)&&e>0?(this.selectedTrunksetId=e,this.trunksetDataService.trunksets$.pipe((0,c.h)(function(e){return!!e}),(0,f.U)(function(e){return e.filter(function(e){return e.ID===t.selectedTrunksetId})}),(0,f.U)(function(e){return e[0]}))):(this.redirectToShortcutsPage(),(0,s.of)({}))}},{key:"getInitialTableData",value:function(e){return this.pbxEndpointDataTableService.getInitialTableData(this.pbxEndpointDataService.getPbxEndpointsOfTrunkset(e))}},{key:"setPageTitle",value:function(){this.pageTitle$=this.nconnectItemProviderService.nconnectItemName$}},{key:"setMsTeamsDomains",value:function(){var e=this;this.msTeamsService.getMsTeamsDomains().pipe((0,u.R)(this.ngUnsubscribe)).subscribe(function(t){e.msTeamsDomains=t.data})}},{key:"redirectToShortcutsPage",value:function(){this.logger.info("Redirecting to '/shortcuts' page."),this.router.navigate(["../../shortcuts"],{relativeTo:this.route})}},{key:"createConfirmDialog",value:function(){var e=this;return this.translateService.stream(["".concat(this.translationPrefix,".confirm_dialog.title"),"".concat(this.translationPrefix,".confirm_dialog.question")]).pipe((0,h.zg)(function(t){return e.confirmDialogsService.confirm(t["".concat(e.translationPrefix,".confirm_dialog.title")],t["".concat(e.translationPrefix,".confirm_dialog.question")])}),(0,u.R)(this.ngUnsubscribe))}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME",customCellTemplate:this.customNameTemplate,sortingDisabled:!0},{title:"".concat(this.translationPrefix,".table.column.pbx_endpoint_template"),columnNameId:"PBXENDPOINT_TEMPLATE_ID",customCellTemplate:this.customPbxTemplate,sortingDisabled:!0},{title:"".concat(this.translationPrefix,".table.column.active"),columnNameId:"IS_ACTIVE",customCellTemplate:this.customStateTemplate,columnSize:"small",sortingDisabled:!0},{title:"".concat(this.translationPrefix,".table.column.priority"),columnNameId:"PRIORITY",customCellTemplate:this.customPriorityTemplate,sortingDisabled:!0},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||J)(g.Y36(b.F0),g.Y36(v.uw),g.Y36(_.U),g.Y36(k.sK),g.Y36(x.W),g.Y36(b.gz),g.Y36(y.r),g.Y36(C.E),g.Y36(T.Y),g.Y36(A.U),g.Y36(S.R),g.Y36(P.c),g.Y36(I.p),g.Y36(O.c),g.Y36(Z.B),g.Y36(M.C),g.Y36(w.Kf))},J.\u0275cmp=g.Xpm({type:J,selectors:[["pbx-endpoint"]],viewQuery:function(e,t){var n;1&e&&(g.Gf(N,7),g.Gf(E,7),g.Gf(L,7),g.Gf(U,7)),2&e&&(g.iGM(n=g.CRH())&&(t.customPbxTemplate=n.first),g.iGM(n=g.CRH())&&(t.customNameTemplate=n.first),g.iGM(n=g.CRH())&&(t.customStateTemplate=n.first),g.iGM(n=g.CRH())&&(t.customPriorityTemplate=n.first))},inputs:{showPbxEndpointsForTrunkset:"showPbxEndpointsForTrunkset"},decls:14,vars:14,consts:[[3,"isAdminHeaderButtonDisabled","title","addButtonClicked"],[3,"dataTableSourceInput","isLazyLoadingPossible","noDataEntriesText","tableConfig","deleteButtonClicked","editButtonClicked","endOfListReached"],["customNameTemplate",""],["data-e2e","admin-nconnect-voice-pbx-endpoint-page__name-template"],["customPbxTemplate",""],["customStateTemplate",""],["customPriorityTemplate",""],[1,"pbx-endpoint__name-section"],["ellipsisTitle","","data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-name"],["class","pbx-endpoint__name-section__primary-label","data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-badge",4,"ngIf"],["data-e2e","admin-nconnect-voice-pbx-endpoint-page__list-badge",1,"pbx-endpoint__name-section__primary-label"],["appHoverbox","","data-e2e","admin-nconnect-voice-pbx-endpoint-page__toggle",3,"checked","disabled","change"],[4,"ngIf"],[1,"pbx-endpoint__priority-buttons"],["iconName","arrow_up_long","iconSize","small","data-e2e","admin-nconnect-voice-pbx-endpoint-page__arrow-up",3,"disabled","appButtonClick"],["iconName","arrow_down_long","iconSize","small","data-e2e","admin-nconnect-voice-pbx-endpoint-page__arrow-down",3,"disabled","appButtonClick"]],template:function(e,t){1&e&&(g.TgZ(0,"admin-list-header",0),g.NdJ("addButtonClicked",function(){return t.openPbxEndpointModal()}),g.ALo(1,"async"),g.ALo(2,"async"),g.qZA(),g.TgZ(3,"pbx-endpoint-data-table",1),g.NdJ("deleteButtonClicked",function(e){return t.deletePbxEndpoint(e)})("editButtonClicked",function(e){return t.editPbxEndpoint(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),g.ALo(4,"async"),g.ALo(5,"async"),g.YNc(6,B,4,2,"ng-template",null,2,g.W1O),g.YNc(8,q,1,1,"ng-template",3,4,g.W1O),g.YNc(10,F,3,5,"ng-template",null,5,g.W1O),g.YNc(12,Y,3,2,"ng-template",null,6,g.W1O),g.qZA()),2&e&&(g.Q6J("isAdminHeaderButtonDisabled",!t.pbxEndpointTemplatesLoaded||g.lcZ(1,6,t.pbxEndpointWithMsTeamsExists$))("title",g.lcZ(2,8,t.pageTitle$)),g.xp6(3),g.Q6J("dataTableSourceInput",g.lcZ(4,10,t.pbxEndpointData$))("isLazyLoadingPossible",g.lcZ(5,12,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},styles:[".pbx-endpoint__priority-buttons[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint__name-section[_ngcontent-%COMP%]{align-items:center;display:flex}.pbx-endpoint__name-section__primary-label[_ngcontent-%COMP%]{background:#008000;color:#fff;margin-left:1rem;padding:.5rem 1rem}"]}),J)},42735:function(e,t,n){n.d(t,{a:function(){return _}});var i=n(37716),a=n(3679),o=n(38583),r=n(14944),s=n(78023),c=n(83166),l=n(30234),u=n(98295);function d(e,t){if(1&e){var n=i.EpF();i.ynx(0),i.TgZ(1,"span",3),i.NdJ("click",function(){i.CHM(n);var e=i.oxw();return e.beginEdit(e.inputFieldValue)}),i._uU(2),i.qZA(),i.TgZ(3,"app-button",4),i.NdJ("appButtonClick",function(){i.CHM(n);var e=i.oxw();return e.beginEdit(e.inputFieldValue)}),i.qZA(),i.BQk()}if(2&e){var a=i.oxw();i.xp6(2),i.hij(" ",a.inputFieldValue," ")}}function f(e,t){if(1&e){var n=i.EpF();i.ynx(0),i.TgZ(1,"app-button",8),i.NdJ("appButtonClick",function(){i.CHM(n);var e=i.oxw(2);return e.submitName(e.inputFieldValue.length)}),i.qZA(),i.BQk()}}function h(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"app-button",9),i.NdJ("appButtonClick",function(){return i.CHM(n),i.oxw(2).exitEditMode()}),i.qZA()}}function g(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"input",5),i.NdJ("blur",function(){i.CHM(n);var e=i.oxw();return e.submitName(e.inputFieldValue.length)})("keyup",function(){return i.CHM(n),i.oxw().updateSaveButtonVisibility()})("keyup.enter",function(){i.CHM(n);var e=i.oxw();return e.submitName(e.inputFieldValue.length)})("keyup.escape",function(){return i.CHM(n),i.oxw().exitEditMode()})("ngModelChange",function(e){return i.CHM(n),i.oxw().inputFieldValue=e}),i.qZA(),i.TgZ(1,"mat-hint",6),i._uU(2),i.qZA(),i.YNc(3,f,2,0,"ng-container",1),i.YNc(4,h,1,0,"ng-template",null,7,i.W1O)}if(2&e){var a=i.MAs(5),o=i.oxw();i.Q6J("ngModel",o.inputFieldValue)("name",o.inputFieldValue)("required",o.required),i.xp6(2),i.AsE(" ",o.inputFieldValue.length," / ",o.maxInputLength," "),i.xp6(1),i.Q6J("ngIf",o.showSaveButton)("ngIfElse",a)}}var b,v={provide:a.JU,useExisting:(0,i.Gpc)(function(){return _}),multi:!0},_=((b=function(){function e(){p(this,e),this.preValue="",this.required=!0,this.maxInputLength=45,this.inputChanged=new i.vpe,this.inputFieldValue="",this.showSaveButton=!1,this.editModeActive=!1,this.onChange=Function.prototype,this.onTouched=Function.prototype}return m(e,[{key:"writeValue",value:function(e){this.inputFieldValue=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"submitName",value:function(e){e>0&&e<=this.maxInputLength&&(this.editModeActive=!1,this.inputChanged.emit(this.inputFieldValue))}},{key:"beginEdit",value:function(e){this.preValue=e,this.editModeActive=!0}},{key:"exitEditMode",value:function(){this.inputFieldValue=this.preValue,this.editModeActive=!1}},{key:"updateSaveButtonVisibility",value:function(){this.showSaveButton=!!this.inputFieldValue&&this.inputFieldValue.length<=this.maxInputLength&&this.preValue!==this.inputFieldValue}}]),e}()).\u0275fac=function(e){return new(e||b)},b.\u0275cmp=i.Xpm({type:b,selectors:[["inline-edit"]],inputs:{required:"required",maxInputLength:"maxInputLength"},outputs:{inputChanged:"inputChanged"},features:[i._Bn([v])],decls:4,vars:2,consts:[["data-e2e","inline-edit-fragment",1,"inline-edit"],[4,"ngIf","ngIfElse"],["showInputField",""],["ellipsisTitle","","tabindex","0",1,"inline-edit__field",3,"click"],["iconName","edit","iconSize","small","data-e2e","inline-edit-fragment--edit-button",1,"inline-edit__icon","inline-edit__icon--edit",3,"appButtonClick"],["data-e2e","inline-edit-fragment--input","dynamicAutofocus","","matInput","",1,"inline-edit__input",3,"ngModel","name","required","blur","keyup","keyup.enter","keyup.escape","ngModelChange"],["align","end",1,"inline-edit__hint"],["closeButton",""],["iconName","done","iconSize","small","data-e2e","inline-edit-fragment--save-button",1,"inline-edit__icon","inline-edit__icon--save",3,"appButtonClick"],["iconName","close","data-e2e","inline-edit-fragment--close-button",3,"appButtonClick"]],template:function(e,t){if(1&e&&(i.TgZ(0,"div",0),i.YNc(1,d,4,1,"ng-container",1),i.YNc(2,g,6,7,"ng-template",null,2,i.W1O),i.qZA()),2&e){var n=i.MAs(3);i.xp6(1),i.Q6J("ngIf",!t.editModeActive)("ngIfElse",n)}},directives:[o.O5,r.w,s.V,c.Nt,a.Fj,l.C,a.JJ,a.On,a.Q7,u.bx],styles:[".inline-edit[_ngcontent-%COMP%]{align-items:center;display:flex}.inline-edit__input[_ngcontent-%COMP%], .inline-edit__input[_ngcontent-%COMP%]:focus{background:transparent;border:0;border-bottom:.1rem solid #000;outline:none;width:100%}.inline-edit__hint[_ngcontent-%COMP%]{margin-left:1rem}.inline-edit__icon--edit[_ngcontent-%COMP%]{opacity:0}mat-row:hover[_nghost-%COMP%]   .inline-edit__icon--edit[_ngcontent-%COMP%], mat-row:hover   [_nghost-%COMP%]   .inline-edit__icon--edit[_ngcontent-%COMP%]{opacity:1;transition:opacity 50ms}"]}),b)},70532:function(e,t,n){n.d(t,{T:function(){return f}});var i=n(22238),a=n(37716),o=n(38583),r=n(42070),s=n(56706),c=n(29790);function l(e,t){1&e&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"admin.nconnect.shortcuts.info.fraud.message")," "))}function u(e,t){1&e&&(a.TgZ(0,"p"),a._uU(1),a.ALo(2,"translate"),a.qZA()),2&e&&(a.xp6(1),a.hij(" ",a.lcZ(2,1,"admin.nconnect.shortcuts.info.spending_management.message")," "))}var d,f=((d=function(){function e(t,n){p(this,e),this.trunkset=t,this.dialogRef=n}return m(e,[{key:"closeModal",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||d)(a.Y36(i.WI),a.Y36(i.so))},d.\u0275cmp=a.Xpm({type:d,selectors:[["trunkset-modal-fraud-info"]],decls:8,vars:10,consts:[["mat-dialog-title","",1,"trunkset-modal-info__title"],[4,"ngIf"],["btnSaveCaption","done",3,"cancelButtonIsHidden","saveClick"]],template:function(e,t){1&e&&(a.TgZ(0,"h4",0),a._uU(1),a.qZA(),a.TgZ(2,"mat-dialog-content"),a.YNc(3,l,3,3,"p",1),a.ALo(4,"trunksetFraudCheck"),a.YNc(5,u,3,3,"p",1),a.ALo(6,"trunksetFraudCheck"),a.qZA(),a.TgZ(7,"footer-actions",2),a.NdJ("saveClick",function(){return t.closeModal()}),a.qZA()),2&e&&(a.xp6(1),a.hij(" Trunkset: ",t.trunkset.NAME,"\n"),a.xp6(2),a.Q6J("ngIf",a.xi3(4,4,t.trunkset,"FRAUD")),a.xp6(2),a.Q6J("ngIf",a.xi3(6,7,t.trunkset,"SPENDING_LIMIT")),a.xp6(2),a.Q6J("cancelButtonIsHidden",!0))},directives:[i.uh,i.xY,o.O5,r.c],pipes:[s.x,c.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;max-width:60rem;padding:.8rem 2.4rem}.trunkset-modal-info__title[_ngcontent-%COMP%]{margin-bottom:0}"]}),d)},96162:function(e,t,n){n.d(t,{r:function(){return I}});var i=n(22238),a=n(3679),o=n(79765),r=n(25917),s=n(39761),c=n(88002),l=n(46782),u=n(37716),d=n(74162),f=n(97597),h=n(98295),g=n(67441),b=n(38583),v=n(83166),_=n(21554),k=n(68140),x=n(72458),y=n(42070),C=n(29790);function T(e,t){if(1&e&&(u.TgZ(0,"mat-option",15),u._uU(1),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.abbreviation),u.xp6(1),u.hij(" ",n.name," ")}}function A(e,t){if(1&e&&(u.TgZ(0,"mat-option",8),u.TgZ(1,"span",16),u._uU(2),u.qZA(),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.ID),u.xp6(2),u.Oqu(n.NAME)}}function S(e,t){if(1&e&&(u.TgZ(0,"mat-option",12),u.TgZ(1,"span",16),u._uU(2),u.qZA(),u.qZA()),2&e){var n=t.$implicit;u.Q6J("value",n.ID),u.xp6(2),u.Oqu(n.NAME)}}var P,I=((P=function(){function e(t,n){p(this,e),this.dialogRef=t,this.data=n,this.ngUnsubscribe=new o.xQ,this.componentTranslationKey=this.data.component,this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.isUserInputInProgress=!1,this.loadBalancingStrategies=[{abbreviation:"pb",name:"Primary / Backup"},{abbreviation:"rr",name:"Round-Robin"},{abbreviation:"ra",name:"Forking"}],this.filteredInboundBlacklistProfiles$=(0,r.of)(n.allInboundBlacklists),this.filteredOutboundBlacklistProfiles$=(0,r.of)(n.allOutboundBlacklists)}return m(e,[{key:"ngOnInit",value:function(){this.initModal(),this.createFormControls(),this.createForm(),this.filteredInboundBlacklistProfiles$=this.listenForBlacklistInboundIdChanges(),this.filteredOutboundBlacklistProfiles$=this.listenForBlacklistOutboundIdChanges()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"setUserInputState",value:function(e){this.isUserInputInProgress=e}},{key:"initModal",value:function(){this.modalTitle=this.data.name||"",this.isLoadBalancingAllowed="off"!==this.data.loadBalancingStrategy}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"onSubmit",value:function(){this.closeDialog(this.formGroup.getRawValue())}},{key:"displayBlacklistProfileName",value:function(e){return function(t){var n=Array.isArray(e)?e.find(function(e){return e.ID===t}):void 0;return(null==n?void 0:n.NAME)||"-"}}},{key:"listenForBlacklistInboundIdChanges",value:function(){var e=this;return this.blacklistInboundId.valueChanges.pipe((0,s.O)(""),(0,c.U)(function(t){return e.getBlacklistProfileName(t,e.data.allInboundBlacklists)}),(0,c.U)(function(t){return e.filterBlacklistProfiles(t,e.data.allInboundBlacklists)}),(0,l.R)(this.ngUnsubscribe))}},{key:"listenForBlacklistOutboundIdChanges",value:function(){var e=this;return this.blacklistOutboundId.valueChanges.pipe((0,s.O)(""),(0,c.U)(function(t){return e.getBlacklistProfileName(t,e.data.allOutboundBlacklists)}),(0,c.U)(function(t){return e.filterBlacklistProfiles(t,e.data.allOutboundBlacklists)}),(0,l.R)(this.ngUnsubscribe))}},{key:"getBlacklistProfileName",value:function(e,t){if("string"==typeof e)return e;var n=t.find(function(t){return t.ID===e});return(null==n?void 0:n.NAME)||"-"}},{key:"filterBlacklistProfiles",value:function(e,t){return t.filter(function(t){return t.NAME.toLowerCase().includes(e.toLowerCase())})}},{key:"createFormControls",value:function(){this.name=new a.NI(this.data.name||""),this.loadBalancingStrategy=new a.NI({value:this.data.loadBalancingStrategy,disabled:!this.isLoadBalancingAllowed},a.kI.required),this.blacklistInboundId=new a.NI({value:this.data.blacklistInboundId||1,disabled:!this.data.allInboundBlacklists},a.kI.required),this.blacklistOutboundId=new a.NI({value:this.data.blacklistOutboundId||1,disabled:!this.data.allOutboundBlacklists},a.kI.required)}},{key:"createForm",value:function(){this.formGroup=new a.cw({name:this.name,loadBalancingStrategy:this.loadBalancingStrategy,blacklistInboundId:this.blacklistInboundId,blacklistOutboundId:this.blacklistOutboundId})}}]),e}()).\u0275fac=function(e){return new(e||P)(u.Y36(i.so),u.Y36(i.WI))},P.\u0275cmp=u.Xpm({type:P,selectors:[["trunkset-modal"]],decls:35,vars:36,consts:[["data-e2e","admin-trunkset-modal-fragment",3,"formGroup","modalTitle","ngSubmit"],["data-e2e","admin-trunkset-modal-fragment__name--input",3,"formControl"],["appearance","fill"],["formControlName","loadBalancingStrategy","data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy"],["data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy--option",3,"value",4,"ngFor","ngForOf"],["formControlName","blacklistInboundId","matInput","","tabEnterAutocomplete","","data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--input",3,"matAutocomplete","userInputInProgress"],[3,"displayWith","optionSelected"],["auto1","matAutocomplete"],["data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--option",3,"value"],["data-e2e","admin-trunkset-modal-fragment__inbound-blacklist--option",3,"value",4,"ngFor","ngForOf"],["formControlName","blacklistOutboundId","matInput","","tabEnterAutocomplete","","data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--input",3,"matAutocomplete","userInputInProgress"],["auto2","matAutocomplete"],["data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--option",3,"value"],["data-e2e","admin-trunkset-modal-fragment__outbound-blacklist--option",3,"value",4,"ngFor","ngForOf"],["e2e","admin-trunkset-modal-fragment",1,"trunkset-modal__footer-actions",3,"saveDisabled","cancelClick"],["data-e2e","admin-trunkset-modal-fragment__load-balacing-strategy--option",3,"value"],["mat-line",""]],template:function(e,t){if(1&e&&(u.TgZ(0,"nconnect-voice-modal",0),u.NdJ("ngSubmit",function(){return t.onSubmit()}),u._UZ(1,"name-input-field",1),u.TgZ(2,"mat-form-field",2),u.TgZ(3,"mat-label"),u._uU(4),u.ALo(5,"translate"),u.qZA(),u.TgZ(6,"mat-select",3),u.YNc(7,T,2,2,"mat-option",4),u.qZA(),u.qZA(),u.TgZ(8,"mat-form-field",2),u.TgZ(9,"mat-label"),u._uU(10),u.ALo(11,"translate"),u.qZA(),u.TgZ(12,"input",5),u.NdJ("userInputInProgress",function(e){return t.setUserInputState(e)}),u.qZA(),u.TgZ(13,"mat-autocomplete",6,7),u.NdJ("optionSelected",function(){return t.setUserInputState(!1)}),u.ALo(15,"async"),u.TgZ(16,"mat-option",8),u._uU(17),u.ALo(18,"translate"),u.qZA(),u.YNc(19,A,3,2,"mat-option",9),u.ALo(20,"async"),u.qZA(),u.qZA(),u.TgZ(21,"mat-form-field",2),u.TgZ(22,"mat-label"),u._uU(23),u.ALo(24,"translate"),u.qZA(),u.TgZ(25,"input",10),u.NdJ("userInputInProgress",function(e){return t.setUserInputState(e)}),u.qZA(),u.TgZ(26,"mat-autocomplete",6,11),u.NdJ("optionSelected",function(){return t.setUserInputState(!1)}),u.ALo(28,"async"),u.TgZ(29,"mat-option",12),u._uU(30),u.ALo(31,"translate"),u.qZA(),u.YNc(32,S,3,2,"mat-option",13),u.ALo(33,"async"),u.qZA(),u.qZA(),u.TgZ(34,"footer-actions",14),u.NdJ("cancelClick",function(){return t.closeDialog()}),u.qZA(),u.qZA()),2&e){var n=u.MAs(14),i=u.MAs(27);u.Q6J("formGroup",t.formGroup)("modalTitle",t.modalTitle),u.xp6(1),u.Q6J("formControl",t.name),u.xp6(3),u.Oqu(u.lcZ(5,18,t.translationPrefix+".form.field.load_balancing")),u.xp6(3),u.Q6J("ngForOf",t.loadBalancingStrategies),u.xp6(3),u.Oqu(u.lcZ(11,20,t.translationPrefix+".form.field.blacklist.inbound")),u.xp6(2),u.Q6J("matAutocomplete",n),u.xp6(1),u.Q6J("displayWith",t.displayBlacklistProfileName(u.lcZ(15,22,t.filteredInboundBlacklistProfiles$))),u.xp6(3),u.Q6J("value",1),u.xp6(1),u.hij("",u.lcZ(18,24,t.translationPrefix+".form.field.blacklist.allow_all")," "),u.xp6(2),u.Q6J("ngForOf",u.lcZ(20,26,t.filteredInboundBlacklistProfiles$)),u.xp6(4),u.Oqu(u.lcZ(24,28,t.translationPrefix+".form.field.blacklist.outbound")),u.xp6(2),u.Q6J("matAutocomplete",i),u.xp6(1),u.Q6J("displayWith",t.displayBlacklistProfileName(u.lcZ(28,30,t.filteredOutboundBlacklistProfiles$))),u.xp6(3),u.Q6J("value",1),u.xp6(1),u.Oqu(u.lcZ(31,32,t.translationPrefix+".form.field.blacklist.allow_all")),u.xp6(2),u.Q6J("ngForOf",u.lcZ(33,34,t.filteredOutboundBlacklistProfiles$)),u.xp6(2),u.Q6J("saveDisabled",!t.formGroup.valid||!t.formGroup.dirty||t.isUserInputInProgress)}},directives:[d.F,a.JL,a.sg,f.Y,a.JJ,a.oH,h.KE,h.hX,g.gD,a.u,b.sg,a.Fj,v.Nt,_.ZL,k.o,_.XC,x.ey,y.c,x.X2],pipes:[C.X$,b.Ov],styles:[".trunkset-modal__footer-actions[_ngcontent-%COMP%]{margin-top:1.6rem;padding:0}"]}),P)},70584:function(e,t,n){n.d(t,{x:function(){return F}});var i=n(96162),a=n(79765),o=n(45435),r=n(46782),s=n(88002),c=n(70532),l=n(37716),u=n(8307),d=n(22238),f=n(29790),h=n(50256),g=n(19885),b=n(37842),v=n(48843),_=n(83282),k=n(38538),x=n(81756),y=n(79764),C=n(14944),T=n(38583),A=n(78023),S=n(56706),P=n(97469),I=["customInboundBlacklistTemplate"],O=["customOutboundBlacklistTemplate"],Z=["customNameTemplate"],M=["customLoadBalancingTemplate"];function w(e,t){if(1&e){var n=l.EpF();l.TgZ(0,"app-button",10),l.NdJ("appButtonClick",function(){l.CHM(n);var e=l.oxw().element;return l.oxw().openInfoModal(e)}),l.qZA()}}function N(e,t){if(1&e&&(l.TgZ(0,"div",7),l.TgZ(1,"span",8),l._uU(2),l.qZA(),l.YNc(3,w,1,0,"app-button",9),l.ALo(4,"trunksetFraudCheck"),l.qZA()),2&e){var n=t.element;l.xp6(2),l.Oqu(n.NAME),l.xp6(1),l.Q6J("ngIf",l.lcZ(4,2,n))}}function E(e,t){1&e&&(l._uU(0),l.ALo(1,"loadbalancingStrategy")),2&e&&l.hij(" ",l.lcZ(1,1,t.element.STRATEGY)," ")}function L(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"translate"),l.BQk()),2&e){var n=l.oxw().element,i=l.oxw();l.xp6(1),l.hij(" ",1===n.INBOUND_BLACKLIST_PROFILE_ID?l.lcZ(2,1,i.translationPrefix+".form.field.blacklist.allow_all"):n.inboundBlacklistProfileName," ")}}function U(e,t){if(1&e&&l.YNc(0,L,3,3,"ng-container",11),2&e){var n=t.element;l.oxw();var i=l.MAs(14);l.Q6J("ngIf",n.inboundBlacklistProfileName)("ngIfElse",i)}}function D(e,t){if(1&e&&(l.ynx(0),l._uU(1),l.ALo(2,"translate"),l.BQk()),2&e){var n=l.oxw().element,i=l.oxw();l.xp6(1),l.hij(" ",1===n.OUTBOUND_BLACKLIST_PROFILE_ID?l.lcZ(2,1,i.translationPrefix+".form.field.blacklist.allow_all"):n.outboundBlacklistProfileName," ")}}function B(e,t){if(1&e&&l.YNc(0,D,3,3,"ng-container",11),2&e){var n=t.element;l.oxw();var i=l.MAs(14);l.Q6J("ngIf",n.outboundBlacklistProfileName)("ngIfElse",i)}}function q(e,t){if(1&e&&(l._uU(0),l.ALo(1,"translate")),2&e){var n=l.oxw();l.hij(" ",l.lcZ(1,1,n.translationPrefix+".table.cell.blacklist_not_set")," ")}}var R,F=((R=function(){function e(t,n,i,o,r,s,c,l,u){p(this,e),this.router=t,this.dialog=n,this.translateService=i,this.trunksetDataService=o,this.dataTableLazyLoadingService=r,this.blacklistProfileDataService=s,this.nconnectAccountSelectionService=c,this.dataTableMessageService=l,this.dataTableService=u,this.ngUnsubscribe=new a.xQ,this.componentTranslationKey="trunkset",this.translationPrefix="admin.nconnect.".concat(this.componentTranslationKey),this.pageTitle="".concat(this.translationPrefix,".title"),this.noDataEntriesText="".concat(this.translationPrefix,".table.no_data"),this.isLazyLoadingPossible$=this.dataTableLazyLoadingService.isLazyLoadingPossible$}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.tableConfig=this.getTableConfig(),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(){e.trunksetData$=e.getInitialTableData(),e.initBlacklistProfileFormData()})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadMoreTableEntries",value:function(){this.dataTableLazyLoadingService.loadMoreTableEntries(this.trunksetDataService.getTrunksets("",this.dataTableLazyLoadingService.currentPage))}},{key:"editTrunkset",value:function(e){var t=this;this.openTrunksetModal(e).pipe((0,o.h)(function(e){return!!e}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(n){t.dataTableService.editTableItem(t.trunksetDataService.updateTrunkset(e.ID,n),t.componentTranslationKey)})}},{key:"openInfoModal",value:function(e){this.dialog.open(c.T,{data:e,autoFocus:!1})}},{key:"setBlacklistProfileFormData",value:function(e){this.outboundBlacklistProfiles=this.filterBlacklistProfiles(e,"OUT"),this.inboundBlacklistProfiles=this.filterBlacklistProfiles(e,"IN")}},{key:"initBlacklistProfileFormData",value:function(){var e=this;this.blacklistProfileDataService.getBlacklistProfiles("",1,100).pipe((0,s.U)(function(e){return e.data}),(0,r.R)(this.ngUnsubscribe)).subscribe(function(t){e.setBlacklistProfileFormData(t)})}},{key:"filterBlacklistProfiles",value:function(e,t){return null==e?void 0:e.filter(function(e){return e.DIRECTION===t})}},{key:"getInitialTableData",value:function(){return this.dataTableService.getInitialTableData(this.trunksetDataService.getTrunksets())}},{key:"openTrunksetModal",value:function(e){return this.dialog.open(i.r,this.getDialogData(e)).afterClosed()}},{key:"getDialogData",value:function(e){return{data:{type:"edit",name:e.NAME,loadBalancingStrategy:e.STRATEGY,blacklistInboundId:e.INBOUND_BLACKLIST_PROFILE_ID,blacklistOutboundId:e.OUTBOUND_BLACKLIST_PROFILE_ID,allInboundBlacklists:this.inboundBlacklistProfiles,allOutboundBlacklists:this.outboundBlacklistProfiles,component:this.componentTranslationKey}}}},{key:"getTableConfig",value:function(){return[{title:"".concat(this.translationPrefix,".table.column.name"),columnNameId:"NAME",customCellTemplate:this.customNameTemplate},{title:"".concat(this.translationPrefix,".table.column.load_balancing"),columnNameId:"STRATEGY",customCellTemplate:this.customLoadBalancingTemplate},{title:"".concat(this.translationPrefix,".table.column.concurrent_calls"),columnNameId:"CONCURRENT_CALLS"},{title:"".concat(this.translationPrefix,".table.column.blacklist_inbound"),columnNameId:"inboundBlacklistProfileName",customCellTemplate:this.customInboundBlacklistTemplate},{title:"".concat(this.translationPrefix,".table.column.blacklist_outbound"),columnNameId:"outboundBlacklistProfileName",customCellTemplate:this.customOutboundBlacklistTemplate},{columnNameId:"buttons"}]}}]),e}()).\u0275fac=function(e){return new(e||R)(l.Y36(u.F0),l.Y36(d.uw),l.Y36(f.sK),l.Y36(h.R),l.Y36(g.Y),l.Y36(b.U),l.Y36(v.c),l.Y36(_.D),l.Y36(k.n))},R.\u0275cmp=l.Xpm({type:R,selectors:[["trunkset"]],viewQuery:function(e,t){var n;1&e&&(l.Gf(I,7),l.Gf(O,7),l.Gf(Z,7),l.Gf(M,7)),2&e&&(l.iGM(n=l.CRH())&&(t.customInboundBlacklistTemplate=n.first),l.iGM(n=l.CRH())&&(t.customOutboundBlacklistTemplate=n.first),l.iGM(n=l.CRH())&&(t.customNameTemplate=n.first),l.iGM(n=l.CRH())&&(t.customLoadBalancingTemplate=n.first))},decls:15,vars:13,consts:[[3,"showActionButton","title"],[3,"dataTableSourceInput","hideAllDeleteButtons","isLazyLoadingPossible","noDataEntriesText","tableConfig","editButtonClicked","endOfListReached"],["customNameTemplate",""],["customLoadBalancingTemplate",""],["customInboundBlacklistTemplate",""],["customOutboundBlacklistTemplate",""],["blacklistNotSet",""],[1,"trunkset__name-section"],["ellipsisTitle",""],["class","trunkset__attention-icon","iconFill","attention-color","iconName","attention","iconSize","medium",3,"appButtonClick",4,"ngIf"],["iconFill","attention-color","iconName","attention","iconSize","medium",1,"trunkset__attention-icon",3,"appButtonClick"],[4,"ngIf","ngIfElse"]],template:function(e,t){1&e&&(l._UZ(0,"admin-list-header",0),l.ALo(1,"translate"),l.TgZ(2,"data-table",1),l.NdJ("editButtonClicked",function(e){return t.editTrunkset(e)})("endOfListReached",function(){return t.loadMoreTableEntries()}),l.ALo(3,"async"),l.ALo(4,"async"),l.YNc(5,N,5,4,"ng-template",null,2,l.W1O),l.YNc(7,E,2,3,"ng-template",null,3,l.W1O),l.YNc(9,U,1,2,"ng-template",null,4,l.W1O),l.YNc(11,B,1,2,"ng-template",null,5,l.W1O),l.YNc(13,q,2,3,"ng-template",null,6,l.W1O),l.qZA()),2&e&&(l.Q6J("showActionButton",!1)("title",l.lcZ(1,7,t.pageTitle)),l.xp6(2),l.Q6J("dataTableSourceInput",l.lcZ(3,9,t.trunksetData$))("hideAllDeleteButtons",!0)("isLazyLoadingPossible",l.lcZ(4,11,t.isLazyLoadingPossible$))("noDataEntriesText",t.noDataEntriesText)("tableConfig",t.tableConfig))},directives:[x.Z,y.Q,C.w,T.O5,A.V],pipes:[f.X$,T.Ov,S.x,P.Z],styles:["@media screen and (max-width: 1023px){[_nghost-%COMP%]{width:100vw}[_nghost-%COMP%]   data-table[_ngcontent-%COMP%]{width:96rem}}.trunkset__attention-icon[_ngcontent-%COMP%]{margin-left:1.5rem}.trunkset__name-section[_ngcontent-%COMP%]{align-items:center;display:flex}"]}),R)},48637:function(e,t,n){n.d(t,{A2:function(){return x},ap:function(){return k}}),n(15017),n(88738),n(39539),n(71621),n(26731),n(92393),n(28313),n(28019),n(48469),n(18393),n(39977),n(40532),n(70584),n(96162),n(37716),n(26985),n(3425),n(74162),n(14320),n(84451),n(23111),n(92996);var i=n(97469),a=(n(97597),n(40389),n(42735),n(38052),n(67961),n(37833),n(15809),n(88589)),o=n(16891),r=n(15761),s=n(47444),c=n(48843),l=n(50256),u=n(6798),d=n(76710),m=n(37842),p=n(37130),f=n(22893),h=n(89521),g=n(17512),b=n(84594),v=n(50112),_=(n(15697),n(56706),n(88283),n(70532),n(6869));n(18869);var k=[d.o,m.U,p.E,_.C,f.C,h.b,g.v,b.W,v.p,a.E],x=[r.b,o.B,i.Z,c.c,s.U,u.I,l.R]},15761:function(e,t,n){n.d(t,{b:function(){return r}});var i,a=n(37716),o=n(29790),r=((i=function(){function e(t){p(this,e),this.translateService=t,this.translationPrefix="admin.nconnect.pipe.blacklist_direction"}return m(e,[{key:"transform",value:function(e){return this.translateService.instant("".concat(this.translationPrefix,".").concat("IN"===e?"inbound":"outbound"))}}]),e}()).\u0275fac=function(e){return new(e||i)(a.Y36(o.sK,16))},i.\u0275pipe=a.Yjl({name:"blacklistDirection",type:i,pure:!0}),i)},67961:function(e,t,n){n.d(t,{Y:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e){return{"data-table__content--highlighted":!!e.highlighted}}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"dataTableColumnHighlighted",type:i,pure:!0}),i)},38052:function(e,t,n){n.d(t,{w:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e){return e.columnSize?"cell-size--"+e.columnSize:""}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"dataTableColumnSize",type:i,pure:!0}),i)},37833:function(e,t,n){n.d(t,{C:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e){return e.hasOwnProperty("OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID")||e.hasOwnProperty("OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID")?!(e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1||e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1):!e.hasOwnProperty("IS_CUSTOM")||!!Number(e.IS_CUSTOM)}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"isEditableDataTableItem",type:i,pure:!0}),i)},97469:function(e,t,n){n.d(t,{Z:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e){switch(e){case"pb":return"Primary / Backup";case"rr":return"Round-Robin";case"ra":return"Forking";default:return"-"}}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"loadbalancingStrategy",type:i,pure:!0}),i)},88589:function(e,t,n){n.d(t,{E:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e,t,n){var i="+".concat(e.COUNTRY_CODE," ").concat(e.NDC," ").concat(e.PILOT);return n?i.replace(/\s+/g,""):"blockRangeShown"===t&&e.hasOwnProperty("NUMBERBLOCK_START")?"".concat(i," (").concat(e.NUMBERBLOCK_START,"-").concat(e.NUMBERBLOCK_END,")"):i}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"nconnectPhoneNumber",type:i,pure:!0}),i)},14320:function(e,t,n){n.d(t,{M:function(){return r}});var i,a=n(37716),o=n(29790),r=((i=function(){function e(t){p(this,e),this.translateService=t,this.translationPrefix="admin.nconnect.pipe.pbx_auth_method"}return m(e,[{key:"transform",value:function(e){var t="";switch(e){case"IP":t="ip";break;case"REGISTRATION":t="register";break;case"MSTEAMS":t="ms_teams"}return"(".concat(this.translateService.instant("".concat(this.translationPrefix,".auth_text")),": ").concat(this.translateService.instant("".concat(this.translationPrefix,".").concat(t)),")")}}]),e}()).\u0275fac=function(e){return new(e||i)(a.Y36(o.sK,16))},i.\u0275pipe=a.Yjl({name:"pbxAuthMethod",type:i,pure:!0}),i)},16891:function(e,t,n){n.d(t,{B:function(){return r}});var i,a=n(37716),o=n(29790),r=((i=function(){function e(t){p(this,e),this.translateService=t,this.translationPrefix="admin.nconnect.pipe.custom_global"}return m(e,[{key:"transform",value:function(e){return this.translateService.instant("".concat(this.translationPrefix,".").concat(e?"custom":"global"))}}]),e}()).\u0275fac=function(e){return new(e||i)(a.Y36(o.sK,16))},i.\u0275pipe=a.Yjl({name:"tableItemType",type:i,pure:!0}),i)},56706:function(e,t,n){n.d(t,{x:function(){return o}});var i,a=n(37716),o=((i=function(){function e(){p(this,e)}return m(e,[{key:"transform",value:function(e,t){switch(t){case"FRAUD":return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1;case"SPENDING_LIMIT":return e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1;case"BLOCKED":return!!e.BLOCKED_AT&&e.BLOCKED_AT>1;default:return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1||e.OUTBOUND_BLACKLIST_OVERRIDE_PROFILE_ID>1}}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=a.Yjl({name:"trunksetFraudCheck",type:i,pure:!0}),i)},76710:function(e,t,n){n.d(t,{o:function(){return f}});var i,a=n(25917),o=n(99385),r=n(5304),s=n(45435),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.setEndpointUrl()}return m(e,[{key:"getBackupNumbers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,s=(0,o.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"/backupnumbers?").concat(s)).pipe((0,r.K)(function(t){return e.logger.error("Failed to get backup numbers:",t),(0,a.of)([])}))}},{key:"createBackupNumber",value:function(e){return this.apiAdminService.post("".concat(this.endpointUrl,"/numberrouting/").concat(e.numberRoutingId,"/backupnumbers"),this.getAdjustedRequestBodyData(e))}},{key:"updateBackupNumber",value:function(e,t){return this.apiAdminService.put("".concat(this.endpointUrl,"/numberrouting/").concat(t.numberRoutingId,"/backupnumbers/").concat(e.ID),this.getAdjustedRequestBodyData(t))}},{key:"deleteBackupNumber",value:function(e){return this.apiAdminService.delete("".concat(this.endpointUrl,"/numberrouting/").concat(e.NUMBERROUTING_ID,"/backupnumbers/").concat(e.ID))}},{key:"getAdjustedRequestBodyData",value:function(e){var t;return{NAME:e.name,PREFIX:e.nonEditablePrefix||e.numberblock.toString()+(null===(t=e.extension)||void 0===t?void 0:t.toString()),BACKUPNUMBER:e.backupNumber,BACKUPNUMBER_IS_PREFIX:e.isPrefixBased}}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl())})}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},37842:function(e,t,n){n.d(t,{U:function(){return f}});var i=n(25917),a=n(5304),o=n(88002),r=n(45435),s=n(99385),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=function(){var e=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.setEndpointUrl()}return m(e,[{key:"getBlacklistProfiles",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,r=(0,s.U8)(t,n,o);return this.apiAdminService.get("".concat(this.endpointUrl,"?").concat(r)).pipe((0,a.K)(function(t){return e.logger.error("Failed to get blacklist profiles:",t),(0,i.of)([])}))}},{key:"createBlacklistProfile",value:function(e){return this.apiAdminService.post("".concat(this.endpointUrl),e)}},{key:"getBlacklistProfile",value:function(e){return this.apiAdminService.get("".concat(this.endpointUrl,"/").concat(e)).pipe((0,o.U)(function(e){return e.data[0]}))}},{key:"updateBlacklistProfile",value:function(e){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.ID),e)}},{key:"deleteBlacklistProfile",value:function(e){return this.apiAdminService.delete("".concat(this.endpointUrl,"/").concat(e))}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,r.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/siptrunk-blacklist-profile")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},37130:function(e,t,n){n.d(t,{E:function(){return b}});var i,a=n(79765),o=n(26215),r=n(25917),s=n(68307),c=n(5304),l=n(45435),u=n(99385),d=n(37716),f=n(19122),h=n(48843),g=n(57158),b=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.blacklistProfileEntryDataErrorSource=new a.xQ,this.hasBlacklistProfileAnonymousEntrySource=new o.X(!1),this.blacklistProfileEntryDataError$=this.blacklistProfileEntryDataErrorSource.asObservable(),this.hasBlacklistProfileAnonymousEntry$=this.hasBlacklistProfileAnonymousEntrySource.asObservable(),this.setEndpointUrl()}return m(e,[{key:"createBlacklistProfileEntry",value:function(e,t){var n=this;return this.apiAdminService.post("".concat(this.endpointUrl,"/").concat(t,"/siptrunk-blacklist-entry"),e).pipe((0,s.b)(function(e){n.checkForAnonymousEntry(e.data,t)}))}},{key:"getBlacklistProfileEntries",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,o=(0,u.U8)(n,i,a);return this.apiAdminService.get("".concat(this.endpointUrl,"/").concat(e,"/siptrunk-blacklist-entry?").concat(o)).pipe((0,s.b)(function(n){t.checkForAnonymousEntry(n.data,e)}),(0,c.K)(function(e){return t.logger.error("Failed to get blacklist profile entries:",e),t.blacklistProfileEntryDataErrorSource.next(),(0,r.of)({data:[]})}))}},{key:"updateBlacklistProfileEntry",value:function(e,t){var n=this;return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.SIPTRUNK_BLACKLIST_PROFILE_ID,"/siptrunk-blacklist-entry/").concat(e.ID),t).pipe((0,s.b)(function(t){n.checkForAnonymousEntry(t.data,e.SIPTRUNK_BLACKLIST_PROFILE_ID)}))}},{key:"deleteBlacklistProfileEntry",value:function(e){var t=this;return this.apiAdminService.delete("".concat(this.endpointUrl,"/").concat(e.SIPTRUNK_BLACKLIST_PROFILE_ID,"/siptrunk-blacklist-entry/").concat(e.ID)).pipe((0,s.b)(function(n){t.checkForAnonymousEntry(n.data,e.SIPTRUNK_BLACKLIST_PROFILE_ID)}))}},{key:"getBlacklistEntryAnonymous",value:function(e){return this.apiAdminService.get("".concat(this.endpointUrl,"/").concat(e,"/anonymous"))}},{key:"checkForAnonymousEntry",value:function(e,t){var n=this;this.findAnonymousBlacklistEntry(e)?this.getBlacklistEntryAnonymous(t).subscribe(function(e){var t;n.hasBlacklistProfileAnonymousEntrySource.next(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.hasAnonymous)},function(e){n.logger.error(e)}):this.hasBlacklistProfileAnonymousEntrySource.next(!1)}},{key:"findAnonymousBlacklistEntry",value:function(e){return!!e.find(function(e){return e.PREFIX.includes("anonymous")})}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,l.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/siptrunk-blacklist-profile")})}}]),e}()).\u0275fac=function(e){return new(e||i)(d.LFG(f.i),d.LFG(h.c),d.LFG(g.Kf))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},6869:function(e,t,n){n.d(t,{C:function(){return g}});var i,a=n(79765),o=n(82298),r=n(25917),s=n(68307),c=n(5304),l=n(45435),u=n(37716),d=n(19122),f=n(48843),h=n(57158),g=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.reloadMsTeamsSource=new a.xQ,this.pbxEndpointWithMsTeamsExistsSource=new o.t(1),this.msTeamsDomainsSource=new o.t(1),this.reloadMsTeams$=this.reloadMsTeamsSource.asObservable(),this.pbxEndpointWithMsTeamsExists$=this.pbxEndpointWithMsTeamsExistsSource.asObservable(),this.msTeamsDomains$=this.msTeamsDomainsSource.asObservable(),this.setEndpointUrl()}return m(e,[{key:"getMsTeamsDomains",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";return this.apiAdminService.get("".concat(this.endpointUrl,"?filter=").concat(t)).pipe((0,s.b)(function(t){e.msTeamsDomainsSource.next(t.data)}),(0,c.K)(function(t){return e.logger.error("MS Teams domain error:",t),(0,r.of)([])}))}},{key:"checkTrunksetForExistingMsTeamsEndpoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!!e.find(function(e){return"MSTEAMS"===e.TYPE});this.pbxEndpointWithMsTeamsExistsSource.next(n),n&&t&&this.reloadMsTeamsSource.next()}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,l.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/pbxendpoint/ms-teams")})}}],[{key:"getRequestBodyForMsTeamsAuthStyle",value:function(e){return{AUTH_STYLE:"MSTEAMS",LYNC_SITE_ID:e.LYNC_SITE_ID}}}]),e}()).\u0275fac=function(e){return new(e||i)(u.LFG(d.i),u.LFG(f.c),u.LFG(h.Kf))},i.\u0275prov=u.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},17512:function(e,t,n){n.d(t,{v:function(){return f}});var i,a=n(99385),o=n(25917),r=n(5304),s=n(45435),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.setEndpointUrl()}return m(e,[{key:"getNumberRoutings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,s=(0,a.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"/numberrouting?").concat(s)).pipe((0,r.K)(function(t){return e.logger.error("Failed to get number routings:",t),(0,o.of)([])}))}},{key:"createNumberRouting",value:function(e){return this.apiAdminService.post("".concat(this.endpointUrl,"/trunkset/").concat(e.trunksetId,"/numberrouting"),this.getAdjustedRequestBodyData(e))}},{key:"updateNumberRouting",value:function(e){return this.apiAdminService.put("".concat(this.endpointUrl,"/trunkset/").concat(e.trunksetId,"/numberrouting/").concat(e.numberRoutingId),this.getAdjustedRequestBodyData(e))}},{key:"deleteNumberRouting",value:function(e,t){return this.apiAdminService.delete("".concat(this.endpointUrl,"/trunkset/").concat(e,"/numberrouting/").concat(t))}},{key:"getAdjustedRequestBodyData",value:function(e){return{NAME:e.name,TRUNK_ID:e.trunkId,numberblockIds:e.numberblockIds}}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl())})}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},22893:function(e,t,n){n.d(t,{C:function(){return f}});var i,a=n(99385),o=n(25917),r=n(5304),s=n(45435),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.setEndpointUrl()}return m(e,[{key:"getNumberblocks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,s=(0,a.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"/numberblock?").concat(s)).pipe((0,r.K)(function(t){return e.logger.error("Failed to get numberblocks:",t),(0,o.of)([])}))}},{key:"getNumberblock",value:function(e,t){return this.apiAdminService.get("".concat(this.endpointUrl,"/trunk/").concat(e,"/numberblock/").concat(t))}},{key:"getMappedNumberblocks",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,s=(0,a.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"/numberblock-mapped?").concat(s)).pipe((0,r.K)(function(t){return e.logger.error("Failed to get numberblock mapped:",t),(0,o.of)([])}))}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,s.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl())})}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},89521:function(e,t,n){n.d(t,{b:function(){return f}});var i=n(79765),a=n(25917),o=n(5304),r=n(45435),s=n(99385),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=function(){var e=function(){function e(t,n,a){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=a,this.numberblockEntryDataErrorSource=new i.xQ,this.numberblockEntryDataError$=this.numberblockEntryDataErrorSource.asObservable(),this.setEndpointUrl()}return m(e,[{key:"createNumberblockEntry",value:function(e,t){return this.apiAdminService.post("".concat(this.endpointUrl,"/").concat(e,"/numberblock"),this.getAdjustedRequestBodyData(t))}},{key:"getNumberblockEntries",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,c=(0,s.U8)(n,i,r);return this.apiAdminService.get("".concat(this.endpointUrl,"/").concat(e,"/numberblock?").concat(c)).pipe((0,o.K)(function(e){return t.logger.error("Failed to get numberblock entries:",e),t.numberblockEntryDataErrorSource.next(),(0,a.of)([])}))}},{key:"updateNumberblockEntry",value:function(e,t){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.TRUNK_ID,"/numberblock/").concat(e.INBOUND_TRUNK_NUMBER_ID),this.getAdjustedRequestBodyData(t))}},{key:"deleteNumberblockEntry",value:function(e){return this.apiAdminService.delete("".concat(this.endpointUrl,"/").concat(e.TRUNK_ID,"/numberblock/").concat(e.INBOUND_TRUNK_NUMBER_ID))}},{key:"checkPrefixValidity",value:function(e,t){var n=this;return this.apiAdminService.post("".concat(this.endpointUrl,"/").concat(e,"/numberblock/valid"),this.getAdjustedRequestBodyData(t)).pipe((0,o.K)(function(e){return n.logger.error("Failed to check numberblock prefix:",e),(0,a.of)([])}))}},{key:"getAdjustedRequestBodyData",value:function(e){return{prefix:e.prefix.toString(),parentInboundTrunkNumberId:e.parentInboundTrunkNumberId}}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,r.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/trunk")})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},84594:function(e,t,n){n.d(t,{W:function(){return v}});var i,a=n(79765),o=n(25917),r=n(68307),s=n(5304),c=n(45435),l=n(99385),u=n(6869),d=n(37716),f=n(19122),h=n(48843),g=n(45832),b=n(57158),v=((i=function(){function e(t,n,i,o,r){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.snackBarService=i,this.msTeamsService=o,this.logger=r,this.setPasswordErrorSource=new a.xQ,this.reloadPbxEndpointsAfterDeleteSource=new a.xQ,this.setPasswordError$=this.setPasswordErrorSource.asObservable(),this.reloadPbxEndpointsAfterDelete$=this.reloadPbxEndpointsAfterDeleteSource.asObservable(),this.setEndpointUrl()}return m(e,[{key:"getPbxEndpointsOfTrunkset",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,c=(0,l.U8)(n,i,a);return this.apiAdminService.get("".concat(this.endpointUrl,"/").concat(e,"/pbxendpoint?").concat(c,"&sort=PRIORITY")).pipe((0,r.b)(function(e){t.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data)}),(0,s.K)(function(e){return t.logger.error("Failed to get PBX endpoints:",e),(0,o.of)([])}))}},{key:"createPbxEndpoint",value:function(t,n){var i=this;return this.apiAdminService.post("".concat(this.endpointUrl,"/").concat(t,"/pbxendpoint"),e.getAdjustedRequestBodyForPost(n)).pipe((0,r.b)(function(e){i.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data,!0)}),(0,s.K)(function(e){var t,n=null===(t=e.error.errors[0])||void 0===t?void 0:t.message,a="admin.nconnect.pbx_endpoint.form.error",r="".concat(a,".creation_failed");return n.includes("already used")?r="".concat(a,".already_used"):n.includes("allowed range")&&(r="".concat(a,".ip_not_allowed")),i.snackBarService.openErrorInfo(r),(0,o.of)([])}))}},{key:"updatePbxEndpoint",value:function(t,n){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(t.TRUNKSET_ID,"/pbxendpoint/").concat(t.ID),e.getAdjustedRequestBodyForPut(n))}},{key:"deletePbxEndpoint",value:function(e,t){var n=this;return this.apiAdminService.delete("".concat(this.endpointUrl,"/").concat(e,"/pbxendpoint/").concat(t)).pipe((0,r.b)(function(e){n.reloadPbxEndpointsAfterDeleteSource.next(),n.msTeamsService.checkTrunksetForExistingMsTeamsEndpoint(e.data,!0)}))}},{key:"setPassword",value:function(e){var t=this;return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.TRUNKSET_ID,"/pbxendpoint/").concat(e.ID,"/setpassword")).pipe((0,s.K)(function(e){return t.setPasswordErrorSource.next(),t.logger.error("Failed to set PBX password:",e),(0,o.of)({appStatusCode:!1})}))}},{key:"resetUserAgent",value:function(e){var t=this;return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.TRUNKSET_ID,"/pbxendpoint/").concat(e.ID,"/resetuseragentcheck")).pipe((0,s.K)(function(e){return t.logger.error("Failed to reset user agent:",e),(0,o.of)({appStatusCode:!1})}))}},{key:"setActiveState",value:function(e,t){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.TRUNKSET_ID,"/pbxendpoint/").concat(e.ID,"/activation"),{enable:t})}},{key:"setPriority",value:function(e,t){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e.TRUNKSET_ID,"/pbxendpoint/").concat(e.ID,"/priority"),{move:t})}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/trunkset")})}}],[{key:"getAdjustedRequestBodyForPost",value:function(t){var n={NAME:t.name,PBXENDPOINT_TEMPLATE_ID:t.pbxEndpointTemplate.ID};return t.protocol?Object.assign(Object.assign({},n),e.getRequestBodyForIpAuthStyle(t)):t.msTeamsDomain?Object.assign(Object.assign({},n),u.C.getRequestBodyForMsTeamsAuthStyle(t.msTeamsDomain)):n}},{key:"getRequestBodyForIpAuthStyle",value:function(e){return{HOST:e.host,PORT:Number(e.port),PROTOCOL:e.protocol}}},{key:"getAdjustedRequestBodyForPut",value:function(e){return e.protocol?{NAME:e.name,HOST:e.host,PORT:e.port,PROTOCOL:e.protocol}:{NAME:e.name}}}]),e}()).\u0275fac=function(e){return new(e||i)(d.LFG(f.i),d.LFG(h.c),d.LFG(g.c),d.LFG(u.C),d.LFG(b.Kf))},i.\u0275prov=d.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},50112:function(e,t,n){n.d(t,{p:function(){return f}});var i,a=n(5304),o=n(45435),r=n(99385),s=n(25917),c=n(37716),l=n(19122),u=n(48843),d=n(57158),f=((i=function(){function e(t,n,i){p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.logger=i,this.setEndpointUrl()}return m(e,[{key:"getPbxEndpointTemplates",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,o=(0,r.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"?").concat(o)).pipe((0,a.K)(function(t){return e.logger.error("Failed to get PBX endpoint templates:",t),(0,s.of)([])}))}},{key:"createPbxEndpointTemplate",value:function(e){return this.apiAdminService.post("".concat(this.endpointUrl),this.getAdjustedRequestBodyData(e))}},{key:"updatePbxEndpointTemplate",value:function(e,t){return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e),this.getAdjustedRequestBodyData(t))}},{key:"deletePbxEndpointTemplate",value:function(e){return this.apiAdminService.delete("".concat(this.endpointUrl,"/").concat(e))}},{key:"getAdjustedRequestBodyData",value:function(e){return{NAME:e.name,CLIP_STYLE:e.clipStyle,NUMBER_FORMAT:e.numberFormat,AUTH_STYLE:e.authStyle,INBOUND_RURI_FORMAT:e.inboundRuriFormat}}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,o.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/pbxendpointtemplate")})}}]),e}()).\u0275fac=function(e){return new(e||i)(c.LFG(l.i),c.LFG(u.c),c.LFG(d.Kf))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},50256:function(e,t,n){n.d(t,{R:function(){return _}});var i,a=n(82298),o=n(26215),r=n(25917),s=n(99385),c=n(45435),l=n(43190),u=n(68307),d=n(5304),f=n(37716),h=n(19122),g=n(48843),b=n(89447),v=n(57158),_=((i=function(){function e(t,n,i,r){var s=this;p(this,e),this.apiAdminService=t,this.nconnectAccountSelectionService=n,this.accountService=i,this.logger=r,this.firstTrunksetIdSource=new a.t(1),this.trunksetsSource=new o.X(null),this.trunksetsWithFraudIssuesSource=new o.X(void 0),this.trunksetsWithSpendingManagementIssuesSource=new o.X(void 0),this.firstTrunksetId$=this.firstTrunksetIdSource.asObservable(),this.trunksets$=this.trunksetsSource.asObservable(),this.trunksetsWithFraudIssues$=this.trunksetsWithFraudIssuesSource.asObservable(),this.trunksetsWithSpendingManagementIssues$=this.trunksetsWithSpendingManagementIssuesSource.asObservable(),this.setEndpointUrl(),this.accountService.selectedAccountModules$.pipe((0,c.h)(function(e){return e.includes("nconnect_voice")}),(0,l.w)(function(){return s.getTrunksets()})).subscribe()}return m(e,[{key:"updateTrunkset",value:function(e,t){var n=this;return this.apiAdminService.put("".concat(this.endpointUrl,"/").concat(e),this.getAdjustedRequestBodyData(t)).pipe((0,u.b)(function(e){n.findEditedTrunksetAndEmitTrunksets(e.data[0])}))}},{key:"getTrunksets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=(0,s.U8)(t,n,i);return this.apiAdminService.get("".concat(this.endpointUrl,"?").concat(a)).pipe((0,u.b)(function(t){var n=t.data;e.emitTrunksets(n),e.emitFirstTrunksetId(n),e.setTrunksetsWithFraudIssues(n),e.setTrunksetsWithSpendingManagementIssues(n)}),(0,d.K)(function(t){return e.logger.error("Failed fetching Trunksets:",t),(0,r.of)([])}))}},{key:"getValueOfTrunksets",value:function(){return this.trunksetsSource.getValue()||[]}},{key:"findEditedTrunksetAndEmitTrunksets",value:function(e){var t=this.getValueOfTrunksets(),n=t.findIndex(function(t){return t.ID===(null==e?void 0:e.ID)});t[n]=e,this.emitTrunksets(t)}},{key:"emitTrunksets",value:function(e){this.trunksetsSource.next(e)}},{key:"emitFirstTrunksetId",value:function(e){var t,n=(null===(t=e[0])||void 0===t?void 0:t.ID)||0;this.firstTrunksetIdSource.next(n)}},{key:"setTrunksetsWithFraudIssues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filter(function(e){return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1});this.trunksetsWithFraudIssuesSource.next(t)}},{key:"setTrunksetsWithSpendingManagementIssues",value:function(e){var t=e.filter(function(e){return e.OUTBOUND_BLACKLIST_FRAUD_PROFILE_ID>1});this.trunksetsWithSpendingManagementIssuesSource.next(t)}},{key:"getAdjustedRequestBodyData",value:function(e){return{NAME:e.name,STRATEGY:e.loadBalancingStrategy,INBOUND_BLACKLIST_PROFILE_ID:e.blacklistInboundId,OUTBOUND_BLACKLIST_PROFILE_ID:e.blacklistOutboundId}}},{key:"setEndpointUrl",value:function(){var e=this;this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.h)(function(e){return!!e})).subscribe(function(){e.endpointUrl="".concat(e.nconnectAccountSelectionService.getNconnectApiUrl(),"/trunkset")})}}]),e}()).\u0275fac=function(e){return new(e||i)(f.LFG(h.i),f.LFG(g.c),f.LFG(b.B),f.LFG(v.Kf))},i.\u0275prov=f.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},19885:function(e,t,n){n.d(t,{Y:function(){return s}});var i,a=n(26215),o=n(79765),r=n(37716),s=((i=function(){function e(){p(this,e),this.isLazyLoadingPossibleSource=new a.X(!1),this.isLazyLoadingInProgressSource=new a.X(!1),this.addLazyLoadedTableItemsSource=new o.xQ,this.totalPageCount=1,this.currentPage=1,this.isLazyLoadingInProgress$=this.isLazyLoadingInProgressSource.asObservable(),this.isLazyLoadingPossible$=this.isLazyLoadingPossibleSource.asObservable(),this.addLazyLoadedTableItems$=this.addLazyLoadedTableItemsSource.asObservable()}return m(e,[{key:"emitLazyLoadedTableItems",value:function(e){this.addLazyLoadedTableItemsSource.next(e)}},{key:"loadMoreTableEntries",value:function(e){var t=this;this.isLazyLoadingPossibleSource.getValue()&&(this.setLazyLoadingProgressState(!0),e.subscribe(function(e){t.emitLazyLoadedTableItems(e.data),t.updateLazyLoadingState(),t.setLazyLoadingProgressState(!1)}))}},{key:"initLazyLoadingState",value:function(e){this.setTotalPageCount(e),this.setInitialLazyLoadingState()}},{key:"setLazyLoadingProgressState",value:function(e){this.isLazyLoadingInProgressSource.next(e)}},{key:"setLoadButtonVisibility",value:function(){this.isLazyLoadingPossibleSource.next(this.currentPage<this.totalPageCount)}},{key:"setTotalPageCount",value:function(e){this.totalPageCount=e}},{key:"incrementCurrentPage",value:function(){this.currentPage++}},{key:"updateLazyLoadingState",value:function(){this.setLoadButtonVisibility(),this.incrementCurrentPage()}},{key:"setInitialLazyLoadingState",value:function(){this.currentPage=1,this.setLoadButtonVisibility(),this.incrementCurrentPage()}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},83282:function(e,t,n){n.d(t,{D:function(){return c}});var i,a=n(37716),o=n(45832),r=n(29790),s=n(57158),c=((i=function(){function e(t,n,i){p(this,e),this.snackBarService=t,this.translateService=n,this.logger=i}return m(e,[{key:"showDataTableSnackbar",value:function(e,t,n,i){var a=this.translateService.instant("admin.nconnect.item.".concat(n));this.openSnackbarMessage(t,"admin.nconnect.snackbar_action.".concat(e,".").concat(t),{nconnectItem:a},i)}},{key:"openSnackbarMessage",value:function(e,t,n,i){switch(i&&(this.logger.error("Displaying error snackbar for error:",i),this.snackBarService.openErrorInfo(i.message)),e){case"init":this.snackBarService.open(t,"",{},n);break;case"success":this.snackBarService.openInfo(t,!0,"",{},n)}}}]),e}()).\u0275fac=function(e){return new(e||i)(a.LFG(o.c),a.LFG(r.sK),a.LFG(s.Kf))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},38538:function(e,t,n){n.d(t,{n:function(){return d}});var i,a=n(79765),o=n(68307),r=n(88002),s=n(37716),c=n(5882),l=n(83282),u=n(19885),d=((i=function(){function e(t,n,i){p(this,e),this.confirmDialogsService=t,this.dataTableMessageService=n,this.dataTableLazyLoadingService=i,this.addTableItemSource=new a.xQ,this.updateTableItemSource=new a.xQ,this.removeTableItemSource=new a.xQ,this.addTableItem$=this.addTableItemSource.asObservable(),this.updateTableItem$=this.updateTableItemSource.asObservable(),this.removeTableItem$=this.removeTableItemSource.asObservable()}return m(e,[{key:"addTableItem",value:function(e){this.addTableItemSource.next(e)}},{key:"getInitialTableData",value:function(e){var t=this;return e.pipe((0,o.b)(function(e){var n;t.dataTableLazyLoadingService.initLazyLoadingState(null===(n=e.meta)||void 0===n?void 0:n.pageCount)}),(0,r.U)(function(e){return e.data||[]}))}},{key:"editTableItem",value:function(e,t){this.initTableItemTask(e,t,"update")}},{key:"createTableItem",value:function(e,t){this.initTableItemTask(e,t,"create")}},{key:"deleteTableItem",value:function(e,t,n){var i=this,a="delete";this.confirmDialogsService.doTaskAfterConfirmation(e).pipe((0,o.b)(function(){i.dataTableMessageService.showDataTableSnackbar(a,"init",n)})).subscribe(function(){i.removeTableItemSource.next(t),i.dataTableMessageService.showDataTableSnackbar(a,"success",n)},function(e){i.dataTableMessageService.showDataTableSnackbar(a,"error",n,e)})}},{key:"emitUpdatedTableItem",value:function(e){this.updateTableItemSource.next(e)}},{key:"initTableItemTask",value:function(e,t,n){var i=this;this.dataTableMessageService.showDataTableSnackbar(n,"init",t),e.subscribe(function(e){"success"===e.appStatusCode&&(i.initTaskAfterApiSuccess(n,e.data[0]),i.dataTableMessageService.showDataTableSnackbar(n,"success",t))},function(e){i.dataTableMessageService.showDataTableSnackbar(n,"error",t,e)})}},{key:"initTaskAfterApiSuccess",value:function(e,t){"create"===e?this.addTableItem(t):this.emitUpdatedTableItem(t)}}]),e}()).\u0275fac=function(e){return new(e||i)(s.LFG(c.U),s.LFG(l.D),s.LFG(u.Y))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},48843:function(t,n,i){i.d(n,{c:function(){return b}});var a,o=i(26215),r=i(9112),s=i(45435),c=i(87519),l=i(88002),u=i(39485),d=i(37716),f=i(89447),h=i(51233),g=i(8307),b=((a=function(){function t(e,n,i){p(this,t),this.accountService=e,this.userService=n,this.router=i,this.isNconnectVoiceAccountSelectedSource=new o.X(null),this.isNconnectAccountSelected$=this.isNconnectVoiceAccountSelectedSource.asObservable(),this.listenForSelectedAccountChanges()}return m(t,[{key:"getNconnectApiUrl",value:function(){return this.nconnectApiUrl}},{key:"setNconnectAccess",value:function(e,t){this.setNconnectApiUrl(e),t||this.redirectToAdminUserPage(),this.isNconnectVoiceAccountSelectedSource.next(t)}},{key:"redirectToAdminUserPage",value:function(){this.router.navigate(["/admin/user"])}},{key:"checkNconnectModuleAvailability",value:function(e){return!!(null==e?void 0:e.includes("nconnect_voice"))}},{key:"listenForSelectedAccountChanges",value:function(){var t=this;(0,r.aj)([this.accountService.selectedAccount$.pipe((0,s.h)(function(e){return!!e}),(0,c.x)()),this.accountService.selectedAccountModules$.pipe((0,l.U)(function(e){return t.checkNconnectModuleAvailability(e)}),(0,c.x)())]).subscribe(function(n){var i=e(n,2),a=i[0],o=i[1];t.setNconnectAccess(a,o)})}},{key:"setNconnectApiUrl",value:function(e){this.nconnectApiUrl="".concat(u.N.API_URL,"/nconnectvoice/").concat(e.accountType,":").concat(e.accountId)}}]),t}()).\u0275fac=function(e){return new(e||a)(d.LFG(f.B),d.LFG(h.K),d.LFG(g.F0))},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},47444:function(e,t,n){n.d(t,{U:function(){return d}});var i,a=n(26215),o=n(82298),r=n(37716),s=n(8307),c=n(97469),l=n(16891),u=n(15761),d=((i=function(){function e(t,n,i,r){p(this,e),this.router=t,this.loadbalancingStrategyPipe=n,this.tableItemTypePipe=i,this.blacklistDirectionPipe=r,this.nconnectItemNameSource=new a.X(""),this.nconnectItemSource=new o.t(1),this.nconnectItemNameAvailableFromNavigation=!1,this.nconnectItemName$=this.nconnectItemNameSource.asObservable(),this.nconnectItem$=this.nconnectItemSource.asObservable()}return m(e,[{key:"setNconnectItem",value:function(e){this.nconnectItemSource.next(e),this.setNconnectItemName(e)}},{key:"setNconnectItemName",value:function(e){var t;this.router.url.includes("blacklist")?(t=this.getBlacklistEntryName(e),this.emitItemName(t)):this.router.url.includes("pbx-endpoint")?(t=this.getTrunksetPageTitle(e),this.emitItemName(t)):this.router.url.includes("numberblock")&&(t=this.getNumberblockEntryName(e),this.emitItemName(t))}},{key:"emitItemName",value:function(e){this.nconnectItemNameAvailableFromNavigation=!0,this.nconnectItemNameSource.next(e)}},{key:"getTrunksetPageTitle",value:function(e){return"".concat(e.NAME," (").concat(this.getTrunksetStrategyName(e),")")}},{key:"getTrunksetStrategyName",value:function(e){return this.loadbalancingStrategyPipe.transform(e.STRATEGY)}},{key:"getBlacklistEntryName",value:function(e){var t=this.blacklistDirectionPipe.transform(e.DIRECTION),n=this.tableItemTypePipe.transform(e.CUSTOMER_ID);return"".concat(e.NAME," (").concat(t,", ").concat(n,")")}},{key:"getNumberblockEntryName",value:function(e){return"+".concat(e.COUNTRY_CODE," ").concat(e.NDC," ").concat(e.PILOT," (").concat(e.NUMBERBLOCK_START,"-").concat(e.NUMBERBLOCK_END,")")}}]),e}()).\u0275fac=function(e){return new(e||i)(r.LFG(s.F0),r.LFG(c.Z),r.LFG(l.B),r.LFG(u.b))},i.\u0275prov=r.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},90500:function(e,t,n){n.d(t,{K:function(){return r}});var i,a=n(37716),o=n(29790),r=((i=function(){function e(t){p(this,e),this.translateService=t}return m(e,[{key:"getModalTitle",value:function(e,t){var n="admin.nconnect.".concat(e,".modal.title");return this.translateService.instant("".concat(n,t?".edit":".create"))}},{key:"getButtonCaption",value:function(e,t){return"save"===e?t?"admin.nconnect.common_form.button.save":"admin.nconnect.common_form.button.create":"admin.nconnect.common_form.button.cancel"}}]),e}()).\u0275fac=function(e){return new(e||i)(a.LFG(o.sK))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},134:function(e,t,n){n.d(t,{f:function(){return r}});var i,a=n(26215),o=n(37716),r=((i=function(){function e(){p(this,e),this.addButtonClickedSource=new a.X(void 0),this.addButtonClicked$=this.addButtonClickedSource.asObservable()}return m(e,[{key:"emitAddButtonClicked",value:function(e){this.addButtonClickedSource.next(e)}},{key:"resetNconnectComponent",value:function(){this.emitAddButtonClicked(void 0)}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275prov=o.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},69553:function(e,t,n){n.d(t,{E:function(){return f}});var i,a=n(79765),o=n(38538),s=n(37716),l=n(5882),u=n(83282),d=n(19885),f=((i=function(e){r(n,e);var t=c(n);function n(e,i,o){var r;return p(this,n),(r=t.call(this,e,i,o)).confirmDialogsService=e,r.dataTableMessageService=i,r.dataTableLazyLoadingService=o,r.moveTableItemSource=new a.xQ,r.moveTableItem$=r.moveTableItemSource.asObservable(),r}return m(n,[{key:"moveTableItem",value:function(e,t,n){this.moveTableItemSource.next({pbxEndpoints:e,index:t,moveOption:n})}}]),n}(o.n)).\u0275fac=function(e){return new(e||i)(s.LFG(l.U),s.LFG(u.D),s.LFG(d.Y))},i.\u0275prov=s.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i)},81756:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(37716),a=n(14944),o=n(38583),r=n(78023);function s(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"app-button",2),i.NdJ("appButtonClick",function(){return i.CHM(n),i.oxw().adminListHeaderButtonClick()}),i.qZA()}if(2&e){var a=i.oxw();i.Q6J("disabled",a.isAdminHeaderButtonDisabled)}}var c,l=((c=function(){function e(){p(this,e),this.title="",this.showActionButton=!0,this.isAdminHeaderButtonDisabled=!1,this.addButtonClicked=new i.vpe}return m(e,[{key:"adminListHeaderButtonClick",value:function(){this.addButtonClicked.emit()}}]),e}()).\u0275fac=function(e){return new(e||c)},c.\u0275cmp=i.Xpm({type:c,selectors:[["admin-list-header"]],inputs:{title:"title",showActionButton:"showActionButton",isAdminHeaderButtonDisabled:"isAdminHeaderButtonDisabled"},outputs:{addButtonClicked:"addButtonClicked"},decls:3,vars:2,consts:[["ellipsisTitle","","data-e2e","admin-list-header-fragment__title",1,"admin-list-header__title"],["class","admin-list-header__button","iconName","add","data-e2e","admin-list-header-fragment__add--button",3,"disabled","appButtonClick",4,"ngIf"],["iconName","add","data-e2e","admin-list-header-fragment__add--button",1,"admin-list-header__button",3,"disabled","appButtonClick"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i._uU(1),i.qZA(),i.YNc(2,s,1,1,"app-button",1)),2&e&&(i.xp6(1),i.hij(" ",t.title,"\n"),i.xp6(1),i.Q6J("ngIf",t.showActionButton))},directives:[a.w,o.O5,r.V],styles:["[_nghost-%COMP%]{align-items:center;background:#fff;display:flex;height:6.4rem;justify-content:space-between;position:-webkit-sticky;position:sticky;top:0;z-index:2}.admin-list-header__title[_ngcontent-%COMP%]{font-size:2.6rem;max-width:80rem;padding-left:2rem}.admin-list-header__button[_ngcontent-%COMP%]{margin-right:1rem}"]}),c)},79764:function(e,t,n){n.d(t,{Q:function(){return X}});var a=n(37716),o=n(32789),r=n(11494),s=n(46782),c=n(79765),l=n(38538),u=n(19885),d=n(65860),f=n(38583),h=n(14944),g=n(78023),b=n(44163),v=n(38052),_=n(67961),k=n(29790),x=n(37833);function y(e,t){if(1&e&&(a.TgZ(0,"mat-header-cell",13),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA()),2&e){var n=a.oxw(2).$implicit;a.Q6J("className",a.lcZ(1,4,n))("disabled",n.sortingDisabled),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,n)),a.xp6(2),a.hij(" ",a.lcZ(5,8,n.title)," ")}}function C(e,t){}var T=function(e,t,n,i){return{element:e,column:t,index:n,last:i}};function A(e,t){if(1&e&&(a.TgZ(0,"mat-cell",15),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a.YNc(4,C,0,0,"ng-template",16),a.qZA(),a.qZA()),2&e){var n=t.$implicit,i=t.index,o=t.last,r=a.oxw(2).$implicit;a.Q6J("className",a.lcZ(1,4,r)),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,r)),a.xp6(2),a.Q6J("ngTemplateOutletContext",a.l5B(8,T,n,r,i,o))("ngTemplateOutlet",r.customCellTemplate)}}function S(e,t){1&e&&(a.ynx(0),a.YNc(1,y,6,10,"mat-header-cell",11),a.YNc(2,A,5,13,"mat-cell",12),a.BQk())}function P(e,t){if(1&e&&(a.TgZ(0,"mat-header-cell",13),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.ALo(5,"translate"),a.qZA(),a.qZA()),2&e){var n=a.oxw(3).$implicit;a.Q6J("className",a.lcZ(1,4,n))("disabled",n.sortingDisabled),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,6,n)),a.xp6(2),a.hij(" ",a.lcZ(5,8,n.title)," ")}}function I(e,t){if(1&e&&(a.TgZ(0,"mat-cell",15),a.ALo(1,"dataTableColumnSize"),a.TgZ(2,"div",14),a.ALo(3,"dataTableColumnHighlighted"),a._uU(4),a.qZA(),a.qZA()),2&e){var n=t.$implicit,i=a.oxw(3).$implicit;a.Q6J("className",a.lcZ(1,3,i)),a.xp6(2),a.Q6J("ngClass",a.lcZ(3,5,i)),a.xp6(2),a.hij(" ",n[i.columnNameId]," ")}}function O(e,t){1&e&&(a.ynx(0),a.YNc(1,P,6,10,"mat-header-cell",11),a.YNc(2,I,5,7,"mat-cell",12),a.BQk())}function Z(e,t){if(1&e&&a.YNc(0,O,3,0,"ng-container",8),2&e){var n=a.oxw().$implicit,i=a.MAs(5);a.Q6J("ngIf","buttons"!==n.columnNameId)("ngIfElse",i)}}function M(e,t){1&e&&a._UZ(0,"mat-header-cell")}function w(e,t){}function N(e,t){if(1&e&&(a.ynx(0),a.YNc(1,w,0,0,"ng-template",16),a.BQk()),2&e){var n=a.oxw(2),i=n.$implicit,o=n.index,r=n.last,s=a.oxw(2).$implicit;a.xp6(1),a.Q6J("ngTemplateOutletContext",a.l5B(2,T,i,s,o,r))("ngTemplateOutlet",s.customButtonTemplate)}}function E(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"app-button",24),a.NdJ("appButtonClick",function(){a.CHM(n);var e=a.oxw(3).$implicit;return a.oxw(3).deleteButtonClick(e)}),a.qZA()}}function L(e,t){if(1&e){var n=a.EpF();a.TgZ(0,"app-button",25),a.NdJ("appButtonClick",function(){a.CHM(n);var e=a.oxw(3).$implicit;return a.oxw(3).editButtonClick(e)}),a.qZA()}if(2&e){var i=a.oxw(6);a.Q6J("iconName",i.customEditButton)}}function U(e,t){if(1&e&&(a.YNc(0,E,1,0,"app-button",22),a.YNc(1,L,1,1,"app-button",23)),2&e){var n=a.oxw(5);a.Q6J("ngIf",!n.hideAllDeleteButtons),a.xp6(1),a.Q6J("ngIf",!n.hideAllEditButtons)}}function D(e,t){if(1&e&&(a.TgZ(0,"div",20),a.YNc(1,N,2,7,"ng-container",8),a.YNc(2,U,2,2,"ng-template",null,21,a.W1O),a.qZA()),2&e){var n=a.MAs(3),i=a.oxw(3).$implicit;a.xp6(1),a.Q6J("ngIf",i.customButtonTemplate)("ngIfElse",n)}}function B(e,t){if(1&e&&(a.TgZ(0,"mat-cell"),a.YNc(1,D,4,2,"div",19),a.ALo(2,"isEditableDataTableItem"),a.qZA()),2&e){var n=t.$implicit;a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,n))}}function q(e,t){1&e&&(a.YNc(0,M,1,0,"mat-header-cell",17),a.YNc(1,B,3,3,"mat-cell",18))}function R(e,t){if(1&e&&(a.ynx(0,7),a.YNc(1,S,3,0,"ng-container",8),a.YNc(2,Z,1,2,"ng-template",null,9,a.W1O),a.YNc(4,q,2,0,"ng-template",null,10,a.W1O),a.BQk()),2&e){var n=t.$implicit,i=a.MAs(3);a.Q6J("matColumnDef",n.columnNameId),a.xp6(1),a.Q6J("ngIf",n.customCellTemplate)("ngIfElse",i)}}function F(e,t){1&e&&a._UZ(0,"mat-header-row",26)}var Y=function(e){return{disabled:e}};function J(e,t){1&e&&(a._UZ(0,"mat-row",27),a.ALo(1,"isEditableDataTableItem")),2&e&&a.Q6J("ngClass",a.VKq(3,Y,!a.lcZ(1,1,t.$implicit)))}function Q(e,t){1&e&&a._UZ(0,"app-spinner",28)}function z(e,t){if(1&e&&(a.TgZ(0,"div",31),a.TgZ(1,"span"),a._uU(2),a.ALo(3,"translate"),a.qZA(),a.qZA()),2&e){var n=a.oxw(3);a.xp6(2),a.Oqu(a.lcZ(3,1,n.noDataEntriesText))}}function $(e,t){1&e&&a.GkF(0)}function j(e,t){if(1&e&&(a.ynx(0),a.YNc(1,z,4,3,"div",29),a.YNc(2,$,1,0,"ng-container",30),a.BQk()),2&e){var n=a.oxw(2);a.xp6(1),a.Q6J("ngIf",!n.noDataEntriesAvailableTemplate),a.xp6(1),a.Q6J("ngTemplateOutlet",n.noDataEntriesAvailableTemplate)}}function K(e,t){if(1&e&&a.YNc(0,j,3,2,"ng-container",6),2&e){var n=a.oxw();a.Q6J("ngIf",0===n.dataTableSourceMatTable.data.length)}}function H(e,t){1&e&&a._UZ(0,"app-spinner",33)}function G(e,t){if(1&e&&(a.ynx(0),a.YNc(1,H,1,0,"app-spinner",32),a.ALo(2,"async"),a.BQk()),2&e){var n=a.oxw();a.xp6(1),a.Q6J("ngIf",a.lcZ(2,1,n.isLazyLoadingInProgress$))}}var V,X=((V=function(){function e(t,n){p(this,e),this.dataTableService=t,this.dataTableLazyLoadingService=n,this.ngUnsubscribe=new c.xQ,this.activeSortColumnSortDirection="asc",this.hideAllEditButtons=!1,this.hideAllDeleteButtons=!1,this.customEditButton="edit",this.noDataEntriesText="admin.nconnect.data_table.no_data",this.isLazyLoadingPossible=!1,this.showLoadingSpinner=!1,this.editButtonClicked=new a.vpe,this.deleteButtonClicked=new a.vpe,this.endOfListReached=new a.vpe,this.isLazyLoadingInProgress$=this.dataTableLazyLoadingService.isLazyLoadingInProgress$}return m(e,[{key:"ngOnInit",value:function(){this.initColumnData(this.tableConfig),this.listenForTableActionChanges()}},{key:"ngOnChanges",value:function(e){var t;e.isLazyLoadingPossible&&(this.isLazyLoadingPossible=e.isLazyLoadingPossible.currentValue),(null===(t=e.dataTableSourceInput)||void 0===t?void 0:t.currentValue)&&this.setTableSourceAndSort()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"onEndOfListReached",value:function(){this.endOfListReached.emit(!0)}},{key:"editButtonClick",value:function(e){this.editButtonClicked.emit(e)}},{key:"deleteButtonClick",value:function(e){this.deleteButtonClicked.emit(e)}},{key:"setTableSourceAndSort",value:function(){this.dataTableSourceMatTable=new o.by(this.dataTableSourceInput),this.dataTableSourceMatTable.sort=this.sort,this.dataTableSourceMatTable.sortingDataAccessor=function(e,t){return"string"==typeof e[t]?e[t].toLocaleLowerCase():e[t]}}},{key:"initColumnData",value:function(e){this.columnNameIds=this.getDisplayedColumnNameIds(e),this.displayedColumns=e}},{key:"listenForTableActionChanges",value:function(){var e=this;this.dataTableService.updateTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(function(t){e.updateTableItem(t),e.setTableSourceAndSort()}),this.dataTableService.removeTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(function(t){e.removeTableItem(t),e.setTableSourceAndSort()}),this.dataTableService.addTableItem$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(function(t){e.addSingleTableItem(t),e.setTableSourceAndSort()}),this.dataTableLazyLoadingService.addLazyLoadedTableItems$.pipe((0,s.R)(this.ngUnsubscribe)).subscribe(function(t){e.addLazyLoadedTableItems(t),e.setTableSourceAndSort()})}},{key:"addSingleTableItem",value:function(e){this.dataTableSourceInput.push(e)}},{key:"addLazyLoadedTableItems",value:function(e){var t;(t=this.dataTableSourceInput).push.apply(t,i(e))}},{key:"removeTableItem",value:function(e){var t=this,n=this.dataTableSourceInput.findIndex(function(n){return t.compareTableItemWithPassedID(n,e)});this.dataTableSourceInput.splice(n,1)}},{key:"updateTableItem",value:function(e){var t=this,n=this.dataTableSourceInput.findIndex(function(n){return t.compareTableItemWithUpdatedItem(n,e)});(this.dataTableSourceInput=this.dataTableSourceInput.filter(function(n){return!t.compareTableItemWithUpdatedItem(n,e)})).splice(n,0,e)}},{key:"getDisplayedColumnNameIds",value:function(e){return e.map(function(e){return e.columnNameId})}},{key:"compareTableItemWithPassedID",value:function(e,t){return e.hasOwnProperty("ID")?e.ID===t:e.INBOUND_TRUNK_NUMBER_ID===t}},{key:"compareTableItemWithUpdatedItem",value:function(e,t){return e.hasOwnProperty("ID")&&t.hasOwnProperty("ID")?e.ID===t.ID:e.INBOUND_TRUNK_NUMBER_ID===t.INBOUND_TRUNK_NUMBER_ID}}]),e}()).\u0275fac=function(e){return new(e||V)(a.Y36(l.n),a.Y36(u.Y))},V.\u0275cmp=a.Xpm({type:V,selectors:[["data-table"]],viewQuery:function(e,t){var n;1&e&&a.Gf(r.YE,5),2&e&&a.iGM(n=a.CRH())&&(t.sort=n.first)},inputs:{tableConfig:"tableConfig",activeSortColumn:"activeSortColumn",activeSortColumnSortDirection:"activeSortColumnSortDirection",hideAllEditButtons:"hideAllEditButtons",hideAllDeleteButtons:"hideAllDeleteButtons",customEditButton:"customEditButton",noDataEntriesAvailableTemplate:"noDataEntriesAvailableTemplate",noDataEntriesText:"noDataEntriesText",isLazyLoadingPossible:"isLazyLoadingPossible",showLoadingSpinner:"showLoadingSpinner",dataTableSourceInput:"dataTableSourceInput"},outputs:{editButtonClicked:"editButtonClicked",deleteButtonClicked:"deleteButtonClicked",endOfListReached:"endOfListReached"},features:[a.TTD],decls:9,vars:10,consts:[["infiniteScroller","","matSort","","data-e2e","data-table-fragment",3,"dataSource","matSortActive","matSortDirection","endOfListReached"],[3,"matColumnDef",4,"ngFor","ngForOf"],["data-e2e","data-table-fragment__header-row",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","data-table__row","data-e2e","data-table-fragment__row",3,"ngClass",4,"matRowDef","matRowDefColumns"],["class","data-table__app-spinner",4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[3,"matColumnDef"],[4,"ngIf","ngIfElse"],["showDefaultTemplate",""],["showButtons",""],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled",4,"matHeaderCellDef"],["data-e2e","data-table-fragment__cell",3,"className",4,"matCellDef"],["mat-sort-header","","data-e2e","data-table-fragment__header-cell",3,"className","disabled"],["ellipsisTitle","",3,"ngClass"],["data-e2e","data-table-fragment__cell",3,"className"],[3,"ngTemplateOutletContext","ngTemplateOutlet"],[4,"matHeaderCellDef"],[4,"matCellDef"],["class","data-table__buttons",4,"ngIf"],[1,"data-table__buttons"],["showDefaultActionButtons",""],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick",4,"ngIf"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick",4,"ngIf"],["iconName","delete","e2e","data-table-fragment__delete",3,"appButtonClick"],["e2e","data-table-fragment__edit",3,"iconName","appButtonClick"],["data-e2e","data-table-fragment__header-row"],["data-e2e","data-table-fragment__row",1,"data-table__row",3,"ngClass"],[1,"data-table__app-spinner"],["class","data-table__no-data",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"data-table__no-data"],["class","data-table__load-more-spinner",4,"ngIf"],[1,"data-table__load-more-spinner"]],template:function(e,t){if(1&e&&(a.TgZ(0,"mat-table",0),a.NdJ("endOfListReached",function(){return t.onEndOfListReached()}),a.YNc(1,R,6,3,"ng-container",1),a.YNc(2,F,1,0,"mat-header-row",2),a.ynx(3),a.YNc(4,J,2,5,"mat-row",3),a.BQk(),a.qZA(),a.YNc(5,Q,1,0,"app-spinner",4),a.YNc(6,K,1,1,"ng-template",null,5,a.W1O),a.YNc(8,G,3,3,"ng-container",6)),2&e){var n=a.MAs(7);a.Q6J("dataSource",t.dataTableSourceMatTable)("matSortActive",t.activeSortColumn)("matSortDirection",t.activeSortColumnSortDirection),a.xp6(1),a.Q6J("ngForOf",t.displayedColumns),a.xp6(1),a.Q6J("matHeaderRowDef",t.columnNameIds)("matHeaderRowDefSticky",!0),a.xp6(2),a.Q6J("matRowDefColumns",t.columnNameIds),a.xp6(1),a.Q6J("ngIf",!t.dataTableSourceMatTable)("ngIfElse",n),a.xp6(3),a.Q6J("ngIf",t.dataTableSourceMatTable&&t.isLazyLoadingPossible)}},directives:[o.BZ,d.A,r.YE,f.sg,o.as,o.nj,f.O5,o.w1,o.fO,o.Dz,o.ge,r.nU,h.w,f.mk,o.ev,f.tP,g.V,o.XQ,o.Gk,b.S],pipes:[v.w,_.Y,k.X$,x.C,f.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:block;position:relative}.data-table__content--highlighted[_ngcontent-%COMP%]{width:100%}.data-table__buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}mat-cell[_ngcontent-%COMP%]{font-size:1.8rem}.mat-column-buttons[_ngcontent-%COMP%]{flex:0;opacity:0;position:absolute;right:0;transition:opacity 50ms;z-index:1}.cell-size--small[_ngcontent-%COMP%]{flex:0 0 5%!important}.cell-size--medium[_ngcontent-%COMP%]{flex:0 0 15%!important}.cell-size--large[_ngcontent-%COMP%]{flex:0 0 30%!important}mat-cell[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%]{max-width:40rem;padding:0 2.4rem}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{padding:0 .8rem}mat-row[_ngcontent-%COMP%]{height:5.6rem;position:relative}mat-row[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:1}.data-table__row.disabled[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]{color:#b2b2b2}.data-table__row.disabled[_ngcontent-%COMP%]:hover{background-color:inherit}.data-table__row.disabled[_ngcontent-%COMP%]:hover   .mat-column-buttons[_ngcontent-%COMP%]{opacity:0}.data-table__no-data[_ngcontent-%COMP%]{font-size:2.4rem;left:0;position:absolute;right:0;text-align:center;top:10rem}.data-table__app-spinner[_ngcontent-%COMP%]{position:absolute;top:10rem}.data-table__load-more-spinner[_ngcontent-%COMP%]{background:linear-gradient(#ffffff80,#fff);bottom:0;min-height:4rem;position:absolute;right:.5rem;z-index:1}"]}),V)},6798:function(t,n,i){i.d(n,{I:function(){return b}});var a,o=i(25917),r=i(9112),s=i(45435),c=i(87519),l=i(88002),u=i(68307),d=i(37716),f=i(8307),h=i(89447),g=i(48843),b=((a=function(){function t(e,n,i){p(this,t),this.router=e,this.accountService=n,this.nconnectAccountSelectionService=i}return m(t,[{key:"canActivate",value:function(){return this.checkNconnectAccess()}},{key:"canActivateChild",value:function(){return this.checkNconnectAccess()}},{key:"checkNconnectAccess",value:function(){var t=this;return this.accountService.selectedAccount?(0,r.aj)([this.accountService.selectedAccount$.pipe((0,s.h)(function(e){return!!e}),(0,c.x)()),this.nconnectAccountSelectionService.isNconnectAccountSelected$.pipe((0,c.x)())]).pipe((0,l.U)(function(t){var n=e(t,2),i=n[0],a=n[1];return null===a||!!i&&a}),(0,u.b)(function(e){e||t.redirectToAdminUserPage()})):(this.redirectToAdminUserPage(),(0,o.of)(!1))}},{key:"redirectToAdminUserPage",value:function(){this.router.navigate(["/admin/user"])}}]),t}()).\u0275fac=function(e){return new(e||a)(d.LFG(f.F0),d.LFG(h.B),d.LFG(g.c))},a.\u0275prov=d.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a)},3160:function(n,a,o){o.r(a),o.d(a,{AdminModule:function(){return To}});var s,l=o(39210),d=o(22238),f=o(38583),h=o(37716),g=o(72458),b=o(51095),v=o(67441),_=o(11436),k=(o(39490),o(79765)),x=o(98295),y=((s=m(function e(){p(this,e),this.changes=new k.xQ,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=function(e,t,n){if(0==n||0==t)return"0 of ".concat(n);var i=e*t;return"".concat(i+1," \u2013 ").concat(i<(n=Math.max(n,0))?Math.min(i+t,n):i+t," of ").concat(n)}})).\u0275fac=function(e){return new(e||s)},s.\u0275prov=h.Yz7({factory:function(){return new s},token:s,providedIn:"root"}),s),C={provide:y,deps:[[new h.FiY,new h.tp0,y]],useFactory:function(e){return e||new y}},T=function(){var e=m(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[C],imports:[[f.ez,b.ot,v.LD,_.AV,g.BQ]]}),e}(),A=o(11494),S=o(16492),P=o(25167),I=o(37692),O=function(e){r(n,e);var t=c(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"setAttributes",value:function(e){this.id=e.id,this.firstname=e.firstname,this.lastname=e.lastname,this.username=e.username,this.extension=e.extension,this.language=e.language,this.client=e.hasAccess,this.admin=e.hasAdminAccess}},{key:"fromJSON",value:function(e){this.setAttributes(e)}},{key:"fromUnallocatedExtension",value:function(e){this.id=e.id,this.lastname=e.display_name,this.username=e.email,this.extension=e.extension_number}},{key:"equals",value:function(e){return typeof e==typeof this&&this.id===e.id}},{key:"isNew",value:function(){return!Boolean(this.id)}},{key:"getFullName",value:function(){return"".concat(this.firstname," ").concat(this.lastname)}}]),n}(I.H),Z=o(28123),M=o(89447),w=o(46782),N=o(45435),E=o(87519),L=o(17685),U=o(8307),D=o(89973),B=o(10253),q=o(29790);function R(e,t){1&e&&(h.TgZ(0,"p"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin_session_ended_modal.close_message")," "))}function F(e,t){1&e&&(h.TgZ(0,"p"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin_session_ended_modal.as_admin.text")," "))}var Y=function(){var e=m(function e(t){p(this,e),this.data=t,this.adminSessionEndedAsClient=t.adminSessionEndedAsClient,this.adminSessionEndedAsAdmin=t.adminSessionEndedAsAdmin});return e.\u0275fac=function(t){return new(t||e)(h.Y36(d.WI))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-session-ended-modal"]],decls:6,vars:5,consts:[["data-e2e","admin-session-timeout-modal-fragment",1,"admin-session-ended",3,"title"],["data-e2e","admin-session-timeout-modal-fragment__content--section"],[4,"ngIf"],["logoutButtonType","ok"]],template:function(e,t){1&e&&(h.TgZ(0,"modal-container",0),h.ALo(1,"translate"),h.TgZ(2,"section",1),h.YNc(3,R,3,3,"p",2),h.YNc(4,F,3,3,"p",2),h.qZA(),h._UZ(5,"logout-button",3),h.qZA()),2&e&&(h.Q6J("title",h.lcZ(1,3,"admin_session_ended_modal.title")),h.xp6(3),h.Q6J("ngIf",t.adminSessionEndedAsClient),h.xp6(1),h.Q6J("ngIf",t.adminSessionEndedAsAdmin))},directives:[D.O,f.O5,B.M],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{align-items:center;background-color:#0000004d;display:flex;flex:1;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .admin-session-ended[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .admin-session-ended[_ngcontent-%COMP%]   section[_ngcontent-%COMP%]{padding:.8rem 2.4rem}"]}),e}(),J=o(8780),Q=function(){var e=function(){function e(t,n,i){var a=this;p(this,e),this.router=t,this.dialog=n,this.loginService=i,this.adminSessionTimeoutInMinutes=10,this.isAdminSessionEndedAsAdmin=!1,this.isAdminSessionEndedAsClient=!1,this.startAdminSession(),this.router.events.subscribe(function(e){e instanceof U.OD&&a.startAdminSession()})}return m(e,[{key:"startAdminSession",value:function(){var e=this;this.stopAdminSession(),this.adminExpirationCheckingInterval=setInterval(function(){!e.loginService.authCredentials.clientAccess&&e.loginService.authCredentials.adminAccess?e.isAdminSessionEndedAsAdmin=!0:e.isAdminSessionEndedAsClient=!0,e.router.url.includes("admin")&&e.openAdminSessionEndedModal()},60*this.adminSessionTimeoutInMinutes*1e3)}},{key:"openAdminSessionEndedModal",value:function(){this.dialog.open(Y,{data:{adminSessionEndedAsAdmin:this.isAdminSessionEndedAsAdmin,adminSessionEndedAsClient:this.isAdminSessionEndedAsClient},disableClose:!0}),Z.Q.removeItem("AdminToken"),this.stopAdminSession()}},{key:"stopAdminSession",value:function(){this.adminExpirationCheckingInterval&&(clearInterval(this.adminExpirationCheckingInterval),this.adminExpirationCheckingInterval=null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(U.F0),h.LFG(d.uw),h.LFG(J.r))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),z=o(92937),$=o(47203),j=o(28859),K=o(62782),H=o(20626),G=o(94935),V=o(66356),X=o(25917),W=o(51233),ee=o(90971),te=o(39249),ne=o(97574),ie=o(47444),ae=o(91856),oe=o(50256),re=o(48843),se=o(74688),ce=o(3088),le=o(55821),ue=o(63743),de=o(56869),me=function(e){return["user",e,"phonenumber"]};function pe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",10),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemRouterLink",h.VKq(4,me,i.activeUser.id))("itemTitle",h.lcZ(1,2,"admin.navigation.user.phonenumber.title"))}}var fe=function(e){return["user",e,"permissions"]};function he(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",11),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemRouterLink",h.VKq(4,fe,i.activeUser.id))("itemTitle",h.lcZ(1,2,"admin.navigation.user.permissions.title"))}}var ge=function(){return{exact:!1}},be=function(e){return["user",e]};function ve(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",6),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw().sideNavItemClicked(!1)}),h.TgZ(1,"sidenav-item",7),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw().sideNavItemClicked(!1)}),h.ALo(2,"translate"),h.qZA(),h.YNc(3,pe,2,6,"sidenav-item",8),h.YNc(4,he,2,6,"sidenav-item",9),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("itemRouterLinkActiveOptions",h.DdM(9,ge))("itemRouterLink",h.VKq(10,be,i.activeUser.id))("itemTitle",i.activeUser.getFullName()),h.xp6(1),h.Q6J("itemRouterLink",h.VKq(12,be,i.activeUser.id))("itemTitle",h.lcZ(2,7,"admin.navigation.user.data.title")),h.xp6(2),h.Q6J("ngIf",i.isKAccountSelected),h.xp6(1),h.Q6J("ngIf",i.isKAccountSelected)}}function _e(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",17),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemTitle",h.lcZ(1,1,"admin.navigation.wizards.migration_wizard.title"))}function ke(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",18),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemTitle",h.lcZ(1,1,"admin.navigation.wizards.import.title"))}function xe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",14),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.YNc(2,_e,2,3,"sidenav-item",15),h.YNc(3,ke,2,3,"sidenav-item",16),h.ALo(4,"async"),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemTitle",h.lcZ(1,3,"admin.navigation.wizards.title")),h.xp6(2),h.Q6J("ngIf",i.isWizardPageActive),h.xp6(1),h.Q6J("ngIf",h.lcZ(4,5,i.isWizardPageActive&&i.hasBulkImportModule$))}}function ye(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",19),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemTitle",h.lcZ(1,1,"admin.navigation.license.title"))}function Ce(e,t){if(1&e&&(h.ynx(0),h.YNc(1,xe,5,7,"sidenav-item",12),h.YNc(2,ye,2,3,"sidenav-item",13),h.BQk()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",n.isKAccountSelected),h.xp6(1),h.Q6J("ngIf",n.isKAccountSelected)}}var Te=function(e){return["/admin/nconnect-voice/blacklist",e]};function Ae(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",30),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(4).sideNavItemClicked(!1)}),h.ALo(1,"async"),h.qZA()}if(2&e){var i=h.oxw(4);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemRouterLink",h.VKq(6,Te,i.paramId))("itemTitle",h.lcZ(1,3,i.nconnectItemName$))}}function Se(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",28),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,Ae,2,8,"sidenav-item",29),h.qZA()}if(2&e){var i=h.oxw(3);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemTitle",h.lcZ(1,3,"admin.navigation.nconnect.blacklist.title")),h.xp6(2),h.Q6J("ngIf",i.showBlacklistEntryItem)}}function Pe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",26),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.YNc(2,Se,3,6,"sidenav-item",27),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemTitle",h.lcZ(1,2,"admin.navigation.nconnect.trunkset.title")),h.xp6(2),h.Q6J("ngIf",i.showBlacklistItem)}}function Ie(e,t){1&e&&(h.TgZ(0,"hoverbox",34),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.Q6J("showAlways",!0),h.xp6(1),h.hij(" ",h.lcZ(2,2,"admin.nconnect.trunkset.table.no_data")," "))}function Oe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",36),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(4).sideNavItemClicked(!1)}),h.qZA()}if(2&e){var i=h.oxw().$implicit;h.Q6J("itemRouterLink","/admin/nconnect-voice/pbx-endpoint/"+i.ID)("itemTitle",i.NAME)}}function Ze(e,t){if(1&e&&(h.ynx(0),h.YNc(1,Oe,1,2,"sidenav-item",35),h.BQk()),2&e){var n=h.oxw(3);h.xp6(1),h.Q6J("ngIf",n.showPbxEndpointItem)}}function Me(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",31),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!0)}),h.ALo(1,"async"),h.ALo(2,"translate"),h.YNc(3,Ie,3,4,"hoverbox",32),h.ALo(4,"async"),h.YNc(5,Ze,2,1,"ng-container",33),h.ALo(6,"async"),h.qZA()}if(2&e){var i,a=h.oxw(2);h.Q6J("itemRouterLinkActiveOptions",h.DdM(13,ge))("itemRouterLink","/admin/nconnect-voice/pbx-endpoint/"+h.lcZ(1,5,a.firstTrunksetId$))("itemTitle",h.lcZ(2,7,"admin.navigation.nconnect.pbx_endpoint.title")),h.xp6(3),h.Q6J("ngIf",!(null!=(i=h.lcZ(4,9,a.pbxEndpointMenuItems$))&&i.length)),h.xp6(2),h.Q6J("ngForOf",h.lcZ(6,11,a.pbxEndpointMenuItems$))}}var we=function(e){return["/admin/nconnect-voice/numberblock",e]};function Ne(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",30),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(4).sideNavItemClicked(!1)}),h.ALo(1,"async"),h.qZA()}if(2&e){var i=h.oxw(4);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemRouterLink",h.VKq(6,we,i.paramId))("itemTitle",h.lcZ(1,3,i.nconnectItemName$))}}function Ee(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",40),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,Ne,2,8,"sidenav-item",29),h.qZA()}if(2&e){var i=h.oxw(3);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemTitle",h.lcZ(1,3,"admin.navigation.nconnect.numberblock.title")),h.xp6(2),h.Q6J("ngIf",i.showNumberblockEntryItem)}}function Le(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",41),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemRouterLinkActiveOptions",h.DdM(4,ge))("itemTitle",h.lcZ(1,2,"admin.navigation.nconnect.backup_number.title"))}function Ue(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",37),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,Ee,3,6,"sidenav-item",38),h.YNc(3,Le,2,5,"sidenav-item",39),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemTitle",h.lcZ(1,3,"admin.navigation.nconnect.number_routing.title")),h.xp6(2),h.Q6J("ngIf",i.showNumberRoutingItems),h.xp6(1),h.Q6J("ngIf",i.showNumberRoutingItems)}}function De(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",44),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemRouterLinkActiveOptions",h.DdM(4,ge))("itemTitle",h.lcZ(1,2,"admin.navigation.nconnect.template.pbx_endpoint_template"))}function Be(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",42),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,De,2,5,"sidenav-item",43),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemTitle",h.lcZ(1,3,"admin.navigation.nconnect.template.title")),h.xp6(2),h.Q6J("ngIf",i.showTemplateItem)}}function qe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",47),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(3).sideNavItemClicked(!1)}),h.ALo(1,"translate"),h.qZA()}2&e&&h.Q6J("itemRouterLinkActiveOptions",h.DdM(4,ge))("itemTitle",h.lcZ(1,2,"admin.navigation.nconnect.services.conference"))}function Re(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",45),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw(2).sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,qe,2,5,"sidenav-item",46),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("itemRouterLinkActiveOptions",h.DdM(5,ge))("itemTitle",h.lcZ(1,3,"admin.navigation.nconnect.services.title")),h.xp6(2),h.Q6J("ngIf",i.showServiceItem)}}function Fe(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"sidenav-item",20),h.NdJ("itemClicked",function(){return h.CHM(n),h.oxw().sideNavItemClicked(!0)}),h.ALo(1,"translate"),h.YNc(2,Pe,3,4,"sidenav-item",21),h.YNc(3,Me,7,14,"sidenav-item",22),h.YNc(4,Ue,4,5,"sidenav-item",23),h.YNc(5,Be,3,6,"sidenav-item",24),h.YNc(6,Re,3,6,"sidenav-item",25),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("itemRouterLinkActiveOptions",h.DdM(9,ge))("itemTitle",h.lcZ(1,7,"admin.navigation.nconnect.title")),h.xp6(2),h.Q6J("ngIf",i.isNconnectPageActive),h.xp6(1),h.Q6J("ngIf",i.isNconnectPageActive),h.xp6(1),h.Q6J("ngIf",i.isNconnectPageActive),h.xp6(1),h.Q6J("ngIf",i.isNconnectPageActive),h.xp6(1),h.Q6J("ngIf",!1)}}function Ye(e,t){1&e&&h._UZ(0,"logo",48),2&e&&h.Q6J("hasLink",!1)}var Je=function(){var e=function(){function e(t,n,i,a,o,r,s,c,l,u,d,m){var f=this;p(this,e),this.adminService=t,this.userService=n,this.accountService=i,this.whiteLabelService=a,this.themeService=o,this.helpersService=r,this.nconnectItemProviderService=s,this.routerEventService=c,this.trunksetDataService=l,this.route=u,this.nconnectAccountSelectionService=d,this.featureAccessService=m,this.ngUnsubscribe=new k.xQ,this.itemClicked=new h.vpe,this.pbxEndpointMenuItems$=this.trunksetDataService.trunksets$,this.firstTrunksetId$=this.trunksetDataService.firstTrunksetId$,this.hasNconnectAccess$=(0,X.of)(null),this.showBlacklistItem=!1,this.showBlacklistEntryItem=!1,this.showPbxEndpointItem=!1,this.showNumberRoutingItems=!1,this.showTemplateItem=!1,this.showServiceItem=!1,this.showNumberblockEntryItem=!1,this.isKAccountSelected=!1,this.isUserPageActive=!1,this.isWizardPageActive=!1,this.hasBulkImportModule$=this.featureAccessService.hasUserModuleBulkImport$,this.isNconnectPageActive=!1,t.emitChange.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){f.activeUser=e||null})}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.routerEventService.routeChanged$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.setSidenavItemVisibility(t)}),this.routerEventService.routeParamIdChanged$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.paramId=t}),this.accountService.selectedAccount$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){e.setMainSidenavItemVisibility()}),this.nconnectItemName$=this.nconnectItemProviderService.nconnectItemName$}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"sideNavItemClicked",value:function(e){this.itemClicked.emit(e)}},{key:"setMainSidenavItemVisibility",value:function(){this.isKAccountSelected=this.accountService.isKAccountSelected,this.hasNconnectAccess$=this.nconnectAccountSelectionService.isNconnectAccountSelected$}},{key:"setSidenavItemVisibility",value:function(e){this.checkIfItemCanBeShown(["nconnect-voice"],e)&&this.setNconnectItemVisibility(e),this.isUserPageActive=this.checkIfItemCanBeShown(["admin/user"],e),this.isWizardPageActive=this.checkIfItemCanBeShown(["wizard"],e),this.isNconnectPageActive=this.checkIfItemCanBeShown(["nconnect"],e)}},{key:"setNconnectItemVisibility",value:function(e){this.showNumberRoutingItems=this.checkIfItemCanBeShown(["number-routing","numberblock","backupnumbers"],e),this.showBlacklistItem=this.checkIfItemCanBeShown(["trunkset","blacklist"],e),this.showBlacklistEntryItem=this.checkIfItemCanBeShown(["blacklist"],e,!0),this.showNumberblockEntryItem=this.checkIfItemCanBeShown(["numberblock"],e,!0),this.showPbxEndpointItem=this.checkIfItemCanBeShown(["pbx-endpoint/"],e),this.showTemplateItem=this.checkIfItemCanBeShown(["pbx-endpoint-template"],e),this.showServiceItem=this.checkIfItemCanBeShown(["services"],e)}},{key:"checkIfItemCanBeShown",value:function(e,t,n){return n?t.includes(e[0])&&!t.endsWith(e[0]):!!e.find(function(e){return t.includes(e)})}},{key:"isHiddenIcon",get:function(){return!!this.helpersService.getDeepProperty(this.whiteLabelService.data,"sidenav.logoHidden")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36($.l),h.Y36(W.K),h.Y36(M.B),h.Y36(ee.D),h.Y36(te.f),h.Y36(ne.$),h.Y36(ie.U),h.Y36(ae.r),h.Y36(oe.R),h.Y36(U.gz),h.Y36(re.c),h.Y36(se.q))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-sidenav"]],outputs:{itemClicked:"itemClicked"},decls:9,vars:11,consts:[[1,"sidenav"],["data-e2e","admin-navigator-fragment__user--a","itemLevel","1","itemRouterLink","/admin/user",3,"itemTitle"],["data-e2e","admin-navigator-fragment__user","itemLevel","2",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],[4,"ngIf"],["data-e2e","admin-navigator-fragment__nconnect-voice--a","itemLevel","1","itemRouterLink","/admin/nconnect-voice",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["class","sidenav__footer","location","sidenav__footer",3,"hasLink",4,"ngIf"],["data-e2e","admin-navigator-fragment__user","itemLevel","2",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__user-data--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__phone-number--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__permissions--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__phone-number--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__permissions--a","itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__wizards--a","hasSubItems","true","itemLevel","1","itemRouterLink","/admin/wizards",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__license--a","itemLevel","1","itemRouterLink","/admin/license",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__wizards--a","hasSubItems","true","itemLevel","1","itemRouterLink","/admin/wizards",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__migration-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/migration-wizard",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__import-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/export-import",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__migration-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/migration-wizard",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__import-wizard--a","itemLevel","2","itemRouterLink","/admin/wizards/export-import",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__license--a","itemLevel","1","itemRouterLink","/admin/license",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__nconnect-voice--a","itemLevel","1","itemRouterLink","/admin/nconnect-voice",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__trunkset--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/trunkset",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__pbx-endpoint--a","itemLevel","2","appHoverbox","",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__number-routing--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/number-routing",3,"itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__pbx-endpoint-template--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","2","itemRouterLink","/admin/nconnect-voice/services",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__trunkset--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/trunkset",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__blacklist--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/blacklist",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__blacklist--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/blacklist",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","4",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["itemLevel","4",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__pbx-endpoint--a","itemLevel","2","appHoverbox","",3,"itemRouterLinkActiveOptions","itemRouterLink","itemTitle","itemClicked"],[3,"showAlways",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"showAlways"],["itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3",3,"itemRouterLink","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__number-routing--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/number-routing",3,"itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__number-block--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/numberblock",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__backup-numbers--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/backupnumbers",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["data-e2e","admin-navigator-fragment__number-block--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/numberblock",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__backup-numbers--a","itemLevel","3","itemRouterLink","/admin/nconnect-voice/backupnumbers",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["data-e2e","admin-navigator-fragment__pbx-endpoint-template--a","itemLevel","2","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/pbx-endpoint-template",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","2","itemRouterLink","/admin/nconnect-voice/services",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/services/conference",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked",4,"ngIf"],["itemLevel","3","itemRouterLink","/admin/nconnect-voice/services/conference",3,"itemRouterLinkActiveOptions","itemTitle","itemClicked"],["location","sidenav__footer",1,"sidenav__footer",3,"hasLink"]],template:function(e,t){1&e&&(h.TgZ(0,"nav",0),h.TgZ(1,"sidenav-item",1),h.ALo(2,"translate"),h.YNc(3,ve,5,14,"sidenav-item",2),h.qZA(),h.YNc(4,Ce,3,2,"ng-container",3),h.ALo(5,"async"),h.YNc(6,Fe,7,10,"sidenav-item",4),h.ALo(7,"async"),h.qZA(),h.YNc(8,Ye,1,1,"logo",5)),2&e&&(h.xp6(1),h.Q6J("itemTitle",h.lcZ(2,5,"admin.navigation.user.title")),h.xp6(2),h.Q6J("ngIf",!!t.activeUser&&!t.activeUser.isNew()&&t.isUserPageActive),h.xp6(1),h.Q6J("ngIf",!1===h.lcZ(5,7,t.hasNconnectAccess$)),h.xp6(2),h.Q6J("ngIf",h.lcZ(7,9,t.hasNconnectAccess$)),h.xp6(2),h.Q6J("ngIf",!t.isHiddenIcon))},directives:[ce.t,f.O5,le.r,f.sg,ue.B,de.R],pipes:[q.X$,f.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;margin-top:1.6rem;overflow:hidden;padding-top:.8rem}.mat-drawer-over[_nghost-%COMP%], .mat-drawer-over   [_nghost-%COMP%]{margin-top:0;padding-top:0}.sidenav[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.sidenav__footer[_ngcontent-%COMP%]{display:flex;justify-content:center;max-height:7.5rem;padding:1.6rem}"]}),e}(),Qe=o(12522),ze=o(88002),$e=o(39761),je=o(38294),Ke=o(56436),He=o(77746),Ge=o(36461),Ve=o(54395),Xe=o(90625),We=o(14944),et=o(83166),tt=o(52592),nt=o(1769),it=["overlay"],at=["searchInput"];function ot(e,t){if(1&e&&(h.TgZ(0,"span",8),h.TgZ(1,"span",9),h._uU(2),h.qZA(),h.TgZ(3,"span",10),h._uU(4),h.qZA(),h.qZA()),2&e){var n=h.oxw();h.xp6(2),h.hij(" ",n.selectedAccount.name," "),h.xp6(2),h.Oqu(n.selectedAccount.externalIdentifier)}}function rt(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1),h.ALo(2,"uppercase"),h.ALo(3,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,h.lcZ(3,3,"account_select.all_accounts"))," "))}function st(e,t){1&e&&(h.TgZ(0,"div",11),h._UZ(1,"app-svg-icon",12),h.TgZ(2,"span",13),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.qZA()),2&e&&(h.xp6(3),h.Oqu(h.lcZ(4,1,"account_select.account_blocked_status")))}function ct(e,t){1&e&&h.GkF(0)}var lt=function(e){return{account:e}};function ut(e,t){if(1&e&&(h.TgZ(0,"mat-list-option",24),h.YNc(1,ct,1,0,"ng-container",25),h.qZA()),2&e){var n=t.$implicit;h.oxw(2);var i=h.MAs(13);h.Q6J("value",n),h.xp6(1),h.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",h.VKq(3,lt,n))}}function dt(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"h3",23),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.YNc(4,ut,2,5,"mat-list-option",21),h._UZ(5,"mat-divider"),h.BQk()),2&e){var n=h.oxw(2);h.xp6(2),h.Oqu(h.lcZ(3,2,"account_select.recent_accounts")),h.xp6(2),h.Q6J("ngForOf",n.recentAccounts)}}function mt(e,t){1&e&&h.GkF(0)}function pt(e,t){if(1&e&&(h.TgZ(0,"mat-list-option",24),h.YNc(1,mt,1,0,"ng-container",25),h.qZA()),2&e){var n=t.$implicit;h.oxw();var i=h.MAs(13);h.Q6J("value",n),h.xp6(1),h.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",h.VKq(3,lt,n))}}function ft(e,t){1&e&&(h.TgZ(0,"span",30),h._UZ(1,"app-svg-icon",12),h._uU(2),h.ALo(3,"translate"),h.qZA()),2&e&&(h.xp6(2),h.hij(" ",h.lcZ(3,1,"account_select.account_blocked_status")," "))}function ht(e,t){if(1&e&&(h.TgZ(0,"span",26),h.TgZ(1,"span",27),h._uU(2),h.qZA(),h.TgZ(3,"span",28),h._uU(4),h.qZA(),h.qZA(),h.YNc(5,ft,4,3,"span",29)),2&e){var n=t.account,i=h.oxw(2);h.xp6(1),h.uIk("data-e2e",i.e2e?i.e2e+"__account-selector-option-name":null),h.xp6(1),h.hij(" ",n.name," "),h.xp6(1),h.uIk("data-e2e",i.e2e?i.e2e+"__account-selector-option-id":null),h.xp6(1),h.hij(" ",n.externalIdentifier," "),h.xp6(1),h.Q6J("ngIf",n.status===i.inactiveAccountStatus)}}function gt(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",14),h.TgZ(1,"header"),h._UZ(2,"app-svg-icon",15),h.TgZ(3,"label"),h.TgZ(4,"input",16,17),h.NdJ("keydown",function(e){return h.CHM(n),h.oxw().onKeyDown(e)})("keyup",function(e){return h.CHM(n),h.oxw().search(e)}),h.ALo(6,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"section"),h.TgZ(8,"div",18),h.NdJ("scrolled",function(){return h.CHM(n),h.oxw().loadAccounts()}),h.TgZ(9,"mat-selection-list",19),h.NdJ("selectionChange",function(e){h.CHM(n);var t=h.oxw();return t.onSelectionChange(e),t.isListOpen=!1}),h.YNc(10,dt,6,4,"ng-container",20),h.YNc(11,pt,2,5,"mat-list-option",21),h.YNc(12,ht,6,5,"ng-template",null,22,h.W1O),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(4),h.s9C("placeholder",h.lcZ(6,8,"account_select.search_account")),h.uIk("data-e2e",i.e2e?i.e2e+"__account-selector-search--input":null),h.xp6(4),h.Q6J("infiniteScrollDisabled",!i.hasMoreData)("loadingAreaIndicatorActive",i.isLoading)("scrollWindow",!1)("infiniteScrollThrottle",50),h.xp6(2),h.Q6J("ngIf",i.showRecents),h.xp6(1),h.Q6J("ngForOf",i.accounts)}}var bt=function(){var e=function(){function e(t,n){p(this,e),this.accountService=t,this.router=n,this.searchInputValue$=new k.xQ,this.ngUnsubscribe=new k.xQ,this.accounts=[],this.recentAccounts=e.storedRecentAccounts||[],this.isListOpen=!1,this.selectedAccount=null,this.searchInputValue="",this.hasMoreData=!1,this.isLoading=!1,this.page=1,this.pageSize=25,this.inactiveAccountStatus="blocked",this.accountSelect=new h.vpe}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.searchInputValue$.pipe((0,$e.O)(this.searchInputValue),(0,Ve.b)(400),(0,E.x)(),(0,w.R)(this.ngUnsubscribe)).subscribe(this.initSearch.bind(this)),this.accountService.selectedAccount$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.selectedAccount=t})}},{key:"ngAfterViewInit",value:function(){var e=this;this.overlay.positionChange.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){e.searchInput.nativeElement.focus()})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initSearch",value:function(e){this.searchInputValue=e,this.page=1,this.accounts=[],this.loadAccounts()}},{key:"search",value:function(e){this.searchInputValue$.next(e.target.value)}},{key:"onSelectionChange",value:function(e){var t=e.option.value;this.accountSelect.emit(t),this.selectedAccount=t,this.accountService.selectedAccount=t,this.addToRecents(t),this.router.routerState.snapshot.url.match(/^\/admin\/user/)&&this.router.navigate(["/admin/user"])}},{key:"onKeyDown",value:function(e){e.keyCode===Ge.JH&&(e.preventDefault(),this.matListOptions&&this.matListOptions.length&&this.matListOptions.first.focus())}},{key:"closeList",value:function(){this.isListOpen=!1,this.searchInputValue$.next("")}},{key:"loadAccounts",value:function(){var e=this;this.isLoading?this.cancelRequest():(this.isLoading=!0,this.accountsRequest=this.accountService.getAllAccounts(this.searchInputValue,this.page).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.isLoading=!1,e.page++,e.hasMoreData=t.paginationHasMoreData,e.accounts=[].concat(i(e.accounts),i(t.data))}))}},{key:"addToRecents",value:function(t){this.recentAccounts=[t].concat(i(this.recentAccounts)).filter(function(e,t,n){return n.map(function(e){return e.accountId}).indexOf(e.accountId)===t}).slice(0,5),e.storedRecentAccounts=this.recentAccounts}},{key:"cancelRequest",value:function(){this.accountsRequest.unsubscribe(),this.isLoading=!1,this.loadAccounts()}},{key:"showRecents",get:function(){return!this.searchInputValue&&!!this.recentAccounts.length}}],[{key:"storedRecentAccounts",get:function(){return Z.Q.getCached(e.RECENT_ACCOUNTS,[])},set:function(t){Z.Q.store(e.RECENT_ACCOUNTS,t)}}]),e}();return e.RECENT_ACCOUNTS="RECENT_ACCOUNTS",e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B),h.Y36(U.F0))},e.\u0275cmp=h.Xpm({type:e,selectors:[["account-select"]],viewQuery:function(e,t){var n;(1&e&&(h.Gf(it,5),h.Gf(at,5),h.Gf(He.vS,5)),2&e)&&(h.iGM(n=h.CRH())&&(t.overlay=n.first),h.iGM(n=h.CRH())&&(t.searchInput=n.first),h.iGM(n=h.CRH())&&(t.matListOptions=n))},inputs:{e2e:"e2e"},outputs:{accountSelect:"accountSelect"},decls:9,vars:10,consts:[["cdkOverlayOrigin","","mat-button","","type","button",1,"account-select__trigger",3,"click"],["trigger","cdkOverlayOrigin"],["class","account-select__selected-account",4,"ngIf","ngIfElse"],["notSelectedAccount",""],["fill","white","icon","arrow_dropdown","size","medium"],["class","account-select__status-wrapper",4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayBackdropClass","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin","backdropClick","detach"],["overlay","cdkConnectedOverlay"],[1,"account-select__selected-account"],["ellipsisTitle","",1,"external-name"],[1,"external-identifier"],[1,"account-select__status-wrapper"],["icon","inactive",1,"account-select__icon"],[1,"account-select__status"],[1,"account-select-list"],["icon","search","size","small"],["autocomplete","off","matInput","",3,"placeholder","keydown","keyup"],["searchInput",""],["infinite-scroll","","loading-area-indicator","",1,"accounts",3,"infiniteScrollDisabled","loadingAreaIndicatorActive","scrollWindow","infiniteScrollThrottle","scrolled"],[3,"selectionChange"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["accountTemplate",""],["matSubheader",""],[3,"value"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"account-select__option--left"],["ellipsisTitle","",1,"account__name"],[1,"account__external-identifier"],["class","account-select__option--right",4,"ngIf"],[1,"account-select__option--right"]],template:function(e,t){if(1&e&&(h.TgZ(0,"button",0,1),h.NdJ("click",function(){return t.isListOpen=!t.isListOpen}),h.YNc(2,ot,5,2,"span",2),h.YNc(3,rt,4,5,"ng-template",null,3,h.W1O),h._UZ(5,"app-svg-icon",4),h.qZA(),h.YNc(6,st,5,3,"div",5),h.YNc(7,gt,14,10,"ng-template",6,7,h.W1O),h.NdJ("backdropClick",function(){return t.closeList()})("detach",function(){return t.closeList()})),2&e){var n=h.MAs(1),i=h.MAs(4);h.ekj("active",t.isListOpen),h.uIk("data-e2e",t.e2e?t.e2e+"__account-selector--button":null),h.xp6(2),h.Q6J("ngIf",t.selectedAccount)("ngIfElse",i),h.xp6(4),h.Q6J("ngIf",(null==t.selectedAccount?null:t.selectedAccount.status)===t.inactiveAccountStatus),h.xp6(1),h.Q6J("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop")("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayOpen",t.isListOpen)("cdkConnectedOverlayOrigin",n)}},directives:[b.lW,Xe.xu,f.O5,Ke.u,Xe.pI,We.w,et.Nt,l.R,tt.O,He.Ub,f.sg,He.gs,nt.d,He.vS,f.tP],pipes:[f.gd,q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:row;margin-left:1rem}.account-select__trigger[_ngcontent-%COMP%]{color:#fff;display:inline-block;height:100%}.account-select__trigger[_ngcontent-%COMP%]   .account-select__selected-account[_ngcontent-%COMP%]{display:flex}.account-select__trigger[_ngcontent-%COMP%]   .external-name[_ngcontent-%COMP%]{max-width:16rem}.account-select__trigger[_ngcontent-%COMP%]   .external-identifier[_ngcontent-%COMP%]{opacity:.6;padding-left:1rem}.account-select__trigger[_ngcontent-%COMP%]     .mat-button-wrapper{display:flex}.account-select__status-wrapper[_ngcontent-%COMP%]{align-items:center;display:flex}.account-select__icon[_ngcontent-%COMP%]{display:inline-block;padding:.3rem .3rem .3rem .8rem;vertical-align:middle}.account-select__status[_ngcontent-%COMP%]{color:#fff}.account-select-list[_ngcontent-%COMP%]{background-color:#fff;border:.1rem solid rgba(0,0,0,.03);border-radius:.2rem .2rem .4rem .4rem;box-shadow:0 .2rem .2rem #0000003d,0 0 .2rem #0000001f;height:80vh;margin-top:.4rem;max-width:60rem;min-width:40rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{align-items:center;background-color:#fff;border-bottom:.1rem solid #e5e5e5;display:flex;height:5.6rem;padding:0 1.6rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#000;flex:1;font-size:1.8rem;padding:0 .8rem}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}.account-select-list[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{height:100%}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]{height:calc(100% - 5.6rem);overflow-y:auto}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]{padding:0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]:first-child{margin-bottom:-.8rem}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   .mat-selection-list[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin:1rem 0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     mat-pseudo-checkbox{display:none}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text{display:flex;flex-direction:row;font-size:1.8rem;justify-content:space-between;padding-right:0}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account-select__option--left{align-items:center;display:flex;min-width:80%}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account-select__option--right{min-width:20%;text-align:end}.account-select-list[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]   mat-list-option[_ngcontent-%COMP%]     .mat-list-text .account__external-identifier{color:#0000008a;margin-left:1rem}"]}),e}(),vt=o(98910),_t=o(4008);function kt(e,t){1&e&&(h.TgZ(0,"div",4),h._UZ(1,"search-component",5),h.qZA()),2&e&&(h.xp6(1),h.Q6J("isAdminPortal",!0)("showSearchTooltipAdmin",!0))}var xt=function(){var e=function(){function e(t,n,i){p(this,e),this.router=t,this.searchService=n,this.accountService=i,this.isNavShownToggled=!1,this.ngUnsubscribe=new k.xQ,this.isNavShown=new h.vpe,this.selectedAccount=null,this.isSearchBarShown$=(0,X.of)(!1)}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.accountService.selectedAccount$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.selectedAccount=t,e.setSearchBarVisibility()})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"toggleNavShown",value:function(){this.isNavShown.emit(!this.isNavShownToggled)}},{key:"isSearchBarVisible",value:function(e){return!!this.selectedAccount&&!e.includes("admin/nconnect-voice")}},{key:"setSearchBarVisibility",value:function(){var e=this;this.isSearchBarShown$=this.router.events.pipe((0,N.h)(function(e){return e instanceof U.m2}),(0,ze.U)(function(t){return e.isSearchBarVisible(t.url)}),(0,$e.O)(this.isSearchBarVisible(this.router.url)))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(je.o),h.Y36(M.B))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-header"]],outputs:{isNavShown:"isNavShown"},decls:6,vars:3,consts:[["mat-icon-button","",1,"toggle-sidenav-btn",3,"click"],["fill","header-button","icon","nav","size","small"],["e2e","admin-toolbar-fragment"],["class","admin-header__search","data-e2e","admin-toolbar-fragment",4,"ngIf"],["data-e2e","admin-toolbar-fragment",1,"admin-header__search"],["e2e","admin-toolbar-fragment","placeholder","admin.customersearch.placeholder","searchTooltip","admin.fields.search.tooltip",3,"isAdminPortal","showSearchTooltipAdmin"]],template:function(e,t){1&e&&(h.TgZ(0,"button",0),h.NdJ("click",function(){return t.toggleNavShown()}),h._UZ(1,"app-svg-icon",1),h.qZA(),h._UZ(2,"account-select",2),h.YNc(3,kt,2,2,"div",3),h.ALo(4,"async"),h._UZ(5,"vertical-divider")),2&e&&(h.xp6(3),h.Q6J("ngIf",h.lcZ(4,1,t.isSearchBarShown$)))},directives:[b.lW,Ke.u,bt,f.O5,vt.y,_t.g],pipes:[f.Ov],styles:["[_nghost-%COMP%]{align-items:center;display:flex}.admin-header__search[_ngcontent-%COMP%]{flex:1}@media (min-width: 1280px){.toggle-sidenav-btn[_ngcontent-%COMP%]{display:none}}"]}),e}(),yt=o(11538),Ct=o(96566),Tt=o(92543),At=o(80181),St=["sidenav"];function Pt(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"user-settings-drawer",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().toggleUserSettings()})("onClose",function(){return h.CHM(n),h.oxw().toggleUserSettings()}),h.qZA()}2&e&&h.Q6J("adminMode",!0)}var It=function(){var e=function(){function e(t,n,i,a,o,r){var s=this;p(this,e),this.tokenService=t,this.adminService=n,this.router=i,this.telephonyOfflineService=a,this.injector=o,this.loginService=r,this.ngUnsubscribe=new k.xQ,this.isEditMode=!1,this.isUserSettingsShown=!1,this.sidenavMode="side",this.injector.get(Q),n.emitChange.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){s.activeUser=e}),o.get(L.f)}return m(e,[{key:"toggleUserSettings",value:function(){this.isUserSettingsShown=!this.isUserSettingsShown}},{key:"ngOnInit",value:function(){var e=this;this.isOnline$=this.telephonyOfflineService.isOnline$,this.activeUser=new O,this.tokenService.token$.pipe((0,N.h)(function(e){return!e}),(0,E.x)(),(0,w.R)(this.ngUnsubscribe)).subscribe(function(){e.goToLoginPage()}),this.listenForPermissionChanges()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"ngAfterViewInit",value:function(){var e=this;window.addEventListener("resize",function(){e.checkSidenav()}),this.checkSidenav()}},{key:"goToLoginPage",value:function(){this.router.navigate(["/auth/login"])}},{key:"checkSidenav",value:function(){window.innerWidth>=1280?(this.sidenavMode="side",this.isSidenavOpen=!0,this.disableSidenavClose=!0):(this.sidenavMode="over",this.isSidenavOpen=!1,this.disableSidenavClose=!1)}},{key:"switchToUcClient",value:function(){Z.Q.removeItem(M.q),Z.Q.removeItem("AdminToken"),this.loginService.authCredentials.clientAccess?window.close():this.logoutFromCloudya()}},{key:"toggleNavShown",value:function(){this.toggleSidenav()}},{key:"closeSideNav",value:function(e){window.innerWidth<1280&&!e&&this.toggleSidenav()}},{key:"toggleSidenav",value:function(){this.sidenav.toggle()}},{key:"logoutFromCloudya",value:function(){Z.Q.clearToken("token"),this.router.navigate(["/auth/logout"])}},{key:"listenForPermissionChanges",value:function(){var e=this;this.adminService.ownPermissionsChange$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){t.admin_login||(t.client_login?e.switchToUcClient():e.router.navigate(["/auth/logout"]))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(z.B),h.Y36($.l),h.Y36(U.F0),h.Y36(j.l),h.Y36(h.zs3),h.Y36(J.r))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-admin-main"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(St,5),2&e)&&(h.iGM(n=h.CRH())&&(t.sidenav=n.first))},decls:21,vars:13,consts:[["autoReload",""],[1,"main__content"],[1,"admin__header__background","header__background"],[1,"admin__sidenav"],[3,"disableClose","mode","opened"],["sidenav",""],["data-e2e","user-info-fragment",3,"isAdmin","click"],[3,"itemClicked"],[1,"my-content"],[1,"main__toolbar"],[1,"header-container"],[3,"isNavShown"],[1,"page-content"],[1,"main__footer"],[3,"adminMode","click","onClose",4,"ngIf"],[3,"adminMode","click","onClose"]],template:function(e,t){if(1&e&&(h._UZ(0,"auto-reload",null,0),h.TgZ(2,"main-container"),h.ALo(3,"async"),h.TgZ(4,"div",1),h._UZ(5,"div",2),h.TgZ(6,"mat-sidenav-container",3),h.TgZ(7,"mat-sidenav",4,5),h.TgZ(9,"user-info",6),h.NdJ("click",function(){return t.toggleUserSettings()}),h.qZA(),h.TgZ(10,"admin-sidenav",7),h.NdJ("itemClicked",function(e){return t.closeSideNav(e)}),h.qZA(),h.qZA(),h.TgZ(11,"div",8),h.TgZ(12,"mat-toolbar",9),h.TgZ(13,"div",10),h.TgZ(14,"admin-header",11),h.NdJ("isNavShown",function(){return t.toggleNavShown()}),h.qZA(),h.qZA(),h.qZA(),h.TgZ(15,"page-content",12),h._UZ(16,"router-outlet"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(17,"div",13),h._UZ(18,"app-footer"),h.qZA(),h.qZA(),h.YNc(19,Pt,1,1,"user-settings-drawer",14),h._UZ(20,"overlay-container")),2&e){var n=h.MAs(1);h.xp6(2),h.ekj("has-status",!h.lcZ(3,11,t.isOnline$)||n.updateAvailable),h.xp6(3),h.ekj("is-edit-mode",t.isEditMode),h.xp6(1),h.ekj("is-edit-mode",t.isEditMode),h.xp6(1),h.Q6J("disableClose",t.disableSidenavClose)("mode",t.sidenavMode)("opened",t.isSidenavOpen),h.xp6(2),h.Q6J("isAdmin",!0),h.xp6(10),h.Q6J("ngIf",t.isUserSettingsShown)}},directives:[K.a,H.t,G.TM,G.JX,V.M,Je,Qe.Ye,xt,yt.Y,U.lC,Ct.q,f.O5,Tt.l,At.N],pipes:[f.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]   .main__toolbar[_ngcontent-%COMP%]{background:transparent;min-height:6.4rem;padding:0}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1 1 auto}[_nghost-%COMP%]     .flexible-list__item{cursor:pointer}[_nghost-%COMP%]     .flexible-list{list-style:none;margin:0;padding:0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item{align-items:center;display:flex;flex-direction:row;height:5rem;margin-bottom:.1rem;margin-top:.1rem;padding:1.1rem 0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item>app-svg-icon, [_nghost-%COMP%]     .flexible-list>.flexible-list__item .column-container>app-svg-icon{margin-left:1rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item:hover .flexible-list__item__info-button, [_nghost-%COMP%]     .flexible-list>.flexible-list__item.active .flexible-list__item__info-button{display:block}[_nghost-%COMP%]     .flexible-list>.flexible-list__item>.flexible-list__item__initials{border-radius:50%;flex-shrink:0;font-size:1.8rem;height:4rem;line-height:4rem;margin-left:.8rem;margin-right:.8rem;text-align:center;vertical-align:middle;width:4rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content{display:grid;flex:1;flex-direction:column;margin-left:.8rem;margin-right:1.6rem;padding:1.1rem 0}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content .flexible-list__item__title{display:inline-block;font-size:1.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__content .flexible-list__item__sub-title{color:#666;font-size:1.6rem}[_nghost-%COMP%]     .flexible-list>.flexible-list__item .flexible-list__item__info-button{display:none;height:4.8rem;margin-right:.8rem;width:4.8rem}[_nghost-%COMP%]     .flexible-list .horizontal-divider{align-items:center;border-bottom:.1rem solid #e5e5e5;display:flex;height:5rem;padding:1.1rem 0;width:calc(100% - 8rem)}@-webkit-keyframes ringing{0%{opacity:1}49%{opacity:1}50%{opacity:0}to{opacity:0}}@keyframes ringing{0%{opacity:1}49%{opacity:1}50%{opacity:0}to{opacity:0}}[_nghost-%COMP%]     mat-sidenav-container .mat-sidenav-content{bottom:0;display:flex;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:2}[_nghost-%COMP%]     mat-sidenav-container .mat-sidenav-focus-trap{display:flex}[_nghost-%COMP%]     mat-sidenav-container .cdk-focus-trap-content{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .my-content{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper, [_nghost-%COMP%]     .my-content .page-content{display:flex;flex:1;flex-direction:column;overflow:hidden}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*{display:flex;flex:1;min-height:0;min-width:0;overflow-y:auto}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container{display:flex;flex:1;overflow:hidden}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>*, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>*{flex:0 0 auto;overflow-y:auto}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>.left, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>.left{flex:1}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>router-outlet+*:not(main-settings) .scrollable-container>.right, [_nghost-%COMP%]     .my-content .page-content>router-outlet+*:not(main-settings) .scrollable-container>.right{width:32.2rem}[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:32rem}@media screen and (min-width: 768px) and (max-width: 1023px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:33.33vw}}@media screen and (max-width: 767px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%], [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left:not(admin-search-results, .admin-page-content)[_ngcontent-%COMP%]{width:25.6rem}}@media screen and (max-width: 895px){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left, [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left{margin-left:0;margin-right:0}}@media screen and (min-width: 896px) and (max-width: 179rem){[_nghost-%COMP%]     .my-content .admin-page-content__wrapper>*:not(router-outlet)>.scrollable-container .left, [_nghost-%COMP%]     .my-content .page-content>*:not(router-outlet)>.scrollable-container .left{margin-left:0}}forward-details-modal[_ngcontent-%COMP%], categorized-modal[_ngcontent-%COMP%], subscribe-conference-modal[_ngcontent-%COMP%], delete-all-modal[_ngcontent-%COMP%], admin-session-ended-modal[_ngcontent-%COMP%], admin-switch-modal[_ngcontent-%COMP%], call-context-menu[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;right:0;top:0;z-index:2000}.main__footer[_ngcontent-%COMP%]{width:100%}@media (min-width: 1280px){.main__footer[_ngcontent-%COMP%]{width:128rem}}.main__content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{background-color:transparent;margin-left:auto;margin-right:auto;z-index:2}@media (min-width: 1280px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{width:128rem}}@media (min-width: 1024px) and (max-width: 1279px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%]     .mat-sidenav-content, .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]     .mat-sidenav-content{margin-left:auto!important;margin-right:auto!important;width:1024px}}@media (max-width: 1280px){.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]{width:100%}}.main__content[_ngcontent-%COMP%]   .admin__sidenav[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{background-color:transparent;border-right:0;display:flex;flex-direction:column;overflow-x:hidden;width:25.6rem}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{background-color:transparent}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.8rem;margin-left:.4rem;margin-right:.4rem}.main__content[_ngcontent-%COMP%]   .admin__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .main__content[_ngcontent-%COMP%]   .main__sidenav.is-edit-mode[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1.8rem}.main__content[_ngcontent-%COMP%]   .header__back-button--edit-mode[_ngcontent-%COMP%]{align-items:center;display:flex;height:6.4rem}@media (min-width: 1280px){.main__content[_ngcontent-%COMP%]   .toggle-sidenav-btn[_ngcontent-%COMP%]{display:none}.main__content[_ngcontent-%COMP%]   .my-content[_ngcontent-%COMP%]   .header__back-button--edit-mode[_ngcontent-%COMP%]{display:none}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}.ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-input-placeholder-wrapper[_ngcontent-%COMP%], .ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-hint--error[_ngcontent-%COMP%]{color:#b30000}.mat-warn[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%], .mat-input-element[_ngcontent-%COMP%]{caret-color:#b30000}.ng-touched.ng-dirty.mat-input-invalid[_ngcontent-%COMP%]   .ng-invalid.ng-dirty[_ngcontent-%COMP%]:not(.ng-untouched)   .mat-input-underline[_ngcontent-%COMP%]{background-color:#b30000!important}.header-container[_ngcontent-%COMP%]{width:100%}.admin__header__background[_ngcontent-%COMP%]{height:6.4rem;left:0;min-width:76.8rem;position:absolute;right:0;z-index:1}"]}),e}(),Ot=o(99385),Zt=o(56507),Mt=o(39485),wt=o(91841),Nt=o(35249),Et=o(45832),Lt=function(){var e=function(){function e(t,n,i){p(this,e),this.http=t,this.adminAuthService=n,this.snackBarService=i}return m(e,[{key:"handleUserCreationError",value:function(e){this.snackBarService.openInfo(409===(null==e?void 0:e.status)?"admin.user.user_already_exists":"admin.user.created_error")}},{key:"getUsers",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"username",r=(0,Ot.U8)(n,i,a,o),s=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users?").concat(r),s).pipe((0,ze.U)(function(e){return{data:e.body,paginationHasMoreData:+e.headers.get("x-pagination-current-page")<+e.headers.get("x-pagination-page-count")}}),(0,ze.U)(e.mapResponseWithMultipleItems))}},{key:"getUser",value:function(t,n){return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users/").concat(n),this.adminAuthService.getCredentials()).pipe((0,ze.U)(e.mapResponseWithSingleItem))}},{key:"createUser",value:function(t,n){return this.http.post("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users"),JSON.stringify(e.mapUser(n)),this.adminAuthService.getCredentials()).pipe((0,ze.U)(e.mapResponseWithSingleItem))}},{key:"editUser",value:function(t,n,i){return this.http.put("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users/").concat(n),JSON.stringify(e.mapUser(i)),this.adminAuthService.getCredentials()).pipe((0,ze.U)(e.mapResponseWithSingleItem))}},{key:"deleteUser",value:function(e,t){return this.http.delete("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t),this.adminAuthService.getCredentials())}},{key:"getPermissions",value:function(t,n){return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users/").concat(n,"/permissions"),this.adminAuthService.getCredentials()).pipe((0,ze.U)(function(e){return e.map(function(e){return Object.assign(Object.assign({},e),{parent_account_id:t.split(":")[1]})})}),(0,ze.U)(e.mapPermissions))}},{key:"editPermissions",value:function(e,t,n){return this.http.put("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/permissions"),JSON.stringify(n),this.adminAuthService.getCredentials())}},{key:"apiEndpointAdminAccounts",get:function(){return"".concat(Mt.N.API_URL,"/admin/accounts")}}],[{key:"mapToUser",value:function(e){var t=new O;return t.fromJSON(e),t}},{key:"mapResponseWithMultipleItems",value:function(t){return t&&Object.assign(Object.assign({},t),{data:t.data.map(e.mapToUser)})}},{key:"mapResponseWithSingleItem",value:function(t){return t&&e.mapToUser(t)}},{key:"mapPermissions",value:function(e){var t=new Zt.P;return t.fromJSON(e),t}},{key:"mapUser",value:function(e){var t=new O;return t.username=e.username,t.firstname=e.firstname,t.lastname=e.lastname,t.language=e.language,t.extension=e.extension,t.admin=e.admin,t.client=e.client,t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(wt.eN),h.LFG(Nt.Y),h.LFG(Et.c))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Ut=function(){var e=function(){function e(t,n){p(this,e),this.http=t,this.adminAuthService=n}return m(e,[{key:"getLicenses",value:function(e){return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(e.accountType,":").concat(e.accountId,"/products"),this.adminAuthService.getCredentials())}},{key:"getLicensesUsage",value:function(e,t){var n=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/products/").concat(t),n)}},{key:"getUserLicenseState",value:function(e,t,n){return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/licences/").concat(n),this.adminAuthService.getCredentials())}},{key:"grantLicenseToUser",value:function(e,t,n){return this.http.post("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/licences/").concat(n),{},this.adminAuthService.getCredentials())}},{key:"revokeLicenseFromUser",value:function(e,t,n){return this.http.delete("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/licences/").concat(n),this.adminAuthService.getCredentials())}},{key:"apiEndpointAdminAccounts",get:function(){return"".concat(Mt.N.API_URL,"/admin/accounts")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(wt.eN),h.LFG(Nt.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Dt=o(19122),Bt=o(49090),qt=o(658),Rt=o(13427),Ft=function(){var e=function(){function e(t,n){p(this,e),this.http=t,this.adminAuthService=n,this.createUserSource=new k.xQ,this.createUser$=this.createUserSource.asObservable()}return m(e,[{key:"updateCreateUserSource",value:function(e){this.createUserSource.next(e)}},{key:"unallocatedExtensions",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"extension_number",r=(0,Ot.U8)(a,n,i,o.toUpperCase()),s=Object.assign(Object.assign({},this.adminAuthService.getCredentials()),{observe:"response"});return this.http.get("".concat(this.apiEndpointAdmin,"/customer/").concat(t.externalIdentifier,"/migration-wizard/unallocated-extensions?").concat(r),s).pipe((0,ze.U)(function(e){return{data:e.body,paginationHasMoreData:+e.headers.get("x-pagination-current-page")<+e.headers.get("x-pagination-page-count")}}),(0,ze.U)(e.mapResponseWithMultipleItems))}},{key:"apiEndpointAdmin",get:function(){return"".concat(Mt.N.API_URL,"/admin")}}],[{key:"mapToUser",value:function(t){var n=new O;return n.language=e.defaultUserLanguage,n.fromUnallocatedExtension(t),n}},{key:"mapResponseWithMultipleItems",value:function(t){return t&&Object.assign(Object.assign({},t),{data:t.data.map(e.mapToUser)})}}]),e}();return e.defaultUserLanguage="en",e.\u0275fac=function(t){return new(t||e)(h.LFG(wt.eN),h.LFG(Nt.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Yt=function(e){r(n,e);var t=c(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"setAttributes",value:function(e){var t;this.id=e.id,this.resource=e.resource,this.resource_type_name=e.resource_type_name,this.inboundTrunkNumber=e.inboundTrunkNumber,this.inboundPhoneNumbers=e.inboundPhoneNumbers,this.inboundPhoneNumbersFormatted=(null===(t=e.inboundPhoneNumbers)||void 0===t?void 0:t.join(", "))||"-",this.extension=e.extension,this.name=e.name}},{key:"fromJSON",value:function(e){this.setAttributes(e)}}]),n}(I.H),Jt=function(){var e=function(){function e(t,n){p(this,e),this.http=t,this.adminAuthService=n,this.removePhoneExtensionSource=new k.xQ,this.activePhoneExtensionSource=new k.xQ,this.reloadPhoneExtensionSource=new k.xQ,this.removePhoneExtension$=this.removePhoneExtensionSource.asObservable(),this.activePhoneExtension$=this.activePhoneExtensionSource.asObservable(),this.reloadPhoneExtension$=this.reloadPhoneExtensionSource.asObservable()}return m(e,[{key:"reloadItems",value:function(){this.reloadPhoneExtensionSource.next()}},{key:"getLinkedPhoneExtensions",value:function(t,n){return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/users/").concat(n,"/phoneextensions"),this.adminAuthService.getCredentials()).pipe((0,ze.U)(e.mapResponseWithMultiplePhoneExtensionResourceItems))}},{key:"deleteLinkedPhoneExtension",value:function(e,t,n){return this.http.delete("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/phoneextensions/").concat(n),this.adminAuthService.getCredentials())}},{key:"getUnassignedPhoneExtensions",value:function(t,n,i,a){var o=(0,Ot.U8)(n,i,a);return this.http.get("".concat(this.apiEndpointAdminAccounts,"/").concat(t,"/unassigned-phoneextensions?").concat(o),this.adminAuthService.getCredentials()).pipe((0,ze.U)(e.mapResponseWithMultiplePhoneExtensionItems))}},{key:"addLinkedPhoneExtensions",value:function(e,t,n){return this.http.post("".concat(this.apiEndpointAdminAccounts,"/").concat(e,"/users/").concat(t,"/phoneextensions"),{value:n},this.adminAuthService.getCredentials())}},{key:"apiEndpointAdminAccounts",get:function(){return"".concat(Mt.N.API_URL,"/admin/accounts")}}],[{key:"mapToPhoneExtensionResource",value:function(e){var t=new Yt;return t.fromJSON(e),t}},{key:"mapToPhoneExtension",value:function(e){return{id:e.ID,discriminator:e.DISCRIMINATOR,displayName:e.DISPLAY_NAME,type:e.TYPE,extensionNumber:e.EXTENSION_NUMBER}}},{key:"mapResponseWithMultiplePhoneExtensionResourceItems",value:function(t){return t&&(t.data=t.map(e.mapToPhoneExtensionResource)),t}},{key:"mapResponseWithMultiplePhoneExtensionItems",value:function(t){return t&&(t.data=t.map(e.mapToPhoneExtension)),t}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(wt.eN),h.LFG(Nt.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Qt=o(5304),zt=function(){var e=function(){function e(t,n,i,a){p(this,e),this.http=t,this.apiAdminService=n,this.accountService=i,this.adminAuthService=a,this.importErrorSource=new k.xQ,this.importError$=this.importErrorSource.asObservable()}return m(e,[{key:"uploadUsersViaFile",value:function(t){var n=this;this.getImport(t).pipe((0,ze.U)(function(t){return t.map(function(t){return e.mapImportErrorApiResponse(t)})})).subscribe(function(e){n.importErrorSource.next(e)})}},{key:"exportFile",value:function(){return this.http.get("".concat(Mt.N.API_URL,"/admin/accounts/").concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId,"/userimport/export"),this.adminAuthService.getCredentials())}},{key:"getImport",value:function(e){return this.apiAdminService.post("".concat(Mt.N.API_URL,"/admin/accounts/").concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId,"/userimport/import"),{text:e}).pipe((0,Qt.K)(function(e){return(0,X.of)(e.error.report)}))}}],[{key:"mapImportErrorApiResponse",value:function(e){var t;return{username:e.username,report:null===(t=null==e?void 0:e.report)||void 0===t?void 0:t.split("\n"),imported:null==e?void 0:e.imported}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(wt.eN),h.LFG(Dt.i),h.LFG(M.B),h.LFG(Nt.Y))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),$t=o(42070),jt=function(){var e=m(function e(t){p(this,e),this.dialogRef=t});return e.\u0275fac=function(t){return new(t||e)(h.Y36(d.so))},e.\u0275cmp=h.Xpm({type:e,selectors:[["leave-dialog"]],decls:5,vars:4,consts:[[3,"btnSaveCaption","cancelClick","saveClick"]],template:function(e,t){1&e&&(h.TgZ(0,"section"),h.TgZ(1,"p"),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA(),h.TgZ(4,"footer-actions",0),h.NdJ("cancelClick",function(){return t.dialogRef.close(!1)})("saveClick",function(){return t.dialogRef.close(!0)}),h.qZA()),2&e&&(h.xp6(2),h.hij(" ",h.lcZ(3,2,"admin.user_edit.leave_dialog.label")," "),h.xp6(2),h.Q6J("btnSaveCaption","done"))},directives:[$t.c],pipes:[q.X$],styles:[""]}),e}(),Kt=o(28049),Ht=function(){var e=function(){function e(t){p(this,e),this.dialog=t}return m(e,[{key:"canDeactivate",value:function(e){return!!e.isFormChanged()||this.dialog.open(jt).afterClosed().pipe((0,ze.U)(function(e){return e}),(0,Kt.P)())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(d.uw))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Gt=function(){var e=function(){function e(t,n){p(this,e),this.router=t,this.accountService=n}return m(e,[{key:"canActivate",value:function(){return!!this.accountService.isKAccountSelected||(this.router.navigate(["/admin/user"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(U.F0),h.LFG(M.B))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Vt=function(){var e=function(){function e(t,n){p(this,e),this.router=t,this.accountService=n}return m(e,[{key:"canActivate",value:function(){return!!this.accountService.selectedAccount||(this.router.navigate(["/admin/user"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.LFG(U.F0),h.LFG(M.B))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e}(),Xt=o(3679),Wt=function(){var e=function(){function e(t,n){p(this,e),this.router=t,this.route=n,this.ngUnsubscribe=new k.xQ,this.route.params.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){})}return m(e,[{key:"ngOnInit",value:function(){this.initCallForwardingForm()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"initCallForwardingForm",value:function(){this.callForwardingForm=new Xt.cw({})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(U.gz))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-call-forwarding"]],decls:5,vars:3,consts:[[1,"headline"],[1,"content"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"span"),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA(),h._UZ(4,"div",1)),2&e&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"admin.user_edit.call_forwarding.label")))},pipes:[q.X$],styles:[""]}),e}(),en=o(68307),tn=function(){var e=function(){function e(t,n){var i=this;p(this,e),this.adminService=t,this.ngUnsubscribe=new k.xQ,n.url.pipe((0,en.b)(function(e){e.some(function(e){return"wizards"===e.path})&&i.adminService.emit(null)}),(0,w.R)(this.ngUnsubscribe)).subscribe()}return m(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36($.l),h.Y36(U.gz))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-page-content"]],decls:4,vars:0,consts:[[1,"scrollable-container"],[1,"left","admin-page-content"],[1,"admin-page-content__wrapper"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h._UZ(3,"router-outlet"),h.qZA(),h.qZA(),h.qZA())},directives:[U.lC],styles:[".admin-page-content[_ngcontent-%COMP%]{display:flex;flex:1}.admin-page-content__wrapper[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}"]}),e}(),nn=o(88044),an=o(76321),on=o(68939),rn=function(){function e(){p(this,e)}return m(e,null,[{key:"isExtensionFieldValid",value:function(){return function(e){return"string"==typeof e.value&&""!==e.value?{isExtensionFieldInvalid:!0}:null}}}]),e}(),sn=o(64300),cn=o(85499),ln=o(21554),un=o(18882),dn=o(83112),mn=o(44163),pn=o(7539);function fn(e,t){1&e&&(h.TgZ(0,"mat-hint",14),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function hn(e,t){1&e&&(h.TgZ(0,"mat-hint",14),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function gn(e,t){1&e&&(h.TgZ(0,"mat-hint",14),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.username.error.required")," "))}function bn(e,t){1&e&&(h.TgZ(0,"mat-hint",14),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"common_errors.username.email")," "))}function vn(e,t){1&e&&(h.TgZ(0,"mat-hint",15),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user.already_exists_with_extension")," "))}function _n(e,t){if(1&e&&(h.TgZ(0,"mat-option",16),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=t.$implicit;h.Q6J("value",n.value),h.xp6(1),h.hij(" ",h.lcZ(2,2,n.title)," ")}}function kn(e,t){if(1&e&&(h.TgZ(0,"div"),h._UZ(1,"svg-avatar",28),h.qZA()),2&e){var n=h.oxw().$implicit;h.xp6(1),h.Q6J("displayName",n.displayName)}}function xn(e,t){1&e&&h._UZ(0,"svg-avatar")}function yn(e,t){if(1&e&&(h.TgZ(0,"mat-option",24),h.YNc(1,kn,2,1,"div",25),h.YNc(2,xn,1,0,"ng-template",null,23,h.W1O),h.TgZ(4,"span",26),h._uU(5),h.qZA(),h.TgZ(6,"span",27),h._uU(7),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.MAs(3),a=h.oxw(2);h.Q6J("value",n),h.xp6(1),h.Q6J("ngIf",a.getInitials(n.displayName))("ngIfElse",i),h.xp6(4),h.Oqu(n.displayName),h.xp6(2),h.Oqu(n.number||n.extensionNumber||n.EXTENSION_NUMBER||n.ID)}}function Cn(e,t){1&e&&(h.TgZ(0,"mat-option"),h._UZ(1,"app-spinner"),h.qZA())}function Tn(e,t){1&e&&h._UZ(0,"svg-avatar")}function An(e,t){1&e&&(h.TgZ(0,"mat-error"),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.extension.error")," "))}function Sn(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-form-field",17),h.TgZ(1,"input",18),h.NdJ("focusout",function(){return h.CHM(n),h.oxw().checkExistingUserWithExtension()}),h.ALo(2,"translate"),h.qZA(),h.TgZ(3,"mat-autocomplete",19,20),h.NdJ("listboxScrolled",function(){return h.CHM(n),h.oxw().loadMoreItems()}),h.YNc(5,yn,8,5,"mat-option",21),h.YNc(6,Cn,2,0,"mat-option",22),h.qZA(),h.YNc(7,Tn,1,0,"ng-template",null,23,h.W1O),h.YNc(9,An,3,3,"mat-error",22),h.qZA()}if(2&e){var i=h.MAs(4),a=h.oxw();h.xp6(1),h.s9C("placeholder",h.lcZ(2,6,"admin.user.phoneextension.extension")),h.Q6J("matAutocomplete",i),h.xp6(2),h.Q6J("displayWith",a.displayFn),h.xp6(2),h.Q6J("ngForOf",a.extensionItems),h.xp6(1),h.Q6J("ngIf",a.isLoading),h.xp6(3),h.Q6J("ngIf",a.userDataForm.controls.extension.hasError("isExtensionFieldInvalid"))}}function Pn(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",32),h.TgZ(1,"mat-checkbox",34),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw(2).user.client=e}),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()}if(2&e){var i=h.oxw(2);h.xp6(1),h.Q6J("ngModel",i.user.client),h.xp6(1),h.hij(" ",h.lcZ(3,2,"admin.user_edit.user_data.permissions.client")," ")}}function In(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"section",29),h.TgZ(1,"div",30),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.YNc(4,Pn,4,4,"div",31),h.TgZ(5,"div",32),h.TgZ(6,"mat-checkbox",33),h.NdJ("ngModelChange",function(e){h.CHM(n);var t=h.oxw();return t.isNconnectVoiceAccount||(t.user.admin=e)}),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(2),h.Oqu(h.lcZ(3,5,"admin.user_edit.user_data.permissions.title")),h.xp6(2),h.Q6J("ngIf",!i.isNconnectVoiceAccount),h.xp6(2),h.Q6J("ngModel",i.isNconnectVoiceAccount||i.user.admin)("disabled",i.isNconnectVoiceAccount),h.xp6(1),h.hij(" ",h.lcZ(8,7,i.adminCheckBoxText)," ")}}function On(e,t){1&e&&(h.TgZ(0,"mat-error",35),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.permissions.error")," "))}var Zn=function(){var e=function(){function e(t,n,i,a,o,r,s,c){var l=this;p(this,e),this.adminAuthService=t,this.adminService=n,this.userService=i,this.accountService=a,this.phoneExtensionService=o,this.languageService=r,this.dialogRef=s,this.data=c,this.ngUnsubscribe=new k.xQ,this.userHasExtension=!1,this.isPermissionsShown=!1,this.extensionItems=[],this.interfaceLanguages=this.languageService.getAvailableLanguages(),this.interfaceLanguageDefault=this.interfaceLanguages[this.languageService.getCurrentLanguage()],this.page=1,this.perPage=25,this.hasMoreData=!0,this.isLoading=!1,this.searchExtensionValue="",this.uploader=new an.bA({url:"".concat(Mt.N.API_URL,"/file/upload"),authToken:this.adminAuthService.getBearerAuth(),autoUpload:!0}),this.isNconnectVoiceAccount=!1,this.adminCheckBoxText="admin.user_edit.user_data.permissions.admin",this.initUserDataForm(),this.selectedAccount=this.data.account,this.userDataForm.get("extension").valueChanges.pipe((0,$e.O)(""),(0,Ve.b)(250),(0,en.b)(function(e){l.extensionItems=[],l.page=1,l.searchExtensionValue=e}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(){l.loadUnassignedPhoneExtensions()}),this.uploader=new an.bA({url:"".concat(Mt.N.API_URL,"/file/upload"),authToken:this.adminAuthService.getBearerAuth(),autoUpload:!0})}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.setUserFormDefaultLanguage(),this.user.client=!0,this.userService.userInfo$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.isNconnectVoiceAccount=t.modules.includes("nconnect_voice"),e.setAdminCheckBoxText()}),this.accountService.isKAccountSelected&&(this.isPermissionsShown=this.accountService.isKAccountSelected)}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"save",value:function(){this.dialogRef.close(this.userDataForm.value)}},{key:"cancel",value:function(){this.dialogRef.close()}},{key:"checkExistingUserWithExtension",value:function(){var e=this,t=this.userDataForm.get("username").value;return""!==t&&(this.accountService.checkUsername(t).subscribe(function(t){e.userHasExtension=200===t.status,e.userHasExtension?(e.userDataForm.get("client").disable(),e.userDataForm.get("client").setValue(!1)):e.userDataForm.get("client").enable()}),this.userHasExtension)}},{key:"extensionFieldIsEmpty",value:function(){return null===this.userDataForm.controls.extension.value||""===this.userDataForm.controls.extension.value}},{key:"getInitials",value:function(e){return(0,Ot.Cx)(e)||""}},{key:"displayFn",value:function(e){return e&&e.displayName}},{key:"loadMoreItems",value:function(){this.hasMoreData&&!this.isLoading&&this.loadUnassignedPhoneExtensions()}},{key:"initUserDataForm",value:function(){this.user=new O,this.adminService.emit(this.user),this.userDataForm=new Xt.cw({username:new Xt.NI(this.user.username,Xt.kI.compose([Xt.kI.required,Xt.kI.email])),firstname:new Xt.NI(this.user.firstname,Xt.kI.required),lastname:new Xt.NI(this.user.lastname,Xt.kI.required),language:new Xt.NI(this.user.language,Xt.kI.required),extension:new Xt.NI(this.user.extension,rn.isExtensionFieldValid()),client:new Xt.NI(this.user.client),admin:new Xt.NI(this.user.admin)})}},{key:"setUserFormDefaultLanguage",value:function(){var e=this;this.userService.userInfo$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){var n=e.interfaceLanguages.some(function(e){return e.value===t.user.language});e.user.language=n?t.user.language:e.interfaceLanguageDefault})}},{key:"loadUnassignedPhoneExtensions",value:function(){var e=this;this.selectedAccount&&(this.isLoading=!0,this.phoneExtensionService.getUnassignedPhoneExtensions("".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId),this.searchExtensionValue,this.page,this.perPage).pipe((0,w.R)(this.ngUnsubscribe),(0,on.x)(function(){return e.isLoading=!1})).subscribe(function(t){e.page++,e.extensionItems=[].concat(i(e.extensionItems),i(t.data)),e.hasMoreData=t.length>=e.perPage}))}},{key:"setAdminCheckBoxText",value:function(){this.isNconnectVoiceAccount&&(this.adminCheckBoxText="admin.user_edit.user_data.permissions.nconnect_voice")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Nt.Y),h.Y36($.l),h.Y36(W.K),h.Y36(M.B),h.Y36(Jt),h.Y36(sn.T),h.Y36(d.so),h.Y36(d.WI))},e.\u0275cmp=h.Xpm({type:e,selectors:[["add-user-modal"]],decls:27,vars:32,consts:[["data-e2e","admin-user-modal-fragment",1,"add-user"],[1,"add-user__modal",3,"title"],[1,"add-user-modal__form",3,"formGroup"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__first-name--input",3,"focus","placeholder"],["class","mat-hint--error",4,"ngIf"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__last-name--input",3,"placeholder"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-user-modal-fragment__username--input",3,"placeholder","focusout"],["class","mat-hint--error","style","color:red;",4,"ngIf"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-user-modal-fragment__language-selector",3,"ngModel","placeholder","ngModelChange"],["data-e2e","admin-user-modal-fragment__language-selector-option",3,"value",4,"ngFor","ngForOf"],["class","extension-autocomplete",4,"ngIf"],["class","add-user__section--permissions",4,"ngIf"],["class","add-user__checkbox-error-message",4,"ngIf"],["e2e","admin-user-modal-fragment",3,"saveDisabled","cancelClick","saveClick"],[1,"mat-hint--error"],[1,"mat-hint--error",2,"color","red"],["data-e2e","admin-user-modal-fragment__language-selector-option",3,"value"],[1,"extension-autocomplete"],["formControlName","extension","matInput","","data-e2e","admin-user-modal-fragment__extension--input",3,"matAutocomplete","placeholder","focusout"],[3,"displayWith","listboxScrolled"],["auto","matAutocomplete"],["class","extension-autocomplete__item",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["showIcon",""],[1,"extension-autocomplete__item",3,"value"],[4,"ngIf","ngIfElse"],["mat-line","","data-e2e","admin-user-modal-fragment__extension-autocomplete-option-name"],["mat-line","","data-e2e","admin-user-modal-fragment__extension-autocomplete-option-extension"],[3,"displayName"],[1,"add-user__section--permissions"],[1,"add-user__section__subtitle"],["class","add-user__section__checkbox",4,"ngIf"],[1,"add-user__section__checkbox"],["color","primary","formControlName","admin","id","user_data__client-admin","data-e2e","admin-user-modal-fragment__permission-administrator-rights-checkbox",3,"ngModel","disabled","ngModelChange"],["color","primary","formControlName","client","id","user_data__client-rights","data-e2e","admin-user-modal-fragment__permission-client-rights-checkbox",3,"ngModel","ngModelChange"],[1,"add-user__checkbox-error-message"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"modal-container",1),h.ALo(2,"translate"),h.TgZ(3,"form",2),h.TgZ(4,"section"),h.TgZ(5,"mat-form-field"),h._UZ(6,"input",3),h.ALo(7,"translate"),h.YNc(8,fn,3,3,"mat-hint",4),h.qZA(),h.TgZ(9,"mat-form-field"),h._UZ(10,"input",5),h.ALo(11,"translate"),h.YNc(12,hn,3,3,"mat-hint",4),h.qZA(),h.TgZ(13,"mat-form-field"),h.TgZ(14,"input",6),h.NdJ("focusout",function(){return t.checkExistingUserWithExtension()}),h.ALo(15,"translate"),h.qZA(),h.YNc(16,gn,3,3,"mat-hint",4),h.YNc(17,bn,3,3,"mat-hint",4),h.YNc(18,vn,3,3,"mat-hint",7),h.qZA(),h.TgZ(19,"mat-form-field"),h.TgZ(20,"mat-select",8),h.NdJ("ngModelChange",function(e){return t.user.language=e}),h.ALo(21,"translate"),h.YNc(22,_n,3,4,"mat-option",9),h.qZA(),h.qZA(),h.YNc(23,Sn,10,8,"mat-form-field",10),h.qZA(),h.YNc(24,In,9,9,"section",11),h.YNc(25,On,3,3,"mat-error",12),h.TgZ(26,"footer-actions",13),h.NdJ("cancelClick",function(){return t.cancel()})("saveClick",function(){return t.save()}),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(1),h.Q6J("title",h.lcZ(2,22,"admin.user.add_user")),h.xp6(2),h.Q6J("formGroup",t.userDataForm),h.xp6(1),h.ekj("add-user-modal__section--extension-invalid",t.userDataForm.controls.extension.hasError("isExtensionFieldInvalid")),h.xp6(2),h.Q6J("focus",!0)("placeholder",h.lcZ(7,24,"admin.user_edit.user_data.firstname.label")),h.xp6(2),h.Q6J("ngIf",t.userDataForm.controls.firstname.hasError("required")&&t.userDataForm.controls.firstname.touched),h.xp6(2),h.Q6J("placeholder",h.lcZ(11,26,"admin.user_edit.user_data.lastname.label")),h.xp6(2),h.Q6J("ngIf",t.userDataForm.controls.lastname.hasError("required")&&t.userDataForm.controls.lastname.touched),h.xp6(1),h.ekj("add-user__form-field--has-error",!0===t.userDataForm.controls.username.hasError("email")),h.xp6(1),h.Q6J("placeholder",h.lcZ(15,28,"admin.user_edit.user_data.username.label")),h.xp6(2),h.Q6J("ngIf",t.userDataForm.controls.username.hasError("required")&&t.userDataForm.controls.username.touched),h.xp6(1),h.Q6J("ngIf",!t.userDataForm.controls.username.hasError("required")&&t.userDataForm.controls.username.hasError("email")&&t.userDataForm.controls.username.touched),h.xp6(1),h.Q6J("ngIf",t.userHasExtension&&!t.extensionFieldIsEmpty()&&!t.userDataForm.controls.username.hasError("email")),h.xp6(2),h.Q6J("ngModel",t.user.language)("placeholder",h.lcZ(21,30,"admin.user_edit.user_data.language.label")),h.xp6(2),h.Q6J("ngForOf",t.interfaceLanguages),h.xp6(1),h.Q6J("ngIf",!t.isNconnectVoiceAccount),h.xp6(1),h.Q6J("ngIf",t.isPermissionsShown),h.xp6(1),h.Q6J("ngIf",!t.user.client&&!t.user.admin),h.xp6(1),h.Q6J("saveDisabled",t.userDataForm.invalid||t.userHasExtension&&!t.extensionFieldIsEmpty()))},directives:[D.O,Xt._Y,Xt.JL,Xt.sg,x.KE,Xt.Fj,et.Nt,Xt.JJ,Xt.u,Xt.nD,cn.R,f.O5,v.gD,f.sg,$t.c,x.bx,g.ey,ln.ZL,ln.XC,un.X,g.X2,dn.T,mn.S,x.TO,pn.oG],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.mat-form-field.mat-form-field-should-float[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{font-size:1.6rem;margin-top:1rem}.mat-form-field-label[_ngcontent-%COMP%]{font-size:1.8rem}mat-form-field[_ngcontent-%COMP%]{flex:1;width:100%}mat-form-field[_ngcontent-%COMP%]   .mat-input-element[_ngcontent-%COMP%]:disabled{color:#00000061}.mat-form-field-label-wrapper[_ngcontent-%COMP%]{top:-1.44375em}.mat-form-field-infix[_ngcontent-%COMP%]{padding:.5rem 0}  .extension-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .extension-autocomplete__item .mat-option-text{align-items:center;display:flex;position:relative}  .extension-autocomplete__item .mat-option-text .rounded-icon-holder{font-size:2.4rem}  .extension-autocomplete__item .mat-option-text span{font-size:1.8rem;margin-top:-1.8rem}  .extension-autocomplete__item .mat-option-text span:last-child{color:#0000008a;font-size:1.6rem;left:5.7rem;position:absolute;top:2.3rem}.add-user-modal__form[_ngcontent-%COMP%]{padding:.8rem 2.4rem}.add-user__section__subtitle[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:1.5rem;margin-top:.5rem}.add-user__section__checkbox[_ngcontent-%COMP%]{margin-top:2rem}.add-user__form-field--has-error[_ngcontent-%COMP%]{height:9.5rem}.add-user__checkbox-error-message[_ngcontent-%COMP%]{font-size:1.4rem;margin:1rem 0 .5rem}.add-user__section--permissions[_ngcontent-%COMP%]{margin-bottom:1rem}.add-user-modal__section--extension-invalid[_ngcontent-%COMP%]{margin-bottom:2rem}"]}),e}(),Mn=o(48431),wn=o(34899),Nn=o(54073),En=o(93739),Ln=o(83217),Un=o(7460),Dn=o(81836),Bn=o(57158),qn=o(99445),Rn=o(76083);function Fn(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"button",2),h.NdJ("click",function(e){return h.CHM(n),h.oxw().onLoadMore(e)}),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()}2&e&&(h.xp6(2),h.Oqu(h.lcZ(3,1,"search-result.load-more")))}var Yn=["*"],Jn=function(){var e,t=function(e){r(n,e);var t=c(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).showLoadMore=!1,e.showLoading=!1,e}return m(n)}(Rn.g);return t.\u0275fac=function(n){return(e||(e=h.n5z(t)))(n||t)},t.\u0275cmp=h.Xpm({type:t,selectors:[["admin-search-group"]],inputs:{title:"title",showLoadMore:"showLoadMore",showLoading:"showLoading"},features:[h.qOj],ngContentSelectors:Yn,decls:4,vars:2,consts:[["loading-area-indicator","",1,"admin-search-group",3,"loadingAreaIndicatorActive"],[4,"ngIf"],["mat-button","",1,"load-more",3,"click"]],template:function(e,t){1&e&&(h.F$t(),h.TgZ(0,"div",0),h.TgZ(1,"section"),h.Hsn(2),h.qZA(),h.YNc(3,Fn,4,3,"div",1),h.qZA()),2&e&&(h.Q6J("loadingAreaIndicatorActive",t.showLoading),h.xp6(3),h.Q6J("ngIf",t.showLoadMore))},directives:[tt.O,f.O5,b.lW],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}header[_ngcontent-%COMP%]{border-top:.1rem solid rgba(0,0,0,.3);color:#0000004d;margin:1rem 0 0;padding:.8rem 1.6rem}.load-more[_ngcontent-%COMP%]{margin:.8rem 1.6rem;text-transform:uppercase}"]}),t}(),Qn=o(19773),zn=o(5882),$n=function(){var e=function(){function e(t,n,i,a,o,r){p(this,e),this.router=t,this.snackBarService=n,this.userService=i,this.confirmDialogsService=a,this.translate=o,this.accountService=r,this.ngUnsubscribe=new k.xQ,this.items=[],this.sortOrderChange=new h.vpe}return m(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"editUser",value:function(e){this.router.navigate(["/admin/user/".concat(e.id)])}},{key:"deleteUser",value:function(e,t,n){var i=this;this.translate.get(["admin.user.deleting_user","admin.user.want_delete_user","yes","no"]).pipe((0,Qn.zg)(function(t){return i.confirmDialogsService.confirm(t["admin.user.deleting_user"],"".concat(t["admin.user.want_delete_user"]," ").concat(e.username,"?"),t.no,t.yes)}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(a){a&&n&&n(),i.handleDeleteUserDialogResult(a,e,t)})}},{key:"handleDeleteUserDialogResult",value:function(e,t,n){var i=this;e&&this.accountService.selectedAccount&&(this.snackBarService.open("admin.user.deleting_user"),this.userService.deleteUser("".concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId),t.id).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){i.items.splice(n,1),i.snackBarService.openInfo("admin.user.deleted",!0)}))}},{key:"changeOrder",value:function(e){this.order=e.order,this.reverse=e.reverse,this.sortOrderChange.emit((this.reverse?"-":"")+this.order)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(Et.c),h.Y36(Lt),h.Y36(zn.U),h.Y36(q.sK),h.Y36(M.B))},e.\u0275dir=h.lG2({type:e,inputs:{items:"items",scrollContainerSelector:"scrollContainerSelector"},outputs:{sortOrderChange:"sortOrderChange"}}),e}(),jn=o(67798),Kn=o(77540);function Hn(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," n/a"),h.qZA())}function Gn(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," -"),h.qZA())}function Vn(e,t){1&e&&h._UZ(0,"app-svg-icon",14)}function Xn(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," n/a"),h.qZA())}function Wn(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," -"),h.qZA())}function ei(e,t){1&e&&h._UZ(0,"app-svg-icon",14)}function ti(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list-item",5),h.TgZ(1,"span",6),h._uU(2),h.qZA(),h.TgZ(3,"span",6),h._uU(4),h.qZA(),h.TgZ(5,"span",7),h._uU(6),h.qZA(),h.TgZ(7,"span",7),h.YNc(8,Hn,2,0,"span",8),h.YNc(9,Gn,2,0,"span",8),h.YNc(10,Vn,1,0,"app-svg-icon",9),h.qZA(),h.TgZ(11,"span",7),h.YNc(12,Xn,2,0,"span",8),h.YNc(13,Wn,2,0,"span",8),h.YNc(14,ei,1,0,"app-svg-icon",9),h.qZA(),h.TgZ(15,"span",10),h.TgZ(16,"button",11),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().editUser(e)}),h._UZ(17,"app-svg-icon",12),h.qZA(),h.TgZ(18,"button",11),h.NdJ("click",function(){var e=h.CHM(n),t=e.$implicit,i=e.index;return h.oxw().deleteUser(t,i)}),h._UZ(19,"app-svg-icon",13),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,a=h.oxw();h.uIk("data-e2e",a.e2e?a.e2e+"__table-row":null),h.xp6(1),h.uIk("data-e2e",a.e2e?a.e2e+"__table-row-username":null)("data-e2e-id",a.e2e?i.id:null),h.xp6(1),h.hij(" ",i.username," "),h.xp6(2),h.Oqu(i.getFullName()),h.xp6(2),h.Oqu(i.extension),h.xp6(2),h.Q6J("ngIf",void 0===i.client),h.xp6(1),h.Q6J("ngIf",!1===i.client),h.xp6(1),h.Q6J("ngIf",!0===i.client),h.xp6(2),h.Q6J("ngIf",void 0===i.admin),h.xp6(1),h.Q6J("ngIf",!1===i.admin),h.xp6(1),h.Q6J("ngIf",!0===i.admin),h.xp6(2),h.uIk("data-e2e",a.e2e?a.e2e+"__table-row-edit--button":null),h.xp6(2),h.uIk("data-e2e",a.e2e?a.e2e+"__table-row-delete--button":null)}}var ni=function(){var e=function(e){r(n,e);var t=c(n);function n(e,i,a,o,r,s){var c;return p(this,n),(c=t.call(this,e,i,a,o,r,s)).router=e,c.snackBarService=i,c.userService=a,c.confirmDialogsService=o,c.translate=r,c.accountService=s,c.headerColumnData=[{name:"username",title:"admin.user.username.label",e2e:"admin-user-page__table-header-username"},{name:"firstname",title:"admin.user.name.label",e2e:"admin-user-page__table-header-name"},{name:"extension",title:"admin.user.extension.label",class:"column__small",disabled:!0,e2e:"admin-user-page__table-header-extension"},{name:"hasAccess",title:"admin.user.client.label",class:"column__small",e2e:"admin-user-page__table-header-app"},{name:"hasAdminAccess",title:"admin.user.admin.label",class:"column__small",e2e:"admin-user-page__table-header-admin"}],c}return m(n)}($n);return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(Et.c),h.Y36(Lt),h.Y36(zn.U),h.Y36(q.sK),h.Y36(M.B))},e.\u0275cmp=h.Xpm({type:e,selectors:[["users-table"]],inputs:{e2e:"e2e"},features:[h.qOj],decls:5,vars:2,consts:[[1,"flex-table","users-table__header--adjust"],[1,"secondary-header","sticky-header"],[1,"users-table",3,"data","orderChange"],[1,"column","column--fix"],["itemHoverbox","",4,"ngFor","ngForOf"],["itemHoverbox",""],[1,"column"],[1,"column","column__small"],[4,"ngIf"],["fill","green-button","icon","done","size","small",4,"ngIf"],[1,"column","item-secondary-content"],["mat-icon-button","","type","button",3,"click"],["fill","button-color","icon","edit","size","small"],["fill","button-color","icon","delete","size","small"],["fill","green-button","icon","done","size","small"]],template:function(e,t){1&e&&(h.TgZ(0,"mat-list",0),h.TgZ(1,"mat-list-item",1),h.TgZ(2,"sortable-list-header",2),h.NdJ("orderChange",function(e){return t.changeOrder(e)}),h.qZA(),h._UZ(3,"span",3),h.qZA(),h.YNc(4,ti,20,14,"mat-list-item",4),h.qZA()),2&e&&(h.xp6(2),h.Q6J("data",t.headerColumnData),h.xp6(2),h.Q6J("ngForOf",t.items))},directives:[He.i$,He.Tg,jn.c,f.sg,Kn.h,f.O5,b.lW,Ke.u],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}[_nghost-%COMP%]     .mat-list-base .mat-list-item.sticky-header{top:0!important}.users-table__header--adjust[_ngcontent-%COMP%]{display:block;margin-top:6.4rem}"]}),e}();function ii(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"admin-search-group",1),h.NdJ("loadMore",function(){return h.CHM(n),h.oxw().onLoadMore()}),h._UZ(1,"users-table",2),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("showLoadMore",i.hasMoreData&&!i.isLoading)("showLoading",i.isLoading),h.xp6(1),h.Q6J("items",i.items)}}var ai=function(){var e=function(e){r(n,e);var t=c(n);function n(e,i,a,o,r,s){var c;return p(this,n),(c=t.call(this,e,i,r,s)).clickToDialService=e,c.sipService=i,c.adminUserService=a,c.accountService=o,c.logger=r,c.callTrackerService=s,c.ngUnsubscribe=new k.xQ,c.type=nn.V.USER,c.items=[],c}return m(n,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"mapData",value:function(e){return e}},{key:"load",value:function(){var e,t=this,n=this.accountService.selectedAccount;n&&(null===(e=this.usersRequest)||void 0===e||e.unsubscribe(),this.usersRequest=this.adminUserService.getUsers("".concat(n.accountType,":").concat(n.accountId),this.searchString,this.page,this.getPerPage()).pipe((0,Mn.K)(function(e){return t.isLoading=e}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.appendItems(e.data),t.updateHasMoreData(e.data.length),t.loaded.emit(e.data.length),t.page++},function(){t.loaded.emit(0)}))}}]),n}(Ln.g);return e.\u0275fac=function(t){return new(t||e)(h.Y36(Un.q),h.Y36(Dn.y),h.Y36(Lt),h.Y36(M.B),h.Y36(Bn.Kf),h.Y36(qn.k))},e.\u0275cmp=h.Xpm({type:e,selectors:[["user-group"]],features:[h.qOj],decls:1,vars:1,consts:[[3,"showLoadMore","showLoading","loadMore",4,"ngIf"],[3,"showLoadMore","showLoading","loadMore"],[3,"items"]],template:function(e,t){1&e&&h.YNc(0,ii,2,3,"admin-search-group",0),2&e&&h.Q6J("ngIf",t.items.length)},directives:[f.O5,Jn,ni],encapsulation:2}),e}(),oi=["searchGroup"];function ri(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"form"),h.TgZ(2,"input",5),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw().selectedTypeModel=e}),h.qZA(),h.TgZ(3,"label",6),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"input",7),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw().selectedTypeModel=e}),h.qZA(),h.TgZ(7,"label",8),h._uU(8," User "),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(2),h.Q6J("ngModel",i.selectedTypeModel)("value",i.SEARCH_TYPES.ALL),h.xp6(2),h.Oqu(h.lcZ(5,5,"search-result.all.title")),h.xp6(2),h.Q6J("ngModel",i.selectedTypeModel)("value",i.SEARCH_TYPES.USER)}}function si(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"user-group",9,10),h.NdJ("loaded",function(e){return h.CHM(n),h.oxw().loaded(e)})("loadedMore",function(e){return h.CHM(n),h.oxw().onLoadMore(e)}),h.ALo(2,"async"),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("loadMore",h.lcZ(2,3,i.selectedType$)===i.SEARCH_TYPES.USER)("scrollContainerSelector",i.elementRef)("search",i.searchString)}}var ci=function(){var e=function(e){r(i,e);var n=c(i);function i(e,t,a){var o;return p(this,i),(o=n.call(this,t,a)).elementRef=e,o.searchService=t,o.cdref=a,o.ngUnsubscribe=new k.xQ,o.SEARCH_TYPES=nn.V,o.searchFilterEnabled=!1,o.selectedTypeModel=0,o.selectedType$.pipe((0,w.R)(o.ngUnsubscribe)).subscribe(function(e){o.selectedTypeModel=e}),o}return m(i,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t(u(i.prototype),"reset",this).call(this,e)}},{key:"ngAfterViewInit",value:function(){this.searchFilterEnabled=this.searchGroups.length>1}}],[{key:"getCallObject",value:function(e){switch(e.type){case En.i.USER:return{name:e.DISPLAY_NAME,number:e.FORMAT_PLAIN||e.EXTENSION_NUMBER};default:return null}}}]),i}(Nn.x);return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.SBq),h.Y36(je.o),h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-search-results"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(oi,5),2&e)&&(h.iGM(n=h.CRH())&&(t.searchGroups=n))},features:[h.qOj],decls:7,vars:9,consts:[["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["class","type sticky-header",4,"ngIf"],[1,"item"],[3,"loadMore","scrollContainerSelector","search","loaded","loadedMore",4,"ngIf"],[1,"type","sticky-header"],["id","search_type_all","name","type","type","radio",3,"ngModel","value","ngModelChange"],["for","search_type_all"],["id","search_type_extension","name","type","type","radio",3,"ngModel","value","ngModelChange"],["for","search_type_extension"],[3,"loadMore","scrollContainerSelector","search","loaded","loadedMore"],["searchGroup",""]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.ALo(1,"async"),h.YNc(2,ri,9,7,"div",1),h.TgZ(3,"div",2),h.YNc(4,si,3,5,"user-group",3),h.ALo(5,"async"),h.ALo(6,"async"),h.qZA(),h.qZA()),2&e&&(h.Q6J("loadingAreaIndicatorActive",h.lcZ(1,3,t.selectedType$)===t.SEARCH_TYPES.ALL&&0!==t.isLoadingCount),h.xp6(2),h.Q6J("ngIf",t.searchFilterEnabled),h.xp6(2),h.Q6J("ngIf",h.lcZ(5,5,t.selectedType$)===t.SEARCH_TYPES.ALL||h.lcZ(6,7,t.selectedType$)===t.SEARCH_TYPES.USER))},directives:[tt.O,f.O5,Xt._Y,Xt.JL,Xt.F,Xt._,Xt.Fj,Xt.JJ,Xt.On,ai],pipes:[f.Ov,q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.type[_ngcontent-%COMP%]{padding:1rem 1.6rem}.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:-.1rem;z-index:1}form[_ngcontent-%COMP%]{display:inline-block}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{background-color:#0003;border:0 solid transparent;border-radius:.5rem;color:#000;cursor:pointer;display:inline-block;font-size:1.6rem;margin:.4rem;padding:.6rem 1.6rem}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#ff5900;color:#fff}"]}),e}();function li(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," n/a"),h.qZA())}function ui(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," -"),h.qZA())}function di(e,t){1&e&&h._UZ(0,"app-svg-icon",19)}function mi(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," n/a"),h.qZA())}function pi(e,t){1&e&&(h.TgZ(0,"span"),h._uU(1," -"),h.qZA())}function fi(e,t){1&e&&h._UZ(0,"app-svg-icon",19)}function hi(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list-item",10),h.TgZ(1,"span",11),h._uU(2),h.qZA(),h.TgZ(3,"span",11),h._uU(4),h.qZA(),h.TgZ(5,"span",12),h._uU(6),h.qZA(),h.TgZ(7,"span",12),h.YNc(8,li,2,0,"span",13),h.YNc(9,ui,2,0,"span",13),h.YNc(10,di,1,0,"app-svg-icon",14),h.qZA(),h.TgZ(11,"span",12),h.YNc(12,mi,2,0,"span",13),h.YNc(13,pi,2,0,"span",13),h.YNc(14,fi,1,0,"app-svg-icon",14),h.qZA(),h.TgZ(15,"span",15),h.TgZ(16,"button",16),h.NdJ("click",function(){var e=h.CHM(n).$implicit,t=h.oxw().$implicit;return h.oxw().editAccountUser(t,e)}),h._UZ(17,"app-svg-icon",17),h.qZA(),h.TgZ(18,"button",16),h.NdJ("click",function(){var e=h.CHM(n),t=e.$implicit,i=e.index,a=h.oxw().$implicit;return h.oxw().deleteAccountUser(a,t,i)}),h._UZ(19,"app-svg-icon",18),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit;h.xp6(2),h.Oqu(i.username),h.xp6(2),h.Oqu(i.getFullName()),h.xp6(2),h.Oqu(i.extension),h.xp6(2),h.Q6J("ngIf",void 0===i.client),h.xp6(1),h.Q6J("ngIf",!1===i.client),h.xp6(1),h.Q6J("ngIf",!0===i.client),h.xp6(2),h.Q6J("ngIf",void 0===i.admin),h.xp6(1),h.Q6J("ngIf",!1===i.admin),h.xp6(1),h.Q6J("ngIf",!0===i.admin)}}function gi(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"button",20),h.NdJ("click",function(){h.CHM(n);var e=h.oxw().$implicit;return h.oxw().viewAccountUsers(e)}),h._uU(1),h.ALo(2,"translate"),h.qZA()}2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"search-result.load-more")," "))}function bi(e,t){if(1&e&&(h.TgZ(0,"section",4),h.TgZ(1,"h2",5),h.TgZ(2,"span",6),h._uU(3),h.qZA(),h.TgZ(4,"span",7),h._uU(5),h.qZA(),h.qZA(),h.YNc(6,hi,20,9,"mat-list-item",8),h.ALo(7,"orderBy"),h.YNc(8,gi,3,3,"button",9),h.qZA()),2&e){var n=t.$implicit,i=h.oxw();h.xp6(3),h.Oqu(n.name),h.xp6(2),h.Oqu(n.externalIdentifier),h.xp6(1),h.Q6J("ngForOf",h.gM2(7,4,n.users,i.order,i.reverse,!0)),h.xp6(2),h.Q6J("ngIf",null==n.users?null:n.users.length)}}var vi=function(){var e=function(e){r(i,e);var n=c(i);function i(e,t,a,o,r,s){var c;return p(this,i),(c=n.call(this,e,t,a,o,r,s)).router=e,c.snackBarService=t,c.userService=a,c.confirmDialogsService=o,c.translate=r,c.accountService=s,c.headerColumnData=[{name:"username",title:"admin.user.username.label"},{name:"firstname",title:"admin.user.name.label"},{name:"extension",title:"admin.user.extension.label",class:"column__small"},{name:"client",title:"admin.user.client.label",class:"column__small"},{name:"admin",title:"admin.user.admin.label",class:"column__small"}],c}return m(i,[{key:"viewAccountUsers",value:function(e){this.accountService.selectedAccount=e}},{key:"editAccountUser",value:function(e,n){this.accountService.selectedAccount=e,t(u(i.prototype),"editUser",this).call(this,n)}},{key:"deleteAccountUser",value:function(e,n,a){var o=this;t(u(i.prototype),"deleteUser",this).call(this,n,a,function(){return o.accountService.selectedAccount=e})}}]),i}($n);return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(Et.c),h.Y36(Lt),h.Y36(zn.U),h.Y36(q.sK),h.Y36(M.B))},e.\u0275cmp=h.Xpm({type:e,selectors:[["accounts-table"]],features:[h.qOj],decls:4,vars:2,consts:[[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],["class","account",4,"ngFor","ngForOf"],[1,"account"],[1,"account-title"],[1,"account__name"],[1,"account__external-identifier"],["itemHoverbox","",4,"ngFor","ngForOf"],["class","button-more","mat-button","",3,"click",4,"ngIf"],["itemHoverbox",""],[1,"column"],[1,"column","column__small"],[4,"ngIf"],["fill","green-button","icon","done","size","small",4,"ngIf"],[1,"column","item-secondary-content"],["mat-icon-button","","type","button",3,"click"],["icon","edit","size","small"],["icon","delete","size","small"],["fill","green-button","icon","done","size","small"],["mat-button","",1,"button-more",3,"click"]],template:function(e,t){1&e&&(h.TgZ(0,"mat-list",0),h.TgZ(1,"mat-list-item",1),h.TgZ(2,"sortable-list-header",2),h.NdJ("orderChange",function(e){return t.changeOrder(e)}),h.qZA(),h.qZA(),h.YNc(3,bi,9,9,"section",3),h.qZA()),2&e&&(h.xp6(2),h.Q6J("data",t.headerColumnData),h.xp6(1),h.Q6J("ngForOf",t.items))},directives:[He.i$,He.Tg,jn.c,f.sg,f.O5,Kn.h,b.lW,Ke.u],pipes:[S.T,q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;border-top:.1rem solid rgba(0,0,0,.3);font-size:1.5rem;margin:-.1rem 0 0;padding:3rem 2.6rem 1rem}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__name[_ngcontent-%COMP%], .account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__external-identifier[_ngcontent-%COMP%]{color:#333}.account[_ngcontent-%COMP%]   .account-title[_ngcontent-%COMP%]   .account__external-identifier[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}.account[_ngcontent-%COMP%]   .button-more[_ngcontent-%COMP%]{margin:.8rem 1.6rem;text-transform:uppercase}"]}),e}();function _i(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"span"),h.TgZ(1,"button",5),h.NdJ("click",function(){return h.CHM(n),h.oxw().addNewUser()}),h._UZ(2,"app-svg-icon",6),h.qZA(),h.qZA()}}function ki(e,t){if(1&e&&h._UZ(0,"admin-search-results",7),2&e){var n=h.oxw();h.Q6J("searchString",n.filters.string)("selectedType",n.searchType)}}function xi(e,t){if(1&e&&h._UZ(0,"accounts-table",10),2&e){var n=h.oxw(2);h.Q6J("items",n.accountItems)}}function yi(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"users-table",11),h.NdJ("sortOrderChange",function(e){return h.CHM(n),h.oxw(2).onSortOrderChange(e)}),h.qZA()}if(2&e){var i=h.oxw(2);h.Q6J("items",i.userItems)}}function Ci(e,t){if(1&e&&(h.TgZ(0,"div"),h.YNc(1,xi,1,1,"accounts-table",8),h.YNc(2,yi,1,1,"users-table",9),h.qZA()),2&e){var n=h.oxw();h.xp6(1),h.Q6J("ngIf",!n.selectedAccount),h.xp6(1),h.Q6J("ngIf",n.selectedAccount)}}var Ti=function(){var e=function(){function e(t,n,i,a,o,r,s,c){p(this,e),this.router=t,this.accountService=n,this.adminService=i,this.adminUserService=a,this.phoneExtensionService=o,this.snackBarService=r,this.dialog=s,this.searchService=c,this.pageSize=25,this.sortColumn="username",this.usersPerAccount=5,this.ngUnsubscribe=new k.xQ,this.debounceTime=300,this.accountItems=[],this.filters={string:""},this.hasMoreData=!1,this.isLoadingAccounts=!1,this.isLoadingUsers=!1,this.isLoadingValue=!1,this.isLoadMore=!0,this.isSaving=!1,this.isSearching=!1,this.order="username",this.page=1,this.pageInitValue=1,this.reverse=!1,this.search="",this.searchType=nn.V.USER,this.selectedAccount=null,this.userItems=[]}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.listenforSearchChanges(),this.reset(),this.accountService.selectedAccount$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.page=e.pageInitValue,e.selectedAccount=t,t?e.loadUser():e.loadAccounts()})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadUser",value:function(){var e=this;!this.selectedAccount||this.isLoadingUsers||this.isSearching||this.adminUserService.getUsers("".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId),this.filters.string,this.page,this.pageSize,this.sortColumn).pipe((0,Mn.K)(function(t){return e.isLoadingUsers=t}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.appendItems(t.data),e.hasMoreData=t.paginationHasMoreData,e.page++},function(t){return e.handleLoadingError(t)})}},{key:"loadAccounts",value:function(){var e=this;this.selectedAccount||(this.isLoadingAccounts=!0,this.accountService.getAllAccounts(this.filters.string,this.page,this.pageSize).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){var n=t.data;e.page++,e.isLoadingAccounts=!1,e.hasMoreData=t.paginationHasMoreData,null==n||n.forEach(function(t,i){var a="".concat(t.accountType,":").concat(t.accountId);e.isLoadingAccounts=!0,e.adminUserService.getUsers(a,"",e.pageInitValue,e.usersPerAccount).pipe((0,w.R)(e.ngUnsubscribe)).subscribe(function(t){n[i].users=t.data,e.isLoadingAccounts=!1},function(t){return e.handleLoadingError(t)})}),n&&(e.accountItems=[].concat(i(e.accountItems),i(n)))},function(t){return e.handleLoadingError(t)}))}},{key:"searchUser",value:function(e){this.filters.string=e,this.isSearching=!!e}},{key:"addNewUser",value:function(){var e=this;this.dialog.open(Zn,{maxHeight:"100vh",width:"35rem",data:{account:this.selectedAccount}}).afterClosed().pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){t&&e.onSaveUser(t)})}},{key:"onSaveUser",value:function(e){var t=this;this.selectedAccount&&(this.permissions={},e.admin&&(this.permissions.admin_login=!0),e.client&&(this.permissions.client_login=!0),this.userExtension=e.extension,this.adminUserService.createUser("".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId),e).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.handleSuccess(e)},function(e){t.handleError(e)}))}},{key:"onLazyLoading",value:function(){this.selectedAccount?this.loadUser():this.loadAccounts()}},{key:"onSortOrderChange",value:function(e){this.sortColumn=e,this.page=this.pageInitValue,this.loadUser()}},{key:"listenforSearchChanges",value:function(){var e=this;this.searchService.searchItem$.pipe((0,Ve.b)(this.debounceTime),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.searchUser(t.searchString||""),e.clearPageSettings(),e.selectedAccount?e.loadUser():e.loadAccounts()})}},{key:"clearPageSettings",value:function(){this.page=1,this.userItems=[]}},{key:"appendItems",value:function(e){!e||(this.isLoadMore&&this.page===this.pageInitValue?this.userItems=e:Array.prototype.push.apply(this.userItems,e))}},{key:"handleSuccess",value:function(e){var t;if(this.selectedAccount){var n="".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId);(this.permissions.admin_login||this.permissions.client_login)&&this.adminUserService.editPermissions(n,null==e?void 0:e.id,this.permissions).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(),this.userExtension&&this.phoneExtensionService.addLinkedPhoneExtensions(n,e.id,null===(t=this.userExtension)||void 0===t?void 0:t.id).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(),this.isSaving=!1,this.snackBarService.openInfo("admin.user.created",!0),this.router.navigate(["/admin/user/".concat(e.id)])}}},{key:"handleError",value:function(e){this.isSaving=!1,this.adminUserService.handleUserCreationError(e)}},{key:"reset",value:function(){this.page=this.pageInitValue,this.adminService.emit(null)}},{key:"handleLoadingError",value:function(e){this.isLoading=!1,this.snackBarService.openInfo(e.message)}},{key:"isLoading",get:function(){return this.isLoadingUsers||this.isLoadingAccounts},set:function(e){this.isLoadingValue=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(M.B),h.Y36($.l),h.Y36(Lt),h.Y36(Jt),h.Y36(Et.c),h.Y36(d.uw),h.Y36(je.o))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-user-list"]],decls:6,vars:8,consts:[[1,"admin-user-list"],["translationKey","admin.user.label",1,"admin-user-list__header",3,"sticky"],[4,"ngIf"],["infinite-scroll","","loading-area-indicator","","data-e2e","admin-user-page",3,"infiniteScrollDisabled","infiniteScrollThrottle","loadingAreaIndicatorActive","scrollWindow","scrolled"],["class","left contacts-list-container",3,"searchString","selectedType",4,"ngIf"],["mat-icon-button","","type","button","data-e2e","admin-user-page__add--button",3,"click"],["icon","add","size","small"],[1,"left","contacts-list-container",3,"searchString","selectedType"],[3,"items",4,"ngIf"],["e2e","admin-user-page",3,"items","sortOrderChange",4,"ngIf"],[3,"items"],["e2e","admin-user-page",3,"items","sortOrderChange"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"headline",1),h.YNc(2,_i,3,0,"span",2),h.qZA(),h.TgZ(3,"div",3),h.NdJ("scrolled",function(){return t.onLazyLoading()}),h.YNc(4,ki,1,2,"admin-search-results",4),h.YNc(5,Ci,3,2,"div",2),h.qZA(),h.qZA()),2&e&&(h.xp6(1),h.Q6J("sticky",!0),h.xp6(1),h.Q6J("ngIf",t.selectedAccount),h.xp6(1),h.Q6J("infiniteScrollDisabled",!t.isLoadMore||!t.hasMoreData||t.isLoading||t.isSearching)("infiniteScrollThrottle",50)("loadingAreaIndicatorActive",t.isLoading&&!t.isSearching)("scrollWindow",!1),h.xp6(1),h.Q6J("ngIf",t.isSearching),h.xp6(1),h.Q6J("ngIf",!t.isSearching))},directives:[wn.a,f.O5,l.R,tt.O,b.lW,Ke.u,ci,vi,ni],styles:[".admin-user-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;margin:0!important;position:relative}.admin-user-list[_ngcontent-%COMP%]   .admin-user-list__header[_ngcontent-%COMP%]{box-sizing:content-box;position:absolute;width:100%}"]}),e}(),Ai=o(32789),Si=o(43190),Pi=o(22887),Ii=o(78023);function Oi(e,t){if(1&e&&(h.TgZ(0,"td",13),h.TgZ(1,"span",14),h._uU(2),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",n.username," ")}}function Zi(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"td",15),h.TgZ(1,"app-button",16),h.NdJ("appButtonClick",function(){var e=h.CHM(n).$implicit;return h.oxw().onRevoke(e)}),h.qZA(),h.qZA()}}function Mi(e,t){1&e&&h._UZ(0,"tr",17)}function wi(e,t){1&e&&h._UZ(0,"app-spinner",18)}function Ni(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"app-button",19),h.NdJ("appButtonClick",function(){return h.CHM(n),h.oxw().closeDialog()}),h.qZA()}}var Ei=function(){var e=function(){function e(t,n,i,a,o,r,s,c){p(this,e),this.accountService=t,this.apiAdminService=n,this.dialog=i,this.dialogRef=a,this.snackBarService=o,this.translateService=r,this.whiteLabelService=s,this.ngUnsubscribe=new k.xQ,this.licenseUsers=[],this.displayedColumns=["username","action"],this.licenseBaseUrl="",this.isLoading=!1,this.productCodeTranslationKeyParams={meetingPerUserWhiteLabelName:this.whiteLabelService.data.meetingPerUser},this.license=c}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.accountService.selectedAccount$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){t&&e.init(t)})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"init",value:function(e){var t=this;this.isLoading=!0,this.licenseBaseUrl="".concat(Mt.N.API_URL,"/admin/accounts/").concat(e.accountType,":").concat(e.accountId),this.apiAdminService.get("".concat(this.licenseBaseUrl,"/products/").concat(this.license.product_code,"?userInfo=1")).pipe((0,on.x)(function(){t.isLoading=!1}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(e){(null==e?void 0:e.users)&&(t.licenseUsers=e.users)})}},{key:"getTableData",value:function(){return new Ai.by(this.licenseUsers)}},{key:"onRevoke",value:function(e){var t=this;this.initConfirmationDialog(e).afterClosed().pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(n){n&&t.revokeLicense(e)})}},{key:"initConfirmationDialog",value:function(e){var t=this.dialog.open(Pi.$,{autoFocus:!1});return t.componentInstance.ok="admin.license.dialog.confirm",t.componentInstance.cancel="admin.license.dialog.cancel",this.translateService.get("admin.license.dialog.revoke").pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(n){t.componentInstance.message="".concat(n," ").concat(e.username,"?")}),t}},{key:"revokeLicense",value:function(e){var t=this;this.isLoading=!0,this.apiAdminService.delete("".concat(this.licenseBaseUrl,"/users/").concat(e.id,"/licences/").concat(this.license.product_code)).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(n){t.isLoading=!1,t.updateTableData(e),n&&"ok"===n.status&&(t.updateTableData(e),t.snackBarService.openInfo("admin.license.dialog.success"))},function(){t.isLoading=!1,t.snackBarService.openErrorInfo("admin.license.dialog.error")})}},{key:"updateTableData",value:function(e){this.removeUserFromTableData(e),this.updateUsedLicenses()}},{key:"removeUserFromTableData",value:function(e){var t=this.licenseUsers.findIndex(function(t){return t===e});this.licenseUsers.splice(t,1)}},{key:"updateUsedLicenses",value:function(){this.license.used=this.licenseUsers.length}},{key:"closeDialog",value:function(){this.dialogRef.close()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B),h.Y36(Dt.i),h.Y36(d.uw),h.Y36(d.so),h.Y36(Et.c),h.Y36(q.sK),h.Y36(ee.D),h.Y36(d.WI))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-license-dialog"]],decls:19,vars:18,consts:[["data-e2e","license-dialog-modal-fragment__title",1,"license-dialog__headline",3,"translationKey","productCodeTranslationKeyParams"],["data-e2e","license-dialog-modal-fragment__total-licenses",1,"headline__license-info"],["data-e2e","license-dialog-modal-fragment__used-licenses",1,"headline__license-info"],["data-e2e","license-dialog-modal-fragment__free-licenses",1,"headline__license-info"],[1,"license-dialog__users"],["mat-table","",3,"dataSource"],["matColumnDef","username"],["class","ellipsis","mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","license-dialog__spinner",4,"ngIf"],["class","license-dialog__close-btn","type","raised-button","buttonTextTranslationKey","Done","color","primary","data-e2e","license-dialog-modal-fragment__done--button",3,"appButtonClick",4,"ngIf"],["mat-cell","",1,"ellipsis"],["data-e2e","license-dialog-modal-fragment__user"],["mat-cell",""],["buttonTextTranslationKey","admin.license.users.revoke","type","stroked-button","data-e2e","license-dialog-modal-fragment__revoke--button",3,"appButtonClick"],["mat-row",""],[1,"license-dialog__spinner"],["type","raised-button","buttonTextTranslationKey","Done","color","primary","data-e2e","license-dialog-modal-fragment__done--button",1,"license-dialog__close-btn",3,"appButtonClick"]],template:function(e,t){1&e&&(h.TgZ(0,"headline",0),h.TgZ(1,"span",1),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.TgZ(4,"span",2),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"span",3),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.qZA(),h.TgZ(10,"div",4),h.TgZ(11,"table",5),h.ynx(12,6),h.YNc(13,Oi,3,1,"td",7),h.BQk(),h.ynx(14,8),h.YNc(15,Zi,2,0,"td",9),h.BQk(),h.YNc(16,Mi,1,0,"tr",10),h.qZA(),h.YNc(17,wi,1,0,"app-spinner",11),h.qZA(),h.YNc(18,Ni,1,0,"app-button",12)),2&e&&(h.Q6J("translationKey",t.license.product_code)("productCodeTranslationKeyParams",t.productCodeTranslationKeyParams),h.xp6(2),h.AsE(" ",h.lcZ(3,12,"admin.license.list.total"),": ",t.license.booked," "),h.xp6(3),h.AsE(" ",h.lcZ(6,14,"admin.license.list.used"),": ",t.license.used," "),h.xp6(3),h.AsE(" ",h.lcZ(9,16,"admin.license.users.free"),": ",t.license.booked-t.license.used," "),h.xp6(3),h.Q6J("dataSource",t.getTableData()),h.xp6(5),h.Q6J("matRowDefColumns",t.displayedColumns),h.xp6(1),h.Q6J("ngIf",t.isLoading),h.xp6(1),h.Q6J("ngIf",!t.isLoading))},directives:[wn.a,Ai.BZ,Ai.w1,Ai.Dz,Ai.nj,f.O5,Ai.ev,Ii.V,Ai.Gk,mn.S],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem;max-height:calc(100vh - 4.8rem)}.license-dialog__headline[_ngcontent-%COMP%]{background:#e5e5e5;font-weight:bold;height:inherit;padding:1.2rem 1rem;text-transform:capitalize}.headline__license-info[_ngcontent-%COMP%]:nth-child(n+2){border-right:.2rem solid #989898;color:#989898;padding:0 .8rem}.headline__license-info[_ngcontent-%COMP%]:last-child{border:0}.license-dialog__users[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow-y:scroll}.license-dialog__spinner[_ngcontent-%COMP%]{margin:2rem 0}.mat-table[_ngcontent-%COMP%]{border-top:.1rem solid #ededed;width:100%}.mat-row[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid #ededed;display:flex;flex-wrap:wrap;justify-content:space-between}.mat-cell[_ngcontent-%COMP%]{border:0}.mat-cell[_ngcontent-%COMP%]:last-child{padding-right:.5rem;text-align:right}.mat-column-name[_ngcontent-%COMP%]{flex:1}.license-dialog__close-btn[_ngcontent-%COMP%]{align-self:flex-end;margin:1rem 1rem 0 0}"]}),e}(),Li=o(86363);function Ui(e,t){1&e&&(h.TgZ(0,"th",12),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.license.list.product")," "))}function Di(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"td",13),h.TgZ(1,"span",14),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().openLicenseDialog(e)}),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,a=h.oxw();h.xp6(2),h.hij(" ",h.xi3(3,1,i.product_code,a.productCodeTranslationKeyParams)," ")}}function Bi(e,t){1&e&&(h.TgZ(0,"th",12),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.license.list.total")," "))}function qi(e,t){if(1&e&&(h.TgZ(0,"td",13),h.TgZ(1,"span",15),h._uU(2),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",n.booked," ")}}function Ri(e,t){1&e&&(h.TgZ(0,"th",12),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.license.list.used")," "))}function Fi(e,t){if(1&e&&(h.TgZ(0,"td",13),h.TgZ(1,"span",16),h._uU(2),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",n.used," ")}}function Yi(e,t){1&e&&(h.TgZ(0,"th",12),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.license.list.available")," "))}function Ji(e,t){if(1&e&&(h.TgZ(0,"td",13),h.TgZ(1,"span",17),h._uU(2),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",(null==n?null:n.booked)-(null==n?null:n.used)," ")}}function Qi(e,t){1&e&&h._UZ(0,"tr",18)}function zi(e,t){1&e&&h._UZ(0,"tr",19)}function $i(e,t){1&e&&h._UZ(0,"app-spinner",20)}function ji(e,t){1&e&&(h.TgZ(0,"p",22),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.license.none_booked")," "))}function Ki(e,t){if(1&e&&h.YNc(0,ji,3,3,"p",21),2&e){var n=h.oxw();h.Q6J("ngIf",!(null!=n.licenseTableData&&null!=n.licenseTableData.data&&n.licenseTableData.data.length))}}var Hi=function(){var e=function(){function e(t,n,i,a){p(this,e),this.accountService=t,this.dialog=n,this.licenseService=i,this.whiteLabelService=a,this.ngUnsubscribe=new k.xQ,this.displayedColumns=["name","total","used","available"],this.isLoading=!1,this.productCodeTranslationKeyParams={meetingPerUserWhiteLabelName:this.whiteLabelService.data.meetingPerUser}}return m(e,[{key:"ngOnInit",value:function(){this.initTableData()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"openLicenseDialog",value:function(e){this.dialog.open(Ei,{data:e,width:"75rem"})}},{key:"initTableData",value:function(){var e=this;this.accountService.selectedAccount$.pipe((0,en.b)(function(){e.isLoading=!0}),(0,Si.w)(function(t){return(0,Li.s)(function(){return!!t},e.licenseService.getLicenses(t))}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){var n=e.getAvailableLicenses(t);e.licenseTableData=new Ai.by(n),e.isLoading=!1})}},{key:"getAvailableLicenses",value:function(e){return e.filter(function(e){return 0!==e.booked})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B),h.Y36(d.uw),h.Y36(Ut),h.Y36(ee.D))},e.\u0275cmp=h.Xpm({type:e,selectors:[["license"]],decls:20,vars:6,consts:[["translationKey","admin.license.title","data-e2e","admin-license-page",1,"license__headline"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","total"],["matColumnDef","used"],["matColumnDef","available"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","license__spinner",4,"ngIf","ngIfElse"],["noBookedLicenses",""],["mat-header-cell",""],["mat-cell",""],["data-e2e","admin-license-page__name",3,"click"],["data-e2e","admin-license-page__total-licenses"],["data-e2e","admin-license-page__used-licenses"],["data-e2e","admin-license-page__available-licenses"],["mat-header-row",""],["mat-row",""],[1,"license__spinner"],["class","license__info",4,"ngIf"],[1,"license__info"]],template:function(e,t){if(1&e&&(h._UZ(0,"headline",0),h.TgZ(1,"table",1),h.ynx(2,2),h.YNc(3,Ui,3,3,"th",3),h.YNc(4,Di,4,4,"td",4),h.BQk(),h.ynx(5,5),h.YNc(6,Bi,3,3,"th",3),h.YNc(7,qi,3,1,"td",4),h.BQk(),h.ynx(8,6),h._uU(9,"> "),h.YNc(10,Ri,3,3,"th",3),h.YNc(11,Fi,3,1,"td",4),h.BQk(),h.ynx(12,7),h.YNc(13,Yi,3,3,"th",3),h.YNc(14,Ji,3,1,"td",4),h.BQk(),h.YNc(15,Qi,1,0,"tr",8),h.YNc(16,zi,1,0,"tr",9),h.qZA(),h.YNc(17,$i,1,0,"app-spinner",10),h.YNc(18,Ki,1,1,"ng-template",null,11,h.W1O)),2&e){var n=h.MAs(19);h.xp6(1),h.Q6J("dataSource",t.licenseTableData),h.xp6(14),h.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),h.xp6(1),h.Q6J("matRowDefColumns",t.displayedColumns),h.xp6(1),h.Q6J("ngIf",t.isLoading)("ngIfElse",n)}},directives:[wn.a,Ai.BZ,Ai.w1,Ai.fO,Ai.Dz,Ai.as,Ai.nj,f.O5,Ai.ge,Ai.ev,Ai.XQ,Ai.Gk,mn.S],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}[_nghost-%COMP%]{box-sizing:border-box;display:flex;flex-direction:column!important;font-size:1.8rem;margin-top:1.2rem;overflow-y:auto}.license__headline[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:101}.mat-table[_ngcontent-%COMP%]{text-transform:capitalize}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{color:#b5b5b5;width:15%}.mat-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]:first-child{width:55%}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{text-align:right}.mat-cell[_ngcontent-%COMP%]:first-child, .mat-header-cell[_ngcontent-%COMP%]:first-child{text-align:left}.mat-column-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:-.1rem;z-index:1}.license__spinner[_ngcontent-%COMP%]{margin-top:4rem}.license__info[_ngcontent-%COMP%]{align-items:center;display:flex;font-size:2.4rem;justify-content:center;margin-top:4rem;width:100%}"]}),e}(),Gi=o(9112);function Vi(e,t){1&e&&(h.TgZ(0,"mat-hint",21),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"common_errors.username.email")," "))}function Xi(e,t){1&e&&(h.TgZ(0,"mat-hint",21),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function Wi(e,t){1&e&&(h.TgZ(0,"mat-hint",21),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function ea(e,t){if(1&e&&(h.TgZ(0,"mat-option",22),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=t.$implicit;h.Q6J("value",n.value),h.xp6(1),h.hij(" ",h.lcZ(2,2,n.title)," ")}}function ta(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list-item",5),h.TgZ(1,"mat-form-field",6),h._UZ(2,"input",7),h.qZA(),h.TgZ(3,"mat-form-field",8),h._UZ(4,"input",9),h.YNc(5,Vi,3,3,"mat-hint",10),h.qZA(),h.TgZ(6,"mat-form-field",8),h._UZ(7,"input",11),h.YNc(8,Xi,3,3,"mat-hint",10),h.qZA(),h.TgZ(9,"mat-form-field",8),h._UZ(10,"input",12),h.YNc(11,Wi,3,3,"mat-hint",10),h.qZA(),h.TgZ(12,"mat-form-field",8),h.TgZ(13,"mat-select",13),h.YNc(14,ea,3,4,"mat-option",14),h.qZA(),h.qZA(),h.TgZ(15,"div",15),h.TgZ(16,"mat-checkbox",16),h.NdJ("change",function(){var e=h.CHM(n).$implicit;return h.oxw().onCheckboxChange(e)}),h.qZA(),h.qZA(),h.TgZ(17,"div",15),h.TgZ(18,"mat-checkbox",17),h.NdJ("change",function(){var e=h.CHM(n).$implicit;return h.oxw().onCheckboxChange(e)}),h.qZA(),h.qZA(),h.TgZ(19,"div",18),h.TgZ(20,"button",19),h.NdJ("click",function(){var e=h.CHM(n),t=e.$implicit,i=e.index;return h.oxw().createExtension(t,i)}),h._UZ(21,"app-svg-icon",20),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,a=t.index,o=h.oxw();h.Q6J("formGroupName",a),h.xp6(5),h.Q6J("ngIf",o.hasErrorEmail(i.get("username"))),h.xp6(3),h.Q6J("ngIf",o.hasErrorRequired(i.get("lastname"))),h.xp6(3),h.Q6J("ngIf",o.hasErrorRequired(i.get("firstname"))),h.xp6(3),h.Q6J("ngForOf",o.interfaceLanguages),h.xp6(6),h.Q6J("disabled",!i.valid)}}var na=function(){var e=function(){function e(t,n,i,a){p(this,e),this.fb=t,this.migrationService=n,this.languageService=i,this.changeDetectorRef=a,this.ngUnsubscribe=new k.xQ,this.unallocatedExtensions=[],this.create=new h.vpe,this.sortOrderChange=new h.vpe,this.order="extension",this.reverse=!1,this.headerColumnData=[{name:"extension_number",title:"admin.extensions_form.extension.label",class:"column--extension",e2e:"admin-wizards-migration-wizard-page__extension-header"},{name:"email",title:"admin.extensions_form.username.label",class:"column--form",e2e:"admin-wizards-migration-wizard-page__username-header"},{name:"display_name",title:"admin.extensions_form.lastname.label",class:"column--form",e2e:"admin-wizards-migration-wizard-page__last-name-header"},{name:"firstname",title:"admin.extensions_form.firstname.label",class:"column--form",disabled:!0},{name:"language",title:"admin.extensions_form.language.label",disabled:!0},{name:"client",title:"admin.extensions_form.client.label",class:"column--checkbox",disabled:!0},{name:"admin",title:"admin.extensions_form.admin.label",class:"column--checkbox",disabled:!0},{name:"",title:"",class:"column--button",disabled:!0}],this.interfaceLanguages=this.languageService.getAvailableLanguages()}return m(e,[{key:"ngOnChanges",value:function(){this.rebuildForm()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"rebuildForm",value:function(){this.extensionsForm=this.fb.group({extensions:this.fb.array([])}),this.setExtensions(this.unallocatedExtensions)}},{key:"setExtensions",value:function(e){var t=this;if(null!==e){var n=e.map(function(e){return t.extensionFormGroup(e)}),i=this.fb.array(n);this.extensionsForm.setControl("extensions",i)}}},{key:"createExtension",value:function(e,t){var n=this;this.create.emit(e.value),this.subscription=this.migrationService.createUser$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){e&&(n.extensions.removeAt(t),n.changeDetectorRef.detectChanges()),n.subscription.unsubscribe()})}},{key:"changeOrder",value:function(e){this.order=e.order,this.reverse=e.reverse,this.sortOrderChange.emit((this.reverse?"-":"")+this.order)}},{key:"trackByExtension",value:function(e,t){return t.get("extension").value}},{key:"hasErrorRequired",value:function(e){return!1}},{key:"hasErrorEmail",value:function(e){return!1}},{key:"onCheckboxChange",value:function(e){var t=e.get("client"),n=t.value,i=e.get("admin").value;t.setValidators(n||i?null:[Xt.kI.requiredTrue]),t.updateValueAndValidity()}},{key:"extensionFormGroup",value:function(e){return this.fb.group({extension:[{value:e.extension,disabled:!0},[Xt.kI.required]],username:[e.username,[Xt.kI.required,Xt.kI.email]],lastname:[e.lastname,[Xt.kI.required]],firstname:[e.firstname,[Xt.kI.required]],language:[e.language,[Xt.kI.required]],id:[e.id,[Xt.kI.required]],client:!0,admin:[e.admin]})}},{key:"extensions",get:function(){return this.extensionsForm.get("extensions")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(Xt.qu),h.Y36(Ft),h.Y36(sn.T),h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["extensions-form"]],inputs:{unallocatedExtensions:"unallocatedExtensions"},outputs:{create:"create",sortOrderChange:"sortOrderChange"},features:[h.TTD],decls:6,vars:4,consts:[[1,"list-header","sticky-header"],[3,"data","orderChange"],[3,"formGroup"],["formArrayName","extensions"],[3,"formGroupName",4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],[1,"column","column--extension"],["formControlName","extension","matInput","","type","text","data-e2e","admin-wizards-migration-wizard-page__extension-entry--input"],[1,"column"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__first-name-entry--input"],["class","mat-hint--error",4,"ngIf"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__username-entry--input"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-wizards-migration-wizard-page__last-name-entry--input"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-wizards-migration-wizard-page__language-entry-selector"],["data-e2e","admin-wizards-migration-wizard-page__language-entry-selector-option",3,"value",4,"ngFor","ngForOf"],[1,"column","column--checkbox"],["color","primary","formControlName","client","data-e2e","admin-wizards-migration-wizard-page__app-permission-entry-checkbox",3,"change"],["color","primary","formControlName","admin","data-e2e","admin-wizards-migration-wizard-page__admin-permission-entry-checkbox",3,"change"],[1,"column","column--button"],["color","primary","mat-raised-button","","data-e2e","admin-wizards-migration-wizard-page__add-entry--button",1,"create-extension",3,"disabled","click"],["fill","white","icon","contact_add","size","small"],[1,"mat-hint--error"],["data-e2e","admin-wizards-migration-wizard-page__language-entry-selector-option",3,"value"]],template:function(e,t){1&e&&(h.TgZ(0,"mat-list"),h.TgZ(1,"mat-list-item",0),h.TgZ(2,"sortable-list-header",1),h.NdJ("orderChange",function(e){return t.changeOrder(e)}),h.qZA(),h.qZA(),h.TgZ(3,"form",2),h.TgZ(4,"div",3),h.YNc(5,ta,22,6,"mat-list-item",4),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("data",t.headerColumnData),h.xp6(1),h.Q6J("formGroup",t.extensionsForm),h.xp6(2),h.Q6J("ngForOf",t.extensions.controls)("ngForTrackBy",t.trackByExtension))},directives:[He.i$,He.Tg,jn.c,Xt._Y,Xt.JL,Xt.sg,Xt.CE,f.sg,Xt.x0,x.KE,Xt.Fj,et.Nt,Xt.JJ,Xt.u,Xt.nD,f.O5,v.gD,pn.oG,b.lW,Ke.u,x.bx,g.ey],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]     .mat-form-field-infix{width:auto}[_nghost-%COMP%]     .mat-list-base .mat-list-item .mat-list-item-content{padding:0 1.6rem}mat-list[_ngcontent-%COMP%]{padding:0}.mat-list-item-content[_ngcontent-%COMP%]{flex:1}.column[_ngcontent-%COMP%]{flex:1 0 10rem;padding:0 1rem}.column--extension[_ngcontent-%COMP%]{flex:0 0 10rem;margin:0 1rem 0 0;padding-left:0}.column--checkbox[_ngcontent-%COMP%]{flex:0 0 7rem;text-align:center}@media screen and (min-width: 1024px){.column--checkbox[_ngcontent-%COMP%]{margin:0 1rem}}.column--button[_ngcontent-%COMP%]{flex:0 0 6rem}@media screen and (min-width: 1024px){.column--button[_ngcontent-%COMP%]{margin:0 0 0 1rem}}.create-extension[_ngcontent-%COMP%]{height:3.8rem;min-width:auto}"],changeDetection:0}),e}(),ia=function(){var t=function(){function t(e,n,i,a,o,r,s){p(this,t),this.adminUserService=e,this.migrationService=n,this.accountService=i,this.snackBarService=a,this.phoneExtensionService=o,this.userService=r,this.translateService=s,this.ngUnsubscribe=new k.xQ,this.page=1,this.pageInitValue=1,this.pageSize=25,this.sortColumn="extension_number",this.extensions=[],this.isLoading=!1,this.hasMoreData=!0,this.selectedAccount=null}return m(t,[{key:"ngOnInit",value:function(){var t=this;this.selectedAccount=this.accountService.selectedAccount,(0,Gi.aj)([this.userService.userInfo$,this.accountService.selectedAccount$]).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(n){var i=e(n,2),a=i[0],o=i[1];t.extensions=[],t.page=t.pageInitValue,t.selectedAccount=o,a&&a.user.language&&(Ft.defaultUserLanguage=a.user.language),o&&t.getExtensions(o)})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"getExtensions",value:function(e){var t=this;e||(e=this.accountService.selectedAccount),e&&!this.isLoading&&(this.page===this.pageInitValue&&(this.extensions=[]),this.isLoading=!0,this.migrationService.unallocatedExtensions(e,this.page,this.pageSize,"",this.sortColumn).pipe((0,on.x)(function(){return t.isLoading=!1}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.extensions=[].concat(i(t.extensions),i(e.data)),t.hasMoreData=e.paginationHasMoreData,t.page++},function(e){var n=e.status;if(200!==n){var i=504===n?t.translateService.instant("migration_wizard.server_is_not_responding"):t.translateService.instant("migration_wizard.activity_was_not_successful",{status:n});t.snackBarService.openInfo(i)}}))}},{key:"onLazyLoading",value:function(){this.getExtensions(this.selectedAccount)}},{key:"onSortOrderChange",value:function(e){this.sortColumn=e,this.page=this.pageInitValue,this.getExtensions(this.selectedAccount)}},{key:"createExtension",value:function(e){var t=this;this.selectedAccount?(this.permissions={},e.admin&&(this.permissions.admin_login=!0),e.client&&(this.permissions.client_login=!0),this.userExtensionId=null==e?void 0:e.id,this.adminUserService.createUser("".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId),e).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.snackBarService.open("admin.user.saving"),t.handleSuccess(e)},function(e){t.handleError(e)})):this.handleError()}},{key:"handleSuccess",value:function(e){var t=this;if(this.selectedAccount){var n="".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId);this.adminUserService.editPermissions(n,e.id,this.permissions).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(),this.phoneExtensionService.addLinkedPhoneExtensions(n,e.id,this.userExtensionId).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(),this.snackBarService.openInfo("admin.user.created"),this.migrationService.updateCreateUserSource(!0),this.extensions=this.extensions.filter(function(e){return e.id!==t.userExtensionId})}}},{key:"handleError",value:function(e){this.adminUserService.handleUserCreationError(e),this.migrationService.updateCreateUserSource(!1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Y36(Lt),h.Y36(Ft),h.Y36(M.B),h.Y36(Et.c),h.Y36(Jt),h.Y36(W.K),h.Y36(q.sK))},t.\u0275cmp=h.Xpm({type:t,selectors:[["migration-wizard"]],decls:2,vars:5,consts:[["infinite-scroll","","loading-area-indicator","","data-e2e","admin-wizards-migration-wizard-page",1,"migration-wizard-component",3,"infiniteScrollDisabled","loadingAreaIndicatorActive","scrollWindow","infiniteScrollThrottle","scrolled"],[3,"unallocatedExtensions","create","sortOrderChange"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.NdJ("scrolled",function(){return t.onLazyLoading()}),h.TgZ(1,"extensions-form",1),h.NdJ("create",function(e){return t.createExtension(e)})("sortOrderChange",function(e){return t.onSortOrderChange(e)}),h.qZA(),h.qZA()),2&e&&(h.Q6J("infiniteScrollDisabled",!t.hasMoreData||t.isLoading)("loadingAreaIndicatorActive",t.isLoading)("scrollWindow",!1)("infiniteScrollThrottle",50),h.xp6(1),h.Q6J("unallocatedExtensions",t.extensions))},directives:[l.R,tt.O,na],styles:[".migration-wizard-component[_ngcontent-%COMP%]{margin:0!important;overflow-y:auto;width:100%}@media screen and (max-width: 1023px){.migration-wizard-component[_ngcontent-%COMP%]{width:100vw}}"]}),t}(),aa=o(87636),oa=o(35758),ra=function(){var e=function(){function e(t){p(this,e),this.dialogRef=t}return m(e,[{key:"cancel",value:function(){this.dialogRef.close(!1)}},{key:"accept",value:function(){this.dialogRef.close(!0)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(d.so))},e.\u0275cmp=h.Xpm({type:e,selectors:[["permissions-change-dialog"]],decls:5,vars:4,consts:[[3,"btnSaveCaption","cancelClick","saveClick"]],template:function(e,t){1&e&&(h.TgZ(0,"section"),h.TgZ(1,"p"),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA(),h.TgZ(4,"footer-actions",0),h.NdJ("cancelClick",function(){return t.cancel()})("saveClick",function(){return t.accept()}),h.qZA()),2&e&&(h.xp6(2),h.Oqu(h.lcZ(3,2,"permissions_change_dialog.message")),h.xp6(2),h.Q6J("btnSaveCaption","done"))},directives:[$t.c],pipes:[q.X$],styles:[""]}),e}(),sa=function(){return(e=sa||(sa={})).CrmConnect="crmConnect",e.CrmConnectUnite="crmConnect.unite",e.MeetingPerUser="meetingPerUser",e.Mobility="mobility",sa;var e}(),ca=o(59594),la=o(4929),ua=o(75319),da=o(59193),ma=o(55197),pa=o(75604),fa=function(){function e(t,n,i){p(this,e),this.project=t,this.concurrent=n,this.scheduler=i}return m(e,[{key:"call",value:function(e,t){return t.subscribe(new ha(e,this.project,this.concurrent,this.scheduler))}}]),e}(),ha=function(e){r(n,e);var t=c(n);function n(e,i,a,o){var r;return p(this,n),(r=t.call(this,e)).project=i,r.concurrent=a,r.scheduler=o,r.index=0,r.active=0,r.hasCompleted=!1,a<Number.POSITIVE_INFINITY&&(r.buffer=[]),r}return m(n,[{key:"_next",value:function(e){var t=this.destination;if(t.closed)this._complete();else{var i=this.index++;if(this.active<this.concurrent){t.next(e);try{var a,o=(0,this.project)(e,i);this.scheduler?this.destination.add(this.scheduler.schedule(n.dispatch,0,{subscriber:this,result:o,value:e,index:i})):this.subscribeToProjection(o,e,i)}catch(a){t.error(a)}}else this.buffer.push(e)}}},{key:"subscribeToProjection",value:function(e,t,n){this.active++,this.destination.add((0,pa.D)(this,e,t,n))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,i,a){this._next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.destination.remove(e),this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}],[{key:"dispatch",value:function(e){var t=e.subscriber,n=e.result,i=e.value,a=e.index;t.subscribeToProjection(n,i,a)}}]),n}(ma.L),ga=o(42145),ba=o(548),va=o(95242),_a=o(34022);function ka(e,t){if(1&e&&(h.TgZ(0,"span",7),h._uU(1),h.qZA()),2&e){var n=t.ngIf;h.xp6(1),h.Oqu(n)}}function xa(e,t){1&e&&(h.TgZ(0,"span",3),h._uU(1,"\u203a "),h.qZA())}function ya(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",1),h.NdJ("click",function(){var e=h.CHM(n).$implicit;return h.oxw().onBreadcrumbClick(e)}),h.TgZ(1,"span",2),h._uU(2),h.qZA(),h.YNc(3,ka,2,1,"span",5),h.YNc(4,xa,2,0,"span",6),h.qZA()}if(2&e){var i=t.$implicit,a=t.last;h.xp6(2),h.Oqu(i.name),h.xp6(1),h.Q6J("ngIf",i.externalIdentifier),h.xp6(1),h.Q6J("ngIf",!a)}}var Ca=function(){var e=function(){function e(t){p(this,e),this.accountService=t,this.changeParent=new h.vpe}return m(e,[{key:"ngOnChanges",value:function(e){var t=this,n=e.account.currentValue;this.breadcrumbs$=this.accountService.getParentAccount("".concat(n.accountType,":").concat(n.accountId)).pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,n=arguments.length>2?arguments[2]:void 0;return t=(t||0)<1?Number.POSITIVE_INFINITY:t,function(i){return i.lift(new fa(e,t,n))}}(function(e){return e?t.accountService.getParentAccount("".concat(e.accountType,":").concat(e.accountId)):da.E}),function(e,t){return arguments.length>=2?function(n){return(0,_a.z)((0,ga.R)(e,t),(0,ba.h)(1),(0,va.d)(t))(n)}:function(t){return(0,_a.z)((0,ga.R)(function(t,n,i){return e(t,n,i+1)}),(0,ba.h)(1))(t)}}(function(e,t){return t?[t].concat(i(e)):e},[]),(0,ze.U)(function(e){return t.account.isKAccount?e:[].concat(i(e),[t.account])}))}},{key:"onBreadcrumbClick",value:function(e){this.changeParent.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B))},e.\u0275cmp=h.Xpm({type:e,selectors:[["account-breadcrumbs"]],inputs:{account:"account"},outputs:{changeParent:"changeParent"},features:[h.TTD],decls:9,vars:6,consts:[[1,"account-breadcrumbs"],[1,"breadcrumb",3,"click"],[1,"name"],[1,"arrow"],["class","breadcrumb",3,"click",4,"ngFor","ngForOf"],["class","id",4,"ngIf"],["class","arrow",4,"ngIf"],[1,"id"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.NdJ("click",function(){return t.onBreadcrumbClick(null)}),h.TgZ(2,"span",2),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"span",3),h._uU(6,"\u203a"),h.qZA(),h.qZA(),h.YNc(7,ya,5,3,"div",4),h.ALo(8,"async"),h.qZA()),2&e&&(h.xp6(3),h.Oqu(h.lcZ(4,2,"search-result.all.title")),h.xp6(4),h.Q6J("ngForOf",h.lcZ(8,4,t.breadcrumbs$)))},directives:[f.sg,f.O5],pipes:[q.X$,f.Ov],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.account-breadcrumbs[_ngcontent-%COMP%]{align-items:baseline;display:flex}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]{color:#333;cursor:pointer;font-size:1.9rem}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}.account-breadcrumbs[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{padding:0 1rem}"]}),e}();function Ta(e,t){1&e&&(h.TgZ(0,"hoverbox"),h._uU(1,"show the inheritance here UCCLIENT-2753"),h.qZA())}function Aa(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list-item",5),h.TgZ(1,"span",6),h._uU(2),h.qZA(),h.TgZ(3,"span",7),h.NdJ("click",function(){var e=h.CHM(n).$implicit,t=h.oxw();return e.hasChildren&&t.showAccountChildren(e)}),h._uU(4),h.TgZ(5,"span"),h._uU(6),h.qZA(),h.YNc(7,Ta,2,0,"hoverbox",8),h.qZA(),h.TgZ(8,"span",9),h.TgZ(9,"mat-checkbox",10),h.NdJ("ngModelChange",function(e){var t=h.CHM(n).$implicit;return h.oxw().updatePermission(t,e)})("ngModelChange",function(e){return h.CHM(n).$implicit.permissions.admin_login=e}),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit,a=h.oxw();h.ekj("changed",a.isAccountChanged(i)),h.xp6(2),h.Oqu(i.getAccountType()),h.xp6(1),h.ekj("has-children",i.hasChildren),h.xp6(1),h.hij(" ",i.name," "),h.xp6(2),h.Oqu(i.externalIdentifier),h.xp6(1),h.Q6J("ngIf",!1),h.xp6(2),h.Q6J("ngModel",i.permissions.admin_login)("disabled",i.permissions.admin_login_inherited)}}var Sa=function(){var e=function(){function e(t,n,i){p(this,e),this.router=t,this.snackBar=n,this.translate=i,this.order="name",this.reverse=!1,this.changedAccounts=[],this.headerColumnData=[{name:"accountType",class:"column__xs",icon:"order_solid"},{name:"name",title:"admin.accounts.account_name",class:"column__large",isInitialOrder:!0},{name:"admin_login",class:"column__xs",icon:"contact"}],this.accounts=[],this.changePermission=new h.vpe,this.changeParent=new h.vpe}return m(e,[{key:"updatePermission",value:function(e,t){e.permissions.admin_login=t,this.changePermission.emit(e),this.toggleChangedAccount(e)}},{key:"changeOrder",value:function(e){this.order=e.order,this.reverse=e.reverse}},{key:"toggleChangedAccount",value:function(e){this.changedAccounts=this.changedAccounts.includes(e.accountId)?this.changedAccounts.filter(function(t){return t!==e.accountId}):[e.accountId].concat(i(this.changedAccounts))}},{key:"isAccountChanged",value:function(e){return this.changedAccounts.includes(e.accountId)}},{key:"showAccountChildren",value:function(e){this.changeParent.emit(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(U.F0),h.Y36(Et.c),h.Y36(q.sK))},e.\u0275cmp=h.Xpm({type:e,selectors:[["account-table"]],inputs:{accounts:"accounts",scrollContainerSelector:"scrollContainerSelector"},outputs:{changePermission:"changePermission",changeParent:"changeParent"},decls:6,vars:7,consts:[[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],[1,"accounts"],["class","account-table__list-item",3,"changed",4,"ngFor","ngForOf"],[1,"account-table__list-item"],[1,"column","column__xs","account__type"],["appHoverbox","",1,"column","column__large","account__name",3,"click"],[4,"ngIf"],[1,"column","column__xs","account__admin-role"],["color","primary",3,"ngModel","disabled","ngModelChange"]],template:function(e,t){1&e&&(h.TgZ(0,"mat-list",0),h.TgZ(1,"mat-list-item",1),h.TgZ(2,"sortable-list-header",2),h.NdJ("orderChange",function(e){return t.changeOrder(e)}),h.qZA(),h.qZA(),h.TgZ(3,"section",3),h.YNc(4,Aa,10,10,"mat-list-item",4),h.ALo(5,"orderBy"),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("data",t.headerColumnData),h.xp6(2),h.Q6J("ngForOf",h.gM2(5,2,t.accounts,t.order,t.reverse,!0)))},directives:[He.i$,He.Tg,jn.c,f.sg,le.r,f.O5,pn.oG,Xt.JJ,Xt.On,ue.B],pipes:[S.T],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]   mat-list[_ngcontent-%COMP%]   .accounts[_ngcontent-%COMP%]{height:calc(100% - 11.2rem)}.account-table__list-item.changed[_ngcontent-%COMP%]{background-color:#fffbe3}.account__admin-role[_ngcontent-%COMP%]{overflow:visible!important}[_nghost-%COMP%]   .account__name[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type[_ngcontent-%COMP%]{color:#333}[_nghost-%COMP%]   .account__name.has-children[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type.has-children[_ngcontent-%COMP%]{cursor:pointer}[_nghost-%COMP%]   .account__name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], [_nghost-%COMP%]   .account__type[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#33333380;padding-left:1rem}"]}),e}();function Pa(e,t){1&e&&(h.TgZ(0,"span",10),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.Oqu(h.lcZ(2,1,"admin.user_edit.permissions.customer_right_administration.title")))}function Ia(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"account-breadcrumbs",11),h.NdJ("changeParent",function(e){return h.CHM(n),h.oxw().loadChildrenAccounts(e)}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("account",i.selectedAccount)}}function Oa(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"account-table",12),h.NdJ("changeParent",function(e){return h.CHM(n),h.oxw().loadChildrenAccounts(e)})("changePermission",function(e){return h.CHM(n),h.oxw().onChangePermission(e)}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("accounts",i.accounts)}}var Za=function(){var e=function(){function e(t,n,i){p(this,e),this.accountService=t,this.adminUserService=n,this.snackBarService=i,this.accountsSubscription=new ua.w,this.searchInputValue$=new k.xQ,this.ngUnsubscribe=new k.xQ,this.toggleFn=new h.vpe,this.isLoading=!1,this.hasMoreData=!1,this.isLoadMore=!0,this.page=1,this.pageInitValue=1,this.searchInputValue="",this.accounts=[],this.nameFilter=""}return m(e,[{key:"handle",value:function(e){e.stopPropagation(),this.close()}},{key:"ngOnInit",value:function(){var e=this;this.searchInputValue$.pipe((0,$e.O)(this.searchInputValue),(0,Ve.b)(400),(0,E.x)(),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.searchInputValue=t,e.loadAccounts(!0)})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"close",value:function(){this.toggleFn.emit()}},{key:"onChangePermission",value:function(e){var t=this;this.adminUserService.editPermissions("".concat(e.accountType,":").concat(e.accountId),this.userId,{admin_login:e.permissions.admin_login}).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){t.snackBarService.openInfo("admin.user_edit.permissions.customer_right_administration.permission.saved")},function(){t.snackBarService.openInfo("admin.user_edit.permissions.customer_right_administration.permission.error")})}},{key:"onLazyLoading",value:function(){this.loadAccounts()}},{key:"onSearch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.searchInputValue$.next(e)}},{key:"loadChildrenAccounts",value:function(e){this.searchInputValue="",this.nameFilter="",this.selectedAccount=e,this.loadAccounts(!0)}},{key:"loadAccounts",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.selectedAccount&&(e="".concat(this.selectedAccount.accountType,":").concat(this.selectedAccount.accountId)),n&&(this.page=this.pageInitValue,this.accounts=[]),this.accountsSubscription.unsubscribe(),this.isLoading=!0,this.accountsSubscription=this.accountService.getAllAccounts(this.searchInputValue,this.page,25,e).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){var n=e.data;t.isLoading=!1,t.page++,t.hasMoreData=e.paginationHasMoreData,n.forEach(function(e,i){t.isLoading=!0;var a="".concat(e.accountType,":").concat(e.accountId);t.adminUserService.getPermissions(a,t.userId).pipe((0,w.R)(t.ngUnsubscribe)).subscribe(function(e){n[i].permissions=e,t.isLoading=!1}),t.accountService.getAllAccounts("",1,1,a).pipe((0,w.R)(t.ngUnsubscribe)).subscribe(function(e){n[i].hasChildren=!!e.data.length})}),t.accounts=[].concat(i(t.accounts),i(n)),t.searchInputValue&&1===t.accounts.length&&(t.selectedAccount=t.accounts[0])})}},{key:"onlyFoundAccount",get:function(){return 1===this.accounts.length?this.accounts[0]:null}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B),h.Y36(Lt),h.Y36(Et.c))},e.\u0275cmp=h.Xpm({type:e,selectors:[["customer-right-administration-modal"]],hostBindings:function(e,t){1&e&&h.NdJ("keydown.escape",function(e){return t.handle(e)},!1,h.evT)},inputs:{userId:"userId"},outputs:{toggleFn:"toggleFn"},decls:13,vars:12,consts:[[1,"account-customers-modal",3,"click"],[1,"account-customers-modal__edit",3,"click"],["class","account-customers-modal__title",4,"ngIf"],[3,"account","changeParent",4,"ngIf"],["loading-area-indicator","",3,"loadingAreaIndicatorActive"],["infinite-scroll","",3,"infiniteScrollDisabled","infiniteScrollThrottle","scrollWindow","scrolled"],[1,"secondary-header"],["icon","search","size","small"],["autocomplete","off",3,"ngModel","focus","placeholder","keyup","ngModelChange"],[3,"accounts","changeParent","changePermission",4,"ngIf"],[1,"account-customers-modal__title"],[3,"account","changeParent"],[3,"accounts","changeParent","changePermission"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.NdJ("click",function(){return t.close()}),h.TgZ(1,"div",1),h.NdJ("click",function(e){return e.stopPropagation()}),h.TgZ(2,"header"),h.YNc(3,Pa,3,3,"span",2),h.YNc(4,Ia,1,1,"account-breadcrumbs",3),h.qZA(),h.TgZ(5,"section",4),h.TgZ(6,"div",5),h.NdJ("scrolled",function(){return t.onLazyLoading()}),h.TgZ(7,"div",6),h._UZ(8,"app-svg-icon",7),h.TgZ(9,"label"),h.TgZ(10,"input",8),h.NdJ("keyup",function(e){return t.onSearch(e.target.value)})("ngModelChange",function(e){return t.nameFilter=e}),h.ALo(11,"translate"),h.qZA(),h.qZA(),h.qZA(),h.YNc(12,Oa,1,1,"account-table",9),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(3),h.Q6J("ngIf",!t.selectedAccount),h.xp6(1),h.Q6J("ngIf",t.selectedAccount),h.xp6(1),h.Q6J("loadingAreaIndicatorActive",t.isLoading),h.xp6(1),h.Q6J("infiniteScrollDisabled",!t.isLoadMore||!t.hasMoreData||t.isLoading)("infiniteScrollThrottle",50)("scrollWindow",!1),h.xp6(4),h.s9C("placeholder",h.lcZ(11,10,"admin.user_edit.permissions.customer_right_administration.search.placeholder")),h.Q6J("ngModel",t.nameFilter)("focus",!0),h.xp6(2),h.Q6J("ngIf",t.accounts))},directives:[f.O5,tt.O,l.R,Ke.u,Xt.Fj,Xt.JJ,Xt.On,cn.R,Ca,Sa],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}  .customer-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .customer-autocomplete__item .mat-option-text{display:flex}  .customer-autocomplete__item .mat-option-text span{font-size:1.8rem}.account-customers-modal[_ngcontent-%COMP%]{background-color:#0000004d;bottom:0;display:flex;left:0;position:absolute;right:0;top:0;z-index:5}.account-customers-modal[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]{background-color:#fff;display:flex;justify-content:flex-end;padding:.8rem}.account-customers-modal[_ngcontent-%COMP%]   footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:.8rem;text-transform:uppercase}@media (min-width: 767px){.account-customers-modal[_ngcontent-%COMP%]{align-items:center;justify-content:center}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]{flex:initial;height:80vh;width:96rem}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%] > header[_ngcontent-%COMP%]{background-color:#e5e5e5;color:#000}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]{background-color:#fff;border-bottom:.1rem solid #ccc}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#000}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-customers-modal[_ngcontent-%COMP%]   .account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}}.account-customers-modal__edit[_ngcontent-%COMP%]{background-color:#fff;border-radius:.2rem .2rem .4rem .4rem;left:8.5rem;margin-left:auto;margin-right:auto;overflow:hidden;right:0;top:30%;width:72rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .account-customers-modal__subtitle[_ngcontent-%COMP%]{padding:1rem 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .account-customers-modal__edit__row[_ngcontent-%COMP%]{align-items:center;border-bottom:.1rem solid #e5e5e5;display:flex;height:8.7rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;background-color:#e5e5e5;color:#000;display:flex;flex-direction:row;height:5.6rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   .account-customers-modal__title[_ngcontent-%COMP%]{flex:1;font-size:1.8rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]{align-items:center;color:#fff;display:flex;height:5.6rem;padding:0 1.6rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:transparent;border:0;color:#000;flex:1;font-size:1.8rem;padding:0 .8rem}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#000000c4}.account-customers-modal__edit[_ngcontent-%COMP%]   .secondary-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%]{height:calc(100% - 5.6rem);position:relative}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%;overflow:auto}.account-customers-modal__edit[_ngcontent-%COMP%] > section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.account-customers-modal__edit[_ngcontent-%COMP%]   .customer-autocomplete[_ngcontent-%COMP%]{display:block;margin:0 auto;width:100%}"]}),e}();function Ma(e,t){1&e&&(h.ynx(0),h._uU(1),h.ALo(2,"translate"),h.BQk()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.permissions.included")," "))}var wa=function(e,t){return{licensesNum:e,licensesTotal:t}};function Na(e,t){if(1&e&&(h.TgZ(0,"div",17),h.TgZ(1,"span"),h._uU(2),h.ALo(3,"translate"),h.qZA(),h.qZA()),2&e){var n=h.oxw(2);h.xp6(2),h.hij(" ",h.xi3(3,1,"admin.user_edit.permissions.free_licenses",h.WLB(4,wa,n.unusedLicenses.mobility,n.totalLicenses.mobility))," ")}}function Ea(e,t){1&e&&(h.TgZ(0,"mat-grid-tile",9),h._UZ(1,"mat-checkbox",18),h.qZA())}function La(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"mat-grid-tile",8),h.TgZ(2,"span"),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",17),h.TgZ(6,"span"),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(9,"mat-grid-tile",9),h._UZ(10,"mat-checkbox",19),h.qZA(),h.BQk()),2&e){var n=h.oxw(2);h.xp6(3),h.hij(" ",h.lcZ(4,2,"admin.user_edit.permissions.crm_connect.label")," "),h.xp6(4),h.hij(" ",h.xi3(8,4,"admin.user_edit.permissions.free_licenses",h.WLB(7,wa,n.unusedLicenses.crmConnect,n.totalLicenses.crmConnect))," ")}}var Ua=function(e){return{meetingPerUserWhiteLabelName:e}};function Da(e,t){if(1&e&&(h.ynx(0),h.TgZ(1,"mat-grid-tile",8),h.TgZ(2,"span",20),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",17),h.TgZ(6,"span",21),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.qZA(),h.TgZ(9,"mat-grid-tile",9),h._UZ(10,"mat-checkbox",22),h.qZA(),h.BQk()),2&e){var n=h.oxw(2);h.xp6(3),h.hij(" ",h.xi3(4,2,"admin.user_edit.permissions.meeting_per_user.label",h.VKq(8,Ua,n.meetingPerUserWhiteLabelName))," "),h.xp6(4),h.hij(" ",h.xi3(8,5,"admin.user_edit.permissions.free_licenses",h.WLB(10,wa,n.unusedLicenses.meetingPerUser,n.totalLicenses.meetingPerUser))," ")}}function Ba(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-grid-tile",23),h.TgZ(1,"app-button",24),h.NdJ("appButtonClick",function(){return h.CHM(n),h.oxw(2).customerRightAdministration()}),h.qZA(),h.qZA()}}function qa(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"form",4),h.NdJ("ngSubmit",function(){h.CHM(n);var e=h.oxw();return e.permissionsForm.valid&&e.confirmPermissionsChange()}),h.TgZ(1,"section"),h.TgZ(2,"div",5),h._uU(3),h.ALo(4,"translate"),h.qZA(),h.TgZ(5,"div",6),h.TgZ(6,"mat-grid-list",7),h.ynx(7),h.TgZ(8,"mat-grid-tile",8),h._uU(9),h.ALo(10,"translate"),h.qZA(),h.TgZ(11,"mat-grid-tile",9),h._UZ(12,"mat-checkbox",10),h.qZA(),h.BQk(),h.ynx(13),h.TgZ(14,"mat-grid-tile",8),h.TgZ(15,"span"),h._uU(16),h.ALo(17,"translate"),h.YNc(18,Ma,3,3,"ng-container",11),h.qZA(),h.YNc(19,Na,4,7,"div",12),h.qZA(),h.YNc(20,Ea,2,0,"mat-grid-tile",13),h.BQk(),h.YNc(21,La,11,10,"ng-container",11),h.YNc(22,Da,11,13,"ng-container",11),h.qZA(),h.qZA(),h.qZA(),h.TgZ(23,"section"),h.TgZ(24,"div",5),h._uU(25),h.ALo(26,"translate"),h.qZA(),h.TgZ(27,"div",6),h.TgZ(28,"mat-grid-list",7),h.ynx(29),h.TgZ(30,"mat-grid-tile",8),h._uU(31),h.ALo(32,"translate"),h.qZA(),h.TgZ(33,"mat-grid-tile",9),h._UZ(34,"mat-checkbox",14),h.qZA(),h.BQk(),h.YNc(35,Ba,2,0,"mat-grid-tile",15),h.qZA(),h.qZA(),h.qZA(),h.TgZ(36,"footer-actions",16),h.NdJ("cancelClick",function(){return h.CHM(n),h.oxw().cancel()})("saveClick",function(){return h.CHM(n),h.oxw().saveUserPermissions()}),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("formGroup",i.permissionsForm),h.xp6(3),h.Oqu(h.lcZ(4,13,"admin.user_edit.permissions.client")),h.xp6(6),h.hij(" ",h.lcZ(10,15,"admin.user_edit.permissions.allow_client_login")," "),h.xp6(7),h.hij(" ",h.lcZ(17,17,"admin.user_edit.permissions.mobile_pack.label")," "),h.xp6(2),h.Q6J("ngIf",i.isBusinessPremiumContract),h.xp6(1),h.Q6J("ngIf",!i.isBusinessPremiumContract),h.xp6(1),h.Q6J("ngIf",!i.isBusinessPremiumContract),h.xp6(1),h.Q6J("ngIf",i.totalLicenses.crmConnect),h.xp6(1),h.Q6J("ngIf",i.totalLicenses.meetingPerUser),h.xp6(3),h.Oqu(h.lcZ(26,19,"admin.user_edit.permissions.administration")),h.xp6(6),h.hij(" ",h.lcZ(32,21,"admin.user_edit.permissions.admin_portal_access.label")," "),h.xp6(4),h.Q6J("ngIf",i.hasMoreThanOneAccount),h.xp6(1),h.Q6J("saveDisabled",!i.permissionsForm.valid||!i.permissionsForm.dirty)}}function Ra(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"customer-right-administration-modal",25),h.NdJ("toggleFn",function(){return h.CHM(n),h.oxw().toggleCustomerRightAdministration()}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("userId",i.userId)}}var Fa=function(){var t=function(){function t(e,n,i,a,o,r,s,c,l,u,d,m){p(this,t),this.router=e,this.adminUserService=n,this.userService=i,this.adminService=a,this.licenseService=o,this.route=r,this.snackBarService=s,this.overlayService=c,this.translate=l,this.dialog=u,this.accountService=d,this.whiteLabelService=m,this.ngUnsubscribe=new k.xQ,this.permissionsForm=new Xt.cw({client_login:new Xt.NI,client_mobile_pack_contract_type_mini_mouse:new Xt.NI,crmConnect:new Xt.NI,meetingPerUser:new Xt.NI,admin_login:new Xt.NI}),this.permissions=new Zt.P,this.originalPermissions=new Zt.P,this.unusedLicenses=this.generateLicenseObj(),this.totalLicenses=this.generateLicenseObj(),this.userCrmConnectLicenseState=!1,this.meetingPerUserLicenseState=!1,this.isBusinessPremiumContract=!0,this.crmConnectUniteLicense=sa.CrmConnectUnite,this.meetingPerUserWhiteLabelName=this.whiteLabelService.data.meetingPerUser,this.isSaving=!1,this.isLoading=!0,this.showCustomerRightAdministration=!1,this.isOwnPermissions=!1,this.selectedAccountId=""}return m(t,[{key:"ngOnInit",value:function(){var e=this;this.accountService.selectedAccount&&(this.selectedAccountId="".concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId)),this.route.params.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.isLoading=!1,t.id&&(e.userId=t.id,e.loadUserLicenseState(e.crmConnectUniteLicense),e.loadUserLicenseState(sa.MeetingPerUser),e.loadPermissions(),e.loadActiveUser())})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"saveUserPermissions",value:function(){if(this.selectedAccountId){this.snackBarService.open("admin.user_edit.permissions.saving"),this.isSaving=!0;var e=new Zt.P;e.fromForm(this.permissionsForm.getRawValue());var t=e.getDiff(this.originalPermissions);this.adminUserService.editPermissions(this.selectedAccountId,this.userId,t).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}}},{key:"confirmPermissionsChange",value:function(){var e=this;this.isRemovingOwnAdminPermissions&&this.dialog.open(ra).afterClosed().pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){t&&e.saveUserPermissions()})}},{key:"cancel",value:function(){this.router.navigate(["/admin/user"])}},{key:"customerRightAdministration",value:function(){this.toggleCustomerRightAdministration()}},{key:"toggleCustomerRightAdministration",value:function(){this.showCustomerRightAdministration=!this.showCustomerRightAdministration,this.showCustomerRightAdministration?this.overlayService.push(this.$templatePortals.last):(this.overlayService.pop(),this.loadPermissions())}},{key:"closeMenus",value:function(){this.overlayService.pop()}},{key:"generateLicenseObj",value:function(){return{mobility:0,crmConnect:0,meetingPerUser:0}}},{key:"saveUserLicense",value:function(e){var t,n,i,a=this,o="";switch(e){case sa.MeetingPerUser:o=sa.MeetingPerUser,i={meetingPerUserWhiteLabelName:this.meetingPerUserWhiteLabelName},t="admin.user_edit.permissions.meeting_per_user.granted",n="admin.user_edit.permissions.meeting_per_user.revoked";break;case sa.CrmConnect:o=this.crmConnectUniteLicense,t="admin.user_edit.permissions.crm_connect.granted",n="admin.user_edit.permissions.crm_connect.revoked"}this.permissionsForm.get(e).value?this.licenseService.grantLicenseToUser(this.selectedAccountId,this.userId,o).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){a.handelUserLicenseChangeResponse(o,t,i)}):this.licenseService.revokeLicenseFromUser(this.selectedAccountId,this.userId,o).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){a.handelUserLicenseChangeResponse(o,n,i)})}},{key:"handelUserLicenseChangeResponse",value:function(e,t,n){this.snackBarService.openInfo(t,!0,"",{},n),this.loadUserLicenseState(e),this.loadPermissions()}},{key:"initPermissionsForm",value:function(){this.permissionsForm=new Xt.cw({client_login:new Xt.NI(this.permissions.client_login),client_mobile_pack_contract_type_mini_mouse:new Xt.NI({value:this.permissions.client_mobile_pack_contract_type_mini_mouse,disabled:this.isMobilityOptionCheckboxDisabled()}),crmConnect:new Xt.NI({value:this.userCrmConnectLicenseState,disabled:!this.userCrmConnectLicenseState&&0===this.unusedLicenses.crmConnect}),meetingPerUser:new Xt.NI({value:this.meetingPerUserLicenseState,disabled:!this.meetingPerUserLicenseState&&0===this.unusedLicenses.meetingPerUser}),admin_login:new Xt.NI(this.permissions.admin_login)})}},{key:"calculateUnusedLicenses",value:function(e,t){this.permissionsForm.get("client_login").value?e?this.unusedLicenses[t]-=1:this.unusedLicenses[t]+=1:e||(this.unusedLicenses[t]+=1)}},{key:"listenForClientLoginRightsChanges",value:function(){var e=this,t=this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse"),n=this.permissionsForm.get("crmConnect"),i=this.permissionsForm.get("meetingPerUser");this.permissionsForm.get("client_login").valueChanges.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(a){e.handleLicensesOptionCheckboxState(a,t,sa.Mobility),e.handleLicensesOptionCheckboxState(a,n,sa.CrmConnect),e.handleLicensesOptionCheckboxState(a,i,sa.MeetingPerUser)})}},{key:"handleLicensesOptionCheckboxState",value:function(e,t,n){e&&0!==this.unusedLicenses[n]?t.enable({emitEvent:!1}):(t.value&&t.reset(!1),t.disable({emitEvent:!1}))}},{key:"listenForMobilityOptionCheckboxChanges",value:function(){var e=this;this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse").valueChanges.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.calculateUnusedLicenses(t,sa.Mobility)})}},{key:"listenForCrmOptionCheckboxChanges",value:function(){var e=this;this.permissionsForm.get("crmConnect").valueChanges.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.calculateUnusedLicenses(t,sa.CrmConnect)})}},{key:"listenForMeetingPerUserCheckboxChanges",value:function(){var e=this;this.permissionsForm.get("meetingPerUser").valueChanges.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.calculateUnusedLicenses(t,sa.MeetingPerUser)})}},{key:"isMobilityOptionCheckboxDisabled",value:function(){return this.isBusinessPremiumContract||0===this.unusedLicenses.mobility&&!this.permissions.client_mobile_pack_contract_type_mini_mouse||!this.permissions.client_login}},{key:"loadPermissions",value:function(){var t=this;!this.selectedAccountId||(this.isLoading=!0,(0,Gi.aj)([this.adminUserService.getPermissions(this.selectedAccountId,this.userId),this.licenseService.getLicensesUsage(this.selectedAccountId,sa.Mobility),this.licenseService.getLicensesUsage(this.selectedAccountId,this.crmConnectUniteLicense),this.licenseService.getLicensesUsage(this.selectedAccountId,sa.MeetingPerUser)]).pipe((0,w.R)(this.ngUnsubscribe),(0,on.x)(function(){return t.isLoading=!1})).subscribe(function(n){var i=e(n,4),a=i[0],o=i[1],r=i[2],s=i[3];t.isLoading=!1,t.permissions=a,t.originalPermissions=a,o.body&&(t.setContractType(o),t.initLicenseAmount(o,sa.Mobility)),r.body&&t.initLicenseAmount(r,sa.CrmConnect),s.body&&t.initLicenseAmount(s,sa.MeetingPerUser),t.initPermissionsForm(),t.isBusinessPremiumContract||(t.listenForClientLoginRightsChanges(),t.listenForMobilityOptionCheckboxChanges()),t.listenForCrmOptionCheckboxChanges(),t.listenForMeetingPerUserCheckboxChanges()}))}},{key:"loadUserLicenseState",value:function(e){var t=this;this.licenseService.getUserLicenseState(this.selectedAccountId,this.userId,e).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){e===sa.MeetingPerUser?t.meetingPerUserLicenseState=!0:e===sa.CrmConnectUnite&&(t.userCrmConnectLicenseState=!0)},function(){e===sa.MeetingPerUser?t.meetingPerUserLicenseState=!1:e===sa.CrmConnectUnite&&(t.userCrmConnectLicenseState=!1)})}},{key:"loadActiveUser",value:function(){var t=this;(0,oa.D)([this.adminUserService.getUser(this.selectedAccountId,this.userId),this.userService.userInfo$.pipe((0,Kt.P)())]).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(n){var i,a=e(n,2),o=a[0],r=a[1];t.adminService.emit(o),(null==o?void 0:o.username)===(null===(i=null==r?void 0:r.user)||void 0===i?void 0:i.username)&&(t.isOwnPermissions=!0)})}},{key:"setContractType",value:function(e){switch(e.status){case 200:this.isBusinessPremiumContract=!1;break;case 204:this.isBusinessPremiumContract=!0}}},{key:"initLicenseAmount",value:function(e,t){this.totalLicenses[t]=e.body.total,this.unusedLicenses[t]=e.body.unused}},{key:"handleSuccess",value:function(){this.isSaving=!1,this.originalPermissions.client_mobile_pack_contract_type_mini_mouse=this.permissionsForm.get("client_mobile_pack_contract_type_mini_mouse").value,this.originalPermissions.admin_login=this.permissionsForm.get("admin_login").value;var e=!1;this.permissionsForm.get("meetingPerUser").value!==this.meetingPerUserLicenseState&&(e=!0,this.saveUserLicense("meetingPerUser")),this.permissionsForm.get("crmConnect").value!==this.userCrmConnectLicenseState&&(e=!0,this.saveUserLicense("crmConnect")),e||(this.snackBarService.openInfo("admin.user_edit.permissions.saved",!0),this.loadPermissions()),this.isRemovingOwnAdminPermissions&&(this.adminService.ownPermissionsChange=this.permissionsForm.value)}},{key:"handleError",value:function(){this.isSaving=!1,this.snackBarService.openErrorInfo("Error occurred")}},{key:"isRemovingOwnAdminPermissions",get:function(){return!this.permissionsForm.value.admin_login&&this.isOwnPermissions}},{key:"hasMoreThanOneAccount",get:function(){return!this.accountService.isOnlyAccount}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Y36(U.F0),h.Y36(Lt),h.Y36(W.K),h.Y36($.l),h.Y36(Ut),h.Y36(U.gz),h.Y36(Et.c),h.Y36(ca.c),h.Y36(q.sK),h.Y36(d.uw),h.Y36(M.B),h.Y36(ee.D))},t.\u0275cmp=h.Xpm({type:t,selectors:[["admin-permissions"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(aa.ig,5),2&e)&&(h.iGM(n=h.CRH())&&(t.$templatePortals=n))},decls:4,vars:2,consts:[["loading-area-indicator","","data-e2e","admin-user-permissions-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.permissions.label"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[3,"userId","toggleFn",4,"cdk-portal"],["novalidate","",3,"formGroup","ngSubmit"],[1,"subline"],[1,"container"],["cols","12","rowHeight","6rem"],["colspan","10",1,"input-label"],["colspan","2"],["color","primary","formControlName","client_login","data-e2e","admin-user-permissions-page__allow-app-login-checkbox"],[4,"ngIf"],["class","input-label__secondary",4,"ngIf"],["colspan","2",4,"ngIf"],["color","primary","formControlName","admin_login","data-e2e","admin-user-permissions-page__system-configuration-access-checkbox"],["class","input-label","colspan","12",4,"ngIf"],["e2e","admin-user-permissions-page",3,"saveDisabled","cancelClick","saveClick"],[1,"input-label__secondary"],["color","primary","formControlName","client_mobile_pack_contract_type_mini_mouse","data-e2e","admin-user-permissions-page__mobility-option-checkbox"],["color","primary","formControlName","crmConnect"],["data-e2e","admin-user-permissions-page__meeting-per-user-label"],["data-e2e","admin-user-permissions-page__meeting-per-user-licenses"],["color","primary","formControlName","meetingPerUser","data-e2e","admin-user-permissions-page__meeting-per-user-checkbox"],["colspan","12",1,"input-label"],["color","primary","buttonTextTranslationKey","admin.user_edit.permissions.customer_right_administration.title","type","stroked-button",3,"appButtonClick"],[3,"userId","toggleFn"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"headline",1),h.YNc(2,qa,37,23,"form",2),h.YNc(3,Ra,1,1,"customer-right-administration-modal",3),h.qZA()),2&e&&(h.Q6J("loadingAreaIndicatorActive",t.isLoading),h.xp6(2),h.Q6J("ngIf",!t.isLoading))},directives:[tt.O,wn.a,f.O5,aa.bH,Xt._Y,Xt.JL,Xt.sg,la.Il,la.DX,pn.oG,Xt.JJ,Xt.u,$t.c,Ii.V,Za],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}section[_ngcontent-%COMP%]{border-top:.1rem solid #e5e5e5;padding-bottom:2.4rem}section[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:1.2rem 2rem;width:36rem}section[_ngcontent-%COMP%]   .subline[_ngcontent-%COMP%]{color:#666;font-size:1.8rem;padding:1.2rem 2rem 0}section[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{font-size:1.8rem}section[_ngcontent-%COMP%]   .input-label__secondary[_ngcontent-%COMP%]{font-size:1.8rem}section[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]     .mat-grid-tile-content{align-items:flex-start;flex-direction:column}section[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{overflow:visible}"]}),t}(),Ya=o(1046),Ja=o(4885);function Qa(e,t){if(1&e&&(h.TgZ(0,"div"),h._UZ(1,"svg-avatar",16),h.qZA()),2&e){var n=h.oxw().$implicit;h.xp6(1),h.Q6J("displayName",n.DISPLAY_NAME)}}function za(e,t){if(1&e&&(h.TgZ(0,"mat-option",13),h.YNc(1,Qa,2,1,"div",14),h.TgZ(2,"span",15),h._uU(3),h.qZA(),h.TgZ(4,"span",15),h._uU(5),h.qZA(),h.qZA()),2&e){var n=t.$implicit,i=h.oxw(),a=h.MAs(17);h.Q6J("value",n),h.xp6(1),h.Q6J("ngIf",i.getInitials(n.DISPLAY_NAME))("ngIfElse",a),h.xp6(2),h.Oqu(n.name||n.displayName||n.DISPLAY_NAME),h.xp6(2),h.Oqu(n.number||n.extensionNumber||n.EXTENSION_NUMBER||n.ID)}}function $a(e,t){1&e&&(h.TgZ(0,"mat-option"),h._UZ(1,"mat-progress-spinner",17),h.qZA())}function ja(e,t){1&e&&h._UZ(0,"svg-avatar")}var Ka=function(){var e=function(){function e(){var t=this;p(this,e),this.ngUnsubscribe=new k.xQ,this.extensionItems=[],this.isLoading=!1,this.toggleFn=new h.vpe,this.saveExtension=new h.vpe,this.onScrollToBottom=new h.vpe,this.onExtensionInput=new h.vpe,this.createForm(),this.phonenumberForm.get("extension").valueChanges.pipe((0,$e.O)(""),(0,Ve.b)(250),(0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.onExtensionInput.next(e)})}return m(e,[{key:"handle",value:function(e){e.stopPropagation(),this.close()}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"getInitials",value:function(e){return(0,Ot.Cx)(e)||""}},{key:"displayFn",value:function(e){return e&&e.DISPLAY_NAME}},{key:"save",value:function(){this.saveExtension.emit(this.phonenumberForm.controls.extension.value)}},{key:"close",value:function(){this.toggleFn.emit()}},{key:"createForm",value:function(){this.phonenumberForm=new Xt.cw({extension:new Xt.NI(this.extension,Xt.kI.compose([Xt.kI.required,Ya.C.autocompleteIsItemSelected()]))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["phonenumbers-form"]],hostBindings:function(e,t){1&e&&h.NdJ("keydown.escape",function(e){return t.handle(e)},!1,h.evT)},inputs:{extensionItems:"extensionItems",isLoading:"isLoading"},outputs:{toggleFn:"toggleFn",saveExtension:"saveExtension",onScrollToBottom:"onScrollToBottom",onExtensionInput:"onExtensionInput"},decls:19,vars:12,consts:[[1,"phonenumbers-form"],[1,"phonenumbers-form__edit"],["mat-icon-button","","type","button",3,"click"],["icon","arrow_left","size","medium"],["novalidate","",3,"formGroup","ngSubmit"],[1,"extension-autocomplete"],["formControlName","extension","matInput","",3,"matAutocomplete","placeholder"],[3,"displayWith","listboxScrolled"],["auto","matAutocomplete"],["class","extension-autocomplete__item",3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["showIcon",""],[3,"saveDisabled","cancelClick","saveClick"],[1,"extension-autocomplete__item",3,"value"],[4,"ngIf","ngIfElse"],["mat-line",""],[3,"displayName"],["mode","indeterminate"]],template:function(e,t){if(1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"header"),h.TgZ(3,"button",2),h.NdJ("click",function(){return t.close()}),h._UZ(4,"app-svg-icon",3),h.qZA(),h.TgZ(5,"span"),h._uU(6),h.ALo(7,"translate"),h.qZA(),h.qZA(),h.TgZ(8,"form",4),h.NdJ("ngSubmit",function(){return t.phonenumberForm.valid&&t.save()}),h.TgZ(9,"mat-form-field",5),h._UZ(10,"input",6),h.ALo(11,"translate"),h.TgZ(12,"mat-autocomplete",7,8),h.NdJ("listboxScrolled",function(){return t.onScrollToBottom.emit()}),h.YNc(14,za,6,5,"mat-option",9),h.YNc(15,$a,2,0,"mat-option",10),h.qZA(),h.YNc(16,ja,1,0,"ng-template",null,11,h.W1O),h.qZA(),h.TgZ(18,"footer-actions",12),h.NdJ("cancelClick",function(){return t.close()})("saveClick",function(){return t.save()}),h.qZA(),h.qZA(),h.qZA(),h.qZA()),2&e){var n=h.MAs(13);h.xp6(6),h.Oqu(h.lcZ(7,8,"admin.navigation.user.phonenumber.title")),h.xp6(2),h.Q6J("formGroup",t.phonenumberForm),h.xp6(2),h.s9C("placeholder",h.lcZ(11,10,"admin.user.phoneextension.add_extension")),h.Q6J("matAutocomplete",n),h.xp6(2),h.Q6J("displayWith",t.displayFn),h.xp6(2),h.Q6J("ngForOf",t.extensionItems),h.xp6(1),h.Q6J("ngIf",t.isLoading),h.xp6(3),h.Q6J("saveDisabled",!t.phonenumberForm.valid)}},directives:[b.lW,Ke.u,Xt._Y,Xt.JL,Xt.sg,x.KE,Xt.Fj,et.Nt,ln.ZL,Xt.JJ,Xt.u,ln.XC,un.X,f.sg,f.O5,$t.c,g.ey,g.X2,dn.T,Ja.Ou],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}form[_ngcontent-%COMP%]{padding:.8rem 2.4rem}  .extension-autocomplete__item{margin-top:1rem;padding:0 .8rem!important}  .extension-autocomplete__item .mat-option-text{align-items:center;display:flex;position:relative}  .extension-autocomplete__item .mat-option-text .rounded-icon-holder{font-size:2.4rem}  .extension-autocomplete__item .mat-option-text span{font-size:1.8rem;margin-top:-1.8rem}  .extension-autocomplete__item .mat-option-text span:last-child{color:#0000008a;font-size:1.6rem;left:5.7rem;position:absolute;top:2.3rem}.phonenumbers-form[_ngcontent-%COMP%]{background-color:#0000004d;bottom:0;left:0;position:absolute;right:0;top:0;z-index:5}.phonenumbers-form__edit[_ngcontent-%COMP%]{background-color:#fff;left:8.5rem;margin-left:auto;margin-right:auto;position:absolute;right:0;top:30%;width:72rem}.phonenumbers-form__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{align-items:center;background-color:#e5e5e5;color:#000;display:flex;flex-direction:row;height:5.6rem;padding:0 2.4rem}.phonenumbers-form__edit[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.phonenumbers-form__edit[_ngcontent-%COMP%]   .extension-autocomplete[_ngcontent-%COMP%]{width:100%}"]}),e}();function Ha(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"span"),h.TgZ(1,"button",5),h.NdJ("click",function(){return h.CHM(n),h.oxw().addLinkedExtension()}),h._UZ(2,"app-svg-icon",6),h.qZA(),h.qZA()}}function Ga(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list-item"),h.TgZ(1,"span",12),h._uU(2),h.qZA(),h.TgZ(3,"span",13),h._uU(4),h.qZA(),h.TgZ(5,"span",14),h.TgZ(6,"button",5),h.NdJ("click",function(){var e=h.CHM(n),t=e.$implicit,i=e.index;return h.oxw(2).toggleRemoveExtensionDialog(t,i)}),h._UZ(7,"app-svg-icon",15),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=t.$implicit;h.xp6(2),h.hij(" ",i.extension," "),h.xp6(2),h.hij(" ",i.inboundPhoneNumbersFormatted," ")}}function Va(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"mat-list",7),h.TgZ(1,"mat-list-item",8),h.TgZ(2,"sortable-list-header",9),h.NdJ("orderChange",function(e){return h.CHM(n),h.oxw().changeOrder(e)}),h.qZA(),h._UZ(3,"span",10),h.qZA(),h.YNc(4,Ga,8,2,"mat-list-item",11),h.ALo(5,"orderBy"),h.qZA()}if(2&e){var i=h.oxw();h.xp6(2),h.Q6J("data",i.headerColumnData),h.xp6(2),h.Q6J("ngForOf",h.gM2(5,2,i.extensionResourceItems,i.order,i.reverse,!0))}}function Xa(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"phonenumbers-form",16),h.NdJ("onExtensionInput",function(e){return h.CHM(n),h.oxw().onExtensionInput(e)})("onScrollToBottom",function(){return h.CHM(n),h.oxw().onScrollToBottom()})("saveExtension",function(e){return h.CHM(n),h.oxw().onRequest(e)})("toggleFn",function(){return h.CHM(n),h.oxw().toggleAddEntry()}),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("extensionItems",i.extensionItems)("isLoading",i.isLoadingUnAssignedExtensions)}}var Wa=function(){var e=function(){function e(t,n,i,a,o,r,s,c,l){p(this,e),this.accountService=t,this.adminService=n,this.adminUserService=i,this.confirmDialogsService=a,this.overlayContainerService=o,this.phoneExtensionService=r,this.route=s,this.snackBarService=c,this.translateService=l,this.page=1,this.perPage=25,this.hasMoreData=!0,this.searchExtensionValue="",this.ngUnsubscribe=new k.xQ,this.extensionResourceItems=[],this.isLoading=!1,this.isLoadingUnAssignedExtensions=!1,this.search="",this.filter={},this.isAddEntryShown=!1,this.extensionItems=[],this.selectedAccountId="",this.headerColumnData=[{name:"extension",title:"admin.user.phoneextension.extension",e2e:"admin-user-phonenumber-page__extension-header"},{name:"inboundTrunkNumber",title:"admin.user.phoneextension.inboundTrunkNumber",e2e:"admin-user-phonenumber-page__inbound-trunk-number-header"}]}return m(e,[{key:"ngOnInit",value:function(){var e=this;this.accountService.selectedAccount&&(this.selectedAccountId="".concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId)),this.adminService.emitChange.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){t?(e.activeUser=t,e.loadExtensions()):e.route.params.pipe((0,w.R)(e.ngUnsubscribe)).subscribe(function(t){t.id&&e.loadUser(t.id)})})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"loadExtensions",value:function(){var e=this;this.extensionResourceItems=[],this.isLoading=!0,this.phoneExtensionService.getLinkedPhoneExtensions(this.selectedAccountId,this.activeUser.id).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.extensionResourceItems=t.data,e.cleanupPhoneExtensions(),e.isLoading=!1})}},{key:"loadUnAssignedPhoneExtensions",value:function(){var e=this;this.isLoadingUnAssignedExtensions=!0,this.phoneExtensionService.getUnassignedPhoneExtensions(this.selectedAccountId,this.searchExtensionValue,this.page,this.perPage).pipe((0,on.x)(function(){e.isLoadingUnAssignedExtensions=!1}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){e.page++,e.extensionItems=[].concat(i(e.extensionItems),i(t)),e.hasMoreData=t.length>=e.perPage,e.cleanupPhoneExtensions()})}},{key:"onScrollToBottom",value:function(){this.hasMoreData&&!this.isLoadingUnAssignedExtensions&&this.loadUnAssignedPhoneExtensions()}},{key:"onExtensionInput",value:function(e){this.searchExtensionValue=e,this.extensionItems=[],this.page=1,this.loadUnAssignedPhoneExtensions()}},{key:"cleanupPhoneExtensions",value:function(){var e=this;this.extensionItems.length>0&&this.extensionResourceItems.length>0&&this.extensionResourceItems.forEach(function(t){e.extensionItems.forEach(function(n){n.ID===t.resource&&e.extensionItems.splice(e.extensionItems.indexOf(n),1)})})}},{key:"addLinkedExtension",value:function(){this.toggleAddEntry()}},{key:"toggleAddEntry",value:function(){this.isAddEntryShown=!this.isAddEntryShown,this.isAddEntryShown?this.overlayContainerService.push(this.$templatePortal):this.overlayContainerService.pop()}},{key:"toggleRemoveExtensionDialog",value:function(e,t){var n=this;this.extensionResource=e,this.translateService.get("admin.user.phoneextension.confirm_extension_removal").pipe((0,Qn.zg)(function(t){return n.confirmDialogsService.confirm("Remove Extension","".concat(t," ").concat(e.extension,"?"),"No","Yes")}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(e){return n.handleRemoveExtensionDialogResult(e,t)})}},{key:"canAddExtension",value:function(){return 0===this.extensionResourceItems.length}},{key:"onRequest",value:function(e){var t=this;this.snackBarService.openInfo("admin.user.phoneextension.adding_extension",!0),this.toggleAddEntry(),this.phoneExtensionService.addLinkedPhoneExtensions(this.selectedAccountId,this.activeUser.id,e.ID).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){return t.handleSuccess()},function(){return t.snackBarService.openInfo("admin.user.phoneextension.adding_extension_failed",!0)})}},{key:"changeOrder",value:function(e){this.order=e.order,this.reverse=e.reverse}},{key:"handleSuccess",value:function(){this.loadExtensions(),this.snackBarService.openInfo("admin.user.phoneextension.extension_added",!0)}},{key:"loadUser",value:function(e){var t=this;this.isLoading=!0,this.adminUserService.getUser(this.selectedAccountId,e).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){t.isLoading=!1,t.activeUser=e,t.adminService.emit(t.activeUser),t.loadExtensions()})}},{key:"handleRemoveExtensionDialogResult",value:function(e,t){var n=this;e&&(this.snackBarService.openInfo("admin.user.phoneextension.removing_extension",!0),this.phoneExtensionService.deleteLinkedPhoneExtension(this.selectedAccountId,this.activeUser.id,this.extensionResource.id).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){n.extensionResourceItems.splice(t,1),n.snackBarService.openInfo("admin.user.phoneextension.extension_removed",!0),n.loadUnAssignedPhoneExtensions()},function(){n.snackBarService.openErrorInfo("admin.user.phoneextension.removing_extension_error")}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(M.B),h.Y36($.l),h.Y36(Lt),h.Y36(zn.U),h.Y36(ca.c),h.Y36(Jt),h.Y36(U.gz),h.Y36(Et.c),h.Y36(q.sK))},e.\u0275cmp=h.Xpm({type:e,selectors:[["admin-phonenumbers"]],viewQuery:function(e,t){var n;(1&e&&h.Gf(aa.ig,5),2&e)&&(h.iGM(n=h.CRH())&&(t.$templatePortal=n.first))},decls:5,vars:3,consts:[["loading-area-indicator","","data-e2e","admin-user-phonenumber-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.phonenumbers.label"],[4,"ngIf"],["class","flex-table",4,"ngIf"],[3,"extensionItems","isLoading","onExtensionInput","onScrollToBottom","saveExtension","toggleFn",4,"cdk-portal"],["mat-icon-button","","type","button",3,"click"],["icon","add","size","small"],[1,"flex-table"],[1,"secondary-header"],[3,"data","orderChange"],[1,"column"],[4,"ngFor","ngForOf"],["data-e2e","admin-user-phonenumber-page__extension-entry",1,"column"],["data-e2e","admin-user-phonenumber-page__inbound-trunk-number-entry",1,"column","column__large"],[1,"column","item-secondary-content"],["fill","button-color","icon","delete","size","small"],[3,"extensionItems","isLoading","onExtensionInput","onScrollToBottom","saveExtension","toggleFn"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"headline",1),h.YNc(2,Ha,3,0,"span",2),h.qZA(),h.YNc(3,Va,6,7,"mat-list",3),h.YNc(4,Xa,1,2,"phonenumbers-form",4),h.qZA()),2&e&&(h.Q6J("loadingAreaIndicatorActive",t.isLoading),h.xp6(2),h.Q6J("ngIf",!t.isLoading&&t.canAddExtension()),h.xp6(1),h.Q6J("ngIf",!t.isLoading))},directives:[tt.O,wn.a,f.O5,aa.bH,b.lW,Ke.u,He.i$,He.Tg,jn.c,f.sg,Ka],pipes:[S.T],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.hide-module[_ngcontent-%COMP%]{display:none!important}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5}.loading-indicator[_ngcontent-%COMP%]{padding:1.6rem 0}mat-list[_ngcontent-%COMP%]{margin:0}mat-list[_ngcontent-%COMP%]   mat-list-item.mat-list-item[_ngcontent-%COMP%]{font-size:1.6rem;height:4.8rem}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:hover:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{margin:0;overflow:visible;visibility:visible}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:0;z-index:1}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header.secondary-header[_ngcontent-%COMP%]{top:5.6rem}mat-list[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]:hover{background-color:#fff!important}mat-list[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{visibility:hidden}mat-list.flex-table[_ngcontent-%COMP%]{padding:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:5.6rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item.sticky-header[_ngcontent-%COMP%]{background-color:#fff;position:-webkit-sticky;position:sticky;top:5.8rem;z-index:1}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .column--fix[_ngcontent-%COMP%]{max-width:8rem}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]{flex:1 0 10rem;max-width:20rem;padding:0 1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column[_ngcontent-%COMP%]:first-of-type{max-width:30rem;min-width:30rem;padding-left:0}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__xs[_ngcontent-%COMP%]{justify-content:center;max-width:4.5rem!important;min-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__small[_ngcontent-%COMP%]{max-width:8.5rem;text-align:center}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .column__large[_ngcontent-%COMP%]{max-width:inherit!important}mat-list.flex-table[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:not(.secondary-header)   .item-secondary-content[_ngcontent-%COMP%]{max-width:10rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}"]}),e}();function eo(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]&&("object"!=typeof e[n]||!eo(e[n],t[n])))return!1}for(var i in t)if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))return!1;return!0}var to=o(52538);function no(e,t){1&e&&(h.TgZ(0,"mat-hint",20),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.firstname.error.required")," "))}function io(e,t){1&e&&(h.TgZ(0,"mat-hint",20),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.lastname.error.required")," "))}function ao(e,t){1&e&&(h.TgZ(0,"mat-hint",20),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"admin.user_edit.user_data.username.error.required")," "))}function oo(e,t){1&e&&(h.TgZ(0,"mat-hint",20),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"common_errors.username.email")," "))}function ro(e,t){if(1&e&&(h.TgZ(0,"mat-option",21),h._uU(1),h.ALo(2,"translate"),h.qZA()),2&e){var n=t.$implicit;h.Q6J("value",n.value),h.xp6(1),h.hij(" ",h.lcZ(2,2,n.title)," ")}}function so(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"form",3),h.NdJ("ngSubmit",function(){return h.CHM(n),h.oxw().userDataForm.valid}),h.TgZ(1,"div",4),h.TgZ(2,"div",5),h.TgZ(3,"div",6),h.TgZ(4,"div",7),h.TgZ(5,"mat-form-field",8),h.TgZ(6,"label"),h._UZ(7,"input",9),h.ALo(8,"translate"),h.qZA(),h.YNc(9,no,3,3,"mat-hint",10),h.qZA(),h.qZA(),h.TgZ(10,"div",11),h.TgZ(11,"mat-form-field",8),h.TgZ(12,"label"),h._UZ(13,"input",12),h.ALo(14,"translate"),h.qZA(),h.YNc(15,io,3,3,"mat-hint",10),h.qZA(),h.qZA(),h.qZA(),h.TgZ(16,"div",6),h.TgZ(17,"div",7),h.TgZ(18,"mat-form-field",8),h.TgZ(19,"label"),h._UZ(20,"input",13),h.ALo(21,"translate"),h.qZA(),h.YNc(22,ao,3,3,"mat-hint",10),h.YNc(23,oo,3,3,"mat-hint",10),h.qZA(),h.qZA(),h.TgZ(24,"div",11),h.TgZ(25,"mat-form-field",8),h.TgZ(26,"mat-select",14),h.NdJ("ngModelChange",function(e){return h.CHM(n),h.oxw().user.language=e}),h.ALo(27,"translate"),h.YNc(28,ro,3,4,"mat-option",15),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h._UZ(29,"svg-avatar",16),h.qZA(),h.TgZ(30,"div",17),h.TgZ(31,"app-button",18),h.NdJ("appButtonClick",function(){h.CHM(n);var e=h.oxw();return e.restorePassword(e.user.username)}),h.qZA(),h.TgZ(32,"footer-actions",19),h.NdJ("cancelClick",function(){return h.CHM(n),h.oxw().cancel()})("saveClick",function(){return h.CHM(n),h.oxw().saveUserData()}),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.Q6J("formGroup",i.userDataForm),h.xp6(7),h.Q6J("placeholder",h.lcZ(8,14,"admin.user_edit.user_data.firstname.label")),h.xp6(2),h.Q6J("ngIf",i.userDataForm.controls.firstname.hasError("required")&&i.userDataForm.controls.firstname.touched),h.xp6(4),h.Q6J("placeholder",h.lcZ(14,16,"admin.user_edit.user_data.lastname.label")),h.xp6(2),h.Q6J("ngIf",i.userDataForm.controls.lastname.hasError("required")&&i.userDataForm.controls.lastname.touched),h.xp6(5),h.Q6J("placeholder",h.lcZ(21,18,"admin.user_edit.user_data.username.label"))("readonly",!i.isUsernameOwner),h.xp6(2),h.Q6J("ngIf",i.userDataForm.controls.username.hasError("required")&&i.userDataForm.controls.username.touched),h.xp6(1),h.Q6J("ngIf",i.userDataForm.controls.username.hasError("email")&&i.userDataForm.controls.username.touched),h.xp6(3),h.Q6J("ngModel",i.user.language)("placeholder",h.lcZ(27,20,"admin.user_edit.user_data.language.label")),h.xp6(2),h.Q6J("ngForOf",i.interfaceLanguages),h.xp6(3),h.Q6J("disabled",!i.user.username),h.xp6(1),h.Q6J("saveDisabled",!i.userDataForm.valid||!i.userDataForm.dirty)}}var co=function(){var t=function(){function t(e,n,i,a,o,r,s,c,l){p(this,t),this.router=e,this.adminUserService=n,this.adminService=i,this.route=a,this.snackBarService=o,this.accountService=r,this.userService=s,this.languageService=c,this.apiLoginService=l,this.ngUnsubscribe=new k.xQ,this.isSaving=!1,this.isLoading=!1,this.isSubmitted=!1,this.isSubmittedFinished=!1,this.interfaceLanguages=this.languageService.getAvailableLanguages(),this.selectedAccountId="",this.isUsernameOwner=!1,this.routeConfig={search:!1},this.adminService.routerConfig=this.routeConfig}return m(t,[{key:"ngOnInit",value:function(){var e=this;this.accountService.selectedAccount&&(this.selectedAccountId="".concat(this.accountService.selectedAccount.accountType,":").concat(this.accountService.selectedAccount.accountId)),this.route.params.pipe((0,Mn.K)(function(t){return e.isLoading=t}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(t){if(!t.id)return e.isLoading=!1,e.user=new O,void e.initUserDataForm();e.loadUser(t.id)})}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"saveUserData",value:function(){this.snackBarService.open("admin.user_edit.user_data.saving"),this.isSaving=!0,this.adminUserService.editUser(this.selectedAccountId,this.user.id,this.userDataForm.value).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(this.handleSuccess.bind(this),this.handleError.bind(this))}},{key:"cancel",value:function(){this.router.navigate(["/admin/user"])}},{key:"restorePassword",value:function(e){var t=this,n={username:e};this.isSubmitted=!0,this.apiLoginService.forgotPassword(n).pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(){t.isSubmittedFinished=!0,t.isSubmitted=!1,t.snackBarService.openInfo("forgot-password.sent_email")},function(){t.isSubmittedFinished=!0,t.isSubmitted=!1,t.snackBarService.openErrorInfo("Error occurred")})}},{key:"isFormChanged",value:function(){return!this.userDataForm||eo(this.formCopyValue,this.userDataForm.value)}},{key:"loadUser",value:function(t){var n=this;(0,Gi.aj)([this.adminUserService.getUser(this.selectedAccountId,t),this.userService.userInfo$]).pipe((0,Kt.P)(),(0,Mn.K)(function(e){return n.isLoading=e}),(0,w.R)(this.ngUnsubscribe)).subscribe(function(i){var a,o=e(i,2),r=o[0],s=o[1];n.isUsernameOwner=t===(null===(a=null==s?void 0:s.user)||void 0===a?void 0:a.id),n.user=r,n.initUserDataForm()})}},{key:"initUserDataForm",value:function(){this.adminService.emit(this.user),this.userDataForm=new Xt.cw({username:new Xt.NI(this.user.username,Xt.kI.compose([Xt.kI.required,Xt.kI.email])),firstname:new Xt.NI(this.user.firstname,Xt.kI.required),lastname:new Xt.NI(this.user.lastname,Xt.kI.required),language:new Xt.NI(this.user.language,Xt.kI.required)}),this.formCopyValue=this.userDataForm.value}},{key:"handleSuccess",value:function(e){var t;this.formCopyValue=this.userDataForm.value,this.isSaving=!1,this.adminService.emit(e),this.snackBarService.openInfo("admin.user_edit.user_data.saved",!0),null===(t=this.userDataForm)||void 0===t||t.reset(this.formCopyValue)}},{key:"handleError",value:function(){this.isSaving=!1,this.snackBarService.openErrorInfo("Error occurred")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(h.Y36(U.F0),h.Y36(Lt),h.Y36($.l),h.Y36(U.gz),h.Y36(Et.c),h.Y36(M.B),h.Y36(W.K),h.Y36(sn.T),h.Y36(to.H))},t.\u0275cmp=h.Xpm({type:t,selectors:[["admin-user-data"]],decls:3,vars:2,consts:[["loading-area-indicator","","data-e2e","admin-user-user-data-page",1,"container",3,"loadingAreaIndicatorActive"],["translationKey","admin.user_edit.user_data.label"],["novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],["novalidate","",3,"formGroup","ngSubmit"],[1,"page-container"],[1,"user-data-container"],[1,"row-container"],[1,"name-row"],[1,"user-data__property"],["formControlName","firstname","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__first-name--input",3,"placeholder"],["class","mat-hint--error",4,"ngIf"],[1,"language-row"],["formControlName","lastname","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__last-name--input",3,"placeholder"],["formControlName","username","matInput","","maxlength","255","type","text","data-e2e","admin-user-user-data-page__username--input",3,"placeholder","readonly"],["formControlName","language","id","user_data__edit__language","data-e2e","admin-user-user-data-page__language-selector",3,"ngModel","placeholder","ngModelChange"],["data-e2e","admin-user-user-data-page__language-selector-option",3,"value",4,"ngFor","ngForOf"],["wrapperSize","xx-large"],[1,"user-data__edit__actions"],["color","primary","buttonTextTranslationKey","admin.user_edit.restore-password","textColor","password-button--color","type","basic-button","e2e","admin-user-user-data-page__restore-password",1,"restore-password",3,"disabled","appButtonClick"],["e2e","admin-user-user-data-page",3,"saveDisabled","cancelClick","saveClick"],[1,"mat-hint--error"],["data-e2e","admin-user-user-data-page__language-selector-option",3,"value"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h._UZ(1,"headline",1),h.YNc(2,so,33,22,"form",2),h.qZA()),2&e&&(h.Q6J("loadingAreaIndicatorActive",t.isLoading),h.xp6(2),h.Q6J("ngIf",!t.isLoading))},directives:[tt.O,wn.a,f.O5,Xt._Y,Xt.JL,Xt.sg,x.KE,Xt.Fj,et.Nt,Xt.JJ,Xt.u,Xt.nD,v.gD,f.sg,dn.T,Ii.V,$t.c,x.bx,g.ey],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}.user-data__property[_ngcontent-%COMP%]{width:90%}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.user-data-container[_ngcontent-%COMP%]{flex:3 0;flex-direction:column}.page-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-left:1rem}.row-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start}.name-row[_ngcontent-%COMP%]{flex:1 3 10rem}.language-row[_ngcontent-%COMP%]{flex:1 0}.user-data__edit__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.restore-password[_ngcontent-%COMP%]{margin:.8rem 0}"]}),t}(),lo=o(83840),uo=o(49457),mo=function(){var e=m(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Xpm({type:e,selectors:[["export-import-help"]],decls:43,vars:42,consts:[["data-e2e","admin-wizards-export-import-fragment__instructions-modal","e2e","admin-wizards-export-import-fragment__instructions-modal",3,"title"],[1,"admin-wizards-export-import-fragment__instructions-modal"],["data-e2e","admin-wizards-export-import-fragment__instructions-first-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-second-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point"],["type","a"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-extension"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-username"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-lastname"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-firstname"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-language"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-app"],["data-e2e","admin-wizards-export-import-fragment__instructions-third-point-admin"],["data-e2e","admin-wizards-export-import-fragment__instructions-fourth-point"],["data-e2e","admin-wizards-export-import-fragment__instructions-fifth-point"]],template:function(e,t){1&e&&(h.TgZ(0,"modal-container",0),h.ALo(1,"translate"),h.TgZ(2,"div",1),h.TgZ(3,"ol"),h.TgZ(4,"li",2),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.TgZ(7,"li",3),h._uU(8),h.ALo(9,"translate"),h.qZA(),h.TgZ(10,"li",4),h._uU(11),h.ALo(12,"translate"),h.TgZ(13,"ul",5),h.TgZ(14,"li",6),h._uU(15),h.ALo(16,"translate"),h.qZA(),h.TgZ(17,"li",7),h._uU(18),h.ALo(19,"translate"),h.qZA(),h.TgZ(20,"li",8),h._uU(21),h.ALo(22,"translate"),h.qZA(),h.TgZ(23,"li",9),h._uU(24),h.ALo(25,"translate"),h.qZA(),h.TgZ(26,"li",10),h._uU(27),h.ALo(28,"translate"),h.qZA(),h.TgZ(29,"li",11),h._uU(30),h.ALo(31,"translate"),h.qZA(),h.TgZ(32,"li",12),h._uU(33),h.ALo(34,"translate"),h.qZA(),h.qZA(),h._uU(35),h.ALo(36,"translate"),h.qZA(),h.TgZ(37,"li",13),h._uU(38),h.ALo(39,"translate"),h.qZA(),h.qZA(),h.TgZ(40,"span",14),h._uU(41),h.ALo(42,"translate"),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.Q6J("title",h.lcZ(1,14,"admin.bulk_import.instruction.title")),h.xp6(5),h.hij(" ",h.lcZ(6,16,"admin.bulk_import.instruction.first_point")," "),h.xp6(3),h.hij(" ",h.lcZ(9,18,"admin.bulk_import.instruction.second_point")," "),h.xp6(3),h.hij(" ",h.lcZ(12,20,"admin.bulk_import.instruction.third_point.title")," "),h.xp6(4),h.hij(" ",h.lcZ(16,22,"admin.bulk_import.instruction.third_point.extension")," "),h.xp6(3),h.hij(" ",h.lcZ(19,24,"admin.bulk_import.instruction.third_point.username")," "),h.xp6(3),h.hij(" ",h.lcZ(22,26,"admin.bulk_import.instruction.third_point.lastname")," "),h.xp6(3),h.hij(" ",h.lcZ(25,28,"admin.bulk_import.instruction.third_point.firstname")," "),h.xp6(3),h.hij(" ",h.lcZ(28,30,"admin.bulk_import.instruction.third_point.language")," "),h.xp6(3),h.hij(" ",h.lcZ(31,32,"admin.bulk_import.instruction.third_point.app")," "),h.xp6(3),h.hij(" ",h.lcZ(34,34,"admin.bulk_import.instruction.third_point.admin")," "),h.xp6(2),h.hij(" ",h.lcZ(36,36,"admin.bulk_import.instruction.third_point.info")," "),h.xp6(3),h.hij(" ",h.lcZ(39,38,"admin.bulk_import.instruction.fourth_point")," "),h.xp6(3),h.hij(" ",h.lcZ(42,40,"admin.bulk_import.instruction.fifth_point")," "))},directives:[D.O],pipes:[q.X$],styles:[".export-import-help__modal[_ngcontent-%COMP%]{padding:.5rem}"]}),e}(),po=o(208),fo=function(e){return{"file-over":e}},ho=function(){var e=function(){function e(t){p(this,e),this.exportImportService=t,this.hasBaseDropZoneOver=!1}return m(e,[{key:"handleFileInput",value:function(e){var t=this,n=new FileReader;n.readAsText(e.target.files[0]),n.onloadend=function(){t.exportImportService.uploadUsersViaFile(n.result.toString()),e.target.value=""}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(zt))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-button-import"]],decls:7,vars:8,consts:[[1,"app-button-import__container"],["id","file","multiple","","type","file","data-e2e","admin-wizards-export-import-page__csv-import-button",1,"app-button-import__input",3,"change"],["for","file",1,"app-button-import__label",3,"ngClass"],["icon","upload_file","size","medium",1,"app-button-import__app-svg-icon"],[1,"app-button-import__text"]],template:function(e,t){1&e&&(h.TgZ(0,"div",0),h.TgZ(1,"input",1),h.NdJ("change",function(e){return t.handleFileInput(e)}),h.qZA(),h.TgZ(2,"label",2),h._UZ(3,"app-svg-icon",3),h.TgZ(4,"span",4),h._uU(5),h.ALo(6,"translate"),h.qZA(),h.qZA(),h.qZA()),2&e&&(h.xp6(2),h.Q6J("ngClass",h.VKq(6,fo,t.hasBaseDropZoneOver)),h.xp6(1),h.ekj("file-over",t.hasBaseDropZoneOver),h.xp6(2),h.hij(" ",h.lcZ(6,4,"admin.bulk_import.buttons.import")," "))},directives:[f.mk,Ke.u],pipes:[q.X$],styles:["[_nghost-%COMP%]{padding:1rem}.app-button-import__container[_ngcontent-%COMP%]{cursor:pointer;display:flex;flex-direction:column;height:5rem;overflow:hidden;padding:1rem;position:relative}.app-button-import__label[_ngcontent-%COMP%]{display:flex;flex-direction:row}.app-button-import__text[_ngcontent-%COMP%]{padding-top:1.6rem;width:100%}.app-button-import__input[_ngcontent-%COMP%]{cursor:pointer;height:100%;opacity:0;position:absolute;right:0;top:0;z-index:99}.app-button-import__app-svg-icon[_ngcontent-%COMP%]{padding:.8rem 1rem 0 1.8rem}"]}),e}();function go(e,t){if(1&e&&(h.TgZ(0,"span"),h._uU(1),h.qZA()),2&e){var n=t.$implicit;h.xp6(1),h.hij(" ",n," ")}}function bo(e,t){if(1&e&&(h.TgZ(0,"div",9),h.TgZ(1,"span",14),h._uU(2),h.qZA(),h.TgZ(3,"div",15),h.YNc(4,go,2,1,"span",16),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",null==n?null:n.username," "),h.xp6(2),h.Q6J("ngForOf",n.report)}}function vo(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div",7),h.TgZ(1,"div",8),h.TgZ(2,"div",9),h.TgZ(3,"span",10),h._uU(4),h.ALo(5,"translate"),h.qZA(),h.TgZ(6,"span",10),h._uU(7),h.ALo(8,"translate"),h.qZA(),h.qZA(),h.YNc(9,bo,5,2,"div",11),h.qZA(),h.TgZ(10,"div",12),h.TgZ(11,"app-button",13),h.NdJ("appButtonClick",function(){h.CHM(n);var e=h.oxw();return e.download(e.importUserErrorSaveAs)}),h.qZA(),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(4),h.hij(" ",h.lcZ(5,3,"username")," "),h.xp6(3),h.hij(" ",h.lcZ(8,5,"report")," "),h.xp6(2),h.Q6J("ngForOf",i.importErrorResponse)}}function _o(e,t){if(1&e&&(h.TgZ(0,"div",9),h.TgZ(1,"span"),h._uU(2),h.qZA(),h.TgZ(3,"span"),h._uU(4),h.qZA(),h.TgZ(5,"span"),h._uU(6),h.qZA(),h.TgZ(7,"span"),h._uU(8),h.qZA(),h.qZA()),2&e){var n=t.$implicit;h.xp6(2),h.hij(" ",null==n?null:n.extension," "),h.xp6(2),h.hij(" ",null==n?null:n.username," "),h.xp6(2),h.hij(" ",null==n?null:n.lastname," "),h.xp6(2),h.hij(" ",null==n?null:n.language," ")}}function ko(e,t){if(1&e){var n=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"app-button",17),h.NdJ("appButtonClick",function(){h.CHM(n);var e=h.oxw();return e.download(e.exportUserSaveAs)}),h.qZA(),h.TgZ(2,"div",9),h.TgZ(3,"span"),h._uU(4),h.qZA(),h.TgZ(5,"span"),h._uU(6),h.qZA(),h.TgZ(7,"span"),h._uU(8),h.qZA(),h.TgZ(9,"span"),h._uU(10),h.qZA(),h.TgZ(11,"span"),h._uU(12),h.qZA(),h.TgZ(13,"span"),h._uU(14),h.qZA(),h.TgZ(15,"span"),h._uU(16),h.qZA(),h.qZA(),h.TgZ(17,"div",8),h.YNc(18,_o,9,4,"div",11),h.qZA(),h.qZA()}if(2&e){var i=h.oxw();h.xp6(4),h.hij(" ","extension"," "),h.xp6(2),h.hij(" ","username"," "),h.xp6(2),h.hij(" ","lastname"," "),h.xp6(2),h.hij(" ","firstname"," "),h.xp6(2),h.hij(" ","language"," "),h.xp6(2),h.hij(" ","app"," "),h.xp6(2),h.hij(" ","admin"," "),h.xp6(2),h.Q6J("ngForOf",i.unassignedUser)}}var xo=U.Bz.forChild([{path:"",component:It,canActivateChild:[lo.O],children:[{path:"",redirectTo:"user",pathMatch:"full"},{path:"user",component:tn,children:[{path:"",component:Ti,pathMatch:"full",data:{title:"title.user"}},{path:"user-data",canActivate:[Vt],component:co,data:{title:"title.user_data"}},{path:":id",canActivate:[Vt],component:co,data:{title:"title.user_data"}},{path:":id/user-data",canActivate:[Vt],canDeactivate:[Ht],component:co,data:{title:"title.user_data"}},{path:":id/phonenumber",canActivate:[Vt,Gt],component:Wa,data:{title:"title.user_phone_number"}},{path:":id/call-forwarding",canActivate:[Vt],component:Wt},{path:":id/permissions",canActivate:[Vt,Gt],component:Fa,data:{title:"title.user_permissions"}}]},{path:"wizards",component:tn,canActivate:[Gt],children:[{path:"",redirectTo:"migration-wizard",pathMatch:"full"},{path:"migration-wizard",component:ia,data:{title:"title.migration_wizard"}},{path:"export-import",component:function(){var e=function(){function e(t,n,i,a){var o=this;p(this,e),this.exportImportService=t,this.snackBarService=n,this.translateService=i,this.dialog=a,this.ngUnsubscribe=new k.xQ,this.unassignedUser=[],this.exportImportService.importError$.pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(e){o.setImportErrorResponse(e)})}return m(e,[{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}},{key:"download",value:function(e){var t=new Blob([e],{type:"text/plain;charset=utf-8"});(0,uo.saveAs)(t,Date.now()+".csv")}},{key:"exportFile",value:function(){var e=this;this.exportImportService.exportFile().pipe((0,w.R)(this.ngUnsubscribe)).subscribe(function(t){0!==t.length?(e.importErrorResponse=[],e.exportUserSaveAs="",e.unassignedUser=t,e.exportUserSaveAs=e.exportUserSaveAs.concat("extension,username,lastname,firstname,language,app,admin"),e.exportUserSaveAs=e.exportUserSaveAs.concat("\r\n"),e.unassignedUser.forEach(function(t,n){e.exportUserSaveAs=e.exportUserSaveAs.concat("".concat(t.extension.trim(),",,,,,").concat(t.app,",").concat(t.admin)),n<e.unassignedUser.length-1?e.exportUserSaveAs=e.exportUserSaveAs.concat("\r\n"):e.download(e.exportUserSaveAs)})):e.snackBarService.openInfo("admin.bulk_import.no_unassigned_user")})}},{key:"openDetails",value:function(){this.dialog.open(mo,{autoFocus:!1})}},{key:"setImportErrorResponse",value:function(e){this.importUserErrorSaveAs="",this.unassignedUser=[],this.setSnackbar(e),this.saveAs()}},{key:"saveAs",value:function(){var e=this;this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat("userName                        Report"),this.importUserErrorSaveAs=this.importUserErrorSaveAs.concat("\r\n"),this.importErrorResponse.forEach(function(t){var n;e.importUserErrorSaveAs=e.importUserErrorSaveAs.concat("".concat(null===(n=null==t?void 0:t.username)||void 0===n?void 0:n.trim(),"   ").concat(t.report)),e.importUserErrorSaveAs=e.importUserErrorSaveAs.concat("\r\n")})}},{key:"setSnackbar",value:function(e){if(this.importErrorResponse=e,e.length&&e[0].imported)return this.snackBarService.openInfo("".concat(e[0].imported).concat(this.translateService.instant("admin.navigation.wizards.import.success"))),void(this.importErrorResponse=[]);e.length>0&&this.snackBarService.openErrorInfo("admin.navigation.wizards.import.invalid")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Y36(zt),h.Y36(Et.c),h.Y36(q.sK),h.Y36(d.uw))},e.\u0275cmp=h.Xpm({type:e,selectors:[["export-import"]],decls:8,vars:2,consts:[["translationKey","title.import"],[1,"export-import__items"],["class","export-import__container",4,"ngIf"],[4,"ngIf"],[1,"export-import__buttons"],["icon","info","text","admin.bulk_import.buttons.instruction","data-e2e","admin-wizards-export-import-page__information_button",3,"click"],["icon","download","text","admin.bulk_import.buttons.export","data-e2e","admin-wizards-export-import-page__csv-export-button",3,"click"],[1,"export-import__container"],[1,"export-import__border"],[1,"export-import__item"],[1,"export-import__text"],["class","export-import__item",4,"ngFor","ngForOf"],[1,"export-import__save"],["color","primary","buttonTextTranslationKey","Save As","type","basic-button","data-e2e","admin-wizards-export-import-page__report-save-button",3,"appButtonClick"],["data-e2e","admin-wizards-export-import-page__report-username",1,"export-import__username"],["data-e2e","admin-wizards-export-import-page__report-content",1,"export-import__report"],[4,"ngFor","ngForOf"],["color","primary","buttonTextTranslationKey","save","type","basic-button",3,"appButtonClick"]],template:function(e,t){1&e&&(h._UZ(0,"headline",0),h.TgZ(1,"div",1),h.YNc(2,vo,12,7,"div",2),h.YNc(3,ko,19,8,"div",3),h.qZA(),h.TgZ(4,"div",4),h.TgZ(5,"app-rectangle-button",5),h.NdJ("click",function(){return t.openDetails()}),h.qZA(),h.TgZ(6,"app-rectangle-button",6),h.NdJ("click",function(){return t.exportFile()}),h.qZA(),h._UZ(7,"app-button-import"),h.qZA()),2&e&&(h.xp6(2),h.Q6J("ngIf",(null==t.importErrorResponse?null:t.importErrorResponse.length)>0),h.xp6(1),h.Q6J("ngIf",!1))},directives:[wn.a,f.O5,po.H,ho,f.sg,Ii.V],pipes:[q.X$],styles:[".hide-module[_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(450deg)}}@-webkit-keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}@keyframes line{0%{stroke-dasharray:2,85.964;transform:rotate(0)}50%{stroke-dasharray:65.973,21.9911;stroke-dashoffset:0}to{stroke-dasharray:2,85.964;stroke-dashoffset:-65.973;transform:rotate(90deg)}}*[_ngcontent-%COMP%]{box-sizing:border-box}.export-import__items[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:3rem;width:calc(100% - 6rem)}.export-import__border[_ngcontent-%COMP%]{border:.1rem solid #e5e5e5;height:60rem;overflow:scroll;width:60rem}.export-import__item[_ngcontent-%COMP%]{border-bottom:.1rem solid #e5e5e5;display:flex;flex-wrap:nowrap}.export-import__text[_ngcontent-%COMP%]{padding:1rem;text-align:center}.export-import__buttons[_ngcontent-%COMP%], .export-import__report[_ngcontent-%COMP%], .export-import__container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.export-import__report[_ngcontent-%COMP%]{flex-grow:5}.export-import__username[_ngcontent-%COMP%]{flex-grow:1}.export-import__save[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),e}(),data:{title:"title.import"}}]},{path:"license",component:Hi,canActivate:[Gt],data:{title:"title.license"}},{path:"nconnect-voice",loadChildren:function(){return o.e(48501).then(o.bind(o,48501)).then(function(e){return e.NconnectVoiceModule})}},{path:"**",redirectTo:"user",pathMatch:"full"}]},{path:"**",pathMatch:"full",redirectTo:""}]),yo=o(48637),Co=o(76916),To=function(){var e=m(function e(){p(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e,bootstrap:[It]}),e.\u0275inj=h.cJS({providers:[M.B,$.l,Lt,Ut,Dt.i,Q,{provide:Bt.s,useClass:Bt.s,deps:[W.K,qt.L,Rt.v]},Ht,zt,Gt,Ft,Jt,Vt,yo.A2,Co.d],imports:[[xo,l.X,d.Is,S.l,P.m,A.JX,T]]}),e}()}}])}();